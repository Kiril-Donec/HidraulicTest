import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,e)=>function(){return e||(0,t[__getOwnPropNames(t)[0]])((e={exports:{}}).exports,e),e.exports},__copyProps=(e,s,i,r)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let t of __getOwnPropNames(s))__hasOwnProp.call(e,t)||t===i||__defProp(e,t,{get:()=>s[t],enumerable:!(r=__getOwnPropDesc(s,t))||r.enumerable});return e},__toESM=(t,e,s)=>(s=null!=t?__create(__getProtoOf(t)):{},__copyProps(!e&&t&&t.__esModule?s:__defProp(s,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let setMatrixArrayType2=function(t){ARRAY_TYPE=t},toRadian2=function(t){return t*degree},equals$92=function(t,e){return Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$82=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone$82=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy$82=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity$52=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues$82=function(t,e,s,i){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=s,r[3]=i,r},set$82=function(t,e,s,i,r){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t},transpose$22=function(t,e){var s;return t===e?(s=e[1],t[1]=e[2],t[2]=s):(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3]),t},invert$52=function(t,e){var s=e[0],i=e[1],r=e[2],e=e[3],n=s*e-r*i;return n?(t[0]=e*(n=1/n),t[1]=-i*n,t[2]=-r*n,t[3]=s*n,t):null},adjoint$22=function(t,e){var s=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=s,t},determinant$32=function(t){return t[0]*t[3]-t[2]*t[1]},multiply$82=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=s[0],o=s[1],a=s[2],s=s[3];return t[0]=i*h+n*o,t[1]=r*h+e*o,t[2]=i*a+n*s,t[3]=r*a+e*s,t},rotate$42=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=Math.sin(s),s=Math.cos(s);return t[0]=i*s+n*h,t[1]=r*s+e*h,t[2]=i*-h+n*s,t[3]=r*-h+e*s,t},scale$82=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=s[0],s=s[1];return t[0]=i*h,t[1]=r*h,t[2]=n*s,t[3]=e*s,t},fromRotation$42=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=s,t[2]=-s,t[3]=e,t},fromScaling$32=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},str$82=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob$32=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU2=function(t,e,s,i){return t[2]=i[2]/i[0],s[0]=i[0],s[1]=i[1],s[3]=i[3]-t[2]*s[1],[t,e,s]},add$82=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t},subtract$62=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t},exactEquals$82=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals$82=function(t,e){var s=t[0],i=t[1],r=t[2],t=t[3],n=e[0],h=e[1],o=e[2],e=e[3];return Math.abs(s-n)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-o)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},multiplyScalar$32=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t},multiplyScalarAndAdd$32=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t},create$72=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone$72=function(t){var e=new ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy$72=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity$42=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues$72=function(t,e,s,i,r,n){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=e,h[2]=s,h[3]=i,h[4]=r,h[5]=n,h},set$72=function(t,e,s,i,r,n,h){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t},invert$42=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],e=e[5],o=s*n-i*r;return o?(t[0]=n*(o=1/o),t[1]=-i*o,t[2]=-r*o,t[3]=s*o,t[4]=(r*e-n*h)*o,t[5]=(i*h-s*e)*o,t):null},determinant$22=function(t){return t[0]*t[3]-t[1]*t[2]},multiply$72=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],e=e[5],a=s[0],l=s[1],c=s[2],u=s[3],f=s[4],s=s[5];return t[0]=i*a+n*l,t[1]=r*a+h*l,t[2]=i*c+n*u,t[3]=r*c+h*u,t[4]=i*f+n*s+o,t[5]=r*f+h*s+e,t},rotate$32=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],e=e[5],a=Math.sin(s),s=Math.cos(s);return t[0]=i*s+n*a,t[1]=r*s+h*a,t[2]=i*-a+n*s,t[3]=r*-a+h*s,t[4]=o,t[5]=e,t},scale$72=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],e=e[5],a=s[0],s=s[1];return t[0]=i*a,t[1]=r*a,t[2]=n*s,t[3]=h*s,t[4]=o,t[5]=e,t},translate$32=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],e=e[5],a=s[0],s=s[1];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=i*a+n*s+o,t[5]=r*a+h*s+e,t},fromRotation$32=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=s,t[2]=-s,t[3]=e,t[4]=0,t[5]=0,t},fromScaling$22=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},fromTranslation$32=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str$72=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob$22=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add$72=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t},subtract$52=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t},multiplyScalar$22=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t},multiplyScalarAndAdd$22=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t[4]=e[4]+s[4]*i,t[5]=e[5]+s[5]*i,t},exactEquals$72=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals$72=function(t,e){var s=t[0],i=t[1],r=t[2],n=t[3],h=t[4],t=t[5],o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],e=e[5];return Math.abs(s-o)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(h-u)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$62=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},fromMat4$12=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone$62=function(t){var e=new ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy$62=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues$62=function(t,e,s,i,r,n,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=s,l[3]=i,l[4]=r,l[5]=n,l[6]=h,l[7]=o,l[8]=a,l},set$62=function(t,e,s,i,r,n,h,o,a,l){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},identity$32=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose$12=function(t,e){var s,i,r;return t===e?(s=e[1],i=e[2],r=e[5],t[1]=e[3],t[2]=e[6],t[3]=s,t[5]=e[7],t[6]=i,t[7]=r):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]),t},invert$32=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],e=e[8],c=e*h-o*l,u=-e*n+o*a,f=l*n-h*a,d=s*c+i*u+r*f;return d?(t[0]=c*(d=1/d),t[1]=(-e*i+r*l)*d,t[2]=(o*i-r*h)*d,t[3]=u*d,t[4]=(e*s-r*a)*d,t[5]=(-o*s+r*n)*d,t[6]=f*d,t[7]=(-l*s+i*a)*d,t[8]=(h*s-i*n)*d,t):null},adjoint$12=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],e=e[8];return t[0]=h*e-o*l,t[1]=r*l-i*e,t[2]=i*o-r*h,t[3]=o*a-n*e,t[4]=s*e-r*a,t[5]=r*n-s*o,t[6]=n*l-h*a,t[7]=i*a-s*l,t[8]=s*h-i*n,t},determinant$12=function(t){var e=t[0],s=t[3],i=t[4],r=t[5],n=t[6],h=t[7],o=t[8];return e*(o*i-r*h)+t[1]*(-o*s+r*n)+t[2]*(h*s-i*n)},multiply$62=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],e=e[8],u=s[0],f=s[1],d=s[2],p=s[3],C=s[4],m=s[5],S=s[6],g=s[7],s=s[8];return t[0]=u*i+f*h+d*l,t[1]=u*r+f*o+d*c,t[2]=u*n+f*a+d*e,t[3]=p*i+C*h+m*l,t[4]=p*r+C*o+m*c,t[5]=p*n+C*a+m*e,t[6]=S*i+g*h+s*l,t[7]=S*r+g*o+s*c,t[8]=S*n+g*a+s*e,t},translate$22=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],e=e[8],u=s[0],s=s[1];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=u*i+s*h+l,t[7]=u*r+s*o+c,t[8]=u*n+s*a+e,t},rotate$22=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],e=e[8],u=Math.sin(s),s=Math.cos(s);return t[0]=s*i+u*h,t[1]=s*r+u*o,t[2]=s*n+u*a,t[3]=s*h-u*i,t[4]=s*o-u*r,t[5]=s*a-u*n,t[6]=l,t[7]=c,t[8]=e,t},scale$62=function(t,e,s){var i=s[0],s=s[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation$22=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation$22=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=s,t[2]=0,t[3]=-s,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling$12=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d2=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat$12=function(t,e){var s=e[0],i=e[1],r=e[2],e=e[3],n=s+s,h=i+i,o=r+r,s=s*n,a=i*n,i=i*h,l=r*n,c=r*h,r=r*o,n=e*n,h=e*h,e=e*o;return t[0]=1-i-r,t[3]=a-e,t[6]=l+h,t[1]=a+e,t[4]=1-s-r,t[7]=c-n,t[2]=l-h,t[5]=c+n,t[8]=1-s-i,t},normalFromMat42=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],p=e[12],C=e[13],m=e[14],e=e[15],S=s*o-i*h,g=s*a-r*h,_=s*l-n*h,T=i*a-r*o,y=i*l-n*o,E=r*l-n*a,I=c*C-u*p,A=c*m-f*p,c=c*e-d*p,M=u*m-f*C,u=u*e-d*C,f=f*e-d*m,d=S*f-g*u+_*M+T*c-y*A+E*I;return d?(t[0]=(o*f-a*u+l*M)*(d=1/d),t[1]=(a*c-h*f-l*A)*d,t[2]=(h*u-o*c+l*I)*d,t[3]=(r*u-i*f-n*M)*d,t[4]=(s*f-r*c+n*A)*d,t[5]=(i*c-s*u-n*I)*d,t[6]=(C*E-m*y+e*T)*d,t[7]=(m*_-p*E-e*g)*d,t[8]=(p*y-C*_+e*S)*d,t):null},projection2=function(t,e,s){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/s,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str$62=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob$12=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add$62=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t[8]=e[8]+s[8],t},subtract$42=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t[6]=e[6]-s[6],t[7]=e[7]-s[7],t[8]=e[8]-s[8],t},multiplyScalar$12=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*s,t},multiplyScalarAndAdd$12=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t[4]=e[4]+s[4]*i,t[5]=e[5]+s[5]*i,t[6]=e[6]+s[6]*i,t[7]=e[7]+s[7]*i,t[8]=e[8]+s[8]*i,t},exactEquals$62=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals$62=function(t,e){var s=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],t=t[8],c=e[0],u=e[1],f=e[2],d=e[3],p=e[4],C=e[5],m=e[6],S=e[7],e=e[8];return Math.abs(s-c)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-f)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-C)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(a-m)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(l-S)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$52=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone$52=function(t){var e=new ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy$52=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues$52=function(t,e,s,i,r,n,h,o,a,l,c,u,f,d,p,C){var m=new ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=s,m[3]=i,m[4]=r,m[5]=n,m[6]=h,m[7]=o,m[8]=a,m[9]=l,m[10]=c,m[11]=u,m[12]=f,m[13]=d,m[14]=p,m[15]=C,m},set$52=function(t,e,s,i,r,n,h,o,a,l,c,u,f,d,p,C,m){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=c,t[10]=u,t[11]=f,t[12]=d,t[13]=p,t[14]=C,t[15]=m,t},identity$22=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose2=function(t,e){var s,i,r,n,h,o;return t===e?(s=e[1],i=e[2],r=e[3],n=e[6],h=e[7],o=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=s,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=n,t[11]=e[14],t[12]=r,t[13]=h,t[14]=o):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]),t},invert$22=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],p=e[12],C=e[13],m=e[14],e=e[15],S=s*o-i*h,g=s*a-r*h,_=s*l-n*h,T=i*a-r*o,y=i*l-n*o,E=r*l-n*a,I=c*C-u*p,A=c*m-f*p,M=c*e-d*p,R=u*m-f*C,w=u*e-d*C,b=f*e-d*m,O=S*b-g*w+_*R+T*M-y*A+E*I;return O?(t[0]=(o*b-a*w+l*R)*(O=1/O),t[1]=(r*w-i*b-n*R)*O,t[2]=(C*E-m*y+e*T)*O,t[3]=(f*y-u*E-d*T)*O,t[4]=(a*M-h*b-l*A)*O,t[5]=(s*b-r*M+n*A)*O,t[6]=(m*_-p*E-e*g)*O,t[7]=(c*E-f*_+d*g)*O,t[8]=(h*w-o*M+l*I)*O,t[9]=(i*M-s*w-n*I)*O,t[10]=(p*y-C*_+e*S)*O,t[11]=(u*_-c*y-d*S)*O,t[12]=(o*A-h*R-a*I)*O,t[13]=(s*R-i*A+r*I)*O,t[14]=(C*g-p*T-m*S)*O,t[15]=(c*T-u*g+f*S)*O,t):null},adjoint2=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],p=e[12],C=e[13],m=e[14],e=e[15],S=s*o-i*h,g=s*a-r*h,_=s*l-n*h,T=i*a-r*o,y=i*l-n*o,E=r*l-n*a,I=c*C-u*p,A=c*m-f*p,M=c*e-d*p,R=u*m-f*C,w=u*e-d*C,b=f*e-d*m;return t[0]=o*b-a*w+l*R,t[1]=r*w-i*b-n*R,t[2]=C*E-m*y+e*T,t[3]=f*y-u*E-d*T,t[4]=a*M-h*b-l*A,t[5]=s*b-r*M+n*A,t[6]=m*_-p*E-e*g,t[7]=c*E-f*_+d*g,t[8]=h*w-o*M+l*I,t[9]=i*M-s*w-n*I,t[10]=p*y-C*_+e*S,t[11]=u*_-c*y-d*S,t[12]=o*A-h*R-a*I,t[13]=s*R-i*A+r*I,t[14]=C*g-p*T-m*S,t[15]=c*T-u*g+f*S,t},determinant2=function(t){var e=t[0],s=t[1],i=t[2],r=t[4],n=t[5],h=t[6],o=t[8],a=t[9],l=t[10],c=t[12],u=t[13],f=t[14],d=e*n-s*r,p=e*h-i*r,C=s*h-i*n,m=o*u-a*c,S=o*f-l*c,g=a*f-l*u;return t[7]*(e*g-s*S+i*m)-t[3]*(r*g-n*S+h*m)+t[15]*(o*C-a*p+l*d)-t[11]*(c*C-u*p+f*d)},multiply$52=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],C=e[12],m=e[13],S=e[14],e=e[15],g=s[0],_=s[1],T=s[2],y=s[3];return t[0]=g*i+_*o+T*u+y*C,t[1]=g*r+_*a+T*f+y*m,t[2]=g*n+_*l+T*d+y*S,t[3]=g*h+_*c+T*p+y*e,t[4]=(g=s[4])*i+(_=s[5])*o+(T=s[6])*u+(y=s[7])*C,t[5]=g*r+_*a+T*f+y*m,t[6]=g*n+_*l+T*d+y*S,t[7]=g*h+_*c+T*p+y*e,t[8]=(g=s[8])*i+(_=s[9])*o+(T=s[10])*u+(y=s[11])*C,t[9]=g*r+_*a+T*f+y*m,t[10]=g*n+_*l+T*d+y*S,t[11]=g*h+_*c+T*p+y*e,t[12]=(g=s[12])*i+(_=s[13])*o+(T=s[14])*u+(y=s[15])*C,t[13]=g*r+_*a+T*f+y*m,t[14]=g*n+_*l+T*d+y*S,t[15]=g*h+_*c+T*p+y*e,t},translate$12=function(t,e,s){var i,r,n,h,o,a,l,c,u,f,d,p,C=s[0],m=s[1],s=s[2];return e===t?(t[12]=e[0]*C+e[4]*m+e[8]*s+e[12],t[13]=e[1]*C+e[5]*m+e[9]*s+e[13],t[14]=e[2]*C+e[6]*m+e[10]*s+e[14],t[15]=e[3]*C+e[7]*m+e[11]*s+e[15]):(i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=c,t[8]=u,t[9]=f,t[10]=d,t[11]=p,t[12]=i*C+o*m+u*s+e[12],t[13]=r*C+a*m+f*s+e[13],t[14]=n*C+l*m+d*s+e[14],t[15]=h*C+c*m+p*s+e[15]),t},scale$52=function(t,e,s){var i=s[0],r=s[1],s=s[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},rotate$12=function(t,e,s,i){var r,n,h,o,a,l,c,u,f,d,p,C,m,S,g,_,T,y,E,I,A=i[0],M=i[1],i=i[2],R=Math.hypot(A,M,i);return R<EPSILON?null:(A*=R=1/R,M*=R,i*=R,R=Math.sin(s),s=Math.cos(s),n=e[0],h=e[1],o=e[2],a=e[3],c=e[5],u=e[6],f=e[7],p=e[9],C=e[10],m=e[11],g=A*M*(r=1-s)-i*R,_=M*M*r+s,T=i*M*r+A*R,y=A*i*r+M*R,E=M*i*r-A*R,I=i*i*r+s,t[0]=n*(s=A*A*r+s)+(l=e[4])*(S=M*A*r+i*R)+(d=e[8])*(i=i*A*r-M*R),t[1]=h*s+c*S+p*i,t[2]=o*s+u*S+C*i,t[3]=a*s+f*S+m*i,t[4]=n*g+l*_+d*T,t[5]=h*g+c*_+p*T,t[6]=o*g+u*_+C*T,t[7]=a*g+f*_+m*T,t[8]=n*y+l*E+d*I,t[9]=h*y+c*E+p*I,t[10]=o*y+u*E+C*I,t[11]=a*y+f*E+m*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX$32=function(t,e,s){var i=Math.sin(s),s=Math.cos(s),r=e[4],n=e[5],h=e[6],o=e[7],a=e[8],l=e[9],c=e[10],u=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*s+a*i,t[5]=n*s+l*i,t[6]=h*s+c*i,t[7]=o*s+u*i,t[8]=a*s-r*i,t[9]=l*s-n*i,t[10]=c*s-h*i,t[11]=u*s-o*i,t},rotateY$32=function(t,e,s){var i=Math.sin(s),s=Math.cos(s),r=e[0],n=e[1],h=e[2],o=e[3],a=e[8],l=e[9],c=e[10],u=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*s-a*i,t[1]=n*s-l*i,t[2]=h*s-c*i,t[3]=o*s-u*i,t[8]=r*i+a*s,t[9]=n*i+l*s,t[10]=h*i+c*s,t[11]=o*i+u*s,t},rotateZ$32=function(t,e,s){var i=Math.sin(s),s=Math.cos(s),r=e[0],n=e[1],h=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*s+a*i,t[1]=n*s+l*i,t[2]=h*s+c*i,t[3]=o*s+u*i,t[4]=a*s-r*i,t[5]=l*s-n*i,t[6]=c*s-h*i,t[7]=u*s-o*i,t},fromTranslation$12=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromScaling2=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation$12=function(t,e,s){var i,r=s[0],n=s[1],s=s[2],h=Math.hypot(r,n,s);return h<EPSILON?null:(r*=h=1/h,n*=h,s*=h,h=Math.sin(e),e=Math.cos(e),t[0]=r*r*(i=1-e)+e,t[1]=n*r*i+s*h,t[2]=s*r*i-n*h,t[3]=0,t[4]=r*n*i-s*h,t[5]=n*n*i+e,t[6]=s*n*i+r*h,t[7]=0,t[8]=r*s*i+n*h,t[9]=n*s*i-r*h,t[10]=s*s*i+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation2=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=s,t[7]=0,t[8]=0,t[9]=-s,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation2=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-s,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=s,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation2=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=s,t[2]=0,t[3]=0,t[4]=-s,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation$12=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=i+i,o=r+r,a=n+n,l=i*h,c=i*o,i=i*a,u=r*o,r=r*a,n=n*a,h=e*h,o=e*o,e=e*a;return t[0]=1-(u+n),t[1]=c+e,t[2]=i-o,t[3]=0,t[4]=c-e,t[5]=1-(l+n),t[6]=r+h,t[7]=0,t[8]=i+o,t[9]=r-h,t[10]=1-(l+u),t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},fromQuat22=function(t,e){var s=new ARRAY_TYPE(3),i=-e[0],r=-e[1],n=-e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=i*i+r*r+n*n+h*h;return 0<u?(s[0]=2*(o*h+c*i+a*n-l*r)/u,s[1]=2*(a*h+c*r+l*i-o*n)/u,s[2]=2*(l*h+c*n+o*r-a*i)/u):(s[0]=2*(o*h+c*i+a*n-l*r),s[1]=2*(a*h+c*r+l*i-o*n),s[2]=2*(l*h+c*n+o*r-a*i)),fromRotationTranslation$12(t,e,s),t},getTranslation$12=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling2=function(t,e){var s=e[0],i=e[4],r=e[5],n=e[6],h=e[8],o=e[9],a=e[10];return t[0]=Math.hypot(s,e[1],e[2]),t[1]=Math.hypot(i,r,n),t[2]=Math.hypot(h,o,a),t},getRotation2=function(t,e){var s=new ARRAY_TYPE(3),i=(getScaling2(s,e),1/s[0]),r=1/s[1],s=1/s[2],n=e[0]*i,h=e[1]*r,o=e[2]*s,a=e[4]*i,l=e[5]*r,c=e[6]*s,i=e[8]*i,r=e[9]*r,e=e[10]*s,s=n+l+e,u=0;return 0<s?(u=2*Math.sqrt(1+s),t[3]=.25*u,t[0]=(c-r)/u,t[1]=(i-o)/u,t[2]=(h-a)/u):l<n&&e<n?(u=2*Math.sqrt(1+n-l-e),t[3]=(c-r)/u,t[0]=.25*u,t[1]=(h+a)/u,t[2]=(i+o)/u):e<l?(u=2*Math.sqrt(1+l-n-e),t[3]=(i-o)/u,t[0]=(h+a)/u,t[1]=.25*u,t[2]=(c+r)/u):(u=2*Math.sqrt(1+e-n-l),t[3]=(h-a)/u,t[0]=(i+o)/u,t[1]=(c+r)/u,t[2]=.25*u),t},decompose2=function(t,e,s,i){e[0]=i[12],e[1]=i[13],e[2]=i[14];var e=i[0],r=i[1],n=i[2],h=i[4],o=i[5],a=i[6],l=i[8],c=i[9],i=i[10],u=(s[0]=Math.hypot(e,r,n),s[1]=Math.hypot(h,o,a),s[2]=Math.hypot(l,c,i),1/s[0]),f=1/s[1],s=1/s[2],e=e*u,r=r*f,n=n*s,h=h*u,o=o*f,a=a*s,l=l*u,u=c*f,c=i*s,f=e+o+c,i=0;return 0<f?(i=2*Math.sqrt(1+f),t[3]=.25*i,t[0]=(a-u)/i,t[1]=(l-n)/i,t[2]=(r-h)/i):o<e&&c<e?(i=2*Math.sqrt(1+e-o-c),t[3]=(a-u)/i,t[0]=.25*i,t[1]=(r+h)/i,t[2]=(l+n)/i):c<o?(i=2*Math.sqrt(1+o-e-c),t[3]=(l-n)/i,t[0]=(r+h)/i,t[1]=.25*i,t[2]=(a+u)/i):(i=2*Math.sqrt(1+c-e-o),t[3]=(r-h)/i,t[0]=(l+n)/i,t[1]=(a+u)/i,t[2]=.25*i),t},fromRotationTranslationScale2=function(t,e,s,i){var r=e[0],n=e[1],h=e[2],e=e[3],o=r+r,a=n+n,l=h+h,c=r*o,u=r*a,r=r*l,f=n*a,n=n*l,h=h*l,o=e*o,a=e*a,e=e*l,l=i[0],d=i[1],i=i[2];return t[0]=(1-(f+h))*l,t[1]=(u+e)*l,t[2]=(r-a)*l,t[3]=0,t[4]=(u-e)*d,t[5]=(1-(c+h))*d,t[6]=(n+o)*d,t[7]=0,t[8]=(r+a)*i,t[9]=(n-o)*i,t[10]=(1-(c+f))*i,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},fromRotationTranslationScaleOrigin2=function(t,e,s,i,r){var n=e[0],h=e[1],o=e[2],e=e[3],a=n+n,l=h+h,c=o+o,u=n*a,f=n*l,n=n*c,d=h*l,h=h*c,o=o*c,a=e*a,l=e*l,e=e*c,c=i[0],p=i[1],i=i[2],C=r[0],m=r[1],r=r[2],S=(1-(d+o))*c,g=(f+e)*c,c=(n-l)*c,f=(f-e)*p,e=(1-(u+o))*p,o=(h+a)*p,p=(n+l)*i,n=(h-a)*i,l=(1-(u+d))*i;return t[0]=S,t[1]=g,t[2]=c,t[3]=0,t[4]=f,t[5]=e,t[6]=o,t[7]=0,t[8]=p,t[9]=n,t[10]=l,t[11]=0,t[12]=s[0]+C-(S*C+f*m+p*r),t[13]=s[1]+m-(g*C+e*m+n*r),t[14]=s[2]+r-(c*C+o*m+l*r),t[15]=1,t},fromQuat3=function(t,e){var s=e[0],i=e[1],r=e[2],e=e[3],n=s+s,h=i+i,o=r+r,s=s*n,a=i*n,i=i*h,l=r*n,c=r*h,r=r*o,n=e*n,h=e*h,e=e*o;return t[0]=1-i-r,t[1]=a+e,t[2]=l-h,t[3]=0,t[4]=a-e,t[5]=1-s-r,t[6]=c+n,t[7]=0,t[8]=l+h,t[9]=c-n,t[10]=1-s-i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum2=function(t,e,s,i,r,n,h){var o=1/(s-e),a=1/(r-i),l=1/(n-h);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(s+e)*o,t[9]=(r+i)*a,t[10]=(h+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*n*2*l,t[15]=0,t},perspectiveNO2=function(t,e,s,i,r){e=1/Math.tan(e/2);return t[0]=e/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(s=1/(i-r)),t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i),t},perspectiveZO2=function(t,e,s,i,r){e=1/Math.tan(e/2);return t[0]=e/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=r*(s=1/(i-r)),t[14]=r*i*s):(t[10]=-1,t[14]=-i),t},perspectiveFromFieldOfView2=function(t,e,s,i){var r=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),h=Math.tan(e.leftDegrees*Math.PI/180),e=Math.tan(e.rightDegrees*Math.PI/180),o=2/(h+e),a=2/(r+n);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(h-e)*o*.5,t[9]=(r-n)*a*.5,t[10]=i/(s-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*s/(s-i),t[15]=0,t},orthoNO2=function(t,e,s,i,r,n,h){var o=1/(e-s),a=1/(i-r),l=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+s)*o,t[13]=(r+i)*a,t[14]=(h+n)*l,t[15]=1,t},orthoZO2=function(t,e,s,i,r,n,h){var o=1/(e-s),a=1/(i-r),h=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(e+s)*o,t[13]=(r+i)*a,t[14]=n*h,t[15]=1,t},lookAt2=function(t,e,s,i){var r,n,h,o,a=e[0],l=e[1],e=e[2],c=i[0],u=i[1],i=i[2],f=s[0],d=s[1],s=s[2];return Math.abs(a-f)<EPSILON&&Math.abs(l-d)<EPSILON&&Math.abs(e-s)<EPSILON?identity$22(t):(f=a-f,d=l-d,s=e-s,r=u*(s*=o=1/Math.hypot(f,d,s))-i*(d*=o),i=i*(f*=o)-c*s,c=c*d-u*f,(o=Math.hypot(r,i,c))?(r*=o=1/o,i*=o,c*=o):c=i=r=0,u=d*c-s*i,n=s*r-f*c,h=f*i-d*r,(o=Math.hypot(u,n,h))?(u*=o=1/o,n*=o,h*=o):h=n=u=0,t[0]=r,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=n,t[6]=d,t[7]=0,t[8]=c,t[9]=h,t[10]=s,t[11]=0,t[12]=-(r*a+i*l+c*e),t[13]=-(u*a+n*l+h*e),t[14]=-(f*a+d*l+s*e),t[15]=1,t)},targetTo2=function(t,e,s,i){var r=e[0],n=e[1],e=e[2],h=i[0],o=i[1],i=i[2],a=r-s[0],l=n-s[1],s=e-s[2],c=a*a+l*l+s*s,u=(0<c&&(a*=c=1/Math.sqrt(c),l*=c,s*=c),o*s-i*l),i=i*a-h*s,h=h*l-o*a;return 0<(c=u*u+i*i+h*h)&&(u*=c=1/Math.sqrt(c),i*=c,h*=c),t[0]=u,t[1]=i,t[2]=h,t[3]=0,t[4]=l*h-s*i,t[5]=s*u-a*h,t[6]=a*i-l*u,t[7]=0,t[8]=a,t[9]=l,t[10]=s,t[11]=0,t[12]=r,t[13]=n,t[14]=e,t[15]=1,t},str$52=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob2=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add$52=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t[8]=e[8]+s[8],t[9]=e[9]+s[9],t[10]=e[10]+s[10],t[11]=e[11]+s[11],t[12]=e[12]+s[12],t[13]=e[13]+s[13],t[14]=e[14]+s[14],t[15]=e[15]+s[15],t},subtract$32=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t[6]=e[6]-s[6],t[7]=e[7]-s[7],t[8]=e[8]-s[8],t[9]=e[9]-s[9],t[10]=e[10]-s[10],t[11]=e[11]-s[11],t[12]=e[12]-s[12],t[13]=e[13]-s[13],t[14]=e[14]-s[14],t[15]=e[15]-s[15],t},multiplyScalar2=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12]*s,t[13]=e[13]*s,t[14]=e[14]*s,t[15]=e[15]*s,t},multiplyScalarAndAdd2=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t[4]=e[4]+s[4]*i,t[5]=e[5]+s[5]*i,t[6]=e[6]+s[6]*i,t[7]=e[7]+s[7]*i,t[8]=e[8]+s[8]*i,t[9]=e[9]+s[9]*i,t[10]=e[10]+s[10]*i,t[11]=e[11]+s[11]*i,t[12]=e[12]+s[12]*i,t[13]=e[13]+s[13]*i,t[14]=e[14]+s[14]*i,t[15]=e[15]+s[15]*i,t},exactEquals$52=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals$52=function(t,e){var s=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11],p=t[12],C=t[13],m=t[14],t=t[15],S=e[0],g=e[1],_=e[2],T=e[3],y=e[4],E=e[5],I=e[6],A=e[7],M=e[8],R=e[9],w=e[10],b=e[11],O=e[12],G=e[13],P=e[14],e=e[15];return Math.abs(s-S)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(i-g)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(r-_)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(n-T)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(h-y)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(o-E)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(a-I)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(l-A)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(c-M)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(u-R)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(f-w)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(d-b)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(b))&&Math.abs(p-O)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(C-G)<=EPSILON*Math.max(1,Math.abs(C),Math.abs(G))&&Math.abs(m-P)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$42=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},clone$42=function(t){var e=new ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},length$42=function(t){var e=t[0];return Math.hypot(e,t[1],t[2])},fromValues$42=function(t,e,s){var i=new ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=s,i},copy$42=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set$42=function(t,e,s,i){return t[0]=e,t[1]=s,t[2]=i,t},add$42=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t},subtract$22=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t},multiply$42=function(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t},divide$22=function(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t},ceil$22=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor$22=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min$22=function(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t[2]=Math.min(e[2],s[2]),t},max$22=function(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t[2]=Math.max(e[2],s[2]),t},round$22=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale$42=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t},scaleAndAdd$22=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t},distance$22=function(t,e){var s=e[0]-t[0];return Math.hypot(s,e[1]-t[1],e[2]-t[2])},squaredDistance$22=function(t,e){var s=e[0]-t[0],i=e[1]-t[1],e=e[2]-t[2];return s*s+i*i+e*e},squaredLength$42=function(t){var e=t[0],s=t[1],t=t[2];return e*e+s*s+t*t},negate$22=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse$22=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize$42=function(t,e){var s=e[0],i=e[1],r=e[2],s=s*s+i*i+r*r;return 0<s&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t},dot$42=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},cross$22=function(t,e,s){var i=e[0],r=e[1],e=e[2],n=s[0],h=s[1],s=s[2];return t[0]=r*s-e*h,t[1]=e*n-i*s,t[2]=i*h-r*n,t},lerp$42=function(t,e,s,i){var r=e[0],n=e[1],e=e[2];return t[0]=r+i*(s[0]-r),t[1]=n+i*(s[1]-n),t[2]=e+i*(s[2]-e),t},slerp$12=function(t,e,s,i){var r=Math.acos(Math.min(Math.max(dot$42(e,s),-1),1)),n=Math.sin(r),h=Math.sin((1-i)*r)/n,i=Math.sin(i*r)/n;return t[0]=h*e[0]+i*s[0],t[1]=h*e[1]+i*s[1],t[2]=h*e[2]+i*s[2],t},hermite2=function(t,e,s,i,r,n){var h=n*n,o=h*(2*n-3)+1,a=h*(n-2)+n,l=h*(n-1),h=h*(3-2*n);return t[0]=e[0]*o+s[0]*a+i[0]*l+r[0]*h,t[1]=e[1]*o+s[1]*a+i[1]*l+r[1]*h,t[2]=e[2]*o+s[2]*a+i[2]*l+r[2]*h,t},bezier2=function(t,e,s,i,r,n){var h=1-n,o=h*h,a=n*n,l=o*h,o=3*n*o,h=3*a*h,a=a*n;return t[0]=e[0]*l+s[0]*o+i[0]*h+r[0]*a,t[1]=e[1]*l+s[1]*o+i[1]*h+r[1]*a,t[2]=e[2]*l+s[2]*o+i[2]*h+r[2]*a,t},random$32=function(t,e){e=e||1;var s=2*RANDOM()*Math.PI,i=2*RANDOM()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(s)*r,t[1]=Math.sin(s)*r,t[2]=i*e,t},transformMat4$22=function(t,e,s){var i=e[0],r=e[1],e=e[2],n=s[3]*i+s[7]*r+s[11]*e+s[15];return t[0]=(s[0]*i+s[4]*r+s[8]*e+s[12])/(n=n||1),t[1]=(s[1]*i+s[5]*r+s[9]*e+s[13])/n,t[2]=(s[2]*i+s[6]*r+s[10]*e+s[14])/n,t},transformMat3$12=function(t,e,s){var i=e[0],r=e[1],e=e[2];return t[0]=i*s[0]+r*s[3]+e*s[6],t[1]=i*s[1]+r*s[4]+e*s[7],t[2]=i*s[2]+r*s[5]+e*s[8],t},transformQuat$12=function(t,e,s){var i=s[0],r=s[1],n=s[2],h=e[0],o=e[1],e=e[2],a=r*e-n*o,l=n*h-i*e,c=i*o-r*h,u=r*c-n*l,n=n*a-i*c,i=i*l-r*a,r=2*s[3];return l*=r,c*=r,n*=2,i*=2,t[0]=h+(a*=r)+(u*=2),t[1]=o+l+n,t[2]=e+c+i,t},rotateX$22=function(t,e,s,i){var r=[],n=[];return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],n[0]=r[0],n[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),n[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2],t},rotateY$22=function(t,e,s,i){var r=[],n=[];return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],n[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),n[1]=r[1],n[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2],t},rotateZ$22=function(t,e,s,i){var r=[],n=[];return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],n[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),n[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),n[2]=r[2],t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2],t},angle$12=function(t,e){var s=t[0],i=t[1],r=t[2],n=e[0],h=e[1],o=e[2],s=Math.sqrt((s*s+i*i+r*r)*(n*n+h*h+o*o)),i=s&&dot$42(t,e)/s;return Math.acos(Math.min(Math.max(i,-1),1))},zero$22=function(t){return t[0]=0,t[1]=0,t[2]=0,t},str$42=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals$42=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},equals$42=function(t,e){var s=t[0],i=t[1],t=t[2],r=e[0],n=e[1],e=e[2];return Math.abs(s-r)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(r))&&Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$32=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},clone$32=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},fromValues$32=function(t,e,s,i){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=s,r[3]=i,r},copy$32=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},set$32=function(t,e,s,i,r){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t},add$32=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t},subtract$12=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t},multiply$32=function(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t[3]=e[3]*s[3],t},divide$12=function(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t[3]=e[3]/s[3],t},ceil$12=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor$12=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min$12=function(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t[2]=Math.min(e[2],s[2]),t[3]=Math.min(e[3],s[3]),t},max$12=function(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t[2]=Math.max(e[2],s[2]),t[3]=Math.max(e[3],s[3]),t},round$12=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale$32=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t},scaleAndAdd$12=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t},distance$12=function(t,e){var s=e[0]-t[0];return Math.hypot(s,e[1]-t[1],e[2]-t[2],e[3]-t[3])},squaredDistance$12=function(t,e){var s=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],e=e[3]-t[3];return s*s+i*i+r*r+e*e},length$32=function(t){var e=t[0];return Math.hypot(e,t[1],t[2],t[3])},squaredLength$32=function(t){var e=t[0],s=t[1],i=t[2],t=t[3];return e*e+s*s+i*i+t*t},negate$12=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse$12=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize$32=function(t,e){var s=e[0],i=e[1],r=e[2],e=e[3],n=s*s+i*i+r*r+e*e;return 0<n&&(n=1/Math.sqrt(n)),t[0]=s*n,t[1]=i*n,t[2]=r*n,t[3]=e*n,t},dot$32=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},cross$12=function(t,e,s,i){var r=s[0]*i[1]-s[1]*i[0],n=s[0]*i[2]-s[2]*i[0],h=s[0]*i[3]-s[3]*i[0],o=s[1]*i[2]-s[2]*i[1],a=s[1]*i[3]-s[3]*i[1],s=s[2]*i[3]-s[3]*i[2],i=e[0],l=e[1],c=e[2],e=e[3];return t[0]=l*s-c*a+e*o,t[1]=-i*s+c*h-e*n,t[2]=i*a-l*h+e*r,t[3]=-i*o+l*n-c*r,t},lerp$32=function(t,e,s,i){var r=e[0],n=e[1],h=e[2],e=e[3];return t[0]=r+i*(s[0]-r),t[1]=n+i*(s[1]-n),t[2]=h+i*(s[2]-h),t[3]=e+i*(s[3]-e),t},random$22=function(t,e){var s,i,r,n,h,o;for(e=e||1;1<=(h=(s=2*RANDOM()-1)*s+(i=2*RANDOM()-1)*i););for(;1<=(o=(r=2*RANDOM()-1)*r+(n=2*RANDOM()-1)*n););var a=Math.sqrt((1-h)/o);return t[0]=e*s,t[1]=e*i,t[2]=e*r*a,t[3]=e*n*a,t},transformMat4$12=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3];return t[0]=s[0]*i+s[4]*r+s[8]*n+s[12]*e,t[1]=s[1]*i+s[5]*r+s[9]*n+s[13]*e,t[2]=s[2]*i+s[6]*r+s[10]*n+s[14]*e,t[3]=s[3]*i+s[7]*r+s[11]*n+s[15]*e,t},transformQuat2=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=s[0],o=s[1],a=s[2],s=s[3],l=s*i+o*n-a*r,c=s*r+a*i-h*n,u=s*n+h*r-o*i,i=-h*i-o*r-a*n;return t[0]=l*s+i*-h+c*-a-u*-o,t[1]=c*s+i*-o+u*-h-l*-a,t[2]=u*s+i*-a+l*-o-c*-h,t[3]=e[3],t},zero$12=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str$32=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals$32=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals$32=function(t,e){var s=t[0],i=t[1],r=t[2],t=t[3],n=e[0],h=e[1],o=e[2],e=e[3];return Math.abs(s-n)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-o)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$22=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},identity$12=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle2=function(t,e,s){s*=.5;var i=Math.sin(s);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(s),t},getAxisAngle2=function(t,e){var s=2*Math.acos(e[3]),i=Math.sin(s/2);return EPSILON<i?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),s},getAngle2=function(t,e){t=dot$2(t,e);return Math.acos(2*t*t-1)},multiply$22=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=s[0],o=s[1],a=s[2],s=s[3];return t[0]=i*s+e*h+r*a-n*o,t[1]=r*s+e*o+n*h-i*a,t[2]=n*s+e*a+i*o-r*h,t[3]=e*s-i*h-r*o-n*a,t},rotateX$12=function(t,e,s){s*=.5;var i=e[0],r=e[1],n=e[2],e=e[3],h=Math.sin(s),s=Math.cos(s);return t[0]=i*s+e*h,t[1]=r*s+n*h,t[2]=n*s-r*h,t[3]=e*s-i*h,t},rotateY$12=function(t,e,s){s*=.5;var i=e[0],r=e[1],n=e[2],e=e[3],h=Math.sin(s),s=Math.cos(s);return t[0]=i*s-n*h,t[1]=r*s+e*h,t[2]=n*s+i*h,t[3]=e*s-r*h,t},rotateZ$12=function(t,e,s){s*=.5;var i=e[0],r=e[1],n=e[2],e=e[3],h=Math.sin(s),s=Math.cos(s);return t[0]=i*s+r*h,t[1]=r*s-i*h,t[2]=n*s+e*h,t[3]=e*s-n*h,t},calculateW2=function(t,e){var s=e[0],i=e[1],e=e[2];return t[0]=s,t[1]=i,t[2]=e,t[3]=Math.sqrt(Math.abs(1-s*s-i*i-e*e)),t},exp2=function(t,e){var s=e[0],i=e[1],r=e[2],e=e[3],n=Math.sqrt(s*s+i*i+r*r),e=Math.exp(e),h=0<n?e*Math.sin(n)/n:0;return t[0]=s*h,t[1]=i*h,t[2]=r*h,t[3]=e*Math.cos(n),t},ln2=function(t,e){var s=e[0],i=e[1],r=e[2],e=e[3],n=Math.sqrt(s*s+i*i+r*r),n=0<n?Math.atan2(n,e)/n:0;return t[0]=s*n,t[1]=i*n,t[2]=r*n,t[3]=.5*Math.log(s*s+i*i+r*r+e*e),t},pow2=function(t,e,s){return ln2(t,e),scale$2(t,t,s),exp2(t,t),t},slerp2=function(t,e,s,i){var r,n,h=e[0],o=e[1],a=e[2],e=e[3],l=s[0],c=s[1],u=s[2],s=s[3],f=h*l+o*c+a*u+e*s;return f<0&&(f=-f,l=-l,c=-c,u=-u,s=-s),f=EPSILON<1-f?(f=Math.acos(f),r=Math.sin(f),n=Math.sin((1-i)*f)/r,Math.sin(i*f)/r):(n=1-i,i),t[0]=n*h+f*l,t[1]=n*o+f*c,t[2]=n*a+f*u,t[3]=n*e+f*s,t},random$12=function(t){var e=RANDOM(),s=RANDOM(),i=RANDOM(),r=Math.sqrt(1-e),e=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*s),t[1]=r*Math.cos(2*Math.PI*s),t[2]=e*Math.sin(2*Math.PI*i),t[3]=e*Math.cos(2*Math.PI*i),t},invert$12=function(t,e){var s=e[0],i=e[1],r=e[2],e=e[3],n=s*s+i*i+r*r+e*e,n=n?1/n:0;return t[0]=-s*n,t[1]=-i*n,t[2]=-r*n,t[3]=e*n,t},conjugate$12=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},fromMat32=function(t,e){var s,i,r,n=e[0]+e[4]+e[8];return 0<n?(r=Math.sqrt(n+1),t[3]=.5*r,t[0]=(e[5]-e[7])*(r=.5/r),t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r):(s=((n=e[3*(n=e[4]>e[n=0]?1:n)+n]<e[8]?2:n)+1)%3,i=(n+2)%3,r=Math.sqrt(e[3*n+n]-e[3*s+s]-e[3*i+i]+1),t[n]=.5*r,t[3]=(e[3*s+i]-e[3*i+s])*(r=.5/r),t[s]=(e[3*s+n]+e[3*n+s])*r,t[i]=(e[3*i+n]+e[3*n+i])*r),t},fromEuler2=function(t,e,s,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,n=Math.PI/360,h=(i*=n,s*=n,Math.sin(e*=n)),o=Math.cos(e),a=Math.sin(s),l=Math.cos(s),c=Math.sin(i),u=Math.cos(i);switch(r){case"xyz":t[0]=h*l*u+o*a*c,t[1]=o*a*u-h*l*c,t[2]=o*l*c+h*a*u,t[3]=o*l*u-h*a*c;break;case"xzy":t[0]=h*l*u-o*a*c,t[1]=o*a*u-h*l*c,t[2]=o*l*c+h*a*u,t[3]=o*l*u+h*a*c;break;case"yxz":t[0]=h*l*u+o*a*c,t[1]=o*a*u-h*l*c,t[2]=o*l*c-h*a*u,t[3]=o*l*u+h*a*c;break;case"yzx":t[0]=h*l*u+o*a*c,t[1]=o*a*u+h*l*c,t[2]=o*l*c-h*a*u,t[3]=o*l*u-h*a*c;break;case"zxy":t[0]=h*l*u-o*a*c,t[1]=o*a*u+h*l*c,t[2]=o*l*c+h*a*u,t[3]=o*l*u-h*a*c;break;case"zyx":t[0]=h*l*u-o*a*c,t[1]=o*a*u+h*l*c,t[2]=o*l*c-h*a*u,t[3]=o*l*u+h*a*c;break;default:throw new Error("Unknown angle order "+r)}return t},str$22=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},equals$22=function(t,e){return Math.abs(dot$32(t,e))>=1-EPSILON},create$12=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone$12=function(t){var e=new ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},fromValues$12=function(t,e,s,i,r,n,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=e,a[2]=s,a[3]=i,a[4]=r,a[5]=n,a[6]=h,a[7]=o,a},fromRotationTranslationValues2=function(t,e,s,i,r,n,h){var o=new ARRAY_TYPE(8),r=(o[0]=t,o[1]=e,o[2]=s,o[3]=i,.5*r),n=.5*n,h=.5*h;return o[4]=r*i+n*s-h*e,o[5]=n*i+h*t-r*s,o[6]=h*i+r*e-n*t,o[7]=-r*t-n*e-h*s,o},fromRotationTranslation2=function(t,e,s){var i=.5*s[0],r=.5*s[1],s=.5*s[2],n=e[0],h=e[1],o=e[2],e=e[3];return t[0]=n,t[1]=h,t[2]=o,t[3]=e,t[4]=i*e+r*o-s*h,t[5]=r*e+s*n-i*o,t[6]=s*e+i*h-r*n,t[7]=-i*n-r*h-s*o,t},fromTranslation2=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},fromRotation2=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat42=function(t,e){var s=create$22(),i=(getRotation2(s,e),new ARRAY_TYPE(3));return getTranslation$12(i,e),fromRotationTranslation2(t,s,i),t},copy$12=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},identity2=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set$12=function(t,e,s,i,r,n,h,o,a){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t},getDual2=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},setDual2=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},getTranslation2=function(t,e){var s=e[4],i=e[5],r=e[6],n=e[7],h=-e[0],o=-e[1],a=-e[2],e=e[3];return t[0]=2*(s*e+n*h+i*a-r*o),t[1]=2*(i*e+n*o+r*h-s*a),t[2]=2*(r*e+n*a+s*o-i*h),t},translate2=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=.5*s[0],a=.5*s[1],s=.5*s[2],l=e[4],c=e[5],u=e[6],e=e[7];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=h*o+r*s-n*a+l,t[5]=h*a+n*o-i*s+c,t[6]=h*s+i*a-r*o+u,t[7]=-i*o-r*a-n*s+e,t},rotateX2=function(t,e,s){var i=-e[0],r=-e[1],n=-e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=o*h+c*i+a*n-l*r,f=a*h+c*r+l*i-o*n,d=l*h+c*n+o*r-a*i,c=c*h-o*i-a*r-l*n;return rotateX$12(t,e,s),i=t[0],t[4]=u*(h=t[3])+c*i+f*(n=t[2])-d*(r=t[1]),t[5]=f*h+c*r+d*i-u*n,t[6]=d*h+c*n+u*r-f*i,t[7]=c*h-u*i-f*r-d*n,t},rotateY2=function(t,e,s){var i=-e[0],r=-e[1],n=-e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=o*h+c*i+a*n-l*r,f=a*h+c*r+l*i-o*n,d=l*h+c*n+o*r-a*i,c=c*h-o*i-a*r-l*n;return rotateY$12(t,e,s),i=t[0],t[4]=u*(h=t[3])+c*i+f*(n=t[2])-d*(r=t[1]),t[5]=f*h+c*r+d*i-u*n,t[6]=d*h+c*n+u*r-f*i,t[7]=c*h-u*i-f*r-d*n,t},rotateZ2=function(t,e,s){var i=-e[0],r=-e[1],n=-e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=o*h+c*i+a*n-l*r,f=a*h+c*r+l*i-o*n,d=l*h+c*n+o*r-a*i,c=c*h-o*i-a*r-l*n;return rotateZ$12(t,e,s),i=t[0],t[4]=u*(h=t[3])+c*i+f*(n=t[2])-d*(r=t[1]),t[5]=f*h+c*r+d*i-u*n,t[6]=d*h+c*n+u*r-f*i,t[7]=c*h-u*i-f*r-d*n,t},rotateByQuatAppend2=function(t,e,s){var i=s[0],r=s[1],n=s[2],s=s[3],h=e[0],o=e[1],a=e[2],l=e[3];return t[0]=h*s+l*i+o*n-a*r,t[1]=o*s+l*r+a*i-h*n,t[2]=a*s+l*n+h*r-o*i,t[3]=l*s-h*i-o*r-a*n,t[4]=(h=e[4])*s+(l=e[7])*i+(o=e[5])*n-(a=e[6])*r,t[5]=o*s+l*r+a*i-h*n,t[6]=a*s+l*n+h*r-o*i,t[7]=l*s-h*i-o*r-a*n,t},rotateByQuatPrepend2=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=i*l+e*h+r*a-n*o,t[1]=r*l+e*o+n*h-i*a,t[2]=n*l+e*a+i*o-r*h,t[3]=e*l-i*h-r*o-n*a,t[4]=i*(l=s[7])+e*(h=s[4])+r*(a=s[6])-n*(o=s[5]),t[5]=r*l+e*o+n*h-i*a,t[6]=n*l+e*a+i*o-r*h,t[7]=e*l-i*h-r*o-n*a,t},rotateAroundAxis2=function(t,e,s,i){var r,n,h,o,a,l;return Math.abs(i)<EPSILON?copy$12(t,e):(l=Math.hypot(s[0],s[1],s[2]),i*=.5,r=(h=Math.sin(i))*s[0]/l,n=h*s[1]/l,h=h*s[2]/l,s=Math.cos(i),l=e[0],t[0]=l*s+(i=e[3])*r+(o=e[1])*h-(a=e[2])*n,t[1]=o*s+i*n+a*r-l*h,t[2]=a*s+i*h+l*n-o*r,t[3]=i*s-l*r-o*n-a*h,t[4]=(i=e[4])*s+(l=e[7])*r+(o=e[5])*h-(a=e[6])*n,t[5]=o*s+l*n+a*r-i*h,t[6]=a*s+l*h+i*n-o*r,t[7]=l*s-i*r-o*n-a*h,t)},add$12=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t},multiply$12=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=s[4],a=s[5],l=s[6],c=s[7],u=e[4],f=e[5],d=e[6],e=e[7],p=s[0],C=s[1],m=s[2],s=s[3];return t[0]=i*s+h*p+r*m-n*C,t[1]=r*s+h*C+n*p-i*m,t[2]=n*s+h*m+i*C-r*p,t[3]=h*s-i*p-r*C-n*m,t[4]=i*c+h*o+r*l-n*a+u*s+e*p+f*m-d*C,t[5]=r*c+h*a+n*o-i*l+f*s+e*C+d*p-u*m,t[6]=n*c+h*l+i*a-r*o+d*s+e*m+u*C-f*p,t[7]=h*c-i*o-r*a-n*l+e*s-u*p-f*C-d*m,t},scale$12=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t},lerp$12=function(t,e,s,i){var r=1-i;return dot$1(e,s)<0&&(i=-i),t[0]=e[0]*r+s[0]*i,t[1]=e[1]*r+s[1]*i,t[2]=e[2]*r+s[2]*i,t[3]=e[3]*r+s[3]*i,t[4]=e[4]*r+s[4]*i,t[5]=e[5]*r+s[5]*i,t[6]=e[6]*r+s[6]*i,t[7]=e[7]*r+s[7]*i,t},invert2=function(t,e){var s=squaredLength$1(e);return t[0]=-e[0]/s,t[1]=-e[1]/s,t[2]=-e[2]/s,t[3]=e[3]/s,t[4]=-e[4]/s,t[5]=-e[5]/s,t[6]=-e[6]/s,t[7]=e[7]/s,t},conjugate2=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},normalize$12=function(t,e){var s,i,r,n,h,o,a,l,c=squaredLength$1(e);return 0<c&&(c=Math.sqrt(c),l=(s=e[0]/c)*(h=e[4])+(i=e[1]/c)*(o=e[5])+(r=e[2]/c)*(a=e[6])+(n=e[3]/c)*(e=e[7]),t[0]=s,t[1]=i,t[2]=r,t[3]=n,t[4]=(h-s*l)/c,t[5]=(o-i*l)/c,t[6]=(a-r*l)/c,t[7]=(e-n*l)/c),t},str$12=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals$12=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},equals$12=function(t,e){var s=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],t=t[7],l=e[0],c=e[1],u=e[2],f=e[3],d=e[4],p=e[5],C=e[6],e=e[7];return Math.abs(s-l)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-u)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(h-d)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(o-p)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-C)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create2=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},clone2=function(t){var e=new ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},fromValues2=function(t,e){var s=new ARRAY_TYPE(2);return s[0]=t,s[1]=e,s},copy2=function(t,e){return t[0]=e[0],t[1]=e[1],t},set2=function(t,e,s){return t[0]=e,t[1]=s,t},add2=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t},subtract2=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t},multiply2=function(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t},divide2=function(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t},ceil2=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor2=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min2=function(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t},max2=function(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t},round2=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale2=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t},scaleAndAdd2=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t},distance2=function(t,e){var s=e[0]-t[0];return Math.hypot(s,e[1]-t[1])},squaredDistance2=function(t,e){var s=e[0]-t[0],e=e[1]-t[1];return s*s+e*e},length2=function(t){var e=t[0];return Math.hypot(e,t[1])},squaredLength2=function(t){var e=t[0],t=t[1];return e*e+t*t},negate2=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},inverse2=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize2=function(t,e){var s=e[0],i=e[1],s=s*s+i*i;return 0<s&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t},dot2=function(t,e){return t[0]*e[0]+t[1]*e[1]},cross2=function(t,e,s){e=e[0]*s[1]-e[1]*s[0];return t[0]=t[1]=0,t[2]=e,t},lerp2=function(t,e,s,i){var r=e[0],e=e[1];return t[0]=r+i*(s[0]-r),t[1]=e+i*(s[1]-e),t},random2=function(t,e){e=e||1;var s=2*RANDOM()*Math.PI;return t[0]=Math.cos(s)*e,t[1]=Math.sin(s)*e,t},transformMat22=function(t,e,s){var i=e[0],e=e[1];return t[0]=s[0]*i+s[2]*e,t[1]=s[1]*i+s[3]*e,t},transformMat2d2=function(t,e,s){var i=e[0],e=e[1];return t[0]=s[0]*i+s[2]*e+s[4],t[1]=s[1]*i+s[3]*e+s[5],t},transformMat32=function(t,e,s){var i=e[0],e=e[1];return t[0]=s[0]*i+s[3]*e+s[6],t[1]=s[1]*i+s[4]*e+s[7],t},transformMat42=function(t,e,s){var i=e[0],e=e[1];return t[0]=s[0]*i+s[4]*e+s[12],t[1]=s[1]*i+s[5]*e+s[13],t},rotate2=function(t,e,s,i){var r=e[0]-s[0],e=e[1]-s[1],n=Math.sin(i),i=Math.cos(i);return t[0]=r*i-e*n+s[0],t[1]=r*n+e*i+s[1],t},angle2=function(t,e){var s=t[0],t=t[1],i=e[0],e=e[1],r=Math.sqrt((s*s+t*t)*(i*i+e*e));return Math.acos(Math.min(Math.max(r&&(s*i+t*e)/r,-1),1))},zero2=function(t){return t[0]=0,t[1]=0,t},str2=function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals2=function(t,e){return t[0]===e[0]&&t[1]===e[1]},equals2=function(t,e){var s=t[0],t=t[1],i=e[0],e=e[1];return Math.abs(s-i)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(i))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))};setMatrixArrayType=setMatrixArrayType2,toRadian=toRadian2,equals$9=equals$92,create$8=create$82,clone$8=clone$82,copy$8=copy$82,identity$5=identity$52,fromValues$8=fromValues$82,set$8=set$82,transpose$2=transpose$22,invert$5=invert$52,adjoint$2=adjoint$22,determinant$3=determinant$32,multiply$8=multiply$82,rotate$4=rotate$42,scale$8=scale$82,fromRotation$4=fromRotation$42,fromScaling$3=fromScaling$32,str$8=str$82,frob$3=frob$32,LDU=LDU2,add$8=add$82,subtract$6=subtract$62,exactEquals$8=exactEquals$82,equals$8=equals$82,multiplyScalar$3=multiplyScalar$32,multiplyScalarAndAdd$3=multiplyScalarAndAdd$32,create$7=create$72,clone$7=clone$72,copy$7=copy$72,identity$4=identity$42,fromValues$7=fromValues$72,set$7=set$72,invert$4=invert$42,determinant$2=determinant$22,multiply$7=multiply$72,rotate$3=rotate$32,scale$7=scale$72,translate$3=translate$32,fromRotation$3=fromRotation$32,fromScaling$2=fromScaling$22,fromTranslation$3=fromTranslation$32,str$7=str$72,frob$2=frob$22,add$7=add$72,subtract$5=subtract$52,multiplyScalar$2=multiplyScalar$22,multiplyScalarAndAdd$2=multiplyScalarAndAdd$22,exactEquals$7=exactEquals$72,equals$7=equals$72,create$6=create$62,fromMat4$1=fromMat4$12,clone$6=clone$62,copy$6=copy$62,fromValues$6=fromValues$62,set$6=set$62,identity$3=identity$32,transpose$1=transpose$12,invert$3=invert$32,adjoint$1=adjoint$12,determinant$1=determinant$12,multiply$6=multiply$62,translate$2=translate$22,rotate$2=rotate$22,scale$6=scale$62,fromTranslation$2=fromTranslation$22,fromRotation$2=fromRotation$22,fromScaling$1=fromScaling$12,fromMat2d=fromMat2d2,fromQuat$1=fromQuat$12,normalFromMat4=normalFromMat42,projection=projection2,str$6=str$62,frob$1=frob$12,add$6=add$62,subtract$4=subtract$42,multiplyScalar$1=multiplyScalar$12,multiplyScalarAndAdd$1=multiplyScalarAndAdd$12,exactEquals$6=exactEquals$62,equals$6=equals$62,create$5=create$52,clone$5=clone$52,copy$5=copy$52,fromValues$5=fromValues$52,set$5=set$52,identity$2=identity$22,transpose=transpose2,invert$2=invert$22,adjoint=adjoint2,determinant=determinant2,multiply$5=multiply$52,translate$1=translate$12,scale$5=scale$52,rotate$1=rotate$12,rotateX$3=rotateX$32,rotateY$3=rotateY$32,rotateZ$3=rotateZ$32,fromTranslation$1=fromTranslation$12,fromScaling=fromScaling2,fromRotation$1=fromRotation$12,fromXRotation=fromXRotation2,fromYRotation=fromYRotation2,fromZRotation=fromZRotation2,fromRotationTranslation$1=fromRotationTranslation$12,fromQuat2=fromQuat22,getTranslation$1=getTranslation$12,getScaling=getScaling2,getRotation=getRotation2,decompose=decompose2,fromRotationTranslationScale=fromRotationTranslationScale2,fromRotationTranslationScaleOrigin=fromRotationTranslationScaleOrigin2,fromQuat=fromQuat3,frustum=frustum2,perspectiveNO=perspectiveNO2,perspectiveZO=perspectiveZO2,perspectiveFromFieldOfView=perspectiveFromFieldOfView2,orthoNO=orthoNO2,orthoZO=orthoZO2,lookAt=lookAt2,targetTo=targetTo2,str$5=str$52,frob=frob2,add$5=add$52,subtract$3=subtract$32,multiplyScalar=multiplyScalar2,multiplyScalarAndAdd=multiplyScalarAndAdd2,exactEquals$5=exactEquals$52,equals$5=equals$52,create$4=create$42,clone$4=clone$42,length$4=length$42,fromValues$4=fromValues$42,copy$4=copy$42,set$4=set$42,add$4=add$42,subtract$2=subtract$22,multiply$4=multiply$42,divide$2=divide$22,ceil$2=ceil$22,floor$2=floor$22,min$2=min$22,max$2=max$22,round$2=round$22,scale$4=scale$42,scaleAndAdd$2=scaleAndAdd$22,distance$2=distance$22,squaredDistance$2=squaredDistance$22,squaredLength$4=squaredLength$42,negate$2=negate$22,inverse$2=inverse$22,normalize$4=normalize$42,dot$4=dot$42,cross$2=cross$22,lerp$4=lerp$42,slerp$1=slerp$12,hermite=hermite2,bezier=bezier2,random$3=random$32,transformMat4$2=transformMat4$22,transformMat3$1=transformMat3$12,transformQuat$1=transformQuat$12,rotateX$2=rotateX$22,rotateY$2=rotateY$22,rotateZ$2=rotateZ$22,angle$1=angle$12,zero$2=zero$22,str$4=str$42,exactEquals$4=exactEquals$42,equals$4=equals$42,create$3=create$32,clone$3=clone$32,fromValues$3=fromValues$32,copy$3=copy$32,set$3=set$32,add$3=add$32,subtract$1=subtract$12,multiply$3=multiply$32,divide$1=divide$12,ceil$1=ceil$12,floor$1=floor$12,min$1=min$12,max$1=max$12,round$1=round$12,scale$3=scale$32,scaleAndAdd$1=scaleAndAdd$12,distance$1=distance$12,squaredDistance$1=squaredDistance$12,length$3=length$32,squaredLength$3=squaredLength$32,negate$1=negate$12,inverse$1=inverse$12,normalize$3=normalize$32,dot$3=dot$32,cross$1=cross$12,lerp$3=lerp$32,random$2=random$22,transformMat4$1=transformMat4$12,transformQuat=transformQuat2,zero$1=zero$12,str$3=str$32,exactEquals$3=exactEquals$32,equals$3=equals$32,create$2=create$22,identity$1=identity$12,setAxisAngle=setAxisAngle2,getAxisAngle=getAxisAngle2,getAngle=getAngle2,multiply$2=multiply$22,rotateX$1=rotateX$12,rotateY$1=rotateY$12,rotateZ$1=rotateZ$12,calculateW=calculateW2,exp=exp2,ln=ln2,pow=pow2,slerp=slerp2,random$1=random$12,invert$1=invert$12,conjugate$1=conjugate$12,fromMat3=fromMat32,fromEuler=fromEuler2,str$2=str$22,equals$2=equals$22,create$1=create$12,clone$1=clone$12,fromValues$1=fromValues$12,fromRotationTranslationValues=fromRotationTranslationValues2,fromRotationTranslation=fromRotationTranslation2,fromTranslation=fromTranslation2,fromRotation=fromRotation2,fromMat4=fromMat42,copy$1=copy$12,identity=identity2,set$1=set$12,getDual=getDual2,setDual=setDual2,getTranslation=getTranslation2,translate=translate2,rotateX=rotateX2,rotateY=rotateY2,rotateZ=rotateZ2,rotateByQuatAppend=rotateByQuatAppend2,rotateByQuatPrepend=rotateByQuatPrepend2,rotateAroundAxis=rotateAroundAxis2,add$1=add$12,multiply$1=multiply$12,scale$1=scale$12,lerp$1=lerp$12,invert=invert2,conjugate=conjugate2,normalize$1=normalize$12,str$1=str$12,exactEquals$1=exactEquals$12,equals$1=equals$12,create=create2,clone=clone2,fromValues=fromValues2,copy=copy2,set=set2,add=add2,subtract=subtract2,multiply=multiply2,divide=divide2,ceil=ceil2,floor=floor2,min=min2,max=max2,round=round2,scale=scale2,scaleAndAdd=scaleAndAdd2,distance=distance2,squaredDistance=squaredDistance2,length=length2,squaredLength=squaredLength2,negate=negate2,inverse=inverse2,normalize=normalize2,dot=dot2,cross=cross2,lerp=lerp2,random=random2,transformMat2=transformMat22,transformMat2d=transformMat2d2,transformMat3=transformMat32,transformMat4=transformMat42,rotate=rotate2,angle=angle2,zero=zero2,str=str2,exactEquals=exactEquals2,equals=equals2,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get C(){return ARRAY_TYPE},S:RANDOM,_:ANGLE_ORDER,T:setMatrixArrayType2,I:toRadian2,equals:equals$92},mul$8=multiply$82,sub$6=subtract$62,mat2=Object.freeze({__proto__:null,create:create$82,clone:clone$82,A:copy$82,identity:identity$52,M:fromValues$82,set:set$82,R:transpose$22,O:invert$52,G:adjoint$22,P:determinant$32,multiply:multiply$82,rotate:rotate$42,scale:scale$82,L:fromRotation$42,D:fromScaling$32,N:str$82,F:frob$32,B:LDU2,add:add$82,$:subtract$62,W:exactEquals$82,equals:equals$82,V:multiplyScalar$32,H:multiplyScalarAndAdd$32,mul:mul$8,sub:sub$6}),mul$7=multiply$72,sub$5=subtract$52,mat2d=Object.freeze({__proto__:null,create:create$72,clone:clone$72,A:copy$72,identity:identity$42,M:fromValues$72,set:set$72,O:invert$42,P:determinant$22,multiply:multiply$72,rotate:rotate$32,scale:scale$72,translate:translate$32,L:fromRotation$32,D:fromScaling$22,U:fromTranslation$32,N:str$72,F:frob$22,add:add$72,$:subtract$52,V:multiplyScalar$22,H:multiplyScalarAndAdd$22,W:exactEquals$72,equals:equals$72,mul:mul$7,sub:sub$5}),mul$6=multiply$62,sub$4=subtract$42,mat3=Object.freeze({__proto__:null,create:create$62,X:fromMat4$12,clone:clone$62,A:copy$62,M:fromValues$62,set:set$62,identity:identity$32,R:transpose$12,O:invert$32,G:adjoint$12,P:determinant$12,multiply:multiply$62,translate:translate$22,rotate:rotate$22,scale:scale$62,U:fromTranslation$22,L:fromRotation$22,D:fromScaling$12,j:fromMat2d2,Y:fromQuat$12,J:normalFromMat42,K:projection2,N:str$62,F:frob$12,add:add$62,$:subtract$42,V:multiplyScalar$12,H:multiplyScalarAndAdd$12,W:exactEquals$62,equals:equals$62,mul:mul$6,sub:sub$4}),perspective=perspectiveNO2,ortho=orthoNO2,mul$5=multiply$52,sub$3=subtract$32,mat4=Object.freeze({__proto__:null,create:create$52,clone:clone$52,A:copy$52,M:fromValues$52,set:set$52,identity:identity$22,R:transpose2,O:invert$22,G:adjoint2,P:determinant2,multiply:multiply$52,translate:translate$12,scale:scale$52,rotate:rotate$12,Z:rotateX$32,tt:rotateY$32,et:rotateZ$32,U:fromTranslation$12,D:fromScaling2,L:fromRotation$12,it:fromXRotation2,nt:fromYRotation2,ht:fromZRotation2,ot:fromRotationTranslation$12,lt:fromQuat22,ct:getTranslation$12,ut:getScaling2,dt:getRotation2,Ct:decompose2,St:fromRotationTranslationScale2,gt:fromRotationTranslationScaleOrigin2,Y:fromQuat3,_t:frustum2,Tt:perspectiveNO2,perspective:perspective,yt:perspectiveZO2,Et:perspectiveFromFieldOfView2,It:orthoNO2,ortho:ortho,At:orthoZO2,Mt:lookAt2,Rt:targetTo2,N:str$52,F:frob2,add:add$52,$:subtract$32,V:multiplyScalar2,H:multiplyScalarAndAdd2,W:exactEquals$52,equals:equals$52,mul:mul$5,sub:sub$3}),sub$2=subtract$22,mul$4=multiply$42,div$2=divide$22,dist$2=distance$22,sqrDist$2=squaredDistance$22,len$4=length$42,sqrLen$4=squaredLength$42,forEach$2=(()=>{var a=create$42();return function(t,e,s,i,r,n){var h,o;for(e=e||3,s=s||0,o=i?Math.min(i*e+s,t.length):t.length,h=s;h<o;h+=e)a[0]=t[h],a[1]=t[h+1],a[2]=t[h+2],r(a,a,n),t[h]=a[0],t[h+1]=a[1],t[h+2]=a[2];return t}})(),vec3=Object.freeze({__proto__:null,create:create$42,clone:clone$42,length:length$42,M:fromValues$42,A:copy$42,set:set$42,add:add$42,$:subtract$22,multiply:multiply$42,bt:divide$22,ceil:ceil$22,floor:floor$22,min:min$22,max:max$22,round:round$22,scale:scale$42,Ot:scaleAndAdd$22,Gt:distance$22,Pt:squaredDistance$22,vt:squaredLength$42,xt:negate$22,inverse:inverse$22,normalize:normalize$42,Lt:dot$42,Dt:cross$22,Nt:lerp$42,Ft:slerp$12,Bt:hermite2,kt:bezier2,random:random$32,$t:transformMat4$22,Wt:transformMat3$12,Vt:transformQuat$12,Z:rotateX$22,tt:rotateY$22,et:rotateZ$22,angle:angle$12,Ht:zero$22,N:str$42,W:exactEquals$42,equals:equals$42,sub:sub$2,mul:mul$4,div:div$2,Ut:dist$2,Xt:sqrDist$2,jt:len$4,Yt:sqrLen$4,forEach:forEach$2}),sub$1=subtract$12,mul$3=multiply$32,div$1=divide$12,dist$1=distance$12,sqrDist$1=squaredDistance$12,len$3=length$32,sqrLen$3=squaredLength$32,forEach$1=(()=>{var a=create$32();return function(t,e,s,i,r,n){var h,o;for(e=e||4,s=s||0,o=i?Math.min(i*e+s,t.length):t.length,h=s;h<o;h+=e)a[0]=t[h],a[1]=t[h+1],a[2]=t[h+2],a[3]=t[h+3],r(a,a,n),t[h]=a[0],t[h+1]=a[1],t[h+2]=a[2],t[h+3]=a[3];return t}})(),vec4=Object.freeze({__proto__:null,create:create$32,clone:clone$32,M:fromValues$32,A:copy$32,set:set$32,add:add$32,$:subtract$12,multiply:multiply$32,bt:divide$12,ceil:ceil$12,floor:floor$12,min:min$12,max:max$12,round:round$12,scale:scale$32,Ot:scaleAndAdd$12,Gt:distance$12,Pt:squaredDistance$12,length:length$32,vt:squaredLength$32,xt:negate$12,inverse:inverse$12,normalize:normalize$32,Lt:dot$32,Dt:cross$12,Nt:lerp$32,random:random$22,$t:transformMat4$12,Vt:transformQuat2,Ht:zero$12,N:str$32,W:exactEquals$32,equals:equals$32,sub:sub$1,mul:mul$3,div:div$1,Ut:dist$1,Xt:sqrDist$1,jt:len$3,Yt:sqrLen$3,forEach:forEach$1}),clone$2=clone$32,fromValues$2=fromValues$32,copy$2=copy$32,set$2=set$32,add$2=add$32,mul$2=multiply$22,scale$2=scale$32,dot$2=dot$32,lerp$2=lerp$32,length$2=length$32,len$2=length$2,squaredLength$2=squaredLength$32,sqrLen$2=squaredLength$2,normalize$2=normalize$32,exactEquals$2=exactEquals$32,rotationTo=(()=>{var r=create$42(),n=fromValues$42(1,0,0),h=fromValues$42(0,1,0);return function(t,e,s){var i=dot$42(e,s);return i<-.999999?(cross$22(r,n,e),len$4(r)<1e-6&&cross$22(r,h,e),normalize$42(r,r),setAxisAngle2(t,r,Math.PI),t):.999999<i?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(cross$22(r,e,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=1+i,normalize$2(t,t))}})(),sqlerp=(()=>{var h=create$22(),o=create$22();return function(t,e,s,i,r,n){return slerp2(h,e,r,n),slerp2(o,s,i,n),slerp2(t,h,o,2*n*(1-n)),t}})(),setAxes=(()=>{var r=create$62();return function(t,e,s,i){return r[0]=s[0],r[3]=s[1],r[6]=s[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],normalize$2(t,fromMat32(t,r))}})(),quat=Object.freeze({__proto__:null,create:create$22,identity:identity$12,qt:setAxisAngle2,zt:getAxisAngle2,Jt:getAngle2,multiply:multiply$22,Z:rotateX$12,tt:rotateY$12,et:rotateZ$12,Kt:calculateW2,exp:exp2,Zt:ln2,pow:pow2,Ft:slerp2,random:random$12,O:invert$12,Qt:conjugate$12,te:fromMat32,ie:fromEuler2,N:str$22,clone:clone$2,M:fromValues$2,A:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Lt:dot$2,Nt:lerp$2,length:length$2,jt:len$2,vt:squaredLength$2,Yt:sqrLen$2,normalize:normalize$2,W:exactEquals$2,equals:equals$22,ne:rotationTo,he:sqlerp,oe:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=multiply$12,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:create$12,clone:clone$12,M:fromValues$12,ae:fromRotationTranslationValues2,ot:fromRotationTranslation2,U:fromTranslation2,L:fromRotation2,X:fromMat42,A:copy$12,identity:identity2,set:set$12,le:getReal,ue:getDual2,fe:setReal,de:setDual2,ct:getTranslation2,translate:translate2,Z:rotateX2,tt:rotateY2,et:rotateZ2,pe:rotateByQuatAppend2,Ce:rotateByQuatPrepend2,me:rotateAroundAxis2,add:add$12,multiply:multiply$12,mul:mul$1,scale:scale$12,Lt:dot$1,Nt:lerp$12,O:invert2,Qt:conjugate2,length:length$1,jt:len$1,vt:squaredLength$1,Yt:sqrLen$1,normalize:normalize$12,N:str$12,W:exactEquals$12,equals:equals$12}),len=length2,sub=subtract2,mul=multiply2,div=divide2,dist=distance2,sqrDist=squaredDistance2,sqrLen=squaredLength2,forEach=(()=>{var a=create2();return function(t,e,s,i,r,n){var h,o;for(e=e||2,s=s||0,o=i?Math.min(i*e+s,t.length):t.length,h=s;h<o;h+=e)a[0]=t[h],a[1]=t[h+1],r(a,a,n),t[h]=a[0],t[h+1]=a[1];return t}})(),vec2=Object.freeze({__proto__:null,create:create2,clone:clone2,M:fromValues2,A:copy2,set:set2,add:add2,$:subtract2,multiply:multiply2,bt:divide2,ceil:ceil2,floor:floor2,min:min2,max:max2,round:round2,scale:scale2,Ot:scaleAndAdd2,Gt:distance2,Pt:squaredDistance2,length:length2,vt:squaredLength2,xt:negate2,inverse:inverse2,normalize:normalize2,Lt:dot2,Dt:cross2,Nt:lerp2,random:random2,Se:transformMat22,ge:transformMat2d2,Wt:transformMat32,$t:transformMat42,rotate:rotate2,angle:angle2,Ht:zero2,N:str2,W:exactEquals2,equals:equals2,jt:len,sub:sub,mul:mul,div:div,Ut:dist,Xt:sqrDist,Yt:sqrLen,forEach:forEach}),globalThis._e=common,globalThis._e.Te=mat2,globalThis._e.ye=mat2d,globalThis._e.Ee=mat3,globalThis._e.Ie=mat4,globalThis._e.Ae=quat,globalThis._e.Me=quat2,globalThis._e.Re=vec2,globalThis._e.we=vec3,globalThis._e.Oe=vec4}var EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,GraphemeSplitter,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,asyncifyRequest,asyncifyTransaction,openReadOnlyTransaction,openWriteTransaction,lazyOpenDatabase,RequireString,getEntriesFromCursor,NOT_IMPLEMENTED,DISALLOW_CALLBACK,StructuredClone,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,CompareX,CompareY,IsOnScreen,IsOutsideLayout,PickDistance,SetX,SetY,SetPos,SetPosToObject,MoveForward,MoveAtAngle,GetX,GetY,GetDt,CompareWidth,CompareHeight,SetWidth,SetHeight,SetSize,GetWidth,GetHeight,GetBboxLeft,GetBboxTop,GetBboxRight,GetBboxBottom,GetBboxMidX,GetBboxMidY,IsAngleWithin,IsAngleClockwiseFrom,IsBetweenAngles,SetAngle,RotateClockwise,RotateCounterclockwise,RotateTowardAngle,RotateTowardPosition,SetTowardPosition,GetAngle,CompareOpacity,IsVisible,SetVisible,SetOpacity,SetDefaultColor,GetColor,GetOpacity,IsOnLayer,PickTopBottom,CompareZElevation,MoveToTop,MoveToBottom,MoveToLayer,ZMoveToObject,SetZElevation,LayerNumber,LayerName,ZIndex,ZElevation,TotalZElevation,IsEffectEnabled,SetEffectEnabled,SetEffectParam,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,OnCollision,IsOverlapping,IsOverlappingOffset,HasParent,HasChildren,PickParent,PickChildren,PickNthChild,CompareChildCount,AddChild,RemoveChild,RemoveFromParent,ChildCount,AllChildCount,SetMeshSize,SetMeshPoint,MeshColumns,MeshRows,SetElementVisible,SetElementCSSStyle,SetElementAttribute,RemoveElementAttribute,SetElementFocus,SetElementBlur,IsElementFocused,SetElementEnabled,IsElementEnabled,CompareInstanceVar,IsBoolInstanceVarSet,PickInstVarHiLow,PickByUID,PickByUID_Normal,PickByUID_Inverted,HasTags,Tags,TagsCount,TagAt,ChangeTags,Destroy,OnCreated,OnDestroyed,SetInstanceVar,AddInstanceVar,SubInstanceVar,SetBoolInstanceVar,ToggleBoolInstanceVar,LoadFromJsonString,AsJSON,ObjectTypeName,Count,PickedCount,GetIID,GetUID,OnInstanceSignal,InstanceSignal,InstanceWaitForSignal,TemplateName,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetTouchSdkInstance,IsExpressionType,GetParticleEngine,randomOffset,GetAudioSdkInstance,GetAudioDOMInterface,GetMouseSdkInstance,GetKeyboardSdkInstance,StringFromCharCode,Log,SetObjectTypeCollisionsEnabled,UnwrapIWorldInstance,CloneVec2,SplitConvexPolysOver8Points,SplitConvexPoly,C3,C3,C3,EasingFunctions,sdk_runtime,hsltorgb,colortohex,lerpcolor,lerphexcolor,lerpunlerp,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let GraphemeSplitter2=function(){function u(t,e){var s,i=t.charCodeAt(e=void 0===e?0:e);return 55296<=i&&i<=56319&&e<t.length-1?(s=i,56320<=(t=t.charCodeAt(e+1))&&t<=57343?1024*(s-55296)+(t-56320)+65536:s):56320<=i&&i<=57343&&1<=e?(s=t.charCodeAt(e-1),t=i,55296<=s&&s<=56319?1024*(s-55296)+(t-56320)+65536:t):i}function f(t){return 1536<=t&&t<=1541||1757==t||1807==t||2274==t||3406==t||69821==t||70082<=t&&t<=70083||72250==t||72326<=t&&t<=72329||73030==t?12:13==t?0:10==t?1:0<=t&&t<=9||11<=t&&t<=12||14<=t&&t<=31||127<=t&&t<=159||173==t||1564==t||6158==t||8203==t||8206<=t&&t<=8207||8232==t||8233==t||8234<=t&&t<=8238||8288<=t&&t<=8292||8293==t||8294<=t&&t<=8303||55296<=t&&t<=57343||65279==t||65520<=t&&t<=65528||65529<=t&&t<=65531||113824<=t&&t<=113827||119155<=t&&t<=119162||917504==t||917505==t||917506<=t&&t<=917535||917632<=t&&t<=917759||918e3<=t&&t<=921599?2:768<=t&&t<=879||1155<=t&&t<=1159||1160<=t&&t<=1161||1425<=t&&t<=1469||1471==t||1473<=t&&t<=1474||1476<=t&&t<=1477||1479==t||1552<=t&&t<=1562||1611<=t&&t<=1631||1648==t||1750<=t&&t<=1756||1759<=t&&t<=1764||1767<=t&&t<=1768||1770<=t&&t<=1773||1809==t||1840<=t&&t<=1866||1958<=t&&t<=1968||2027<=t&&t<=2035||2070<=t&&t<=2073||2075<=t&&t<=2083||2085<=t&&t<=2087||2089<=t&&t<=2093||2137<=t&&t<=2139||2260<=t&&t<=2273||2275<=t&&t<=2306||2362==t||2364==t||2369<=t&&t<=2376||2381==t||2385<=t&&t<=2391||2402<=t&&t<=2403||2433==t||2492==t||2494==t||2497<=t&&t<=2500||2509==t||2519==t||2530<=t&&t<=2531||2561<=t&&t<=2562||2620==t||2625<=t&&t<=2626||2631<=t&&t<=2632||2635<=t&&t<=2637||2641==t||2672<=t&&t<=2673||2677==t||2689<=t&&t<=2690||2748==t||2753<=t&&t<=2757||2759<=t&&t<=2760||2765==t||2786<=t&&t<=2787||2810<=t&&t<=2815||2817==t||2876==t||2878==t||2879==t||2881<=t&&t<=2884||2893==t||2902==t||2903==t||2914<=t&&t<=2915||2946==t||3006==t||3008==t||3021==t||3031==t||3072==t||3134<=t&&t<=3136||3142<=t&&t<=3144||3146<=t&&t<=3149||3157<=t&&t<=3158||3170<=t&&t<=3171||3201==t||3260==t||3263==t||3266==t||3270==t||3276<=t&&t<=3277||3285<=t&&t<=3286||3298<=t&&t<=3299||3328<=t&&t<=3329||3387<=t&&t<=3388||3390==t||3393<=t&&t<=3396||3405==t||3415==t||3426<=t&&t<=3427||3530==t||3535==t||3538<=t&&t<=3540||3542==t||3551==t||3633==t||3636<=t&&t<=3642||3655<=t&&t<=3662||3761==t||3764<=t&&t<=3769||3771<=t&&t<=3772||3784<=t&&t<=3789||3864<=t&&t<=3865||3893==t||3895==t||3897==t||3953<=t&&t<=3966||3968<=t&&t<=3972||3974<=t&&t<=3975||3981<=t&&t<=3991||3993<=t&&t<=4028||4038==t||4141<=t&&t<=4144||4146<=t&&t<=4151||4153<=t&&t<=4154||4157<=t&&t<=4158||4184<=t&&t<=4185||4190<=t&&t<=4192||4209<=t&&t<=4212||4226==t||4229<=t&&t<=4230||4237==t||4253==t||4957<=t&&t<=4959||5906<=t&&t<=5908||5938<=t&&t<=5940||5970<=t&&t<=5971||6002<=t&&t<=6003||6068<=t&&t<=6069||6071<=t&&t<=6077||6086==t||6089<=t&&t<=6099||6109==t||6155<=t&&t<=6157||6277<=t&&t<=6278||6313==t||6432<=t&&t<=6434||6439<=t&&t<=6440||6450==t||6457<=t&&t<=6459||6679<=t&&t<=6680||6683==t||6742==t||6744<=t&&t<=6750||6752==t||6754==t||6757<=t&&t<=6764||6771<=t&&t<=6780||6783==t||6832<=t&&t<=6845||6846==t||6912<=t&&t<=6915||6964==t||6966<=t&&t<=6970||6972==t||6978==t||7019<=t&&t<=7027||7040<=t&&t<=7041||7074<=t&&t<=7077||7080<=t&&t<=7081||7083<=t&&t<=7085||7142==t||7144<=t&&t<=7145||7149==t||7151<=t&&t<=7153||7212<=t&&t<=7219||7222<=t&&t<=7223||7376<=t&&t<=7378||7380<=t&&t<=7392||7394<=t&&t<=7400||7405==t||7412==t||7416<=t&&t<=7417||7616<=t&&t<=7673||7675<=t&&t<=7679||8204==t||8400<=t&&t<=8412||8413<=t&&t<=8416||8417==t||8418<=t&&t<=8420||8421<=t&&t<=8432||11503<=t&&t<=11505||11647==t||11744<=t&&t<=11775||12330<=t&&t<=12333||12334<=t&&t<=12335||12441<=t&&t<=12442||42607==t||42608<=t&&t<=42610||42612<=t&&t<=42621||42654<=t&&t<=42655||42736<=t&&t<=42737||43010==t||43014==t||43019==t||43045<=t&&t<=43046||43204<=t&&t<=43205||43232<=t&&t<=43249||43302<=t&&t<=43309||43335<=t&&t<=43345||43392<=t&&t<=43394||43443==t||43446<=t&&t<=43449||43452==t||43493==t||43561<=t&&t<=43566||43569<=t&&t<=43570||43573<=t&&t<=43574||43587==t||43596==t||43644==t||43696==t||43698<=t&&t<=43700||43703<=t&&t<=43704||43710<=t&&t<=43711||43713==t||43756<=t&&t<=43757||43766==t||44005==t||44008==t||44013==t||64286==t||65024<=t&&t<=65039||65056<=t&&t<=65071||65438<=t&&t<=65439||66045==t||66272==t||66422<=t&&t<=66426||68097<=t&&t<=68099||68101<=t&&t<=68102||68108<=t&&t<=68111||68152<=t&&t<=68154||68159==t||68325<=t&&t<=68326||69633==t||69688<=t&&t<=69702||69759<=t&&t<=69761||69811<=t&&t<=69814||69817<=t&&t<=69818||69888<=t&&t<=69890||69927<=t&&t<=69931||69933<=t&&t<=69940||70003==t||70016<=t&&t<=70017||70070<=t&&t<=70078||70090<=t&&t<=70092||70191<=t&&t<=70193||70196==t||70198<=t&&t<=70199||70206==t||70367==t||70371<=t&&t<=70378||70400<=t&&t<=70401||70460==t||70462==t||70464==t||70487==t||70502<=t&&t<=70508||70512<=t&&t<=70516||70712<=t&&t<=70719||70722<=t&&t<=70724||70726==t||70832==t||70835<=t&&t<=70840||70842==t||70845==t||70847<=t&&t<=70848||70850<=t&&t<=70851||71087==t||71090<=t&&t<=71093||71100<=t&&t<=71101||71103<=t&&t<=71104||71132<=t&&t<=71133||71219<=t&&t<=71226||71229==t||71231<=t&&t<=71232||71339==t||71341==t||71344<=t&&t<=71349||71351==t||71453<=t&&t<=71455||71458<=t&&t<=71461||71463<=t&&t<=71467||72193<=t&&t<=72198||72201<=t&&t<=72202||72243<=t&&t<=72248||72251<=t&&t<=72254||72263==t||72273<=t&&t<=72278||72281<=t&&t<=72283||72330<=t&&t<=72342||72344<=t&&t<=72345||72752<=t&&t<=72758||72760<=t&&t<=72765||72767==t||72850<=t&&t<=72871||72874<=t&&t<=72880||72882<=t&&t<=72883||72885<=t&&t<=72886||73009<=t&&t<=73014||73018==t||73020<=t&&t<=73021||73023<=t&&t<=73029||73031==t||92912<=t&&t<=92916||92976<=t&&t<=92982||94095<=t&&t<=94098||113821<=t&&t<=113822||119141==t||119143<=t&&t<=119145||119150<=t&&t<=119154||119163<=t&&t<=119170||119173<=t&&t<=119179||119210<=t&&t<=119213||119362<=t&&t<=119364||121344<=t&&t<=121398||121403<=t&&t<=121452||121461==t||121476==t||121499<=t&&t<=121503||121505<=t&&t<=121519||122880<=t&&t<=122886||122888<=t&&t<=122904||122907<=t&&t<=122913||122915<=t&&t<=122916||122918<=t&&t<=122922||125136<=t&&t<=125142||125252<=t&&t<=125258||917536<=t&&t<=917631||917760<=t&&t<=917999?3:127462<=t&&t<=127487?4:2307==t||2363==t||2366<=t&&t<=2368||2377<=t&&t<=2380||2382<=t&&t<=2383||2434<=t&&t<=2435||2495<=t&&t<=2496||2503<=t&&t<=2504||2507<=t&&t<=2508||2563==t||2622<=t&&t<=2624||2691==t||2750<=t&&t<=2752||2761==t||2763<=t&&t<=2764||2818<=t&&t<=2819||2880==t||2887<=t&&t<=2888||2891<=t&&t<=2892||3007==t||3009<=t&&t<=3010||3014<=t&&t<=3016||3018<=t&&t<=3020||3073<=t&&t<=3075||3137<=t&&t<=3140||3202<=t&&t<=3203||3262==t||3264<=t&&t<=3265||3267<=t&&t<=3268||3271<=t&&t<=3272||3274<=t&&t<=3275||3330<=t&&t<=3331||3391<=t&&t<=3392||3398<=t&&t<=3400||3402<=t&&t<=3404||3458<=t&&t<=3459||3536<=t&&t<=3537||3544<=t&&t<=3550||3570<=t&&t<=3571||3635==t||3763==t||3902<=t&&t<=3903||3967==t||4145==t||4155<=t&&t<=4156||4182<=t&&t<=4183||4228==t||6070==t||6078<=t&&t<=6085||6087<=t&&t<=6088||6435<=t&&t<=6438||6441<=t&&t<=6443||6448<=t&&t<=6449||6451<=t&&t<=6456||6681<=t&&t<=6682||6741==t||6743==t||6765<=t&&t<=6770||6916==t||6965==t||6971==t||6973<=t&&t<=6977||6979<=t&&t<=6980||7042==t||7073==t||7078<=t&&t<=7079||7082==t||7143==t||7146<=t&&t<=7148||7150==t||7154<=t&&t<=7155||7204<=t&&t<=7211||7220<=t&&t<=7221||7393==t||7410<=t&&t<=7411||7415==t||43043<=t&&t<=43044||43047==t||43136<=t&&t<=43137||43188<=t&&t<=43203||43346<=t&&t<=43347||43395==t||43444<=t&&t<=43445||43450<=t&&t<=43451||43453<=t&&t<=43456||43567<=t&&t<=43568||43571<=t&&t<=43572||43597==t||43755==t||43758<=t&&t<=43759||43765==t||44003<=t&&t<=44004||44006<=t&&t<=44007||44009<=t&&t<=44010||44012==t||69632==t||69634==t||69762==t||69808<=t&&t<=69810||69815<=t&&t<=69816||69932==t||70018==t||70067<=t&&t<=70069||70079<=t&&t<=70080||70188<=t&&t<=70190||70194<=t&&t<=70195||70197==t||70368<=t&&t<=70370||70402<=t&&t<=70403||70463==t||70465<=t&&t<=70468||70471<=t&&t<=70472||70475<=t&&t<=70477||70498<=t&&t<=70499||70709<=t&&t<=70711||70720<=t&&t<=70721||70725==t||70833<=t&&t<=70834||70841==t||70843<=t&&t<=70844||70846==t||70849==t||71088<=t&&t<=71089||71096<=t&&t<=71099||71102==t||71216<=t&&t<=71218||71227<=t&&t<=71228||71230==t||71340==t||71342<=t&&t<=71343||71350==t||71456<=t&&t<=71457||71462==t||72199<=t&&t<=72200||72249==t||72279<=t&&t<=72280||72343==t||72751==t||72766==t||72873==t||72881==t||72884==t||94033<=t&&t<=94078||119142==t||119149==t?5:4352<=t&&t<=4447||43360<=t&&t<=43388?6:4448<=t&&t<=4519||55216<=t&&t<=55238?7:4520<=t&&t<=4607||55243<=t&&t<=55291?8:44032==t||44060==t||44088==t||44116==t||44144==t||44172==t||44200==t||44228==t||44256==t||44284==t||44312==t||44340==t||44368==t||44396==t||44424==t||44452==t||44480==t||44508==t||44536==t||44564==t||44592==t||44620==t||44648==t||44676==t||44704==t||44732==t||44760==t||44788==t||44816==t||44844==t||44872==t||44900==t||44928==t||44956==t||44984==t||45012==t||45040==t||45068==t||45096==t||45124==t||45152==t||45180==t||45208==t||45236==t||45264==t||45292==t||45320==t||45348==t||45376==t||45404==t||45432==t||45460==t||45488==t||45516==t||45544==t||45572==t||45600==t||45628==t||45656==t||45684==t||45712==t||45740==t||45768==t||45796==t||45824==t||45852==t||45880==t||45908==t||45936==t||45964==t||45992==t||46020==t||46048==t||46076==t||46104==t||46132==t||46160==t||46188==t||46216==t||46244==t||46272==t||46300==t||46328==t||46356==t||46384==t||46412==t||46440==t||46468==t||46496==t||46524==t||46552==t||46580==t||46608==t||46636==t||46664==t||46692==t||46720==t||46748==t||46776==t||46804==t||46832==t||46860==t||46888==t||46916==t||46944==t||46972==t||47e3==t||47028==t||47056==t||47084==t||47112==t||47140==t||47168==t||47196==t||47224==t||47252==t||47280==t||47308==t||47336==t||47364==t||47392==t||47420==t||47448==t||47476==t||47504==t||47532==t||47560==t||47588==t||47616==t||47644==t||47672==t||47700==t||47728==t||47756==t||47784==t||47812==t||47840==t||47868==t||47896==t||47924==t||47952==t||47980==t||48008==t||48036==t||48064==t||48092==t||48120==t||48148==t||48176==t||48204==t||48232==t||48260==t||48288==t||48316==t||48344==t||48372==t||48400==t||48428==t||48456==t||48484==t||48512==t||48540==t||48568==t||48596==t||48624==t||48652==t||48680==t||48708==t||48736==t||48764==t||48792==t||48820==t||48848==t||48876==t||48904==t||48932==t||48960==t||48988==t||49016==t||49044==t||49072==t||49100==t||49128==t||49156==t||49184==t||49212==t||49240==t||49268==t||49296==t||49324==t||49352==t||49380==t||49408==t||49436==t||49464==t||49492==t||49520==t||49548==t||49576==t||49604==t||49632==t||49660==t||49688==t||49716==t||49744==t||49772==t||49800==t||49828==t||49856==t||49884==t||49912==t||49940==t||49968==t||49996==t||50024==t||50052==t||50080==t||50108==t||50136==t||50164==t||50192==t||50220==t||50248==t||50276==t||50304==t||50332==t||50360==t||50388==t||50416==t||50444==t||50472==t||50500==t||50528==t||50556==t||50584==t||50612==t||50640==t||50668==t||50696==t||50724==t||50752==t||50780==t||50808==t||50836==t||50864==t||50892==t||50920==t||50948==t||50976==t||51004==t||51032==t||51060==t||51088==t||51116==t||51144==t||51172==t||51200==t||51228==t||51256==t||51284==t||51312==t||51340==t||51368==t||51396==t||51424==t||51452==t||51480==t||51508==t||51536==t||51564==t||51592==t||51620==t||51648==t||51676==t||51704==t||51732==t||51760==t||51788==t||51816==t||51844==t||51872==t||51900==t||51928==t||51956==t||51984==t||52012==t||52040==t||52068==t||52096==t||52124==t||52152==t||52180==t||52208==t||52236==t||52264==t||52292==t||52320==t||52348==t||52376==t||52404==t||52432==t||52460==t||52488==t||52516==t||52544==t||52572==t||52600==t||52628==t||52656==t||52684==t||52712==t||52740==t||52768==t||52796==t||52824==t||52852==t||52880==t||52908==t||52936==t||52964==t||52992==t||53020==t||53048==t||53076==t||53104==t||53132==t||53160==t||53188==t||53216==t||53244==t||53272==t||53300==t||53328==t||53356==t||53384==t||53412==t||53440==t||53468==t||53496==t||53524==t||53552==t||53580==t||53608==t||53636==t||53664==t||53692==t||53720==t||53748==t||53776==t||53804==t||53832==t||53860==t||53888==t||53916==t||53944==t||53972==t||54e3==t||54028==t||54056==t||54084==t||54112==t||54140==t||54168==t||54196==t||54224==t||54252==t||54280==t||54308==t||54336==t||54364==t||54392==t||54420==t||54448==t||54476==t||54504==t||54532==t||54560==t||54588==t||54616==t||54644==t||54672==t||54700==t||54728==t||54756==t||54784==t||54812==t||54840==t||54868==t||54896==t||54924==t||54952==t||54980==t||55008==t||55036==t||55064==t||55092==t||55120==t||55148==t||55176==t?9:44033<=t&&t<=44059||44061<=t&&t<=44087||44089<=t&&t<=44115||44117<=t&&t<=44143||44145<=t&&t<=44171||44173<=t&&t<=44199||44201<=t&&t<=44227||44229<=t&&t<=44255||44257<=t&&t<=44283||44285<=t&&t<=44311||44313<=t&&t<=44339||44341<=t&&t<=44367||44369<=t&&t<=44395||44397<=t&&t<=44423||44425<=t&&t<=44451||44453<=t&&t<=44479||44481<=t&&t<=44507||44509<=t&&t<=44535||44537<=t&&t<=44563||44565<=t&&t<=44591||44593<=t&&t<=44619||44621<=t&&t<=44647||44649<=t&&t<=44675||44677<=t&&t<=44703||44705<=t&&t<=44731||44733<=t&&t<=44759||44761<=t&&t<=44787||44789<=t&&t<=44815||44817<=t&&t<=44843||44845<=t&&t<=44871||44873<=t&&t<=44899||44901<=t&&t<=44927||44929<=t&&t<=44955||44957<=t&&t<=44983||44985<=t&&t<=45011||45013<=t&&t<=45039||45041<=t&&t<=45067||45069<=t&&t<=45095||45097<=t&&t<=45123||45125<=t&&t<=45151||45153<=t&&t<=45179||45181<=t&&t<=45207||45209<=t&&t<=45235||45237<=t&&t<=45263||45265<=t&&t<=45291||45293<=t&&t<=45319||45321<=t&&t<=45347||45349<=t&&t<=45375||45377<=t&&t<=45403||45405<=t&&t<=45431||45433<=t&&t<=45459||45461<=t&&t<=45487||45489<=t&&t<=45515||45517<=t&&t<=45543||45545<=t&&t<=45571||45573<=t&&t<=45599||45601<=t&&t<=45627||45629<=t&&t<=45655||45657<=t&&t<=45683||45685<=t&&t<=45711||45713<=t&&t<=45739||45741<=t&&t<=45767||45769<=t&&t<=45795||45797<=t&&t<=45823||45825<=t&&t<=45851||45853<=t&&t<=45879||45881<=t&&t<=45907||45909<=t&&t<=45935||45937<=t&&t<=45963||45965<=t&&t<=45991||45993<=t&&t<=46019||46021<=t&&t<=46047||46049<=t&&t<=46075||46077<=t&&t<=46103||46105<=t&&t<=46131||46133<=t&&t<=46159||46161<=t&&t<=46187||46189<=t&&t<=46215||46217<=t&&t<=46243||46245<=t&&t<=46271||46273<=t&&t<=46299||46301<=t&&t<=46327||46329<=t&&t<=46355||46357<=t&&t<=46383||46385<=t&&t<=46411||46413<=t&&t<=46439||46441<=t&&t<=46467||46469<=t&&t<=46495||46497<=t&&t<=46523||46525<=t&&t<=46551||46553<=t&&t<=46579||46581<=t&&t<=46607||46609<=t&&t<=46635||46637<=t&&t<=46663||46665<=t&&t<=46691||46693<=t&&t<=46719||46721<=t&&t<=46747||46749<=t&&t<=46775||46777<=t&&t<=46803||46805<=t&&t<=46831||46833<=t&&t<=46859||46861<=t&&t<=46887||46889<=t&&t<=46915||46917<=t&&t<=46943||46945<=t&&t<=46971||46973<=t&&t<=46999||47001<=t&&t<=47027||47029<=t&&t<=47055||47057<=t&&t<=47083||47085<=t&&t<=47111||47113<=t&&t<=47139||47141<=t&&t<=47167||47169<=t&&t<=47195||47197<=t&&t<=47223||47225<=t&&t<=47251||47253<=t&&t<=47279||47281<=t&&t<=47307||47309<=t&&t<=47335||47337<=t&&t<=47363||47365<=t&&t<=47391||47393<=t&&t<=47419||47421<=t&&t<=47447||47449<=t&&t<=47475||47477<=t&&t<=47503||47505<=t&&t<=47531||47533<=t&&t<=47559||47561<=t&&t<=47587||47589<=t&&t<=47615||47617<=t&&t<=47643||47645<=t&&t<=47671||47673<=t&&t<=47699||47701<=t&&t<=47727||47729<=t&&t<=47755||47757<=t&&t<=47783||47785<=t&&t<=47811||47813<=t&&t<=47839||47841<=t&&t<=47867||47869<=t&&t<=47895||47897<=t&&t<=47923||47925<=t&&t<=47951||47953<=t&&t<=47979||47981<=t&&t<=48007||48009<=t&&t<=48035||48037<=t&&t<=48063||48065<=t&&t<=48091||48093<=t&&t<=48119||48121<=t&&t<=48147||48149<=t&&t<=48175||48177<=t&&t<=48203||48205<=t&&t<=48231||48233<=t&&t<=48259||48261<=t&&t<=48287||48289<=t&&t<=48315||48317<=t&&t<=48343||48345<=t&&t<=48371||48373<=t&&t<=48399||48401<=t&&t<=48427||48429<=t&&t<=48455||48457<=t&&t<=48483||48485<=t&&t<=48511||48513<=t&&t<=48539||48541<=t&&t<=48567||48569<=t&&t<=48595||48597<=t&&t<=48623||48625<=t&&t<=48651||48653<=t&&t<=48679||48681<=t&&t<=48707||48709<=t&&t<=48735||48737<=t&&t<=48763||48765<=t&&t<=48791||48793<=t&&t<=48819||48821<=t&&t<=48847||48849<=t&&t<=48875||48877<=t&&t<=48903||48905<=t&&t<=48931||48933<=t&&t<=48959||48961<=t&&t<=48987||48989<=t&&t<=49015||49017<=t&&t<=49043||49045<=t&&t<=49071||49073<=t&&t<=49099||49101<=t&&t<=49127||49129<=t&&t<=49155||49157<=t&&t<=49183||49185<=t&&t<=49211||49213<=t&&t<=49239||49241<=t&&t<=49267||49269<=t&&t<=49295||49297<=t&&t<=49323||49325<=t&&t<=49351||49353<=t&&t<=49379||49381<=t&&t<=49407||49409<=t&&t<=49435||49437<=t&&t<=49463||49465<=t&&t<=49491||49493<=t&&t<=49519||49521<=t&&t<=49547||49549<=t&&t<=49575||49577<=t&&t<=49603||49605<=t&&t<=49631||49633<=t&&t<=49659||49661<=t&&t<=49687||49689<=t&&t<=49715||49717<=t&&t<=49743||49745<=t&&t<=49771||49773<=t&&t<=49799||49801<=t&&t<=49827||49829<=t&&t<=49855||49857<=t&&t<=49883||49885<=t&&t<=49911||49913<=t&&t<=49939||49941<=t&&t<=49967||49969<=t&&t<=49995||49997<=t&&t<=50023||50025<=t&&t<=50051||50053<=t&&t<=50079||50081<=t&&t<=50107||50109<=t&&t<=50135||50137<=t&&t<=50163||50165<=t&&t<=50191||50193<=t&&t<=50219||50221<=t&&t<=50247||50249<=t&&t<=50275||50277<=t&&t<=50303||50305<=t&&t<=50331||50333<=t&&t<=50359||50361<=t&&t<=50387||50389<=t&&t<=50415||50417<=t&&t<=50443||50445<=t&&t<=50471||50473<=t&&t<=50499||50501<=t&&t<=50527||50529<=t&&t<=50555||50557<=t&&t<=50583||50585<=t&&t<=50611||50613<=t&&t<=50639||50641<=t&&t<=50667||50669<=t&&t<=50695||50697<=t&&t<=50723||50725<=t&&t<=50751||50753<=t&&t<=50779||50781<=t&&t<=50807||50809<=t&&t<=50835||50837<=t&&t<=50863||50865<=t&&t<=50891||50893<=t&&t<=50919||50921<=t&&t<=50947||50949<=t&&t<=50975||50977<=t&&t<=51003||51005<=t&&t<=51031||51033<=t&&t<=51059||51061<=t&&t<=51087||51089<=t&&t<=51115||51117<=t&&t<=51143||51145<=t&&t<=51171||51173<=t&&t<=51199||51201<=t&&t<=51227||51229<=t&&t<=51255||51257<=t&&t<=51283||51285<=t&&t<=51311||51313<=t&&t<=51339||51341<=t&&t<=51367||51369<=t&&t<=51395||51397<=t&&t<=51423||51425<=t&&t<=51451||51453<=t&&t<=51479||51481<=t&&t<=51507||51509<=t&&t<=51535||51537<=t&&t<=51563||51565<=t&&t<=51591||51593<=t&&t<=51619||51621<=t&&t<=51647||51649<=t&&t<=51675||51677<=t&&t<=51703||51705<=t&&t<=51731||51733<=t&&t<=51759||51761<=t&&t<=51787||51789<=t&&t<=51815||51817<=t&&t<=51843||51845<=t&&t<=51871||51873<=t&&t<=51899||51901<=t&&t<=51927||51929<=t&&t<=51955||51957<=t&&t<=51983||51985<=t&&t<=52011||52013<=t&&t<=52039||52041<=t&&t<=52067||52069<=t&&t<=52095||52097<=t&&t<=52123||52125<=t&&t<=52151||52153<=t&&t<=52179||52181<=t&&t<=52207||52209<=t&&t<=52235||52237<=t&&t<=52263||52265<=t&&t<=52291||52293<=t&&t<=52319||52321<=t&&t<=52347||52349<=t&&t<=52375||52377<=t&&t<=52403||52405<=t&&t<=52431||52433<=t&&t<=52459||52461<=t&&t<=52487||52489<=t&&t<=52515||52517<=t&&t<=52543||52545<=t&&t<=52571||52573<=t&&t<=52599||52601<=t&&t<=52627||52629<=t&&t<=52655||52657<=t&&t<=52683||52685<=t&&t<=52711||52713<=t&&t<=52739||52741<=t&&t<=52767||52769<=t&&t<=52795||52797<=t&&t<=52823||52825<=t&&t<=52851||52853<=t&&t<=52879||52881<=t&&t<=52907||52909<=t&&t<=52935||52937<=t&&t<=52963||52965<=t&&t<=52991||52993<=t&&t<=53019||53021<=t&&t<=53047||53049<=t&&t<=53075||53077<=t&&t<=53103||53105<=t&&t<=53131||53133<=t&&t<=53159||53161<=t&&t<=53187||53189<=t&&t<=53215||53217<=t&&t<=53243||53245<=t&&t<=53271||53273<=t&&t<=53299||53301<=t&&t<=53327||53329<=t&&t<=53355||53357<=t&&t<=53383||53385<=t&&t<=53411||53413<=t&&t<=53439||53441<=t&&t<=53467||53469<=t&&t<=53495||53497<=t&&t<=53523||53525<=t&&t<=53551||53553<=t&&t<=53579||53581<=t&&t<=53607||53609<=t&&t<=53635||53637<=t&&t<=53663||53665<=t&&t<=53691||53693<=t&&t<=53719||53721<=t&&t<=53747||53749<=t&&t<=53775||53777<=t&&t<=53803||53805<=t&&t<=53831||53833<=t&&t<=53859||53861<=t&&t<=53887||53889<=t&&t<=53915||53917<=t&&t<=53943||53945<=t&&t<=53971||53973<=t&&t<=53999||54001<=t&&t<=54027||54029<=t&&t<=54055||54057<=t&&t<=54083||54085<=t&&t<=54111||54113<=t&&t<=54139||54141<=t&&t<=54167||54169<=t&&t<=54195||54197<=t&&t<=54223||54225<=t&&t<=54251||54253<=t&&t<=54279||54281<=t&&t<=54307||54309<=t&&t<=54335||54337<=t&&t<=54363||54365<=t&&t<=54391||54393<=t&&t<=54419||54421<=t&&t<=54447||54449<=t&&t<=54475||54477<=t&&t<=54503||54505<=t&&t<=54531||54533<=t&&t<=54559||54561<=t&&t<=54587||54589<=t&&t<=54615||54617<=t&&t<=54643||54645<=t&&t<=54671||54673<=t&&t<=54699||54701<=t&&t<=54727||54729<=t&&t<=54755||54757<=t&&t<=54783||54785<=t&&t<=54811||54813<=t&&t<=54839||54841<=t&&t<=54867||54869<=t&&t<=54895||54897<=t&&t<=54923||54925<=t&&t<=54951||54953<=t&&t<=54979||54981<=t&&t<=55007||55009<=t&&t<=55035||55037<=t&&t<=55063||55065<=t&&t<=55091||55093<=t&&t<=55119||55121<=t&&t<=55147||55149<=t&&t<=55175||55177<=t&&t<=55203?10:9757==t||9977==t||9994<=t&&t<=9997||127877==t||127938<=t&&t<=127940||127943==t||127946<=t&&t<=127948||128066<=t&&t<=128067||128070<=t&&t<=128080||128110==t||128112<=t&&t<=128120||128124==t||128129<=t&&t<=128131||128133<=t&&t<=128135||128170==t||128372<=t&&t<=128373||128378==t||128400==t||128405<=t&&t<=128406||128581<=t&&t<=128583||128587<=t&&t<=128591||128675==t||128692<=t&&t<=128694||128704==t||128716==t||129304<=t&&t<=129308||129310<=t&&t<=129311||129318==t||129328<=t&&t<=129337||129341<=t&&t<=129342||129489<=t&&t<=129501?13:127995<=t&&t<=127999?14:8205==t?15:9792==t||9794==t||9877<=t&&t<=9878||9992==t||10084==t||127752==t||127806==t||127859==t||127891==t||127908==t||127912==t||127979==t||127981==t||128139==t||128187<=t&&t<=128188||128295==t||128300==t||128488==t||128640==t||128658==t?16:128102<=t&&t<=128105?17:11}return this.Ge=function(t,e){if((e=void 0===e?0:e)<0)return 0;if(!(e>=t.length-1)){var s,i,r,n,h,o=f(u(t,e)),a=[];for(e+=1;e<t.length;e++){var l=t,c=e-1;if(!(55296<=l.charCodeAt(c)&&l.charCodeAt(c)<=56319&&56320<=l.charCodeAt(1+c)&&l.charCodeAt(1+c)<=57343)){if(l=f(u(t,e)),c=l,h=n=r=void 0,r=[s=o].concat(i=a).concat([c]),n=r[r.length-2],1<(h=r.lastIndexOf(14))&&r.slice(1,h).every(function(t){return 3==t})&&-1==[3,13,17].indexOf(s)||(0<(s=r.lastIndexOf(4))&&r.slice(1,s).every(function(t){return 4==t})&&-1==[12,4].indexOf(n)?(r.filter(function(t){return 4==t}).length,1):(0!=n||1!=c)&&(2==n||0==n||1==n?(14==c&&i.every(function(t){return 3==t}),1):2==c||0==c||1==c||(6!=n||6!=c&&7!=c&&9!=c&&10!=c)&&(9!=n&&7!=n||7!=c&&8!=c)&&(10!=n&&8!=n||8!=c)&&3!=c&&15!=c&&5!=c&&12!=n&&(s=-1!=r.indexOf(3)?r.lastIndexOf(3)-1:r.length-2,!(-1!=[13,17].indexOf(r[s])&&r.slice(s+1,-1).every(function(t){return 3==t})&&14==c||15==n&&-1!=[16,17].indexOf(c)||-1==i.indexOf(4)&&4==n&&4==c)))))return e;a.push(l)}}}return t.length},this.Pe=function(t){for(var e,s=[],i=0;(e=this.Ge(t,i))<t.length;)s.push(t.slice(i,e)),i=e;return i<t.length&&s.push(t.slice(i)),s},this.ve=function(s){var i=0,t={next:function(){var t,e;return(t=this.Ge(s,i))<s.length?(e=s.slice(i,t),i=t,{value:e,done:!1}):i<s.length?(e=s.slice(i),i=s.length,{value:e,done:!1}):{value:void 0,done:!0}}.bind(this)};return"undefined"!=typeof Symbol&&Symbol.iterator&&(t[Symbol.iterator]=function(){return t}),t},this.xe=function(t){for(var e,s=0,i=0;(e=this.Ge(t,i))<t.length;)i=e,s++;return i<t.length&&s++,s},this};GraphemeSplitter=GraphemeSplitter2,self.Le=GraphemeSplitter2}{let lineInt2=function(t,e,s){s=s||0;var i=[0,0],r=t[1][1]-t[0][1],n=t[0][0]-t[1][0],t=r*t[0][0]+n*t[0][1],h=e[1][1]-e[0][1],o=e[0][0]-e[1][0],e=h*e[0][0]+o*e[0][1],a=r*o-h*n;return scalar_eq2(a,0,s)||(i[0]=(o*t-n*e)/a,i[1]=(r*e-h*t)/a),i},lineSegmentsIntersect2=function(t,e,s,i){var r,n=e[0]-t[0],e=e[1]-t[1],h=i[0]-s[0],i=i[1]-s[1];return h*e-i*n!=0&&(r=(h*(t[1]-s[1])+i*(s[0]-t[0]))/(i*n-h*e),0<=(t=(n*(s[1]-t[1])+e*(t[0]-s[0]))/(h*e-i*n)))&&t<=1&&0<=r&&r<=1},triangleArea2=function(t,e,s){return(e[0]-t[0])*(s[1]-t[1])-(s[0]-t[0])*(e[1]-t[1])},isLeft2=function(t,e,s){return 0<triangleArea2(t,e,s)},isLeftOn2=function(t,e,s){return 0<=triangleArea2(t,e,s)},isRight2=function(t,e,s){return triangleArea2(t,e,s)<0},isRightOn2=function(t,e,s){return triangleArea2(t,e,s)<=0},collinear2=function(t,e,s,i){var r,n,h;return i?(h=tmpPoint2,(n=tmpPoint1)[0]=e[0]-t[0],n[1]=e[1]-t[1],h[0]=s[0]-e[0],h[1]=s[1]-e[1],r=n[0]*h[0]+n[1]*h[1],n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),h=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Math.acos(r/(n*h))<i):0===triangleArea2(t,e,s)},sqdist2=function(t,e){var s=e[0]-t[0],e=e[1]-t[1];return s*s+e*e},polygonAt2=function(t,e){var s=t.length;return t[e<0?e%s+s:e%s]},polygonClear2=function(t){t.length=0},polygonAppend2=function(t,e,s,i){for(var r=s;r<i;r++)t.push(e[r])},polygonMakeCCW2=function(t){for(var e=0,s=t,i=1;i<t.length;++i)(s[i][1]<s[e][1]||s[i][1]===s[e][1]&&s[i][0]>s[e][0])&&(e=i);return!isLeft2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,e+1))&&(polygonReverse2(t),!0)},polygonReverse2=function(t){for(var e=[],s=t.length,i=0;i!==s;i++)e.push(t.pop());for(i=0;i!==s;i++)t[i]=e[i]},polygonIsReflex2=function(t,e){return isRight2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,e+1))},polygonCanSee3=function(t,e,s){var i,r=tmpLine1,n=tmpLine2;if(isLeftOn2(polygonAt2(t,e+1),polygonAt2(t,e),polygonAt2(t,s))&&isRightOn2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,s)))return!1;for(var h=sqdist2(polygonAt2(t,e),polygonAt2(t,s)),o=0;o!==t.length;++o)if((o+1)%t.length!==e&&o!==e&&isLeftOn2(polygonAt2(t,e),polygonAt2(t,s),polygonAt2(t,o+1))&&isRightOn2(polygonAt2(t,e),polygonAt2(t,s),polygonAt2(t,o))&&(r[0]=polygonAt2(t,e),r[1]=polygonAt2(t,s),n[0]=polygonAt2(t,o),n[1]=polygonAt2(t,o+1),i=lineInt2(r,n),sqdist2(polygonAt2(t,e),i)<h))return!1;return!0},polygonCanSee22=function(t,e,s){for(var i=0;i!==t.length;++i)if(i!==e&&i!==s&&(i+1)%t.length!==e&&(i+1)%t.length!==s&&lineSegmentsIntersect2(polygonAt2(t,e),polygonAt2(t,s),polygonAt2(t,i),polygonAt2(t,i+1)))return!1;return!0},polygonCopy2=function(t,e,s,i){var r=i||[];if(polygonClear2(r),e<s)for(var n=e;n<=s;n++)r.push(t[n]);else{for(n=0;n<=s;n++)r.push(t[n]);for(n=e;n<t.length;n++)r.push(t[n])}return r},polygonGetCutEdges2=function(t){for(var e=[],s=[],i=[],r=Number.MAX_VALUE,n=0;n<t.length;++n)if(polygonIsReflex2(t,n))for(var h=0;h<t.length;++h)if(polygonCanSee3(t,n,h)){for(var s=polygonGetCutEdges2(polygonCopy2(t,n,h,i)),o=polygonGetCutEdges2(polygonCopy2(t,h,n,i)),a=0;a<o.length;a++)s.push(o[a]);s.length<r&&(r=(e=s).length,e.push([polygonAt2(t,n),polygonAt2(t,h)]))}return e},polygonDecomp2=function(t){var e=polygonGetCutEdges2(t);return 0<e.length?polygonSlice2(t,e):[t]},polygonSlice2=function(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var s=[t],i=0;i<e.length;i++)for(var r=e[i],n=0;n<s.length;n++){var h=s[n],h=polygonSlice2(h,r);if(h){s.splice(n,1),s.push(h[0],h[1]);break}}return s}return i=t.indexOf((r=e)[0]),n=t.indexOf(r[1]),-1!==i&&-1!==n&&[polygonCopy2(t,i,n),polygonCopy2(t,n,i)]},polygonIsSimple2=function(t){for(var e=t,s=0;s<e.length-1;s++)for(var i=0;i<s-1;i++)if(lineSegmentsIntersect2(e[s],e[s+1],e[i],e[i+1]))return!1;for(s=1;s<e.length-2;s++)if(lineSegmentsIntersect2(e[0],e[e.length-1],e[s],e[s+1]))return!1;return!0},getIntersectionPoint2=function(t,e,s,i,r){r=r||0;var n=e[1]-t[1],e=t[0]-e[0],t=n*t[0]+e*t[1],h=i[1]-s[1],i=s[0]-i[0],s=h*s[0]+i*s[1],o=n*i-h*e;return scalar_eq2(o,0,r)?[0,0]:[(i*t-e*s)/o,(n*s-h*t)/o]},polygonQuickDecomp2=function(t,e,s,i,r,n,h){n=n||100,h=h||0,r=r||25,e=void 0!==e?e:[],s=s||[],i=i||[];var o=[0,0],a=[0,0],l=[0,0],c=0,u=0,f=0,d=0,p=0,C=0,m=0,S=[],g=[],_=t,T=t;if(!(T.length<3))if(n<++h)console.warn("quickDecomp: max level ("+n+") reached.");else{for(var y=0;y<t.length;++y)if(polygonIsReflex2(_,y)){s.push(_[y]);for(var c=u=Number.MAX_VALUE,E=0;E<t.length;++E)isLeft2(polygonAt2(_,y-1),polygonAt2(_,y),polygonAt2(_,E))&&isRightOn2(polygonAt2(_,y-1),polygonAt2(_,y),polygonAt2(_,E-1))&&(l=getIntersectionPoint2(polygonAt2(_,y-1),polygonAt2(_,y),polygonAt2(_,E),polygonAt2(_,E-1)),isRight2(polygonAt2(_,y+1),polygonAt2(_,y),l))&&(f=sqdist2(_[y],l))<u&&(u=f,a=l,C=E),isLeft2(polygonAt2(_,y+1),polygonAt2(_,y),polygonAt2(_,E+1))&&isRightOn2(polygonAt2(_,y+1),polygonAt2(_,y),polygonAt2(_,E))&&(l=getIntersectionPoint2(polygonAt2(_,y+1),polygonAt2(_,y),polygonAt2(_,E),polygonAt2(_,E+1)),isLeft2(polygonAt2(_,y-1),polygonAt2(_,y),l))&&(f=sqdist2(_[y],l))<c&&(c=f,o=l,p=E);if(C===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,i.push(l),y<p?(polygonAppend2(S,_,y,p+1),S.push(l),g.push(l),0!==C&&polygonAppend2(g,_,C,_.length),polygonAppend2(g,_,0,y+1)):(0!==y&&polygonAppend2(S,_,y,_.length),polygonAppend2(S,_,0,p+1),S.push(l),g.push(l),polygonAppend2(g,_,C,y+1));else{if(p<C&&(p+=t.length),d=Number.MAX_VALUE,p<C)return e;for(E=C;E<=p;++E)isLeftOn2(polygonAt2(_,y-1),polygonAt2(_,y),polygonAt2(_,E))&&isRightOn2(polygonAt2(_,y+1),polygonAt2(_,y),polygonAt2(_,E))&&(f=sqdist2(polygonAt2(_,y),polygonAt2(_,E)))<d&&polygonCanSee22(_,y,E)&&(d=f,m=E%t.length);y<m?(polygonAppend2(S,_,y,m+1),0!==m&&polygonAppend2(g,_,m,T.length),polygonAppend2(g,_,0,y+1)):(0!==y&&polygonAppend2(S,_,y,T.length),polygonAppend2(S,_,0,m+1),polygonAppend2(g,_,m,y+1))}return S.length<g.length?(polygonQuickDecomp2(S,e,s,i,r,n,h),polygonQuickDecomp2(g,e,s,i,r,n,h)):(polygonQuickDecomp2(g,e,s,i,r,n,h),polygonQuickDecomp2(S,e,s,i,r,n,h)),e}e.push(t)}return e},polygonRemoveCollinearPoints2=function(t,e){for(var s=0,i=t.length-1;3<t.length&&0<=i;--i)collinear2(polygonAt2(t,i-1),polygonAt2(t,i),polygonAt2(t,i+1),e)&&(t.splice(i%t.length,1),s++);return s},polygonRemoveDuplicatePoints2=function(t,e){for(var s=t.length-1;1<=s;--s)for(var i=t[s],r=s-1;0<=r;--r)if(points_eq2(i,t[r],e)){t.splice(s,1);continue}},scalar_eq2=function(t,e,s){return s=s||0,Math.abs(t-e)<=s},points_eq2=function(t,e,s){return scalar_eq2(t[0],e[0],s)&&scalar_eq2(t[1],e[1],s)};lineInt=lineInt2,lineSegmentsIntersect=lineSegmentsIntersect2,triangleArea=triangleArea2,isLeft=isLeft2,isLeftOn=isLeftOn2,isRight=isRight2,isRightOn=isRightOn2,collinear=collinear2,sqdist=sqdist2,polygonAt=polygonAt2,polygonClear=polygonClear2,polygonAppend=polygonAppend2,polygonMakeCCW=polygonMakeCCW2,polygonReverse=polygonReverse2,polygonIsReflex=polygonIsReflex2,polygonCanSee=polygonCanSee3,polygonCanSee2=polygonCanSee22,polygonCopy=polygonCopy2,polygonGetCutEdges=polygonGetCutEdges2,polygonDecomp=polygonDecomp2,polygonSlice=polygonSlice2,polygonIsSimple=polygonIsSimple2,getIntersectionPoint=getIntersectionPoint2,polygonQuickDecomp=polygonQuickDecomp2,polygonRemoveCollinearPoints=polygonRemoveCollinearPoints2,polygonRemoveDuplicatePoints=polygonRemoveDuplicatePoints2,scalar_eq=scalar_eq2,points_eq=points_eq2,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.De={Ne:polygonDecomp2,Fe:polygonQuickDecomp2,Be:polygonIsSimple2,ke:polygonRemoveCollinearPoints2,$e:polygonRemoveDuplicatePoints2,We:polygonMakeCCW2}}{let isReady=!1,hasAppStarted=!1,buildMode="dev",internalApiToken=Symbol("Construct internal API token"),internalApiTokenAccessesRemaining=14,C33=self.Ve=class C3{constructor(){throw TypeError("static class can't be instantiated")}static He(){if(internalApiTokenAccessesRemaining<=0)throw new Error("cannot obtain internal API token");return--internalApiTokenAccessesRemaining,internalApiToken}static Ue(){isReady=!0}static Xe(){return isReady}static je(){hasAppStarted=!0}static Ye(){return hasAppStarted}static qe(t){buildMode=t}static Je(){return buildMode}static Ke(){return"final"===buildMode}};C33.isDebug=!1,C33.Ze=!1,C33.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Qe={}}{const C33=self.Ve;C33.ts=class QueryParser{constructor(t){this.es=t,this.ss=new Map,this.ns()}ns(){let t=this.es,e=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const s of e)this.hs(s)}hs(t){if(t)if(t.includes("=")){const e=t.indexOf("="),s=decodeURIComponent(t.substring(0,e)),i=decodeURIComponent(t.substring(e+1));this.ss.set(s,i)}else this.ss.set(t,null)}os(){for(const t of this.ss)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}ls(t){return this.ss.has(t)}cs(t){const e=this.ss.get(t);return void 0===e?null:e}us(){history.replaceState("",document.title,location.pathname+location.search)}ds(t){this.es=t,this.ss.clear(),this.ns()}},C33.Cs=new C33.ts(location.search),C33.Ss=new C33.ts(location.hash),C33.Cs.ls("perf")&&(C33.gs=!0),"dev"!==C33.Cs.cs("mode")&&C33.qe("final")}{let GetWindowsNTVersionName2=function(t){const e=parseFloat(t),s=windowsNTVerMap.get(e);return s||(13<=e?"11":"NT "+t)};GetWindowsNTVersionName=GetWindowsNTVersionName2;const C33=self.Ve,UNKNOWN="(unknown)",windowsNTVerMap=(C33._s={Ts:UNKNOWN,ys:UNKNOWN,Es:UNKNOWN,Is:UNKNOWN,As:NaN,Ms:UNKNOWN,Rs:"browser",ws:!0,bs:!1,Os:!1,Gs:!1,Ps:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),uaStr=navigator.userAgent,uaData=navigator.userAgentData;if(uaData&&0<uaData.brands.length){let ReadBrandList2=function(t){let e="",s="",i="",r="";for(const n of t){const h=RECOGNIZED_BROWSERS.get(n.brand),o=(!e&&h&&(e=h,s=n.version),RECOGNIZED_ENGINES.get(n.brand));!i&&o&&(i=o,r=n.version)}e||"Chromium"!==i||(C33._s.Es="Chromium",C33._s.Is=r),C33._s.Es=e||UNKNOWN,C33._s.Is=s||UNKNOWN,C33._s.Ms=i||UNKNOWN};ReadBrandList=ReadBrandList2,C33._s.Ts=uaData.platform,C33._s.bs=uaData.mobile,C33._s.ws=!C33._s.bs;const RECOGNIZED_BROWSERS=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),RECOGNIZED_ENGINES=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);ReadBrandList2(uaData.brands);let didGetDetailedInfo=!1;C33._s.Ps=async()=>{if(!didGetDetailedInfo)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);ReadBrandList2(t.fullVersionList),"Windows"===C33._s.Ts?C33._s.ys=GetWindowsNTVersionName2(t.platformVersion):C33._s.ys=t.platformVersion,didGetDetailedInfo=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let RunTest2=function(t,e){const s=Array.isArray(t)?t:[t];for(const i of s){const r=i.exec(uaStr);if(r){e(r);break}}};RunTest=RunTest2,RunTest2(/windows\s+nt\s+([\d\.]+)/i,t=>{C33._s.Ts="Windows";const e=t[1];C33._s.ys=GetWindowsNTVersionName2(e)}),RunTest2(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{C33._s.Ts="macOS",C33._s.ys=t[1].replace(/_/g,".")}),RunTest2(/CrOS/,()=>{C33._s.Ts="Chrome OS"}),RunTest2(/linux|openbsd|freebsd|netbsd/i,()=>{C33._s.Ts="Linux"}),RunTest2(/android/i,()=>{C33._s.Ts="Android"}),RunTest2(/android\s+([\d\.]+)/i,t=>{C33._s.Ts="Android",C33._s.ys=t[1]}),C33._s.Ts===UNKNOWN&&(RunTest2(/(iphone|ipod|ipad)/i,t=>{C33._s.Ts="iOS"}),RunTest2([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{C33._s.Ts="iOS",C33._s.ys=t[1].replace(/_/g,".")}));const hasChrome=/chrome\//i.test(uaStr),hasChromium=/chromium\//i.test(uaStr),hasEdge=/edg\//i.test(uaStr),hasOpera=/OPR\//.test(uaStr),hasNWjs=/nwjs/i.test(uaStr),hasSafari=/safari\//i.test(uaStr),hasWebKit=/webkit/i.test(uaStr),desktopOSs=(hasEdge||hasOpera||RunTest2(/chrome\/([\d\.]+)/i,t=>{C33._s.Es="Chrome",C33._s.Is=t[1],C33._s.Ms="Chromium"}),RunTest2(/edg\/([\d\.]+)/i,t=>{C33._s.Es="Edge",C33._s.Is=t[1],C33._s.Ms="Chromium"}),RunTest2(/OPR\/([\d\.]+)/,t=>{C33._s.Es="Opera",C33._s.Is=t[1],C33._s.Ms="Chromium"}),RunTest2(/chromium\/([\d\.]+)/i,t=>{C33._s.Es="Chromium",C33._s.Is=t[1],C33._s.Ms="Chromium"}),RunTest2(/nwjs\/[0-9.]+/i,t=>{C33._s.Es="NW.js",C33._s.Is=t[1],C33._s.Ms="Chromium",C33._s.Rs="nwjs"}),RunTest2(/firefox\/([\d\.]+)/i,t=>{C33._s.Es="Firefox",C33._s.Is=t[1],C33._s.Ms="Gecko"}),!hasSafari||hasChrome||hasChromium||hasEdge||hasOpera||hasNWjs||(C33._s.Es="Safari",C33._s.Ms="WebKit",RunTest2(/version\/([\d\.]+)/i,t=>{C33._s.Is=t[1]}),RunTest2(/crios\/([\d\.]+)/i,t=>{C33._s.Es="Chrome for iOS",C33._s.Is=t[1]}),RunTest2(/fxios\/([\d\.]+)/i,t=>{C33._s.Es="Firefox for iOS",C33._s.Is=t[1]}),RunTest2(/edgios\/([\d\.]+)/i,t=>{C33._s.Es="Edge for iOS",C33._s.Is=t[1]})),C33._s.Ms===UNKNOWN&&hasWebKit&&(C33._s.Ms="WebKit"),"Android"===C33._s.Ts&&"Safari"===C33._s.Es&&(C33._s.Es="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),isDesktop=desktopOSs.has(C33._s.Ts)||"nwjs"===C33._s.Rs;C33._s.ws=isDesktop,C33._s.bs=!isDesktop}"Chrome"===C33._s.Es&&"browser"===C33._s.Rs&&/wv\)/.test(uaStr)&&(C33._s.Rs="webview"),"nwjs"!==C33._s.Rs&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(C33._s.Rs="webapp"),C33._s.As=parseFloat(C33._s.Is);const looksLikeIPadOS="macOS"===C33._s.Ts&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;looksLikeIPadOS&&(C33._s.Ts="iOS",C33._s.ys=C33._s.Is,C33._s.ws=!1,C33._s.bs=!0,C33._s.Gs=!0),C33._s.Os="macOS"===C33._s.Ts||"iOS"===C33._s.Ts}{let asyncifyRequest2=function(s){return new Promise((t,e)=>{s.onsuccess=()=>t(s.result),s.onerror=()=>e(s.error)})},asyncifyTransaction2=function(s){return new Promise((t,e)=>{s.oncomplete=()=>t(),s.onerror=()=>e(s.error),s.onabort=()=>e(s.error)})},openReadOnlyTransaction2=function(t,e){return openTransaction(t,e)},openWriteTransaction2=function(t,e){return openTransaction(t,e,!0)},lazyOpenDatabase2=function(e){RequireString2(e);let t=DATABASE_PROMISE_MAP.get(e);return t instanceof Promise||(t=openDatabase(e),DATABASE_PROMISE_MAP.set(e,t),t.catch(t=>DATABASE_PROMISE_MAP.delete(e))),t},RequireString2=function(t){if("string"!=typeof t)throw new TypeError("expected string")},getEntriesFromCursor2=function(t,r){const e=t.objectStore(STORE_NAME).openCursor();return new Promise(s=>{const i=[];e.onsuccess=t=>{const e=t.target.result;if(e){switch(r){case"entries":i.push([e.key,e.value]);break;case"keys":i.push(e.key);break;case"values":i.push(e.value)}e.continue()}else s(i)}})};asyncifyRequest=asyncifyRequest2,asyncifyTransaction=asyncifyTransaction2,openReadOnlyTransaction=openReadOnlyTransaction2,openWriteTransaction=openWriteTransaction2,lazyOpenDatabase=lazyOpenDatabase2,RequireString=RequireString2,getEntriesFromCursor=getEntriesFromCursor2;const VERSION=2,STORE_NAME="keyvaluepairs",DATABASE_PROMISE_MAP=new Map,SUPPORTS_GETALL="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,SUPPORTS_GETALLKEYS="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function openTransaction(e,s,i=!1,r=!0){const t=await lazyOpenDatabase2(e);try{const n=t.transaction([STORE_NAME],i?"readwrite":"readonly");return s(n)}catch(t){if(r&&"InvalidStateError"===t.name)return DATABASE_PROMISE_MAP.delete(e),openTransaction(e,s,i,!1);throw t}}async function openDatabase(s){RequireString2(s);const t=indexedDB.open(s,VERSION);return t.addEventListener("upgradeneeded",t=>{try{const e=t.target.result;e.createObjectStore(STORE_NAME)}catch(t){console.error("Failed to create objectstore for database "+s,t)}}),asyncifyRequest2(t)}class KVStorageContainer{constructor(t){RequireString2(t),this.name=t}async ready(){await lazyOpenDatabase2(this.name)}set(r,n){return RequireString2(r),openWriteTransaction2(this.name,async t=>{const e=t.objectStore(STORE_NAME).put(n,r),s=asyncifyRequest2(e),i=asyncifyTransaction2(t);await Promise.all([i,s])})}get(n){return RequireString2(n),openReadOnlyTransaction2(this.name,async t=>{const e=t.objectStore(STORE_NAME).get(n),s=asyncifyRequest2(e),i=asyncifyTransaction2(t),[,r]=await Promise.all([i,s]);return r})}delete(r){return RequireString2(r),openWriteTransaction2(this.name,async t=>{const e=t.objectStore(STORE_NAME).delete(r),s=asyncifyRequest2(e),i=asyncifyTransaction2(t);await Promise.all([i,s])})}clear(){return openWriteTransaction2(this.name,async t=>{const e=t.objectStore(STORE_NAME).clear(),s=asyncifyRequest2(e),i=asyncifyTransaction2(t);await Promise.all([i,s])})}keys(){return openReadOnlyTransaction2(this.name,async t=>{let e;if(SUPPORTS_GETALLKEYS){const r=t.objectStore(STORE_NAME).getAllKeys();e=asyncifyRequest2(r)}else e=getEntriesFromCursor2(t,"keys");const s=asyncifyTransaction2(t),[,i]=await Promise.all([s,e]);return i})}values(){return openReadOnlyTransaction2(this.name,async t=>{let e;if(SUPPORTS_GETALL){const r=t.objectStore(STORE_NAME).getAll();e=asyncifyRequest2(r)}else e=getEntriesFromCursor2(t,"values");const s=asyncifyTransaction2(t),[,i]=await Promise.all([s,e]);return i})}entries(){return openReadOnlyTransaction2(this.name,async t=>{const e=getEntriesFromCursor2(t,"entries"),s=asyncifyTransaction2(t),[,i]=await Promise.all([s,e]);return i})}}self.vs=KVStorageContainer}{let NOT_IMPLEMENTED2=function(t){throw new Error(`"${t}" is not implemented`)},DISALLOW_CALLBACK2=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},StructuredClone2=function(i){return"object"==typeof i?new Promise(e=>{const{port1:t,port2:s}=new MessageChannel;s.onmessage=t=>e(t.data),t.postMessage(i)}):Promise.resolve(i)},KVStorageContainer=(NOT_IMPLEMENTED=NOT_IMPLEMENTED2,DISALLOW_CALLBACK=DISALLOW_CALLBACK2,StructuredClone=StructuredClone2,self.vs),CRITICAL_ERRORS=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i],memoryStorage=new WeakMap,isInMemory=!1;"undefined"==typeof indexedDB&&(isInMemory=!0,console.warn("Unable to use local storage because indexedDB is not defined"));class ForageAdaptor{constructor(t){this.xs=t,memoryStorage.set(this,new Map)}Ls(t){if(!isInMemory)for(const e of CRITICAL_ERRORS)if(t&&e.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),isInMemory=!0;break}}async Ds(t){const e=memoryStorage.get(this).get(t),s=await StructuredClone2(e);return void 0===s?null:s}async Ns(t,e){e=await StructuredClone2(e),memoryStorage.get(this).set(t,e)}Fs(t){memoryStorage.get(this).delete(t)}Bs(){memoryStorage.get(this).clear()}ks(){return Array.from(memoryStorage.get(this).keys())}$s(){return isInMemory}async getItem(e,t){if(DISALLOW_CALLBACK2(t),isInMemory)return this.Ds(e);let s;try{s=await this.xs.get(e)}catch(t){return this.Ls(t),isInMemory?this.Ds(e):(console.error(`Error reading '${e}' from storage, returning null: `,t),null)}return void 0===s?null:s}async setItem(e,s,t){if(DISALLOW_CALLBACK2(t),void 0===s&&(s=null),isInMemory)await this.Ns(e,s);else try{await this.xs.set(e,s)}catch(t){if(this.Ls(t),!isInMemory)throw t;await this.Ns(e,s)}}async removeItem(e,t){if(DISALLOW_CALLBACK2(t),isInMemory)this.Fs(e);else try{await this.xs.delete(e)}catch(t){this.Ls(t),isInMemory?this.Fs(e):console.error(`Error removing '${e}' from storage: `,t)}}async clear(t){if(DISALLOW_CALLBACK2(t),isInMemory)this.Bs();else try{await this.xs.clear()}catch(t){this.Ls(t),isInMemory?this.Bs():console.error("Error clearing storage: ",t)}}async keys(t){if(DISALLOW_CALLBACK2(t),isInMemory)return this.ks();let e=[];try{e=await this.xs.keys()}catch(t){if(this.Ls(t),isInMemory)return this.ks();console.error("Error getting storage keys: ",t)}return e}ready(t){return DISALLOW_CALLBACK2(t),isInMemory?Promise.resolve(!0):this.xs.ready()}Ws(t){if("object"!=typeof t)throw new TypeError("invalid options object");const e=t.name;if("string"!=typeof e)throw new TypeError("invalid store name");const s=new KVStorageContainer(e);return new ForageAdaptor(s)}length(t){NOT_IMPLEMENTED2("localforage.length()")}key(t,e){NOT_IMPLEMENTED2("localforage.key()")}iterate(t,e){NOT_IMPLEMENTED2("localforage.iterate()")}Vs(t){NOT_IMPLEMENTED2("localforage.setDriver()")}config(t){NOT_IMPLEMENTED2("localforage.config()")}Hs(t){NOT_IMPLEMENTED2("localforage.defineDriver()")}Us(){NOT_IMPLEMENTED2("localforage.driver()")}supports(t){NOT_IMPLEMENTED2("localforage.supports()")}dropInstance(){NOT_IMPLEMENTED2("localforage.dropInstance()")}Xs(){isInMemory=!1}}self.localforage=new ForageAdaptor(new KVStorageContainer("localforage"))}{const C33=self.Ve;if(C33.js={},C33.js.Ys=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const e=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==e.reverse}catch(t){return!1}})(),C33.js.qs="undefined"!=typeof HTMLDialogElement,C33.js.zs=!!self.requestIdleCallback,C33.js.ImageBitmap=!!self.createImageBitmap,C33.js.ImageBitmapOptions=!1,C33.js.Js=!1,C33.js.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{C33.js.ImageBitmapOptions=!0}).catch(()=>{C33.js.ImageBitmapOptions=!1})}catch(err){C33.js.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{C33.js.Js=10===t.width&&10===t.height}).catch(()=>{C33.js.Js=!1})}catch(err){C33.js.Js=!1}}if(C33.js.Ks=!(!navigator.clipboard||!navigator.clipboard.readText),C33.js.Zs=!(!navigator.permissions||!navigator.permissions.query),C33.js.Qs=!1,C33.js.Zs){const permission={name:"clipboard-read"};navigator.permissions.query(permission).then(()=>{C33.js.Qs=!0}).catch(()=>{C33.js.Qs=!1})}C33.js.ti=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),C33.js.ei="undefined"!=typeof Proxy,C33.js.si=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),C33.js.ii="function"==typeof fetch,C33.js.ri=!!(self.isSecureContext&&"Opera"!==C33._s.Es&&navigator.storage&&navigator.storage.persist),C33.js.ni=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),C33.js.hi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===C33._s.Ts)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),C33.js.ImageDecoder=void 0!==self.ImageDecoder,C33.js.oi=!!self.VideoEncoder,C33.js.ai=!!self.showOpenFilePicker,C33.js.li=!!self.queryLocalFonts,C33.js.UserActivation=!!navigator.userActivation,C33.js.ci=!1,(async()=>{let e;"undefined"==typeof document?e=new OffscreenCanvas(32,32):((e=document.createElement("canvas")).width=32,e.height=32);const t=e.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let s=null;try{e.convertToBlob?s=await e.convertToBlob({type:"image/webp",quality:1}):e.toBlob&&(s=await new Promise(t=>e.toBlob(t,"image/webp",1))),C33.js.ci=s&&"image/webp"===s.type}catch(t){C33.js.ci=!1}})()}{const C33=self.Ve;if(!String.prototype.trimStart){const startWhitespace=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(startWhitespace,"")}}if(!String.prototype.trimEnd){const endWhitespace=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(endWhitespace,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(C33.fi(t),"g"),e)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let arrayFlat2=function(t,s){return t.reduce((t,e)=>(0<s&&Array.isArray(e)?Array.prototype.push.apply(t,arrayFlat2(e,s-1)):t.push(e),t),[])};arrayFlat=arrayFlat2,Array.prototype.flat=function(t=1){return arrayFlat2(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.di||(Set.prototype.di=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const e of this)if(!t.has(e))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((s,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,e)=>s({usage:t,quota:e}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let assertFail2=function(t){let e=C33.Ci(),s="Assertion failure: "+t+"\n\nStack trace:\n"+e;console.error(s)};assertFail=assertFail2;const C33=self.Ve;self.assert=function(t,e){t||assertFail2(e)}}{const C33=self.Ve,C3X=self.Qe,TypedArray=(C33.mi=function(t){return"number"==typeof t},C33.Si=function(t){return C33.mi(t)&&isFinite(t)},C33.gi=function(t){if(!C33.mi(t))throw new TypeError("expected number")},C33._i=function(t){C33.Ti(t)},C33.yi=function(t,e,s){if(!C33.mi(t)||isNaN(t)||t<e||s<t)throw new RangeError("number outside of range")},C33.Ei=function(...e){for(let t of e);},C33.Ii=function(t){if(!C33.Si(t))throw new TypeError("expected finite number")},C33.Ai=function(t){C33.Ti(t)},C33.Mi=function(...e){for(let t of e);},C33.Ri=function(t){return"string"==typeof t},C33.wi=function(t){if(!C33.Ri(t))throw new TypeError("expected string")},C33.bi=function(t){C33.Ti(t)},C33.Oi=function(...e){for(let t of e);},C33.Gi=function(t){if("object"!=typeof t||null===t)return!1;let e=Object.getPrototypeOf(t);return e?e.constructor===Object:null===e},C33.Pi=function(t){if(!C33.Gi(t))throw new TypeError("expected simple object")},C33.vi=function(t){if(!C33.Ti(t)&&!C33.Gi(t))throw new TypeError("expected simple object")},C33.xi=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},C33.Li=function(t){if(!C33.xi(t))throw new TypeError("expected object")},C33.Di=function(t){C33.Ti(t)},C33.Ni=function(...e){for(let t of e);},C33.Fi=function(t){return C33.Bi(t,Blob)&&"string"==typeof t.name},C33.ki=function(t){if(!C33.Fi(t))throw new TypeError("expected file")},C33.$i=function(t){C33.Ti(t)},C33.Wi=function(t){return Array.isArray(t)},C33.Vi=function(t){if(!C33.Wi(t))throw new TypeError("expected array")},C33.Hi=function(t){C33.Ti(t)},C33.Ui=function(...e){for(let t of e);},C33.Xi=function(t){return!(!C33.Wi(t)||t.length&&!C33.Wi(t[0]))},C33.ji=function(e){if(!C33.Xi(e))throw new TypeError("expected 2d array");for(let t of e)if(!C33.Wi(t))throw new TypeError("expected 2d array")},C33.Yi=function(t){C33.Ti(t)},C33.Ji=function(t){return"function"==typeof t},C33.Ki=function(t,e){if(!C33.Ji(t))throw new TypeError("expected function");if(!C33.Ti(e)&&t!==e)throw new TypeError("expected same function reference")},C33.Zi=function(t){C33.Ti(t)},C33.Qi=function(...e){for(let t of e);},C33.tr=function(e,...s){if(!C33.Ji(e))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let t of s)if(!C33.Ti(t)&&e===t)return;throw new TypeError("expected same function reference")},C33.er=function(...e){if(!C33.Ti(e))for(let t of e);},C33.ir=function(t,e){return t instanceof e},C33.rr=function(e,...s){for(let t of s)if(C33.ir(e,t))return!0;return!1},C33.nr=function(t,e){if(!C33.ir(t,e))throw new TypeError("unexpected type")},C33.hr=function(t,e){C33.Ti(t)},C33.lr=function(t,...e){for(let t of e);},C33.cr=function(t,...e){if(!C33.rr(t,...e))throw new TypeError("unexpected type")},C33.ur=function(t,...e){if(!C33.Ti(t)&&!C33.rr(t,...e))throw new TypeError("unexpected type")},C33.dr=function(e,s){for(let t of e)if(!C33.ir(t,s))return!1;return!0},C33.Cr=function(e){for(let t of e)if(!C33.Si(t))return!1;return!0},C33.mr=function(e,t){for(let t of e);},C33.Sr=function(e,t){if(!C33.Ti(e))for(let t of e);},C33._r=function(e,t){if(!C33.Ti(e))for(let t of e);},C33.Tr=function(e){for(let t of e);},C33.Er=function(e){if(!C33.Ti(e))for(let t of e);},C33.Ir=function(t,e){return!(C33.Ti(t)||!C33.Ri(t.nodeName))&&(!e||C33.Ar(t.nodeName,e))},C33.Mr=function(t,e){if(C33.Ti(t)||!C33.Ri(t.nodeName))throw new TypeError("expected DOM node");if(e&&!C33.Ar(t.nodeName,e))throw new TypeError(`expected DOM '${e}' node`)},C33.Rr=function(t,e){C33.Ti(t)},C33.br=function(t,e){return!(C33.Ti(t)||!C33.Ri(t.tagName))&&(!e||C33.Ar(t.tagName,e))},C33.Or=function(t,e){if(C33.Ti(t)||!C33.Ri(t.tagName))throw new TypeError("expected HTML element");if(e&&!C33.Ar(t.tagName,e))throw new TypeError(`expected HTML '${e}' element`)},C33.Gr=function(t,e){C33.Ti(t)},C33.Pr=function(t){return C33.br(t,"img")||C33.br(t,"canvas")||C33.br(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},C33.vr=function(t){if(!C33.Pr(t))throw new TypeError("expected drawable")},C33.Lr=function(t){C33.Ti(t)},C33.Dr=function(t){return t instanceof ImageData||C33.Pr(t)},C33.Nr=function(t){if(!C33.Dr(t))throw new TypeError("expected drawable or image data")},C33.Fr=function(t){if(!C33.Ti(t)&&!C33.Dr(t))throw new TypeError("expected drawable or image data")},C33.Br=function(t){return"string"==typeof t||C33.HtmlString&&t instanceof C33.HtmlString||t instanceof C33.kr},C33.$r=function(t){if(!C33.Br(t))throw new TypeError("expected string-like")},C33.Wr=function(t){C33.Ti(t)},C33.Vr=function(...e){for(let t of e);},C33.Hr=function(){throw new Error("must be overridden")},C33.Ur=function(){throw new Error("not yet implemented")},C33.Xr=function(t,...e){let s=t;if(void 0===s)return!1;for(let t of e){if(void 0===s[t])return!1;s=s[t]}return!0},C33.Ti=function(t){return null==t},C33.jr=function(e){let s=e[0].constructor;for(let t of e)if(t.constructor!==s)return!1;return s},C33.Yr=function(e,s){for(let t of e)if(!(t instanceof s))return!1;return!0},Object.getPrototypeOf(Uint8Array));C33.qr=function(t){return C33.ir(t,TypedArray)},C33.zr=function(t){},C33.Jr=function(t){C33.Kr(t,TypedArray)},C33.Zr=function(t,...e){if(!C33.Qr(t,...e))throw new TypeError("unexpected type")},C33.Qr=function(t,...e){for(const s of e)if(C33.Bi(t,s))return!0;return!1},C33.Kr=function(t,e){if(!C33.Bi(t,e))throw new TypeError("unexpected type")},C33.Bi=function(t,e){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===e.name)return!0;return!1},C3X.gi=C33.gi,C3X._i=C33._i,C3X.Ii=C33.Ii,C3X.Ai=C33.Ai,C3X.wi=C33.wi,C3X.bi=C33.bi,C3X.Li=C33.Li,C3X.Di=C33.Di,C3X.Vi=C33.Vi,C3X.Hi=C33.Hi,C3X.Ki=C33.Ki,C3X.Zi=C33.Zi,C3X.nr=C33.nr,C3X.hr=C33.hr,C3X.Ti=C33.Ti}{let isValidTypeChange2=function(t,e){let s=C33.getType(t),i=C33.getType(e);return"null"===s||"null"===i||"undefined"!==s&&"undefined"!==i&&s===i},logDefendedObjectWarning2=function(t){console.warn("[Defence] "+t+" @",C33.Ci())},CheckDefendedObjectsUsedCorrectly2=function(){if(checkRafId=-1,0<ctorObjectToProxy.size||0<ctorProxyToObject.size){let t=new Set([...ctorObjectToProxy.keys()].map(t=>C33.tn(t))),e=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+e),ctorObjectToProxy.clear(),ctorProxyToObject.clear()}},getObjectPropertySet2=function(e){let s=new Set;for(let t in e)s.add(t);return s},VerifyObjectPropertiesConsistent2=function(t,e){let s=getObjectPropertySet2(e),i=typeProperties.get(t);if(i){let e=[];for(let t of i.values())s.has(t)?s.delete(t):e.push(t);C33.sn(e,[...s]),e.length&&console.warn(`[Defence] '${C33.tn(t)}' constructor creates inconsistent properties: `+e.join(", "))}else typeProperties.set(t,s)};isValidTypeChange=isValidTypeChange2,logDefendedObjectWarning=logDefendedObjectWarning2,CheckDefendedObjectsUsedCorrectly=CheckDefendedObjectsUsedCorrectly2,getObjectPropertySet=getObjectPropertySet2,VerifyObjectPropertiesConsistent=VerifyObjectPropertiesConsistent2;const C33=self.Ve,logRafIds=new Map;C33.rn=function(t,e){console.log("%c"+t,"font-weight: bold; color:"+e)},C33.nn=function(t,...e){logRafIds.has(t)||logRafIds.set(t,-1),-1===logRafIds.get(t)&&logRafIds.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...e),logRafIds.set(t,-1)}))};let measures,ctorObjectToProxy=(C33.hn=function(t){performance.mark(t),(measures=measures||new Map).has(t)||measures.set(t,{current:0,total:0,an:0,ln:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.an.toPrecision(3)} :: calls => `+this.ln}})},C33.cn=function(t){performance.measure("measure-"+t,t);const e=performance.getEntriesByName("measure-"+t)[0],s=measures.get(t);s.current=e.duration,s.total+=s.current,s.an=s.total/s.ln,console.log(s.toString()),s.ln++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},C33.Ci=function(){return(new Error).stack},C33.un=function(){debugger},C33.cast=function(t,e){return t&&t instanceof e?t:null},C33.tn=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":C33.mi(t)?"<number>":C33.Ri(t)?"<string>":C33.Wi(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":C33.Ji(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},C33.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},C33.range=function*(e,s){if(!isFinite(Math.abs(e-s)))throw new Error("Invalid parameters");if(s<e)for(let t=e-1;t>=s;t--)yield t;else for(let t=e;t<s;t++)yield t},new Map),ctorProxyToObject=new Map,proxyToObject=new WeakMap,releasedObjects=new WeakMap;C33.dn={};const VALID_GET_MISSING_KEYS=new Set(["then","splice"]);C33.dn.get=function(t,e){return e in t||"symbol"==typeof e||VALID_GET_MISSING_KEYS.has(e)||logDefendedObjectWarning2(`Accessed missing property '${e}' from defended object '${C33.tn(t)}', returning undefined`),releasedObjects.has(t)&&"symbol"!=typeof e&&!VALID_GET_MISSING_KEYS.has(e)&&logDefendedObjectWarning2(`Accessed property '${e}' on a released object '${C33.tn(t)}'
Object was originally released at: ${releasedObjects.get(t)})
Call stack at access: `),t[e]},C33.dn.set=function(t,e,s){return e in t||ctorObjectToProxy.has(t)||logDefendedObjectWarning2(`Set non-existent property '${e}' to '${s}' on defended object '${C33.tn(t)}'`),isValidTypeChange2(t[e],s)||ctorObjectToProxy.has(t)||logDefendedObjectWarning2(`Set '${C33.getType(t[e])}' property '${e}' to type '${C33.getType(s)}' on defended object '${C33.tn(t)}'`),releasedObjects.has(t)&&logDefendedObjectWarning2(`Set property '${e}' on a released object '${C33.tn(t)}'
Object was originally released at: ${releasedObjects.get(t)})
Call stack at access: `),t[e]=s,!0},C33.dn.deleteProperty=function(t,e){throw new ReferenceError(`Cannot delete property '${e}' from defended object '${C33.tn(t)}'`)},C33.dn.defineProperty=function(t,e,s){throw new ReferenceError(`Cannot define property '${e}' on defended object '${C33.tn(t)}'`)},C33.dn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${C33.tn(t)}'`)};let checkRafId=-1,typeProperties=(C33.pn=class DefendedBase{constructor(){if(C33.Ze&&C33.js.ei){let t=Object.create(new.target.prototype),e=new Proxy(t,C33.dn);return ctorObjectToProxy.set(t,e),ctorProxyToObject.set(e,t),proxyToObject.set(e,t),-1===checkRafId&&(checkRafId=requestAnimationFrame(CheckDefendedObjectsUsedCorrectly2)),e}}},C33.Cn=function(e){if(C33.Ze&&C33.js.ei&&e instanceof C33.pn){if(ctorProxyToObject.has(e)){let t=ctorProxyToObject.get(e);ctorProxyToObject.delete(e),ctorObjectToProxy.delete(t)}return e}return C33.isDebug?Object.seal(e):e},C33.mn=function(t,...e){let s;try{s=new t(...e)}catch(t){throw ctorProxyToObject.clear(),ctorObjectToProxy.clear(),t}return C33.Ze&&VerifyObjectPropertiesConsistent2(t,s),C33.Cn(s)},C33.Sn=function(t){let e=proxyToObject.get(t);e&&releasedObjects.set(e,C33.Ci())},C33.gn=function(t){let e=proxyToObject.get(t);return!!e&&!!releasedObjects.get(e)},new Map);C33._n=class PerfMark{constructor(t){this.Tn="",t&&this.start(t)}start(t){C33.gs&&(this.Tn=t,performance.mark(this.Tn+"-Start"))}end(){C33.gs&&(performance.mark(this.Tn+"-End"),performance.measure(this.Tn,this.Tn+"-Start",this.Tn+"-End"))}next(t){C33.gs&&(this.end(),this.Tn=t,performance.mark(this.Tn+"-Start"))}}}{let isNegativeZero2=function(t){return 0===t&&1/t<0};isNegativeZero=isNegativeZero2;const C33=self.Ve,TWO_PI=2*Math.PI,D_TO_R=Math.PI/180,R_TO_D=180/Math.PI,ALPHAEX_SHIFT=(C33.wrap=function(t,e,s){t=Math.floor(t),e=Math.floor(e);const i=(s=Math.floor(s))-e;if(0==i)return s;if(t<e){const r=s-(e-t)%i;return r===s?0:r}return e+(t-e)%i},C33.yn=function(t,e,s,i,r){const n=s-e;if(0==n&&0===i)return t;const h=r-i;return(t-e)*h/n+i},C33.normalize=function(t,e,s){return e-s==0?1:(t-e)/(s-e)},C33.En=function(t,e,s){return t<e?e:s<t?s:t},C33.In=function(t){return(t%=TWO_PI)<0&&(t+=TWO_PI),t},C33.An=function(t){return t*D_TO_R},C33.Mn=function(t){return t*R_TO_D},C33.Rn=function(t,e,s,i){return Math.hypot(s-t,i-e)},C33.wn=function(t,e,s,i){const r=s-t,n=i-e;return r*r+n*n},C33.bn=function(t,e,s,i){return Math.atan2(i-e,s-t)},C33.On=function(t,e){if(t===e)return 0;let s=Math.sin(t),i=Math.cos(t),r=Math.sin(e),n=Math.cos(e),h=s*r+i*n;return 1<=h?0:h<=-1?Math.PI:Math.acos(h)},C33.Gn=function(t,e,s){let i=Math.sin(t),r=Math.cos(t),n=Math.sin(e),h=Math.cos(e);return Math.acos(i*n+r*h)>s?0<r*n-i*h?C33.In(t+s):C33.In(t-s):C33.In(e)},C33.Pn=function(t,e){let s=Math.sin(t),i=Math.cos(t),r=Math.sin(e),n=Math.cos(e);return i*r-s*n<=0},C33.vn=function(t,e,s,i=0){let r=C33.On(t,e),n=TWO_PI*i;return C33.Pn(e,t)?C33.In(t+(r+n)*s):C33.In(t-(r+n)*s)},C33.xn=function(t,e,s,i=0){const r=C33.On(t,e),n=TWO_PI*i;return C33.Pn(e,t)?C33.In(t+(r+n)*s):C33.In(t+(TWO_PI-r+n)*s)},C33.Ln=function(t,e,s,i=0){const r=C33.On(t,e),n=TWO_PI*i;return C33.Pn(e,t)?C33.In(t-(-TWO_PI+r-n)*s):C33.In(t-(r+n)*s)},C33.Dn=function(t,e){const s=C33.On(t,e);return C33.Pn(t,e)?C33.In(e-s):C33.In(e+s)},C33.Nt=function(t,e,s){return t+s*(e-t)},C33.Nn=function(t,e,s){return t===e?0:(s-t)/(e-t)},C33.Fn=function(t,e,s,i,r){return C33.Nt(i,r,C33.Nn(t,e,s))},C33.Bn=function(t,e,s,i){return C33.Nt(C33.Nt(t,e,i),C33.Nt(e,s,i),i)},C33.kn=function(t,e,s,i,r){return C33.Nt(C33.Bn(t,e,s,r),C33.Bn(e,s,i,r),r)},C33.$n=function(t,e,s){return(t+e+(t-e)*Math.cos(s*Math.PI))/2},C33.Wn=function(t){return 0<t&&0==(t-1&t)},C33.Vn=function(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1},C33.Hn=function(t,e){return Math.round(t*e)/e},C33.Un=function(t,e){return Math.floor(t*e)/e},C33.Xn=function(t,e){e=Math.max(Math.floor(e),0);const s=Math.pow(10,e);return Math.round(t*s)/s},C33.jn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},C33.toFixed=function(t,e){let s=t.toFixed(e),i=s.length-1;for(;0<=i&&"0"===s.charAt(i);--i);return 0<=i&&"."===s.charAt(i)&&--i,i<0?s:s.substr(0,i+1)},C33.Yn=function(t,e,s){return C33.En(t,0,255)|C33.En(e,0,255)<<8|C33.En(s,0,255)<<16},1024),ALPHAEX_MAX=1023,RGBEX_SHIFT=16384,RGBEX_MAX=8191,RGBEX_MIN=-8192,COMMON_ASPECT_RATIOS=(C33.qn=function(t,e,s,i){return t=C33.En(Math.floor(1024*t),RGBEX_MIN,RGBEX_MAX),e=C33.En(Math.floor(1024*e),RGBEX_MIN,RGBEX_MAX),s=C33.En(Math.floor(1024*s),RGBEX_MIN,RGBEX_MAX),i=C33.En(Math.floor(i*ALPHAEX_MAX),0,ALPHAEX_MAX),t<0&&(t+=RGBEX_SHIFT),e<0&&(e+=RGBEX_SHIFT),s<0&&(s+=RGBEX_SHIFT),-(t*RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT+e*RGBEX_SHIFT*ALPHAEX_SHIFT+s*ALPHAEX_SHIFT+i)},C33.zn=function(t,e,s){return C33.qn(t,e,s,1)},C33.Jn=function(e){if(0<=e)return(255&e)/255;{let t=Math.floor(-e/(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT));return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Kn=function(e){if(0<=e)return((65280&e)>>8)/255;{let t=Math.floor(-e%(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT)/(RGBEX_SHIFT*ALPHAEX_SHIFT));return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Zn=function(e){if(0<=e)return((16711680&e)>>16)/255;{let t=Math.floor(-e%(RGBEX_SHIFT*ALPHAEX_SHIFT)/ALPHAEX_SHIFT);return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Qn=function(t){if(isNegativeZero2(t))return 0;if(0<=t)return 1;{const e=Math.floor(-t%ALPHAEX_SHIFT);return e/ALPHAEX_MAX}},C33.th=function(e,s){for(e=Math.floor(e),s=Math.floor(s);0!==s;){let t=s;s=e%s,e=t}return e},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]),NO_HIT=(C33.eh=function(s,i){if((s=Math.floor(s))===(i=Math.floor(i)))return[1,1];for(let e of COMMON_ASPECT_RATIOS){let t=s/e[0]*e[1];if(Math.abs(i-t)<1)return e.slice(0);if(t=s/e[1]*e[0],Math.abs(i-t)<1)return[e[1],e[0]]}let t=C33.th(s,i);return[s/t,i/t]},C33.ih=function(t,e,s,i,r,n,h,o){const a=Math.min(t,s),l=Math.max(t,s),c=Math.min(r,h),u=Math.max(r,h);if(l<c||u<a)return!1;const f=Math.min(e,i),d=Math.max(e,i),p=Math.min(n,o),C=Math.max(n,o);if(d<p||C<f)return!1;const m=r-t+h-s,S=n-e+o-i,g=s-t,_=i-e,T=h-r,y=o-n,E=Math.abs(_*T-y*g),I=T*S-y*m;if(Math.abs(I)>E)return!1;const A=g*S-_*m;return Math.abs(A)<=E},C33.rh=function(t,e,s,i,r,n,h,o,a,l,c,u){const f=Math.min(a,c),d=Math.max(a,c);if(n<f||d<r)return!1;const p=Math.min(l,u),C=Math.max(l,u);if(o<p||C<h)return!1;const m=a-t+c-s,S=l-e+u-i,g=s-t,_=i-e,T=c-a,y=u-l,E=Math.abs(_*T-y*g),I=T*S-y*m;if(Math.abs(I)>E)return!1;const A=g*S-_*m;return Math.abs(A)<=E},C33.nh=function(t,e,s,i,r){const n=Math.min(t,s),h=Math.max(t,s),o=Math.min(e,i),a=Math.max(e,i),l=r.hh(),c=r.oh(),u=r.ah(),f=r.lh(),d=r.uh(),p=r.fh(),C=r.ph(),m=r.Ch();return C33.rh(t,e,s,i,n,h,o,a,l,c,u,f)||C33.rh(t,e,s,i,n,h,o,a,u,f,d,p)||C33.rh(t,e,s,i,n,h,o,a,d,p,C,m)||C33.rh(t,e,s,i,n,h,o,a,C,m,l,c)},C33.mh=function(e,s,i,r,n){let h=Math.min(e,i),o=Math.max(e,i),a=Math.min(s,r),l=Math.max(s,r),c=0;for(let t=n.length-4;c<=t;c+=2)if(C33.rh(e,s,i,r,h,o,a,l,n[c],n[c+1],n[c+2],n[c+3]))return!0;return C33.rh(e,s,i,r,h,o,a,l,n[c],n[c+1],n[0],n[1])},2),PADDING=1e-6;C33.Sh=function(t,e,s,i,r,n,h,o){const a=s-t,l=i-e,c=h-r,u=o-n,f=a*u-l*c;if(0==f)return NO_HIT;const d=((e-i)*(h-t)+a*(o-e))/f;return 0<d&&d<1+PADDING?(u*(h-t)+(r-h)*(o-e))/f:NO_HIT},C33.gh=function(t,e,s,i,r,n,h,o,a){const l=(h-r)*a,c=(o-n)*a;return C33.Sh(t,e,s,i,r-l,n-c,h+l,o+c)},C33._h=function(t,e,s,i,r,n,h,o){const a=r-s,l=n-i,c=h-s,u=o-i,f=t-s,d=e-i,p=a*a+l*l,C=a*c+l*u,m=a*f+l*d,S=c*c+u*u,g=c*f+u*d,_=1/(p*S-C*C),T=(S*m-C*g)*_,y=(p*g-C*m)*_;return 0<=T&&0<=y&&T+y<=1},C33.Th=function(t,e,s,i,r,n,h,o){const a=r-s,l=n-i,c=h-s,u=o-i,f=t-s,d=e-i,p=a*a+l*l,C=a*c+l*u,m=c*c+u*u,S=f*a+d*l,g=f*c+d*u,_=p*m-C*C,T=(m*S-C*g)/_,y=(p*g-C*S)/_,E=1-T-y;return[E,T,y]},C33.yh=function(t,e,s,i,r,n,h,o,a,l,c,u){return[t*i+e*h+s*l,t*r+e*o+s*c,t*n+e*a+s*u]}}{let C33=self.Ve,mainDocument=null,baseHref="";if("undefined"!=typeof document){mainDocument=document;const baseElem=document.querySelector("base");baseHref=baseElem&&baseElem.hasAttribute("href")?baseElem.getAttribute("href"):"",baseHref&&(baseHref.startsWith("/")&&(baseHref=baseHref.substr(1)),baseHref.endsWith("/")||(baseHref+="/"))}C33.Eh=function(){return baseHref},C33.Ih=function(){if(!mainDocument)return"";const t=mainDocument.location;return C33.Ah(t.origin+t.pathname)+baseHref},C33.Ah=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===e?"":t.substr(0,e+1)},C33.Mh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===e?t:t.substr(e+1)},C33.Rh=function(t){let e=t.lastIndexOf(".");return e<1?"":t.substr(e)},C33.wh=function(t,e){const s=t.lastIndexOf(".");return-1===s?t+"."+e:t.substr(0,s+1)+e},C33.bh=function(t){let e=t.lastIndexOf(".");return e<1?t:t.substr(0,e)},C33.Oh=function(t){return t.replace(/\\/g,"/")},C33.Gh=function(t,e){const s=t?C33.Rh(t).slice(1):"";return e===s},C33.Ph=function(t,e){let s,i;return C33.Fi(t)&&(s=C33.bh(t.name)),C33.Ri(t)&&(s=C33.bh(t)),C33.Fi(e)&&(i=C33.bh(e.name)),C33.Ri(e)&&(i=C33.bh(e)),s===i},C33.xh=function(t){t=C33.Oh(t);let e=/^\w:\//.exec(t),s=(e?(e=e[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):e="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),i="",r=t,n,h="";0<s&&(i=t.slice(0,s),r=t.slice(s));const o=(n=r).lastIndexOf("."),a=(0<o&&(h=r.slice(o),n=r.slice(0,-h.length)),e+i+r);return{dir:i,Lh:r,name:n,root:e,ext:h,Dh:a}},C33.Nh=function(s,i){return new Promise((t,e)=>{self.setTimeout(t,s,i)})},C33.Fh=function(t){try{t()}catch(t){C33.isDebug&&console.warn("Swallowed exception: ",t)}},C33.Bh=function(){},C33.Ar=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize().toLowerCase()===e.normalize().toLowerCase())},C33.kh=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize()===e.normalize())},C33.$h=function(t,e,s){t[s++]=e[0],t[s++]=e[1],t[s++]=e[2],t[s++]=e[3],t[s++]=e[4],t[s++]=e[5],t[s++]=e[6],t[s++]=e[7],t[s++]=e[8],t[s++]=e[9],t[s++]=e[10],t[s++]=e[11],t[s++]=e[12],t[s++]=e[13],t[s++]=e[14],t[s]=e[15]},C33.Wh=function(t,e){t.length=e},C33.Vh=function(t){t&&0!==t.length&&C33.Wh(t,0)},C33.Hh=function(s){if(s){for(let e=0;e<s.length;e++){let t=s[e];C33.Wh(t,0)}C33.Wh(s,0)}},C33.Uh=function(e,s,i){s|=0;const r=e.length;if(!(s<=r))for(let t=r;t<s;++t)e.push(i)},C33.Xh=function(t,e,s){const i=t.length;(e|=0)<i?C33.Wh(t,e):i<e&&C33.Uh(t,e,s)},C33.jh=function(t,e){C33.Vh(t),C33.sn(t,e)},C33.sn=function(s,i){if(i.length<1e4)s.push(...i);else for(let t=0,e=i.length;t<e;++t)s.push(i[t])},C33.Yh=function(s,i){if(!((i=Math.floor(i))<0||i>=s.length)){let e=s.length-1;for(let t=i;t<e;++t)s[t]=s[t+1];C33.Wh(s,e)}},C33.qh=function(t,e){let s=t.indexOf(e);0<=s&&t.splice(s,1)},C33.zh=function(e,s){let i=e.length;if(s.length!==i)return!1;for(let t=0;t<i;++t)if(e[t]!==s[t])return!1;return!0},C33.Jh=function(s,i){let r=[],n=0;for(let e=0,t=s.length;e<t;++e){let t=s[e];i(t)?r.push(t):(s[n]=t,++n)}return C33.Wh(s,n),r},C33.Kh=function(s,i){let t=s.length,r=0;for(let e=0,t=s.length;e<t;++e){let t=s[e];i.has(t)||(s[r++]=t)}return C33.Wh(s,r),t-r},C33.Zh=function(t,e){return t===Math.floor(t)&&0<=t&&t<e.length},C33.Qh=function(t,e){if(!C33.Zh(t,e))throw new RangeError("array index out of bounds")},C33.eo=function(t){return t.slice()},C33.ro=function(t,s){let i=[];for(let e of t)if(C33.xi(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else C33.Wi(e)?i.push(C33.ro(e,s)):i.push(e);return i},C33.no=function(e){let s=[];for(let t of e)s.push(t.slice());return s},C33.ho=function(t,e=" "){return t?t.split(e).map(t=>t.trim()).filter(t=>!!t):[]},C33.ao=function(t,e,s){const i=new Set;for(const r of t.values())e(r)&&(s?i.add(s(r)):i.add(r));return i},C33.lo=function(t,e){return t.union?t.union(e):new Set([...t,...e])},C33.co=function(t,e){for(const s of e)t.add(s);return t},C33.first=function(e){for(let t of e)return t;return null},C33.xor=function(t,e){return!t!=!e},C33.compare=function(t,e,s){switch(e){case 0:return t===s;case 1:return t!==s;case 2:return t<s;case 3:return t<=s;case 4:return s<t;case 5:return s<=t;default:return!1}},C33.uo=function(e){for(let t in e)if(e.hasOwnProperty(t))return!0;return!1},C33.fo=function(o,a){return o.length?new Promise((s,i)=>{let r=[],n=0,h=!1;for(let e=0,t=o.length;e<t;++e)r.push(void 0),o[e].then(t=>{h||(r[e]=t,++n===o.length?s(r):a(n,o.length))}).catch(t=>{h=!0,i(t)})}):Promise.resolve([])};let memoryCallbacks=[],nextTaskId=(C33.do=function(t){memoryCallbacks.push(t)},C33.po=function(){let s=0;for(let e of memoryCallbacks){let t=e();s+=t}return Math.floor(s)},1),activeTaskIds=new Map,taskMessageChannel=new MessageChannel;taskMessageChannel.port2.onmessage=function(t){const e=t.data,s=activeTaskIds.get(e);activeTaskIds.delete(e),s&&s(performance.now())},C33.Co=function(t){const e=nextTaskId++;return activeTaskIds.set(e,t),taskMessageChannel.port1.postMessage(e),e},C33.So=function(t){activeTaskIds.delete(t)},C33._o=C33.Co,C33.To=function(){return new Promise(t=>C33._o(t))};const activeRPAFids=new Set;C33.yo=function(e){const s=self.requestAnimationFrame(async t=>{await C33.To(),activeRPAFids.has(s)&&(activeRPAFids.delete(s),e(t))});return activeRPAFids.add(s),s},C33.Eo=function(t){activeRPAFids.has(t)&&(self.cancelAnimationFrame(t),activeRPAFids.delete(t))}}{const C33=self.Ve;C33.Io=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},C33.Ao=function(t){return!C33.Io(t)},C33.Mo=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},C33.Ro=function(t,e){return fetch(t,e).then(t=>(C33.Mo(t),t))},C33.wo=function(t){return C33.Ro(t).then(t=>t.text())},C33.bo=function(t){return C33.Ro(t).then(t=>t.json())},C33.Oo=function(t){return C33.Ro(t).then(t=>t.blob())},C33.Go=function(t){return C33.Ro(t).then(t=>t.arrayBuffer())},C33.Po=function(i){return new Promise((t,e)=>{const s=new Image;s.onload=()=>t(s),s.onerror=t=>e(t),s.src=i})},C33.vo=function(i){return"function"==typeof i.arrayBuffer?i.arrayBuffer():new Promise((t,e)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>e(s.error),s.readAsArrayBuffer(i)})},C33.xo=function(i){return"function"==typeof i.text?i.text():new Promise((t,e)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>e(s.error),s.readAsText(i)})},C33.Lo=function(t){return C33.xo(t).then(t=>JSON.parse(t))},C33.Do=async function(t,e){let s=URL.createObjectURL(t);try{const i=await C33.Po(s);return URL.revokeObjectURL(s),s="",e&&"function"==typeof i.decode&&await i.decode(),i}finally{s&&URL.revokeObjectURL(s)}},C33.No=function(t,e){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,e);{const s=document.createElement("canvas");return s.width=t,s.height=e,s}},C33.Fo=function(e,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=C33.En(i,0,1),e.convertToBlob)return e.convertToBlob({type:s,quality:i});if(e.toBlob)return new Promise(t=>e.toBlob(t,s,i));throw new Error("could not convert canvas to blob")},C33.Bo=function(t,e,s){const i=C33.No(t.width,t.height),r=i.getContext("2d");return r.drawImage(t,0,0),C33.Fo(i,e,s)},C33.ko=function(t,e,s){if(C33.js.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>C33.Bo(t,e,s));if(C33.js.ImageBitmap)return createImageBitmap(t).then(t=>C33.Bo(t,e,s));{const i=C33.No(t.width,t.height),r=i.getContext("2d");return r.putImageData(t,0,0),C33.Fo(i,e,s)}},C33.$o=function(t,e){t.clear();for(const s of e)t.add(s)},C33.Wo=function(t){const e=Object.create(null);for(const[s,i]of t.entries())e[s]=i;return e},C33.Vo=function(t,e){e.clear();for(const[s,i]of Object.entries(t))e.set(s,i)},C33.Ho=function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>e(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],e(t[1])])};{const s=Object.create(null);for(const[i,r]of Object.entries(t))s[i]=e(r);return s}},C33.Uo=function e(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>e(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],e(t[1])]));{const s=Object.create(null);for(const[i,r]of Object.entries(t))s[i]=e(r);return s}}return t},C33.Xo=function(t){if(t.startsWith("--"))return t;let e="",s=!1,i=0;for(const r of t)"-"===r?0<i&&(s=!0):s?(e+=r.toUpperCase(),s=!1):e+=r,++i;return e},C33.jo=function(t){return"object"==typeof t&&"function"==typeof t.next},C33.Yo=function(e,s){const i=[];if("function"==typeof s)for(let t=0;t<e;++t)i.push(s());else for(let t=0;t<e;++t)i.push(s);return i}}{let padTwoDigits2=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},hueToRGB2=function(t,e,s){return s<0&&(s+=1),1<s&&--s,s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t};padTwoDigits=padTwoDigits2,hueToRGB=hueToRGB2;const C33=self.Ve,HSL_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?/i,HSLA_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?,([0-9.])/i;C33.qo=class Color{constructor(t,e,s,i){this.zo=NaN,this.Jo=NaN,this.Ko=NaN,this.Zo=NaN,this.zo=0,this.Jo=0,this.Ko=0,this.Zo=0,t instanceof C33.qo?this.set(t):this.Qo(t||0,e||0,s||0,i||0)}ta(t,e,s){return this.zo=+t,this.Jo=+e,this.Ko=+s,this.En(),this}Qo(t,e,s,i){return this.zo=+t,this.Jo=+e,this.Ko=+s,this.Zo=+i,this.En(),this}set(t){return this.zo=t.zo,this.Jo=t.Jo,this.Ko=t.Ko,this.Zo=t.Zo,this}A(t){return this.set(t)}add(t){this.zo+=t.zo,this.Jo+=t.Jo,this.Ko+=t.Ko,this.Zo+=t.Zo,this.En()}ea(t,e,s,i=0){this.zo+=+t,this.Jo+=+e,this.Ko+=+s,this.Zo+=+i,this.En()}ia(t){this.ra(Math.max(this.zo,t.zo)-Math.min(this.zo,t.zo)),this.na(Math.max(this.Jo,t.Jo)-Math.min(this.Jo,t.Jo)),this.oa(Math.max(this.Ko,t.Ko)-Math.min(this.Ko,t.Ko)),this.aa(Math.max(this.Zo,t.Zo)-Math.min(this.Zo,t.Zo)),this.En()}la(t){this.zo=t.zo,this.Jo=t.Jo,this.Ko=t.Ko}ra(t){this.zo=C33.En(+t,0,1)}ca(){return this.zo}na(t){this.Jo=C33.En(+t,0,1)}ua(){return this.Jo}oa(t){this.Ko=C33.En(+t,0,1)}fa(){return this.Ko}aa(t){this.Zo=C33.En(+t,0,1)}Ca(){return this.Zo}clone(){return C33.mn(C33.qo,this.zo,this.Jo,this.Ko,this.Zo)}toArray(){return[this.zo,this.Jo,this.Ko,this.Zo]}Sa(){return new Float64Array(this.toArray())}ga(t,e){t[e++]=this.zo,t[e++]=this.Jo,t[e++]=this.Ko,t[e]=this.Zo}_a(t,e){t[e++]=this.zo,t[e++]=this.Jo,t[e]=this.Ko}equals(t){return this.zo===t.zo&&this.Jo===t.Jo&&this.Ko===t.Ko&&this.Zo===t.Zo}Ta(t){return this.zo===t.zo&&this.Jo===t.Jo&&this.Ko===t.Ko}ya(t,e,s){return this.zo===t&&this.Jo===e&&this.Ko===s}Ea(t,e,s,i){return this.zo===t&&this.Jo===e&&this.Ko===s&&this.Zo===i}Ia(t,e){return t[e]===Math.fround(this.zo)&&t[e+1]===Math.fround(this.Jo)&&t[e+2]===Math.fround(this.Ko)&&t[e+3]===Math.fround(this.Zo)}Aa(t,e){return t[e]===Math.fround(this.zo)&&t[e+1]===Math.fround(this.Jo)&&t[e+2]===Math.fround(this.Ko)}multiply(t){this.zo*=t.zo,this.Jo*=t.Jo,this.Ko*=t.Ko,this.Zo*=t.Zo}Ma(t){this.zo*=t,this.Jo*=t,this.Ko*=t,this.Zo*=t}Ra(){return this.zo*=this.Zo,this.Jo*=this.Zo,this.Ko*=this.Zo,this}wa(){return this.zo/=this.Zo,this.Jo/=this.Zo,this.Ko/=this.Zo,this}En(){return this.zo=C33.En(this.zo,0,1),this.Jo=C33.En(this.Jo,0,1),this.Ko=C33.En(this.Ko,0,1),this.Zo=C33.En(this.Zo,0,1),this}ba(t){this.zo=C33.Jn(t),this.Jo=C33.Kn(t),this.Ko=C33.Zn(t),this.Zo=C33.Qn(t)}Oa(t,e,s){const i=C33.Si(t)?t:this.ca(),r=C33.Si(e)?e:this.ua(),n=C33.Si(s)?s:this.fa();return`rgb(${100*i}%, ${100*r}%, ${100*n}%)`}Ga(t,e,s,i){const r=C33.Si(t)?t:this.ca(),n=C33.Si(e)?e:this.ua(),h=C33.Si(s)?s:this.fa(),o=C33.Si(i)?i:this.Ca();return`rgba(${100*r}%, ${100*n}%, ${100*h}%, ${o})`}Pa(){const t=Math.round(255*this.ca()),e=Math.round(255*this.ua()),s=Math.round(255*this.fa());return"#"+padTwoDigits2(t.toString(16))+padTwoDigits2(e.toString(16))+padTwoDigits2(s.toString(16))}xa(t){if("string"!=typeof t)return!1;let e,s,i;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)e=parseInt(t[0],16)/15,s=parseInt(t[1],16)/15,i=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;e=parseInt(t.substr(0,2),16)/255,s=parseInt(t.substr(2,2),16)/255,i=parseInt(t.substr(4,2),16)/255}return isFinite(e)&&this.ra(e),isFinite(s)&&this.na(s),isFinite(i)&&this.oa(i),this.aa(1),!0}La(){const t=Math.round(255*this.ca()),e=Math.round(255*this.ua()),s=Math.round(255*this.fa());return t+`, ${e}, `+s}Da(){const t=Math.round(255*this.ca()),e=Math.round(255*this.ua()),s=Math.round(255*this.fa());return[t,e,s]}Na(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(e.length<3)return!1;const s=parseInt(e[0].trim(),10)/255,i=parseInt(e[1].trim(),10)/255,r=parseInt(e[2].trim(),10)/255;return isFinite(s)&&this.ra(s),isFinite(i)&&this.na(i),isFinite(r)&&this.oa(r),this.aa(1),!0}Fa(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(e.length<3)return!1;const s=parseInt(e[0].trim(),10)/100,i=parseInt(e[1].trim(),10)/100,r=parseInt(e[2].trim(),10)/100;return isFinite(s)&&this.ra(s),isFinite(i)&&this.na(i),isFinite(r)&&this.oa(r),this.aa(1),!0}Ba(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(e.length<4)return!1;const s=parseInt(e[0].trim(),10)/255,i=parseInt(e[1].trim(),10)/255,r=parseInt(e[2].trim(),10)/255,n=parseFloat(e[3].trim());return isFinite(s)&&this.ra(s),isFinite(i)&&this.na(i),isFinite(r)&&this.oa(r),isFinite(n)&&this.aa(n),!0}ka(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(e.length<4)return!1;const s=parseInt(e[0].trim(),10)/100,i=parseInt(e[1].trim(),10)/100,r=parseInt(e[2].trim(),10)/100,n=parseFloat(e[3].trim());return isFinite(s)&&this.ra(s),isFinite(i)&&this.na(i),isFinite(r)&&this.oa(r),isFinite(n)&&this.aa(n),!0}$a(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Fa(t):this.Na(t);if(t.startsWith("rgba("))return t.includes("%")?this.ka(t):this.Ba(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Wa(t);{const e=t.split(",");return t.includes("%")?3===e.length?this.Fa(t):4===e.length&&this.ka(t):3===e.length?this.Na(t):4===e.length&&this.Ba(t)}}return this.xa(t)}toJSON(){return[this.zo,this.Jo,this.Ko,this.Zo]}Va(t,e,s,i){let r,n,h;if(t%=360,e=C33.En(e,0,100),s=C33.En(s,0,100),i=C33.En(i,0,1),t/=360,s/=100,0===(e/=100))r=n=h=s;else{const o=s<.5?s*(1+e):s+e-s*e,a=2*s-o;r=hueToRGB2(a,o,t+1/3),n=hueToRGB2(a,o,t),h=hueToRGB2(a,o,t-1/3)}return this.ra(r),this.na(n),this.oa(h),this.aa(i),this}Wa(t){const e=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),s=HSL_TEST.exec(e),i=HSLA_TEST.exec(e);return s&&4===s.length?(this.Va(+s[1],+s[2],+s[3],1),!0):!(!i||5!==i.length||(this.Va(+s[1],+s[2],+s[3],+s[4]),0))}Ha(){const t=this.zo,e=this.Jo,s=this.Ko,i=this.Zo,r=C33.qo.Ua(t,e,s),n=C33.qo.Xa(t,e,s),h=C33.qo.ja(t,e,s);return`hsla(${r}, ${n}%, ${h}%, ${i})`}Ya(){const t=this.zo,e=this.Jo,s=this.Ko;return[C33.qo.Ua(t,e,s),C33.qo.Xa(t,e,s),C33.qo.ja(t,e,s),this.Zo]}qa(t){!Array.isArray(t)||t.length<3||(this.zo=t[0],this.Jo=t[1],this.Ko=t[2],this.Zo=4<=t.length?t[3]:1)}set r(t){this.ra(t)}get r(){return this.ca()}set g(t){this.na(t)}get g(){return this.ua()}set b(t){this.oa(t)}get b(){return this.fa()}set a(t){this.aa(t)}get a(){return this.Ca()}za(t,e){switch(t){case 0:this.ra(e);break;case 1:this.na(e);break;case 2:this.oa(e);break;case 3:this.aa(e);break;default:throw new RangeError("invalid color index")}}Ja(t){switch(t){case 0:return this.ca();case 1:return this.ua();case 2:return this.fa();case 3:return this.Ca();default:throw new RangeError("invalid color index")}}static Ka(t,e){let s,i;if(Array.isArray(t))(s=new C33.qo).qa(t);else{if(!(t instanceof C33.qo))throw new Error("unexpected type");s=t}if(Array.isArray(e))(i=new C33.qo).qa(e);else{if(!(e instanceof C33.qo))throw new Error("unexpected type");i=e}return s.equals(i)}static Za(t,e){return C33.En(Math.max(t,e)-Math.min(t,e),0,1)}static Qa(t,e){const s=new C33.qo;return s.ra(Math.max(t.zo,e.zo)-Math.min(t.zo,e.zo)),s.na(Math.max(t.Jo,e.Jo)-Math.min(t.Jo,e.Jo)),s.oa(Math.max(t.Ko,e.Ko)-Math.min(t.Ko,e.Ko)),s.aa(Math.max(t.Zo,e.Zo)-Math.min(t.Zo,e.Zo)),s}static tl(t,e){const s=new C33.qo(0,0,0,1);return s.ra(Math.max(t.zo,e.zo)-Math.min(t.zo,e.zo)),s.na(Math.max(t.Jo,e.Jo)-Math.min(t.Jo,e.Jo)),s.oa(Math.max(t.Ko,e.Ko)-Math.min(t.Ko,e.Ko)),s}static Ua(t,e,s){const i=Math.max(t,e,s),r=Math.min(t,e,s);if(i===r)return 0;let n=0;switch(i){case t:n=(e-s)/(i-r)+(e<s?6:0);break;case e:n=(s-t)/(i-r)+2;break;case s:n=(t-e)/(i-r)+4}return Math.round(n/6*360)}static Xa(t,e,s){const i=Math.max(t,e,s),r=Math.min(t,e,s);if(i===r)return 0;const n=(i+r)/2,h=i-r,o=.5<n?h/(2-i-r):h/(i+r);return Math.round(100*o)}static ja(t,e,s){const i=Math.max(t,e,s),r=Math.min(t,e,s),n=(i+r)/2;return i?Math.round(100*n):0}},C33.qo.el=Object.freeze(C33.mn(C33.qo,1,1,1,1)),C33.qo.sl=Object.freeze(C33.mn(C33.qo,0,0,0,1)),C33.qo.il=Object.freeze(C33.mn(C33.qo,0,0,0,0))}{const C33=self.Ve;C33.rl=class Vector2{constructor(t,e){this.nl=0,this.hl=0,t instanceof C33.rl?this.A(t):this.set(t||0,e||0)}set(t,e){this.nl=+t,this.hl=+e}A(t){this.nl=t.nl,this.hl=t.hl}equals(t){return this.nl===t.nl&&this.hl===t.hl}ol(t,e){return this.nl===t&&this.hl===e}Ia(t,e){return t[e]===Math.fround(this.nl)&&t[e+1]===Math.fround(this.hl)}al(t){this.nl=+t}ll(){return this.nl}cl(t){this.hl=+t}ul(){return this.hl}toArray(){return[this.nl,this.hl]}Sa(){return new Float64Array(this.toArray())}ga(t,e){t[e++]=this.nl,t[e]=this.hl}offset(t,e){this.nl+=+t,this.hl+=+e}scale(t,e){this.nl*=t,this.hl*=e}bt(t,e){this.nl/=t,this.hl/=e}round(){this.nl=Math.round(this.nl),this.hl=Math.round(this.hl)}floor(){this.nl=Math.floor(this.nl),this.hl=Math.floor(this.hl)}ceil(){this.nl=Math.ceil(this.nl),this.hl=Math.ceil(this.hl)}angle(){return C33.bn(0,0,this.nl,this.hl)}fl(){return this.nl*this.nl+this.hl*this.hl}length(){return Math.hypot(this.nl,this.hl)}dl(t,e){const s=this.nl*e-this.hl*t;this.hl=this.hl*e+this.nl*t,this.nl=s}rotate(t){0!==t&&this.dl(Math.sin(t),Math.cos(t))}pl(t,e,s){0===t||e===this.nl&&s===this.hl||(this.nl-=e,this.hl-=s,this.dl(Math.sin(t),Math.cos(t)),this.nl+=+e,this.hl+=+s)}move(t,e){0!==e&&(this.nl+=Math.cos(t)*e,this.hl+=Math.sin(t)*e)}normalize(){const t=this.length();0!==t&&1!==t&&(this.nl/=t,this.hl/=t)}En(t,e){this.nl=C33.En(this.nl,t,e),this.hl=C33.En(this.hl,t,e)}Lt(t){return this.nl*t.nl+this.hl*t.hl}reverse(){this.nl=-this.nl,this.hl=-this.hl}Cl(){let t=this.nl;return this.nl=this.hl,this.hl=-t,this}}}{const C33=self.Ve;C33.Rect=class Rect{constructor(t,e,s,i){this.ml=NaN,this.Sl=NaN,this.gl=NaN,this._l=NaN,this.ml=0,this.Sl=0,this.gl=0,this._l=0,t instanceof C33.Rect?this.A(t):this.set(t||0,e||0,s||0,i||0)}set(t,e,s,i){this.ml=+t,this.Sl=+e,this.gl=+s,this._l=+i}Tl(t,e,s,i){e=+e,this.ml=t=+t,this.Sl=e,this.gl=t+ +s,this._l=e+ +i}A(t){this.ml=+t.ml,this.Sl=+t.Sl,this.gl=+t.gl,this._l=+t._l}clone(){return new C33.Rect(this.ml,this.Sl,this.gl,this._l)}static yl(t,e){const s=new C33.Rect;return s.El(Math.min(t.ml,e.ml)),s.Il(Math.min(t.Sl,e.Sl)),s.Al(Math.max(t.gl,e.gl)),s.Ml(Math.max(t._l,e._l)),s}static Rl(t){return new C33.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.ml===t.ml&&this.Sl===t.Sl&&this.gl===t.gl&&this._l===t._l}wl(t,e,s,i){return this.ml===t&&this.Sl===e&&this.width()===s&&this.height()===i}Ia(t,e){return t[e]===Math.fround(this.ml)&&t[e+1]===Math.fround(this.Sl)&&t[e+2]===Math.fround(this.gl)&&t[e+3]===Math.fround(this._l)}El(t){this.ml=+t}bl(){return this.ml}Il(t){this.Sl=+t}Ol(){return this.Sl}Al(t){this.gl=+t}Gl(){return this.gl}Ml(t){this._l=+t}Pl(){return this._l}toArray(){return[this.ml,this.Sl,this.gl,this._l]}Sa(){return new Float64Array(this.toArray())}vl(){return new DOMRect(this.ml,this.Sl,this.width(),this.height())}static xl(t){return C33.mn(C33.Rect,t.left,t.top,t.right,t.bottom)}ga(t,e){t[e++]=this.ml,t[e++]=this.Sl,t[e++]=this.gl,t[e]=this._l}Ll(t,e){t[e++]=this.ml,t[e++]=this.Sl,t[e++]=this.gl,t[e++]=this.Sl,t[e++]=this.gl,t[e++]=this._l,t[e++]=this.ml,t[e]=this._l}Dl(t,e,s){t[e++]=this.ml,t[e++]=this.Sl,t[e++]=s,t[e++]=this.gl,t[e++]=this.Sl,t[e++]=s,t[e++]=this.gl,t[e++]=this._l,t[e++]=s,t[e++]=this.ml,t[e++]=this._l,t[e]=s}width(){return this.gl-this.ml}height(){return this._l-this.Sl}Nl(){return(this.ml+this.gl)/2}Fl(){return(this.Sl+this._l)/2}offset(t,e){e=+e,this.ml+=t=+t,this.Sl+=e,this.gl+=t,this._l+=e}offsetLeft(t){this.ml+=+t}offsetTop(t){this.Sl+=+t}Bl(t){this.gl+=+t}kl(t){this._l+=+t}$l(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Sl<this._l?this.ml<this.gl?this._l=this.Sl+this.width():this._l=this.Sl-this.width():this.ml<this.gl?this._l=this.Sl-this.width():this._l=this.Sl+this.width()}Wl(t,e){e=+e,this.ml-=t=+t,this.Sl-=e,this.gl+=t,this._l+=e}Vl(t,e){e=+e,this.ml+=t=+t,this.Sl+=e,this.gl-=t,this._l-=e}multiply(t,e){this.ml*=t,this.Sl*=e,this.gl*=t,this._l*=e}bt(t,e){this.ml/=t,this.Sl/=e,this.gl/=t,this._l/=e}Hl(t){this.ml=+t-this.ml,this.gl=+t-this.gl}Ul(t){this.Sl=+t-this.Sl,this._l=+t-this._l}Xl(t,e){const s=this.width(),i=this.height(),r=this.bl()+s*t,n=this.Ol()+i*e;this.Tl(r-i*e,n-s*t,i,s)}jl(){const t=this.ml;this.ml=this.gl,this.gl=t}Yl(){const t=this.Sl;this.Sl=this._l,this._l=t}ql(t){const e=this.Sl;this.Sl=+t-this._l,this._l=+t-e}round(){this.ml=Math.round(this.ml),this.Sl=Math.round(this.Sl),this.gl=Math.round(this.gl),this._l=Math.round(this._l)}zl(){this.ml=Math.ceil(this.ml),this.Sl=Math.ceil(this.Sl),this.gl=Math.floor(this.gl),this._l=Math.floor(this._l)}Jl(){this.ml=Math.floor(this.ml),this.Sl=Math.floor(this.Sl),this.gl=Math.ceil(this.gl),this._l=Math.ceil(this._l)}floor(){this.ml=Math.floor(this.ml),this.Sl=Math.floor(this.Sl),this.gl=Math.floor(this.gl),this._l=Math.floor(this._l)}ceil(){this.ml=Math.ceil(this.ml),this.Sl=Math.ceil(this.Sl),this.gl=Math.ceil(this.gl),this._l=Math.ceil(this._l)}En(t,e,s,i){this.ml=Math.max(this.ml,+t),this.Sl=Math.max(this.Sl,+e),this.gl=Math.min(this.gl,+s),this._l=Math.min(this._l,+i)}Kl(t,e,s,i){t=+t,e=+e,s=+s,i=+i,this.ml=C33.En(this.ml,t,s),this.Sl=C33.En(this.Sl,e,i),this.gl=C33.En(this.gl,t,s),this._l=C33.En(this._l,e,i)}normalize(){this.ml>this.gl&&this.jl(),this.Sl>this._l&&this.Yl()}Zl(t){return!(t.gl<this.ml||t._l<this.Sl||t.ml>this.gl||t.Sl>this._l)}Ql(t,e,s){return!(t.gl+e<this.ml||t._l+s<this.Sl||t.ml+e>this.gl||t.Sl+s>this._l)}tc(t,e){return t>=this.ml&&t<=this.gl&&e>=this.Sl&&e<=this._l}ec(t){return t.ml>=this.ml&&t.Sl>=this.Sl&&t.gl<=this.gl&&t._l<=this._l}ic(t){t.ml<this.ml&&(this.ml=+t.ml),t.Sl<this.Sl&&(this.Sl=+t.Sl),t.gl>this.gl&&(this.gl=+t.gl),t._l>this._l&&(this._l=+t._l)}rc(t){this.ml=C33.Nt(t.ml,t.gl,this.ml),this.Sl=C33.Nt(t.Sl,t._l,this.Sl),this.gl=C33.Nt(t.ml,t.gl,this.gl),this._l=C33.Nt(t.Sl,t._l,this._l)}}}{const C33=self.Ve;C33.nc=class Quad{constructor(t,e,s,i,r,n,h,o){this.hc=NaN,this.oc=NaN,this.ac=NaN,this.lc=NaN,this.cc=NaN,this.uc=NaN,this.fc=NaN,this.dc=NaN,this.hc=0,this.oc=0,this.ac=0,this.lc=0,this.cc=0,this.uc=0,this.fc=0,this.dc=0,t instanceof C33.nc?this.A(t):this.set(t||0,e||0,s||0,i||0,r||0,n||0,h||0,o||0)}set(t,e,s,i,r,n,h,o){this.hc=+t,this.oc=+e,this.ac=+s,this.lc=+i,this.cc=+r,this.uc=+n,this.fc=+h,this.dc=+o}Cc(t,e,s,i){this.set(t,e,s,e,s,i,t,i)}A(t){this.hc=t.hc,this.oc=t.oc,this.ac=t.ac,this.lc=t.lc,this.cc=t.cc,this.uc=t.uc,this.fc=t.fc,this.dc=t.dc}equals(t){return this.hc===t.hc&&this.oc===t.oc&&this.ac===t.ac&&this.lc===t.lc&&this.cc===t.cc&&this.uc===t.uc&&this.fc===t.fc&&this.dc===t.dc}mc(t){this.hc=+t}hh(){return this.hc}Sc(t){this.oc=+t}oh(){return this.oc}_c(t){this.ac=+t}ah(){return this.ac}Tc(t){this.lc=+t}lh(){return this.lc}yc(t){this.cc=+t}uh(){return this.cc}Ec(t){this.uc=+t}fh(){return this.uc}Ic(t){this.fc=+t}ph(){return this.fc}Ac(t){this.dc=+t}Ch(){return this.dc}Mc(){return new DOMQuad(new DOMPoint(this.hc,this.oc),new DOMPoint(this.ac,this.lc),new DOMPoint(this.cc,this.uc),new DOMPoint(this.fc,this.dc))}static Rc(t){return C33.mn(C33.nc,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.hc,this.oc,this.ac,this.lc,this.cc,this.uc,this.fc,this.dc]}Sa(){return new Float64Array(this.toArray())}ga(t,e){t[e++]=this.hc,t[e++]=this.oc,t[e++]=this.ac,t[e++]=this.lc,t[e++]=this.cc,t[e++]=this.uc,t[e++]=this.fc,t[e]=this.dc}wc(t,e,s){t[e++]=this.hc,t[e++]=this.oc,t[e++]=s,t[e++]=this.ac,t[e++]=this.lc,t[e++]=s,t[e++]=this.cc,t[e++]=this.uc,t[e++]=s,t[e++]=this.fc,t[e++]=this.dc,t[e]=s}offset(t,e){e=+e,this.hc+=t=+t,this.oc+=e,this.ac+=t,this.lc+=e,this.cc+=t,this.uc+=e,this.fc+=t,this.dc+=e}round(){this.hc=Math.round(this.hc),this.oc=Math.round(this.oc),this.ac=Math.round(this.ac),this.lc=Math.round(this.lc),this.cc=Math.round(this.cc),this.uc=Math.round(this.uc),this.fc=Math.round(this.fc),this.dc=Math.round(this.dc)}floor(){this.hc=Math.floor(this.hc),this.oc=Math.floor(this.oc),this.ac=Math.floor(this.ac),this.lc=Math.floor(this.lc),this.cc=Math.floor(this.cc),this.uc=Math.floor(this.uc),this.fc=Math.floor(this.fc),this.dc=Math.floor(this.dc)}ceil(){this.hc=Math.ceil(this.hc),this.oc=Math.ceil(this.oc),this.ac=Math.ceil(this.ac),this.lc=Math.ceil(this.lc),this.cc=Math.ceil(this.cc),this.uc=Math.ceil(this.uc),this.fc=Math.ceil(this.fc),this.dc=Math.ceil(this.dc)}Oc(t){this.hc=t.ml,this.oc=t.Sl,this.ac=t.gl,this.lc=t.Sl,this.cc=t.gl,this.uc=t._l,this.fc=t.ml,this.dc=t._l}Gc(t,e){0===e?this.Oc(t):this.Pc(t,Math.sin(e),Math.cos(e))}Pc(t,e,s){const i=t.ml*e,r=t.Sl*e,n=t.gl*e,h=t._l*e,o=t.ml*s,a=t.Sl*s,l=t.gl*s,c=t._l*s;this.hc=o-r,this.oc=a+i,this.ac=l-r,this.lc=a+n,this.cc=l-h,this.uc=c+n,this.fc=o-h,this.dc=c+i}vc(t){t.set(Math.min(this.hc,this.ac,this.cc,this.fc),Math.min(this.oc,this.lc,this.uc,this.dc),Math.max(this.hc,this.ac,this.cc,this.fc),Math.max(this.oc,this.lc,this.uc,this.dc))}tc(t,e){let s=this.ac-this.hc,i=this.lc-this.oc,r=this.cc-this.hc,n=this.uc-this.oc,h=t-this.hc,o=e-this.oc,a=s*s+i*i,l=s*r+i*n,c=s*h+i*o,u=r*r+n*n,f=r*h+n*o,d=1/(a*u-l*l),p=(u*c-l*f)*d,C=(a*f-l*c)*d;return 0<=p&&0<C&&p+C<1||(C=((a=(s=this.fc-this.hc)*s+(i=this.dc-this.oc)*i)*f-(l=s*r+i*n)*(c=s*h+i*o))*(d=1/(a*u-l*l)),0<=(p=(u*c-l*f)*d)&&0<C&&p+C<1)}Nl(){return(this.hc+this.ac+this.cc+this.fc)/4}Fl(){return(this.oc+this.lc+this.uc+this.dc)/4}xc(t,e,s,i){return!(!this.tc(t,e)&&!this.tc(s,i))||C33.nh(t,e,s,i,this)}Lc(t){let e=t.Nl(),s=t.Fl();if(this.tc(e,s))return!0;if(e=this.Nl(),s=this.Fl(),t.tc(e,s))return!0;const i=this.hc,r=this.oc,n=this.ac,h=this.lc,o=this.cc,a=this.uc,l=this.fc,c=this.dc;return C33.nh(i,r,n,h,t)||C33.nh(n,h,o,a,t)||C33.nh(o,a,l,c,t)||C33.nh(l,c,i,r,t)}Dc(){const t=this.hc,e=this.oc;this.hc=this.ac,this.oc=this.lc,this.ac=this.cc,this.lc=this.uc,this.cc=this.fc,this.uc=this.dc,this.fc=t,this.dc=e}Nc(){this.Fc(0,2),this.Fc(1,3),this.Fc(6,4),this.Fc(7,5)}Bc(){this.Fc(0,6),this.Fc(1,7),this.Fc(2,4),this.Fc(3,5)}kc(){this.Fc(2,6),this.Fc(3,7)}Fc(t,e){const s=this.$c(t);this.Wc(t,this.$c(e)),this.Wc(e,s)}$c(t){switch(t){case 0:return this.hc;case 1:return this.oc;case 2:return this.ac;case 3:return this.lc;case 4:return this.cc;case 5:return this.uc;case 6:return this.fc;case 7:return this.dc;default:throw new RangeError("invalid quad point index")}}Wc(t,e){switch(e=+e,t){case 0:this.hc=e;break;case 1:this.oc=e;break;case 2:this.ac=e;break;case 3:this.lc=e;break;case 4:this.cc=e;break;case 5:this.uc=e;break;case 6:this.fc=e;break;case 7:this.dc=e;break;default:throw new RangeError("invalid quad point index")}}}}{const C33=self.Ve,assert=self.assert,DEFAULT_POLY_POINTS=[0,0,1,0,1,1,0,1],tempQuad=C33.mn(C33.nc);C33.Vc=class CollisionPoly extends C33.pn{constructor(t,e=!0){super(),t=t||DEFAULT_POLY_POINTS,this.Hc=Float64Array.from(t),this.Uc=new C33.Rect,this.Xc=!0,this.jc=e}Sn(){}Yc(){return this.Hc}qc(){return this.Hc.length/2}zc(t){this.Hc.length===t.length?this.Hc.set(t):this.Hc=Float64Array.from(t),this.Xc=!0}Jc(){this.zc(DEFAULT_POLY_POINTS)}A(t){this.zc(t.Hc)}Kc(){this.Xc=!0}Zc(){if(this.Xc){let s=this.Hc,i=s[0],r=s[1],n=i,h=r;for(let t=0,e=s.length;t<e;t+=2){const o=s[t],a=s[t+1];o<i&&(i=o),o>n&&(n=o),a<r&&(r=a),a>h&&(h=a)}this.Uc.set(i,r,n,h),this.Xc=!1}}Oc(t,e,s){let i=this.Hc;8!==i.length&&(i=new Float64Array(8),this.Hc=i),i[0]=t.bl()-e,i[1]=t.Ol()-s,i[2]=t.Gl()-e,i[3]=t.Ol()-s,i[4]=t.Gl()-e,i[5]=t.Pl()-s,i[6]=t.bl()-e,i[7]=t.Pl()-s,this.Uc.A(t),0===e&&0===s||this.Uc.offset(-e,-s),this.Xc=!1}Qc(t,e,s){tempQuad.A(t),tempQuad.offset(e,s),this.zc(tempQuad.toArray()),this.Xc=!0}transform(t,e,s){let i=0,r=1;0!==s&&(i=Math.sin(s),r=Math.cos(s)),this.tu(t,e,i,r)}tu(s,i,r,n){const h=this.Hc;for(let t=0,e=h.length;t<e;t+=2){const o=t+1,a=h[t]*s,l=h[o]*i;h[t]=a*n-l*r,h[o]=l*n+a*r}this.Xc=!0}offset(s,i){const r=this.Hc;for(let t=0,e=r.length;t<e;t+=2)r[t]+=s,r[t+1]+=i}tc(s,i){const r=this.Hc;if(s===r[0]&&i===r[1])return!0;this.Zc();let t=this.Uc,n=t.bl()-110,h=t.Ol()-101,o=t.Gl()+131,a=t.Pl()+120,l=0,c=0,u=0,f=0,d=0,p=0,C=0,m=0,S=(u=n<s?(l=n,s):(l=s,n),f=h<i?(c=h,i):(c=i,h),C=o<s?(d=o,s):(d=s,o),m=a<i?(p=a,i):(p=i,a),0),g=0;for(let t=0,e=r.length;t<e;t+=2){const _=(t+2)%e,T=r[t],y=r[t+1],E=r[_],I=r[1+_];C33.rh(n,h,s,i,l,u,c,f,T,y,E,I)&&++S,C33.rh(o,a,s,i,d,C,p,m,T,y,E,I)&&++g}return S%2==1||g%2==1}eu(t,u,f){const d=t.Hc,p=this.Hc;if(this.tc(d[0]+u,d[1]+f))return!0;if(t.tc(p[0]-u,p[1]-f))return!0;for(let e=0,c=p.length;e<c;e+=2){let t=(e+2)%c,s=p[e],i=p[e+1],r=p[t],n=p[1+t],h=0,o=0,a=0,l=0;a=s<r?(h=s,r):(h=r,s),l=i<n?(o=i,n):(o=n,i);for(let t=0,e=d.length;t<e;t+=2){const C=(t+2)%e,m=d[t]+u,S=d[t+1]+f,g=d[C]+u,_=d[1+C]+f;if(C33.rh(s,i,r,n,h,a,o,l,m,S,g,_))return!0}}return!1}xc(s,i,r,n,h,o){if(this.tc(r-s,n-i))return!0;if(this.tc(h-s,o-i))return!0;let a=0,l=0,c=0,u=0;c=r<h?(a=r,h):(a=h,r),u=n<o?(l=n,o):(l=o,n);const f=this.Hc;for(let t=0,e=f.length;t<e;t+=2){const d=(t+2)%e,p=f[t]+s,C=f[t+1]+i,m=f[d]+s,S=f[1+d]+i;if(C33.rh(r,n,h,o,a,c,l,u,p,C,m,S))return!0}return!1}Nc(s){const i=this.Hc;for(let t=0,e=i.length;t<e;t+=2)i[t]=2*s-i[t];this.Xc=!0}Bc(s){const i=this.Hc;for(let t=0,e=i.length;t<e;t+=2){const r=t+1;i[r]=2*s-i[r]}this.Xc=!0}kc(){const s=this.Hc;for(let t=0,e=s.length;t<e;t+=2){const i=t+1,r=s[t];s[t]=s[i],s[i]=r}this.Xc=!0}su(){let s=this.Hc,i=0;for(let t=0,e=s.length;t<e;t+=2)i+=s[t];return i/this.qc()}iu(){let s=this.Hc,i=0;for(let t=0,e=s.length;t<e;t+=2)i+=s[t+1];return i/this.qc()}ru(){return this.Hc}nu(){return this.qc()}hu(){return this.jc}}}{const C33=self.Ve;C33.ou=class PairMap extends C33.pn{constructor(t){if(super(),this.au=new Map,t)for(const[e,s,i]of t)this.Set(e,s,i)}Sn(){this.lu(),this.au=null}cu(){return 0===this.au.size}lu(){const t=this.au;for(const e of t.values())e.clear();t.clear()}Set(t,e,s){let i=this.au,r=i.get(t);r||(r=new Map,i.set(t,r)),r.set(e,s)}cs(t,e){const s=this.au.get(t);return s&&s.get(e)}ls(t,e){const s=this.au.get(t);return!!s&&s.has(e)}uu(t,e){const s=this.au,i=s.get(t);if(!i)return!1;const r=i.delete(e);return r&&0===i.size&&s.delete(t),r}fu(t){const e=this.au,s=e.get(t);s&&(s.clear(),e.delete(t));for(const[i,r]of e.entries())r.delete(t)&&0===r.size&&e.delete(i)}du(){let t=0;for(const e of this.au.values())t+=e.size;return t}*values(){for(const t of this.au.values())yield*t.values()}*pu(){for(const[t,e]of this.au.entries())for(const s of e.keys())yield[t,s]}*entries(){for(const[t,e]of this.au.entries())for(const[s,i]of e.entries())yield[t,s,i]}}}{const C33=self.Ve;C33.Cu=class ArraySet extends C33.pn{constructor(){super(),this.mu=new Set,this.Su=[],this.gu=!1}Sn(){this.lu()}lu(){this.mu.clear(),C33.Vh(this.Su),this.gu=!1}_u(t){this.mu.has(t)||(this.mu.add(t),this.gu)||this.Su.push(t)}ls(t){return this.mu.has(t)}uu(t){this.mu.delete(t)&&(this.gu=!0)}du(){return this.mu.size}cu(){return 0===this.mu.size}Tu(){return this.gu&&(this.yu(),this.gu=!1),this.Su}yu(){const t=this.Su;C33.Vh(t);for(const e of this.mu)t.push(e)}}}{const C33=self.Ve,EASE_MAP=new Map,PREDEFINED_EASE_MAP=new Map,CUSTOM_EASE_EDITOR_MAP=new Map,CUSTOM_EASE_DATA_EDITOR_MAP=new Map,CUSTOM_EASE_RUNTIME_MAP=new Map,CUSTOM_EASE_DATA_RUNTIME_MAP=new Map,PRIVATE_EASE_MAP=new Map,BUILT_IN_TRANSITION_MAP=new Map,ALIAS_MAP=new Map,EASE_TRANSLATION_KEYS=(ALIAS_MAP.set("linear","noease"),ALIAS_MAP.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),SHORT_EASE_TRANSLATION_KEYS=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],EASE_API2INTERNAL_NAMES=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),SAMPLE_COUNT=(self.Eu=class Ease{constructor(){}static Iu(){return"default"}static Au(){return"noease"}static Mu(t){return EASE_API2INTERNAL_NAMES.get(t)}static Ru(e,...s){this.wu();let t,i,r=(i=e?(CUSTOM_EASE_EDITOR_MAP.has(e)||CUSTOM_EASE_EDITOR_MAP.set(e,new Map),[...(t=CUSTOM_EASE_EDITOR_MAP.get(e)).keys()].filter(t=>!Ease.bu(t,e)||Ease.bu(t,e).transition.IsForAnyPurpose())):[...(t=CUSTOM_EASE_RUNTIME_MAP).keys()]).sort();return[...PREDEFINED_EASE_MAP.keys()].concat(r).filter(t=>!s.includes(t))}static Ou(){this.wu();const t=[...CUSTOM_EASE_RUNTIME_MAP.keys()];return t.sort(),[...PREDEFINED_EASE_MAP.keys()].concat(t)}static Gu(){this.wu();const t=[...CUSTOM_EASE_RUNTIME_MAP.keys()];return t.sort(),t}static Pu(t){for(const e of EASE_TRANSLATION_KEYS){const s=self.lang("ui.bars.timeline.eases."+e);if(s===t)return!0}for(const i of SHORT_EASE_TRANSLATION_KEYS){const r=self.lang("ui.bars.timeline.short-eases."+i);if(r===t)return!0}}static vu(t){return this.wu(),[...PREDEFINED_EASE_MAP.keys()].includes(t)}static xu(t){const e=ALIAS_MAP.get(t);return e?EASE_MAP.get(e):Ease.vu(t)?EASE_MAP.get(t):PRIVATE_EASE_MAP.has(t)?PRIVATE_EASE_MAP.get(t):void 0}static Lu(t){return this.wu(),BUILT_IN_TRANSITION_MAP.get(t)}static Du(t,e){this.wu();const s=Ease.xu(t);if(s)return s;if(e)return CUSTOM_EASE_EDITOR_MAP.get(e).get(t);throw new Error("missing ease function")}static bu(t,e){this.wu();const s=CUSTOM_EASE_DATA_EDITOR_MAP.get(e);if(s)return s.get(t)}static Nu(t,e){this.wu();const s=Ease.xu(t);return!!s||!!CUSTOM_EASE_EDITOR_MAP.get(e).get(t)}static Fu(t){this.wu();const e=Ease.xu(t);return e||CUSTOM_EASE_RUNTIME_MAP.get(t)}static Bu(t){return this.wu(),CUSTOM_EASE_DATA_RUNTIME_MAP.get(t)}static ku(t){this.wu();const e=this.Ou();return e[t]}static $u(t,e){this.wu();const s=this.Ru(e);return s.indexOf(t)}static Wu(t){return this.$u(t)}static wu(){0===EASE_MAP.size&&(this.Vu("default",()=>{}),this.Vu("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Vu("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Vu("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Vu("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Vu("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Vu("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Vu("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Vu("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Vu("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Vu("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Vu("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Vu("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Vu("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Vu("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Vu("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Vu("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Vu("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Vu("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Vu("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Vu("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Vu("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Vu("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Vu("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Vu("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Vu("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Vu("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Vu("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Vu("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Vu("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Vu("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Vu("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Hu("cubicbezier",this.Uu),this.Hu("spline",this.Xu))}static Vu(t,e,s=!1){if("function"==typeof e)Ease.ju(t,e,"predefined");else{if(!C33.Wi(e))throw new Error("unexpected arguments");if(self.BuiltInTransition){const r=C33.mn(self.BuiltInTransition,t,s);r.SetFromJson(e),Ease.ju(t,(t,e,s,i)=>r.Yu(t,e,s,i),"predefined"),BUILT_IN_TRANSITION_MAP.set(t,r)}else{const n=C33.mn(C33.qu,[t,e.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.zu(s),Ease.ju(t,(t,e,s,i)=>n.Yu(t,e,s,i),"predefined")}}}static Hu(t,e){Ease.ju(t,e,"private")}static Ju(t,e,s,i){this.wu(),Ease.ju(t,e,"custom",s,i)}static Ku(t,e){if(!this.vu(t)&&![...PRIVATE_EASE_MAP.keys()].includes(t)){const s=CUSTOM_EASE_EDITOR_MAP.get(e),i=(s&&s.delete(t),CUSTOM_EASE_DATA_EDITOR_MAP.get(e));i&&i.delete(t)}}static ju(t,e,s,i,r){switch(s){case"predefined":EASE_MAP.set(t,e),PREDEFINED_EASE_MAP.set(t,e);break;case"custom":if(i){CUSTOM_EASE_EDITOR_MAP.has(i)||CUSTOM_EASE_EDITOR_MAP.set(i,new Map),CUSTOM_EASE_DATA_EDITOR_MAP.has(i)||CUSTOM_EASE_DATA_EDITOR_MAP.set(i,new Map);const n=CUSTOM_EASE_EDITOR_MAP.get(i),h=(n.set(t,e),CUSTOM_EASE_DATA_EDITOR_MAP.get(i));h.set(t,r)}else CUSTOM_EASE_RUNTIME_MAP.set(t,e),CUSTOM_EASE_DATA_RUNTIME_MAP.set(t,r);break;case"private":EASE_MAP.set(t,e),PRIVATE_EASE_MAP.set(t,e);break;default:throw new Error("unexpected ease mode")}}static Zu(t,e,s,i){return 0===i?e:s*t/i+e}static Uu(t,e,s,i,r){const n=e,h=3*t*(s-e),o=3*t**2*(e+i-2*s),a=t**3*(r-e+3*s-3*i);return n+h+o+a}static Xu(t,e,s,i,r,n,h,o,l,u){if(i===r&&n===h)return t;const f=get_t_for_x(t,e,i,n,o,u),d=a(s,r,h,l),p=b(s,r,h,l),C=c(s,r,h,l);return calc_bezier(f,d,p,C)}static Qu(t,e,s,i){const r=[],n=a(t,e,s,i),h=b(t,e,s,i),o=c(t,e,s,i);for(let t=0;t<SAMPLE_COUNT;++t){const l=calc_bezier(t*SAMPLE_STEP,n,h,o);r.push(l)}return r}},11),SAMPLE_STEP=1/(SAMPLE_COUNT-1),NEWTON_RAPHSON_ITERATIONS=4,NEWTON_RAPHSON_MIN_SLOPE=.01,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,a=(t,e,s,i)=>i-3*s+3*e-t,b=(t,e,s,i)=>3*s-6*e+3*t,c=(t,e,s,i)=>3*(e-t),calc_bezier=(t,e,s,i)=>((e*t+s)*t+i)*t,get_slope=(t,e,s,i)=>3*e*t*t+2*s*t+i,get_t_for_x=(h,t,e,s,i,r)=>{if(1==h)return 1;let o=0,n=1,l=r[n],u=SAMPLE_COUNT-1;SAMPLE_COUNT;for(;n!=u&&l<=h;)n++,l=r[n],o+=SAMPLE_STEP;n--;let f=(h-(l=r[n]))/(r[n+1]-l),d=o+f*SAMPLE_STEP,p=a(t,e,s,i),C=b(t,e,s,i),m=c(t,e,s,i),S=get_slope(d,p,C,m);if(0===S)return d;if(S>=NEWTON_RAPHSON_MIN_SLOPE){for(let t=0;t<NEWTON_RAPHSON_ITERATIONS;++t){const g=calc_bezier(d,p,C,m)-h,_=get_slope(d,p,C,m);d-=g/_}return d}{let e=o,s=o+SAMPLE_STEP,i=0,r,n;do{d=e+(s-e)/2;let t=calc_bezier(d,p,C,m)-h;0<t?s=d:e=d,r=Math.abs(t)>SUBDIVISION_PRECISION,n=++i<SUBDIVISION_MAX_ITERATIONS}while(r&&n);return d}}}{let RequireStringOrNumber2=function(t){C33.Ri(t)};RequireStringOrNumber=RequireStringOrNumber2;const C33=self.Ve;C33.t3=class ProbabilityTable{constructor(t){this.e3=[],this.Tn=t||"",this.s3=0}Sn(){this.lu(),this.e3=null}i3(){return this.Tn}lu(){C33.Hh(this.e3),this.s3=0}r3(){return this.s3}n3(t=Math.random()*this.r3()){let e=0;for(const[s,i]of this.e3)if(t<(e+=s))return i;return 0}h3(t,e){RequireStringOrNumber2(e),this.s3+=t,this.e3.push([t,e])}o3(e,s){RequireStringOrNumber2(s);const i=0===e;for(let t=0;t<this.e3.length;t++){const r=this.e3[t],n=i||r[0]===e,h=r[1]===s;if(n&&h){this.e3.splice(t,1),this.s3-=r[0];break}}}a3(){return JSON.stringify(this.e3)}static l3(t,e){const s=new C33.t3(e),i=JSON.parse(t);for(const r of i){const n=r[0],h=r[1];s.h3(n,h)}return s}}}{let C33=self.Ve,nextId=0;C33.u3=class ScreenReaderText{constructor(t,e){this.f3=t,this.d3=e,this.C3=nextId++,this.f3.m3("runtime","screen-reader-text",{type:"create",id:this.C3,text:this.d3})}Sn(){this.f3.m3("runtime","screen-reader-text",{type:"release",id:this.C3}),this.f3=null,this.d3="",this.C3=-1}S3(t){this.d3!==t&&(this.d3=t,this.f3.m3("runtime","screen-reader-text",{type:"update",id:this.C3,text:this.d3}))}}}{const C33=self.Ve;C33.Event=class Event{constructor(t,e){this.type=t,this.cancelable=!!e,this.defaultPrevented=!1,this.g3=!1,this._3=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this._3)throw new Error(`cannot stop async event '${this.type}' propagation`);this.g3=!0}}}{const C33=self.Ve,assert=self.assert;C33.Event.T3=class EventHandler extends C33.pn{constructor(t){super(),this.y3=t,this.E3=[],this.I3=new Set,this.A3=[],this.M3=new Set,this.R3=0,this.w3=[]}Sn(){0<this.R3||(C33.Vh(this.E3),this.I3.clear(),C33.Vh(this.A3),this.M3.clear(),C33.Vh(this.w3),C33.Sn(this))}b3(t,e){this.O3()?this.w3.push({G3:"add",P3:t,capture:e}):e?this.I3.has(t)||(this.E3.push(t),this.I3.add(t)):this.M3.has(t)||(this.A3.push(t),this.M3.add(t))}v3(t,e){this.O3()?this.w3.push({G3:"remove",P3:t,capture:e}):e?this.I3.has(t)&&(this.I3.delete(t),C33.qh(this.E3,t)):this.M3.has(t)&&(this.M3.delete(t),C33.qh(this.A3,t))}x3(){return!this.E3.length&&!this.A3.length}O3(){return 0<this.R3}L3(){const t=new Set,e=new Set;for(const s of this.w3)if("add"===s.G3)this.b3(s.P3,s.capture),(s.capture?e:t).delete(s.P3);else{if("remove"!==s.G3)throw new Error("invalid op");(s.capture?(this.I3.delete(s.P3),e):(this.M3.delete(s.P3),t)).add(s.P3)}C33.Kh(this.A3,t),C33.Kh(this.E3,e),C33.Vh(this.w3)}D3(s){this.N3();let i=!1;for(let t=0,e=this.E3.length;t<e;++t)if(this.E3[t](s),s.g3){i=!0;break}if(!i)for(let t=0,e=this.A3.length;t<e&&(this.A3[t](s),!s.g3);++t);return this.F3(),!s.defaultPrevented}B3(s){this.N3();for(let t=0,e=this.E3.length;t<e;++t)this.E3[t](s);for(let t=0,e=this.A3.length;t<e;++t)this.A3[t](s);return this.F3(),!0}N3(){this.R3++}F3(){this.R3--,0===this.R3&&0<this.w3.length&&this.L3()}W3(t){t?this.N3():this.F3()}V3(s){let i=[];for(let e=0,t=this.E3.length;e<t;++e){let t=this.E3[e];i.push(C33.H3(()=>t(s)))}for(let e=0,t=this.A3.length;e<t;++e){let t=this.A3[e];i.push(C33.H3(()=>t(s)))}return Promise.all(i).then(()=>!s.defaultPrevented)}U3(s){const i=[];this.N3();for(let t=0,e=this.E3.length;t<e;++t){const r=this.E3[t](s);r instanceof Promise&&i.push(r)}for(let t=0,e=this.A3.length;t<e;++t){const n=this.A3[t](s);n instanceof Promise&&i.push(n)}return this.F3(),i.length?Promise.all(i).then(()=>!s.defaultPrevented):!s.defaultPrevented}async X3(t){return this.U3(t)}async j3(s){this.N3();for(let t=0,e=this.E3.length;t<e;++t){const i=this.E3[t](s);i instanceof Promise&&await i}for(let t=0,e=this.A3.length;t<e;++t){const r=this.A3[t](s);r instanceof Promise&&await r}return this.F3(),!s.defaultPrevented}*Y3(s){this.N3();for(let t=0,e=this.E3.length;t<e;++t){const i=this.E3[t](s);C33.jo(i)&&(yield*i)}for(let t=0,e=this.A3.length;t<e;++t){const r=this.A3[t](s);C33.jo(r)&&(yield*r)}this.F3()}}}{const C33=self.Ve;C33.Event.q3=class EventDispatcher extends C33.pn{constructor(){super(),this.z3=new Map,this.J3=!1}Sn(){if(this.J3)throw new Error("already released");this.K3(),this.J3=!0,C33.Sn(this)}gn(){return this.J3}K3(){if(this.z3){for(let t of this.z3.values())t.Sn();this.z3.clear()}}Z3(t,e){let s=this.z3.get(t);return s||(e?(s=C33.mn(C33.Event.T3,t),this.z3.set(t,s),s):null)}Q3(t){return this.z3.has(t)}addEventListener(t,e,s){let i=this.Z3(t,!0);i.b3(e,!!s)}removeEventListener(t,e,s){let i=this.Z3(t,!1);i&&(i.v3(e,!!s),i.x3())&&this.z3.delete(t)}dispatchEvent(t){const e=this.Z3(t.type,!1);return!e||(t.cancelable?e.D3(t):e.B3(t))}tf(t){const e=this.Z3(t.type,!1);return e?(t._3=!0,e.V3(t)):Promise.resolve(!0)}async ef(t){const e=this.Z3(t.type,!1);if(!e)return!0;this.z3.delete(t.type),t._3=!0;const s=await e.V3(t);return e.Sn(),s}async if(t){const e=this.Z3(t.type,!1);return!e||e.X3(t)}rf(t){const e=this.Z3(t.type,!1);return!e||e.U3(t)}async nf(t){const e=this.Z3(t.type,!1);return!e||e.j3(t)}hf(t){const e=this.Z3(t.type,!1);if(!e)return null;if(t.cancelable)throw new Error("not supported");return e.Y3(t)}W3(t){for(const e of this.z3.values())e.W3(t)}}}{let SetNewCallback2=function(t){callbackId=SUPPORTS_RIC&&0===highThroughputMode?requestIdleCallback(DoAsyncifiedWork2,{timeout:IDLECALLBACK_TIMEOUT}):setTimeout(DoAsyncifiedWork2,0<highThroughputMode?1:t)},DoAsyncifiedWork2=function(r){if(callbackId=-1,workQueue.length){let s=performance.now(),i=s,t=0,e;for(;DoNextAsyncifiedJob2(workQueue.shift()),i=performance.now(),++t,e=(i-s)/t*1.1,workQueue.length&&(SUPPORTS_RIC&&0===highThroughputMode&&void 0!==r?e<r.timeRemaining():i-s+e<SETTIMEOUT_WORK_DURATION););if(-1===callbackId&&workQueue.length){let t=i-s,e=Math.max(SETTIMEOUT_INTERVAL-t,4);SetNewCallback2(e)}}},DoNextAsyncifiedJob2=function(e){let t;try{t=e.P3()}catch(t){return void e.reject(t)}e.resolve(t)},C33=(SetNewCallback=SetNewCallback2,DoAsyncifiedWork=DoAsyncifiedWork2,DoNextAsyncifiedJob=DoNextAsyncifiedJob2,self.Ve),SETTIMEOUT_WORK_DURATION=12,SETTIMEOUT_INTERVAL=16,IDLECALLBACK_TIMEOUT=35,SUPPORTS_RIC="undefined"!=typeof requestIdleCallback,workQueue=[],callbackId=-1,highThroughputMode=0,asyncifyDisabled=C33.Cs.ls("disable-asyncify");asyncifyDisabled&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),C33.H3=function(s){let i=null;return C33.isDebug&&(i=C33.Ci()),new Promise((t,e)=>{workQueue.push({P3:s,resolve:t,reject:e,stack:i}),asyncifyDisabled?DoNextAsyncifiedJob2(workQueue.pop()):-1===callbackId&&SetNewCallback2(SETTIMEOUT_INTERVAL)})},C33.H3.lf=function(t){if(t)++highThroughputMode;else if(--highThroughputMode<0)throw new Error("already turned off high throughput mode")}}{let ClearTimeCache2=function(){cachedNowTime=-1},CheckActiveIdleTimeouts2=function(){timerId=-1,nextDeadline=-1;let s=Date.now();for(let e of activeIdleTimeouts)if(e.cf(s)){let t=e.uf();(-1===nextDeadline||t<nextDeadline)&&(nextDeadline=t)}else activeIdleTimeouts.delete(e);if(-1!==nextDeadline){let t=Math.max(nextDeadline-s+IDLE_CHECK_TIMER_OVERSHOOT,IDLE_CHECK_MIN_INTERVAL);timerId=self.setTimeout(CheckActiveIdleTimeouts2,t)}},C33=(ClearTimeCache=ClearTimeCache2,CheckActiveIdleTimeouts=CheckActiveIdleTimeouts2,self.Ve),IDLE_CHECK_MIN_INTERVAL=1e3,IDLE_CHECK_TIMER_OVERSHOOT=100,cachedNowTime=-1,timerId=(C33.ff=function(){return-1===cachedNowTime&&(cachedNowTime=Date.now(),self.setTimeout(ClearTimeCache2,16)),cachedNowTime},-1),nextDeadline=-1,activeIdleTimeouts=new Set;C33.df=class IdleTimeout{constructor(t,e){this.pf=t,this.Cf=1e3*e,this.mf=0,this.Sf=!1}gf(){let t=C33.ff();this.mf=t+this.Cf,this.Sf||(activeIdleTimeouts.add(this),this.Sf=!0),-1===timerId?(nextDeadline=this.mf,timerId=self.setTimeout(CheckActiveIdleTimeouts2,this.Cf+IDLE_CHECK_TIMER_OVERSHOOT)):this.mf<nextDeadline&&nextDeadline>t+IDLE_CHECK_MIN_INTERVAL&&(self.clearTimeout(timerId),nextDeadline=this.mf,timerId=self.setTimeout(CheckActiveIdleTimeouts2,this.Cf+IDLE_CHECK_TIMER_OVERSHOOT))}cf(t){return!(t>=this.mf)||(this.pf()?(this.mf=t+this.Cf,!0):this.Sf=!1)}uf(){return this.mf}_f(){this.Sf&&(activeIdleTimeouts.delete(this),this.Sf=!1,0===activeIdleTimeouts.size)&&-1!==timerId&&(self.clearTimeout(timerId),timerId=-1,nextDeadline=-1)}Sn(){this._f(),this.pf=null}}}{const C33=self.Ve;C33.Tf=class Disposable{constructor(t){this.yf=!1,this.Ef=t}If(){this.yf||(this.yf=!0,this.Ef&&(this.Ef(),this.Ef=null))}Af(){return this.yf}Sn(){this.If()}static Sn(t){return new Disposable(()=>t.Sn())}static Mf(e,s,i,r,t){if(null==r)r=!1;else if("boolean"!=typeof r&&"object"!=typeof r)throw new TypeError("invalid event listener options");if(t&&(i=i.bind(t)),s.includes(" ")){s=s.split(" ");const n=new C33.Rf;for(let t of s)e.addEventListener(t,i,r),n._u(C33.mn(C33.Tf,()=>e.removeEventListener(t,i,r)));return n}return e.addEventListener(s,i,r),C33.mn(C33.Tf,()=>e.removeEventListener(s,i,r))}},C33.wf=class StubDisposable extends C33.Tf{bf(t){this.Ef=t}},C33.Rf=class CompositeDisposable extends C33.Tf{constructor(...e){super(),this.Of=new Set;for(let t of e)this._u(t)}_u(...e){if(this.yf)throw new Error("already disposed");for(let t of e)this.Of.add(t)}Gf(t){if(this.yf)throw new Error("already disposed");this.Of.delete(t)}Pf(){if(this.yf)throw new Error("already disposed");if(this.Of){for(let t of this.Of)t.If();this.Of.clear()}}Af(){return this.yf}If(){if(this.yf)throw new Error("already disposed");this.yf=!0;for(let t of this.Of)t.If();this.Of.clear(),this.Of=null}Sn(){this.If()}}}{const C33=self.Ve;C33.vf=class KahanSum extends C33.pn{constructor(){super(),this.xf=0,this.hl=0,this.Lf=0,this.Df=0}_u(t){this.hl=(t=+t)-this.xf,this.Lf=this.Df+this.hl,this.xf=this.Lf-this.Df-this.hl,this.Df=this.Lf}Nf(t){this.Df-=+t}cs(){return this.Df}gf(){this.xf=0,this.hl=0,this.Lf=0,this.Df=0}Set(t){this.xf=0,this.hl=0,this.Lf=0,this.Df=+t}Ff(t){this.xf=t.xf,this.hl=t.hl,this.Lf=t.Lf,this.Df=t.Df}Sn(){}}}{const C33=self.Ve,js_cols={},RED=!0,BLACK=!1;js_cols.Bf=function(t){this.kf=t,this.right=this.kf.$f,this.left=this.kf.$f,this.parent=null,this.color=!1,this.key=null},js_cols.Wf=function(t){this.size=0,this.$f=new js_cols.Bf(this),this.$f.color=BLACK,this.root=this.$f,this.root.parent=this.$f,this.compare=t||this.Vf},js_cols.Wf.prototype.Vf=function(t,e){return t<e?-1:e<t?1:0},js_cols.Wf.prototype.clone=function(){var t=new js_cols.Wf(this.compare);return t.Hf(this),t},js_cols.Wf.prototype.clear=function(){this.size=0,this.$f=new js_cols.Bf(this),this.$f.color=BLACK,this.root=this.$f,this.root.parent=this.$f},js_cols.Wf.prototype.Uf=function(t){var e=t.right;t.right=e.left,e.left!=this.$f&&(e.left.parent=t),e.parent=t.parent,t.parent==this.$f?this.root=e:t==t.parent.left?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e},js_cols.Wf.prototype.Xf=function(t){var e=t.left;t.left=e.right,e.right!=this.$f&&(e.right.parent=t),e.parent=t.parent,t.parent==this.$f?this.root=e:t==t.parent.right?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e},js_cols.Wf.prototype.jf=function(t){if(this.contains(t))this.Yf(t).key=t;else{for(var e=new js_cols.Bf(this),s=(e.key=t,this.$f),i=this.root;i!=this.$f;)s=i,i=this.compare(e.key,i.key)<0?i.left:i.right;(e.parent=s)==this.$f?this.root=e:this.compare(e.key,s.key)<0?s.left=e:s.right=e,e.left=this.$f,e.right=this.$f,e.color=RED,this.qf(e),this.size++}},js_cols.Wf.prototype.qf=function(t){for(;t!=this.$f&&t!=this.root&&t.parent.color==RED;){var e;t.parent==t.parent.parent.left?(e=t.parent.parent.right).color==RED?(t.parent.color=BLACK,e.color=BLACK,t.parent.parent.color=RED,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.Uf(t)),t.parent.color=BLACK,t.parent.parent.color=RED,t.parent.parent!=this.$f&&this.Xf(t.parent.parent)):(e=t.parent.parent.left).color==RED?(t.parent.color=BLACK,e.color=BLACK,t.parent.parent.color=RED,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.Xf(t)),t.parent.color=BLACK,t.parent.parent.color=RED,t.parent.parent!=this.$f&&this.Uf(t.parent.parent))}this.root.color=BLACK},js_cols.Wf.prototype.zf=function(t){var e=t.left==this.$f||t.right==this.$f?t:this.Jf(t),s=e.left!=this.$f?e.left:e.right;s.parent=e.parent,e.parent==this.$f?this.root=s:e==e.parent.left?e.parent.left=s:e.parent.right=s,e!=t&&(t.key=e.key),e.color==BLACK&&this.Kf(s),this.size--},js_cols.Wf.prototype.Kf=function(t){for(;t!=this.root&&t.color==BLACK;){var e;t=t==t.parent.left?((e=t.parent.right).color==RED&&(e.color=BLACK,t.parent.color=RED,this.Uf(t.parent),e=t.parent.right),e.left.color==BLACK&&e.right.color==BLACK?(e.color=RED,t.parent):(e.right.color==BLACK&&(e.left.color=BLACK,e.color=RED,this.Xf(e),e=t.parent.right),e.color=t.parent.color,t.parent.color=BLACK,e.right.color=BLACK,this.Uf(t.parent),this.root)):((e=t.parent.left).color==RED&&(e.color=BLACK,t.parent.color=RED,this.Xf(t.parent),e=t.parent.left),e.right.color==BLACK&&e.left.color==BLACK?(e.color=RED,t.parent):(e.left.color==BLACK&&(e.right.color=BLACK,e.color=RED,this.Uf(e),e=t.parent.left),e.color=t.parent.color,t.parent.color=BLACK,e.left.color=BLACK,this.Xf(t.parent),this.root))}t.color=BLACK},js_cols.Wf.prototype.remove=function(t){var e,t=this.Yf(t);return t!=this.$f?(e=t.key,this.zf(t),e):null},js_cols.Wf.prototype.Zf=function(t,e){this.remove(e)},js_cols.Wf.prototype.min=function(t){for(;t.left!=this.$f;)t=t.left;return t},js_cols.Wf.prototype.max=function(t){for(;t.right!=this.$f;)t=t.right;return t},js_cols.Wf.prototype.Jf=function(t){if(t.right!=this.$f)return this.min(t.right);for(var e=t.parent;e!=this.$f&&t==e.right;)e=(t=e).parent;return e},js_cols.Wf.prototype.Qf=function(t){if(t.left!=this.$f)return this.max(t.left);for(var e=t.parent;e!=this.$f&&t==e.left;)e=(t=e).parent;return e},js_cols.Wf.prototype.t0=function(t){if(0<this.size){var e=this.Yf(t);if(e==this.$f)return null;if(e.right!=this.$f)return this.min(e.right).key;for(var s=e.parent;s!=this.$f&&e==s.right;)s=(e=s).parent;return s!=this.$f?s.key:null}return null},js_cols.Wf.prototype.e0=function(t){if(0<this.size){var e=this.Yf(t);if(e==this.$f)return null;if(e.left!=this.$f)return this.max(e.left).key;for(var s=e.parent;s!=this.$f&&e==s.left;)s=(e=s).parent;return s!=this.$f?s.key:null}return null},js_cols.Wf.prototype.s0=function(){return this.min(this.root).key},js_cols.Wf.prototype.i0=function(){return this.max(this.root).key},js_cols.Wf.prototype.Yf=function(t){for(var e=this.root;e!=this.$f&&0!=this.compare(e.key,t);)e=this.compare(t,e.key)<0?e.left:e.right;return e},js_cols.Wf.prototype.contains=function(t){return null!=this.Yf(t).key},js_cols.Wf.prototype.getValues=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},js_cols.Wf.prototype.Hf=function(t){if("array"==js_cols.typeOf(t))for(var e=0;e<t.length;e++)this.jf(t[e]);else if("function"==js_cols.typeOf(t.forEach))t.forEach(this.jf,this);else if("function"==js_cols.typeOf(t.getValues))for(var s=t.getValues(),e=0;e<s.length;e++)this.jf(s[e]);else if("object"==js_cols.typeOf(t))for(var i in t)this.jf(t[i])},js_cols.Wf.prototype.r0=function(t){if("array"==js_cols.typeOf(t))for(var e=0;e<t.length;e++)this.remove(t[e]);else if("function"==js_cols.typeOf(t.forEach))t.forEach(this.Zf,this);else if("function"==js_cols.typeOf(t.getValues))for(var s=t.getValues(),e=0;e<s.length;e++)this.remove(s[e]);else if("object"==js_cols.typeOf(t))for(var i in t)this.remove(t[i])},js_cols.Wf.prototype.n0=function(t){if("array"==js_cols.typeOf(t)){for(var e=0;e<t.length;e++)if(!this.contains(t[e]))return!1;return!0}if("function"==js_cols.typeOf(t.forEach))return t.every(this.contains,this);if("function"==js_cols.typeOf(t.getValues)){for(var s=t.getValues(),e=0;e<s.length;e++)if(!this.contains(s[e]))return!1;return!0}if("object"==js_cols.typeOf(t)){for(var i in t)if(!this.contains(t[i]))return!1;return!0}},js_cols.Wf.prototype.range=function(t,e){var s=[];return this.h0(function(t){s.push(t)},t,e),s},js_cols.Wf.prototype.o0=function(t,e){if(!this.a0())for(var s=this.min(this.root);s!=this.$f;){if(t.call(e,s.key,this))return;s=this.Jf(s)}},js_cols.Wf.prototype.l0=function(t,e,s){if(!this.a0())for(var i=this.Yf(e);i!=this.$f;){if(t.call(s,i.key,this))return;i=this.Jf(i)}},js_cols.Wf.prototype.c0=function(t,e,s){if(!this.a0())for(var i=this.min(this.root),r=this.Yf(e);i!=r;){if(t.call(s,i.key,this))return;i=this.Jf(i)}},js_cols.Wf.prototype.h0=function(t,e,s,i){if(!this.a0())for(var r=this.Yf(e),n=this.Yf(s);r!=n;){if(t.call(i,r.key,this))return;r=this.Jf(r)}},js_cols.Wf.prototype.u0=function(t,e){if(!this.a0())for(var s=this.max(this.root);s!=this.$f;){if(t.call(e,s.key,this))return;s=this.Qf(s)}},js_cols.Wf.prototype.forEach=function(t,e){if(!this.a0())for(var s=this.min(this.root);s!=this.$f;s=this.Jf(s))t.call(e,s.key,s.key,this)},js_cols.Wf.prototype.some=function(t,e){if(!this.a0())for(var s=this.min(this.root);s!=this.$f;s=this.Jf(s))if(t.call(e,s.key,s.key,this))return!0;return!1},js_cols.Wf.prototype.every=function(t,e){if(this.a0())return!1;for(var s=this.min(this.root);s!=this.$f;s=this.Jf(s))if(!t.call(e,s.key,s.key,this))return!1;return!0},js_cols.Wf.prototype.map=function(t,e){var s=[];if(!this.a0())for(var i=this.min(this.root);i!=this.$f;i=this.Jf(i))s.push(t.call(e,i.key,i.key,this));return s},js_cols.Wf.prototype.filter=function(t,e){var s=[];if(!this.a0())for(var i=this.min(this.root);i!=this.$f;i=this.Jf(i))t.call(e,i.key,i.key,this)&&s.push(i.key);return s},js_cols.Wf.prototype.getCount=function(){return this.size},js_cols.Wf.prototype.a0=function(){return 0==this.size},js_cols.Wf.prototype.di=function(t){var e=js_cols.getCount(t);if(this.getCount()>e)return!1;var s=0;if(this.a0())return!0;for(var i=this.min(this.root);i!=this.$f;i=this.Jf(i))js_cols.contains.call(t,t,i.key)&&s++;return s==this.getCount()},js_cols.Wf.prototype.f0=function(t){var e=new js_cols.Wf(this.compare);if(!this.a0())for(var s=this.min(this.root);s!=this.$f;s=this.Jf(s))t.contains.call(t,s.key,s.key,this)&&e.jf(s.key);return e},C33.Wf=class RedBlackSet extends C33.pn{constructor(t){super(),this.d0=new js_cols.Wf(t),this.p0=!1,this.C0=new Set,this.m0=new Set}_u(t){this.p0?this.d0.contains(t)?this.m0.delete(t):this.C0.add(t):this.d0.jf(t)}Gf(t){this.p0?this.d0.contains(t)?this.m0.add(t):this.C0.delete(t):this.d0.remove(t)}ls(t){return this.p0?!!this.C0.has(t)||!this.m0.has(t)&&this.d0.contains(t):this.d0.contains(t)}lu(){this.d0.clear(),this.C0.clear(),this.m0.clear()}toArray(){if(this.p0)throw new Error("cannot be used in queueing mode");return this.d0.getValues()}du(){return this.d0.getCount()+this.C0.size-this.m0.size}cu(){return 0===this.du()}S0(){if(this.cu())throw new Error("empty set");if(this.p0)throw new Error("cannot be used in queueing mode");const t=this.d0,e=t.min(t.root);return e.key}g0(){if(this.cu())throw new Error("empty set");if(this.p0)throw new Error("cannot be used in queueing mode");const t=this.S0();return this.Gf(t),t}_0(t){if(this.p0!==(t=!!t)&&!(this.p0=t)){for(const e of this.m0)this.d0.remove(e);this.m0.clear();for(const s of this.C0)this.d0.jf(s);this.C0.clear()}}T0(t){this.d0.forEach(t)}*values(){if(!this.cu()){const e=this.d0;for(let t=e.min(e.root);t!=e.$f;t=e.Jf(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const C33=self.Ve;C33.y0=class PromiseThrottle{constructor(t=C33.hardwareConcurrency){this.E0=t,this.I0=[],this.A0=0}_u(s){return new Promise((t,e)=>{this.I0.push({P3:s,resolve:t,reject:e}),this.M0()})}R0(s){for(let t=0,e=this.I0.length;t<e;++t)if(this.I0[t].P3===s)return t;return-1}w0(t,e){const s=this.R0(t);if(-1===s)throw new Error("cannot find promise to resolve");this.I0[s].resolve(e),this.I0.splice(s,1)}b0(t,e){const s=this.R0(t);if(-1===s)throw new Error("cannot find promise to reject");this.I0[s].reject(e),this.I0.splice(s,1)}async M0(){if(this.I0.length&&!(this.A0>=this.E0)){this.A0++;const e=this.I0.shift();try{const t=await e.P3();e.resolve(t)}catch(t){e.reject(t)}this.A0--,this.M0()}}static async O0(t,e){let s=[],i=!1,r=[];for(;t--;)r.push((async()=>{let t;for(;t=e.pop();){if(i)return;try{s.push(await t())}catch(t){throw i=!0,t}}})());return await Promise.all(r),s}}}{const C33=self.Ve;C33.G0=class RateLimiter{constructor(t,e,s){this.pf=t,this.P0=e,this.v0=s||2*e,this.x0=-1,this.L0=-1/0,this.D0=()=>this.N0(),this.F0=!1,this.B0=!1,this.k0=null}$0(t){this.B0=!!t}W0(){return void 0!==C33.Battery&&C33.Battery.IsOnBatteryPower()?this.v0:this.P0}V0(...i){if(-1===this.x0){this.k0=i;let t=C33.ff(),e=t-this.L0,s=this.W0();s<=e&&this.B0?(this.L0=t,this.H0()):this.x0=self.setTimeout(this.D0,Math.max(s-e,4))}}H0(){this.F0=!0;const t=this.k0;this.k0=null,t?this.pf(...t):this.pf(),this.F0=!1}gf(){this.F0||(this.U0(),this.k0=null,this.L0=C33.ff())}N0(){this.x0=-1,this.L0=C33.ff(),this.H0()}U0(){-1!==this.x0&&(self.clearTimeout(this.x0),this.x0=-1)}Sn(){this.U0(),this.pf=null,this.k0=null,this.D0=null}}}{const C33=self.Ve;C33.X0=class SVGRasterManager{constructor(){this.j0=new Map,this.Y0=!1,this.q0=null,this.z0=null,this.J0=null,this.K0=null}Z0(t){this.Y0=!!t}Q0(){return this.Y0}td(t){this.q0=t}ed(t){if(this.q0)return this.q0(t);throw new Error("no get base size callback set")}sd(t){this.z0=t}rd(t,e,s,i,r,n){if(this.z0)return this.z0(t,e,s,i,r,n);throw new Error("no raster at size callback set")}nd(t){this.J0=t}hd(t){if(!this.J0)throw new Error("no release result callback set");this.J0(t)}od(t){this.K0=t}ud(){if(!this.K0)throw new Error("no redraw callback set");this.K0()}fd(t){let e=this.j0.get(t);return e||(e=C33.mn(C33.dd,this,t),this.j0.set(t,e)),e.Cd(),e}md(t){this.j0.delete(t.Sd())}gd(){for(const t of this.j0.values())t._d(),t.Td()}}}{const C33=self.Ve,MAX_SURFACE_SIZE=4096;C33.dd=class SVGRasterImage{constructor(t,e){this.yd=t,this.Ed=e,this.Id=0,this.Ad=0,this.Md=0,this.Rd=this.yd.ed(e).then(t=>{this.yd&&(this.Ad=t[0],this.Md=t[1],this.yd.ud())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.wd=!0,this.yd&&this.yd.ud()}),this.bd=0,this.Od=0,this.Gd=0,this.Pd=0,this.vd=!1,this.xd=null,this.Ld=!1,this.wd=!1}Sn(){if(this.Id<=0)throw new Error("already released");this.Id--,0===this.Id&&this.Dd()}_d(){this.xd&&(this.yd.hd(this.xd),this.xd=null)}Dd(){this._d(),this.yd.md(this),this.yd=null}Sd(){return this.Ed}Cd(){this.Id++}Nd(){return 0<this.Id}Fd(){return this.xd}Td(){this.Ld=!0}async Bd(i,r,n){if(0!==r&&0!==n&&!this.wd&&!this.vd){let t=C33.Vn(Math.ceil(r)),e=C33.Vn(Math.ceil(n)),s=Math.max(t,e);if(s>MAX_SURFACE_SIZE){const h=MAX_SURFACE_SIZE/s;r*=h,n*=h,t=Math.min(Math.ceil(t*h),MAX_SURFACE_SIZE),e=Math.min(Math.ceil(e*h),MAX_SURFACE_SIZE)}if(r<t&&n<e){const o=r/n,a=t/e;n=o<a?(r=e*o,e):(r=t)/o}if(this.yd.Q0()&&(t=Math.ceil(r),e=Math.ceil(n)),!(t<=this.bd&&e<=this.Od)||this.Ld){this.vd=!0,this.bd=t,this.Od=e;const l=await this.yd.rd(this.Ed,i,this.bd,this.Od,r,n);this.yd&&(this._d(),this.xd=l,this.Gd=r,this.Pd=n,this.vd=!1,this.Ld=!1,this.yd.ud())}}}kd(){return this.Rd}$d(){return this.Ad}Wd(){return this.Md}Vd(){return this.Gd}Hd(){return this.Pd}Ud(){return this.wd}}}{let lookupHtmlEntity2=function(t){return HTML_ENTITY_MAP.get(t)};lookupHtmlEntity=lookupHtmlEntity2;const C33=self.Ve,NUMERIC_CHARS=(C33.Xd="\ufeff",new Set("0123456789")),WHITESPACE_CHARS=(C33.jd=function(t){return NUMERIC_CHARS.has(t)},new Set(" \t\n\r\u2028\u2029"));C33.Yd=function(t){return WHITESPACE_CHARS.has(t)},C33.qd=function(t){return[...t].filter(t=>!C33.Yd(t)).join("")},C33.zd=function(t){for(const e of t)if(!C33.Yd(e))return!1;return!0},C33.Jd=function(t){for(const e of t)if(!C33.Yd(e))return!1;return!0},C33.Kd=function(t){return 1===t.length&&t.charCodeAt(0)<32},C33.Zd=function(t){return[...t].filter(t=>!C33.Kd(t)).join("")};let cjkPunctuationRegex=null;try{cjkPunctuationRegex=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(err){console.warn("Unable to detect CJK punctuation: ",err)}C33.Qd=function(t){return!C33.Yd(t)&&cjkPunctuationRegex&&cjkPunctuationRegex.test(t)};const NUMERIC_STRING_CHARS=new Set("0123456789.+-e"),HTML_ENTITY_MAP=(C33.tp=function(e){if(!(e=e.trim()).length)return!1;let t=e.charAt(0);if("-"!==t&&!NUMERIC_CHARS.has(t))return!1;for(let t of e)if(!NUMERIC_STRING_CHARS.has(t))return!1;return!0},C33.ep=function(e){let s=e.length;for(;0<s;){let t=e.charAt(s-1);if(!C33.jd(t))break;--s}return e.substr(0,s)},C33.sp=function(t){let e=C33.ep(t),s=t.substr(e.length);return e+(s=s?(parseInt(s,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),HTML_ENTITY_REGEX=/[&<>"']/g,ESCAPE_REGEX=(C33.rp=function(t){return t.replace(HTML_ENTITY_REGEX,lookupHtmlEntity2)},C33.np=function(t){let e=C33.hp(t,"\\","\\\\");return e=C33.hp(e,'"','\\"'),e=C33.hp(e,"\t","\\t"),e=C33.hp(e,"\r",""),C33.hp(e,"\n","\\n")},C33.op=function(t){let e=C33.hp(t,"&","&amp;");return e=C33.hp(e,"<","&lt;"),e=C33.hp(e,">","&gt;"),C33.hp(e,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g);C33.fi=function(t){return t.replace(ESCAPE_REGEX,"\\$&")},C33.lp=function(t,e){let s=0;for(const i of t)i===e&&++s;return s},C33.cp=function(t,e,s=!1){if(!e)return[];s||(t=t.toLowerCase(),e=e.toLowerCase());let i=e.length,r=0,n,h=[];for(;-1<(n=t.indexOf(e,r));)h.push(n),r=n+i;return h},C33.hp=function(t,e,s){return t.replaceAll(e,()=>s)},C33.up=function(t,e,s){return t.replace(new RegExp(C33.fi(e),"gi"),()=>s)},C33.fp=function(t,e){"string"==typeof e?t.textContent=e:e.pp()?t.textContent=e.toString():(t.innerHTML=e.Cp(),e instanceof C33.kr&&e.mp(t))},C33.Sp=function(t,e){return t instanceof C33.HtmlString||t instanceof C33.kr?t.equals(e):e instanceof C33.HtmlString||e instanceof C33.kr?e.equals(t):t===e},C33.gp=function(s,...i){let r=s;for(let t=0,e=i.length;t<e;++t){const n=`{${t}}`;if(!s.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);r=r.replace(n,i[t].toString())}return r},C33._p=function(s,...i){let r=s,n=-1,h=-1;for(let t=0,e=i.length;t<e;++t){const o=`{${t}}`;s.includes(o)?(h=t,r=r.replace(o,i[t].toString())):-1===n&&(n=t)}if(0<=n&&0<=h&&n<h)throw new Error(`missing placeholder '${n}' in string substitution`);return r},C33.Tp=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},C33.yp=function(t,e){return e<t?1:t<e?-1:0},C33.Ep=function(t,e){let s=t.toLowerCase(),i=e.toLowerCase();return i<s?1:s<i?-1:0};let intlSegmenter=null,graphemeSplitter=null;self.Intl&&self.Intl.Segmenter?intlSegmenter=new self.Intl.Segmenter:graphemeSplitter=new self.Le,C33.Ip=function(t){if(intlSegmenter){const e=[];for(const s of intlSegmenter.segment(t))e.push(s.segment);return e}return graphemeSplitter.Pe(t)},C33.Ap=function*(t){if(intlSegmenter)for(const e of intlSegmenter.segment(t))yield e.segment;else yield*graphemeSplitter.ve(t)},C33.Mp=function(e){if(intlSegmenter){let t=0;for(const s of intlSegmenter.segment(e))++t;return t}return graphemeSplitter.xe(e)};const KILOBYTE=1024,MEGABYTE=1024*KILOBYTE,GIGABYTE=1024*MEGABYTE,TERABYTE=1024*GIGABYTE,DEFAULT_FORMATTIME_OPTS=(C33.Rp=function(e,t){let s="common."+(t?"dataRates":"dataSizes")+".",i=self.langSub;if(e<KILOBYTE)return i(s+"bytes",e);if(e<MEGABYTE){let t=e/KILOBYTE;return t=t<10?Math.round(10*t)/10:Math.round(t),i(s+"kilobytes",t)}if(e<GIGABYTE){let t=e/MEGABYTE;return t=t<10?Math.round(10*t)/10:Math.round(t),i(s+"megabytes",t)}if(e<TERABYTE){let t=e/GIGABYTE;return t=t<10?Math.round(10*t)/10:Math.round(t),i(s+"gigabytes",t)}{let t=e/TERABYTE;return t=t<10?Math.round(10*t)/10:Math.round(t),i(s+"terabytes",t)}},{bp:!1,Op:!0,Gp:!0,Pp:!0,vp:!0});C33.xp=function(t,e){e=Object.assign({},DEFAULT_FORMATTIME_OPTS,e),C33.Lang.PushContext("common.time");const s=[],i=self.lang,r=self.langPluralSub;if(e.Op){const h=Math.floor(t/86400);0<h&&(t-=24*h*3600,s.push(r(".days",null,h)))}if(e.Gp){const o=Math.floor(t/3600);(0<o||s.length)&&(t-=3600*o,s.push(r(".hours",null,o)))}if(e.Pp){const a=Math.floor(t/60);(0<a||s.length||!e.vp)&&(t-=60*a,s.push(r(".minutes",null,a)))}if(e.vp){const l=Math.floor(t%60);s.push(r(".seconds",null,l))}const n=(e.bp?i(".approx-prefix"):"")+s.join(i(".separator"));return C33.Lang.PopContext(),n},C33.Lp=function(t,e){let s=t<0?"-":"",i=(t=Math.abs(t)).toString(),r=e-i.length;for(let t=0;t<r;++t)s+="0";return s+i},C33.Dp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},C33.Np=function(t,e){let s=t.split(".").map(t=>t.trim()),i=e.split(".").map(t=>t.trim());C33.Xh(s,4,"0"),C33.Xh(i,4,"0"),s=s.map(t=>parseInt(t,10)),i=i.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const r=s[t]-i[t];if(0!=r)return r<0?-1:1}return 0},C33.Fp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.floor(16*Math.random()),s="x"===t?e:3&e|8;return s.toString(16)})},C33.Bp=function(s,i){if(s.length!==i.length)throw new Error("strings must be same length");let r=0;for(let t=0,e=s.length;t<e;++t)s.charAt(t)!==i.charAt(t)&&++r;return r},C33.kp=function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;let s,i,r,n,h,o;for(e.length<t.length&&(s=t,t=e,e=s),o=Array(t.length+1),i=0;i<=t.length;i++)o[i]=i;for(i=1;i<=e.length;i++){for(n=i,r=1;r<=t.length;r++)h=e[i-1]===t[r-1]?o[r-1]:Math.min(o[r-1]+1,Math.min(n+1,o[r]+1)),o[r-1]=n,n=h;o[t.length]=n}return o[t.length]}}{let bbToHtmlReplacerFunc2=function(t,s,i){const r=BB_CODE_MAP.get(i);if(!r)return"class"===i?s?"</span>":`<span class="bbclass${classIndex++}">`:t;if("string"==typeof r){if("a"===r&&0===linkActions.length||"abbr"===r&&0===tipList.length)return t;if("a"!==r||s){if("abbr"!==r||s)return"<"+s+r+">";{const n=parseInt(i.substring(3),10)-1;if(n<0||n>=tipList.length)throw new Error("invalid bbcode tip substitution");let t=tipList[n],e="";if("string"==typeof t?e=t:"function"==typeof t&&(e=t()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${C33.hp(e,'"',"&quot;")}">`}}{const e=parseInt(i.substring(1),10)-1;if(e<0||e>=linkActions.length)throw new Error("invalid bbcode link substitution");const h=linkActions[e];if("string"==typeof h)return`<a href="${linkActions[e]}">`;if("function"==typeof h)return`<a class="bblink${e}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(r)){let t=r[0],e=r[1];return s?"</"+t+">":`<${t} class="${e}">`}},C33=(bbToHtmlReplacerFunc=bbToHtmlReplacerFunc2,self.Ve),assert=self.assert,BB_CODE_MAP=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),SELF_CLOSING_TAGS=new Set(["icon"]),BBREGEX=/\[(\/?)([a-zA-Z0-9]+)\]/g,CUSTOM_BBREGEX=/\[(\/?)([^\[\n]*?)\]/g,linkActions=null,tipList=null,classIndex=0,LINEBREAK_REGEX=/\n/g;C33.kr=class BBString{constructor(t,e){if(this.$p=e&&e.Wp?t:C33.rp(t),this.Vp="",this.Hp=!1,this.Up=[],this.Xp=[],e){if(this.Hp=!!e.convertLineBreaks,e.links){if(9<e.links.length)throw new Error("too many links");this.Up=e.links}if(e.tips){if(9<e.tips.length)throw new Error("too many tips");this.Xp=e.tips}}this.jp=this.$p.includes("["),this.Yp=this.Hp&&this.$p.includes("\n"),this.qp=!this.jp&&!this.Yp&&!this.$p.includes("&"),this.zp=!1,this.Jp=[]}toString(){return this.$p}valueOf(){return this.$p}pp(){return this.qp}Kp(){return this.jp?this.$p.replace(BBREGEX,""):this.$p}Cp(){if(this.qp)return this.$p;if(!this.Vp&&this.$p){let t=this.$p;this.jp&&(classIndex=0,linkActions=this.Up,tipList=this.Xp,t=t.replace(BBREGEX,bbToHtmlReplacerFunc2),linkActions=null,tipList=null),this.Yp&&(t=t.replace(LINEBREAK_REGEX,"<br>")),this.Vp=t}return this.Vp}mp(s){if(this.Up.length)for(let t=0,e=this.Up.length;t<e;++t){const i=this.Up[t];if("function"==typeof i){const r=s.querySelector(".bblink"+t);if(!r)throw new Error("unable to attach BBString link handler");r.onclick=i}}}equals(t){return t instanceof C33.HtmlString?this.Cp()===t.Cp():t instanceof C33.kr?this.$p===t.$p:this.$p===t}Zp(){if(!this.zp){let i=[],t=this.$p,r=[],e=CUSTOM_BBREGEX.lastIndex=0,s;for(;null!==(s=CUSTOM_BBREGEX.exec(t));){const n=s.index;if(!(0<n&&"\\"===t.charAt(n-1))){const h=s[0],o=s[1],a=s[2],l=t.substring(e,n);if(e=n+h.length,l&&i.push({text:l,Qp:r.slice(0)}),a)if(o){const c=a.toLowerCase();for(let t=r.length-1;0<=t;--t)if(r[t].tag===c){r.splice(t,1);break}}else{let t=a,e=null,s=a.indexOf("=");if(-1!==s?(t=a.substring(0,s).toLowerCase(),e=a.substring(s+1)):t=t.toLowerCase(),SELF_CLOSING_TAGS.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);i.push({icon:e,Qp:r.slice(0)})}else r.push({tag:t,param:e})}}}e<t.length&&i.push({text:t.substring(e),Qp:r.slice(0)});for(const u of i)u.text&&(u.text=this.tC(u.text));this.Jp=i.map(t=>t.icon?C33.mn(C33.eC,{icon:t.icon,Qp:t.Qp}):C33.mn(C33.sC,{iC:C33.Ip(t.text),Qp:t.Qp})),this.zp=!0}return this.Jp}tC(t){return t=C33.hp(t,"\\[","["),C33.hp(t,"\\\\","\\")}static rC(t){return C33.mn(C33.kr,t,{Wp:!0}).Kp()}static nC(t){return t.replace(CUSTOM_BBREGEX,"")}}}{let IsWordBreakWhiteSpace2=function(t){return""!==t&&""!==t&&C33.Yd(t)},IsOpeningCJKPunctiationChar2=function(t){return CJK_OPEN_PUNCTUATION.has(t)},IsContinuingCJKPunctuationChar2=function(t){return C33.Qd(t)&&!IsOpeningCJKPunctiationChar2(t)},WordBreakTrimEnd2=function(t){for(;0<t.length&&IsWordBreakWhiteSpace2(t.at(-1));)t.pop()},IsNewline2=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=IsWordBreakWhiteSpace2,IsOpeningCJKPunctiationChar=IsOpeningCJKPunctiationChar2,IsContinuingCJKPunctuationChar=IsContinuingCJKPunctuationChar2,WordBreakTrimEnd=WordBreakTrimEnd2,IsNewline=IsNewline2;const C33=self.Ve,CJK_OPEN_PUNCTUATION=new Set("");C33.hC=class WordWrap{constructor(){this.oC=[],this.aC=null}lC(){return this.oC}cC(){return this.oC.length}uC(t){this.aC=t}fC(t,e){let s=0,i=0,r=0,n=0,h=0;for(const o of t){if(-1===o.dC()){const a=e(o);o.pC(a.height),o.CC(a.fontBoundingBoxAscent||0),o.mC(a.fontBoundingBoxDescent||0),o.SC(a.gC||0),o._C()?o.TC(a.width):o.yC()&&o.EC(this.aC)}s+=o.dC(),i=Math.max(i,o.IC()),r=Math.max(r,o.AC()),n=Math.max(n,o.MC()),h=Math.max(h,o.RC())}return{width:s,height:i,fontBoundingBoxAscent:r,fontBoundingBoxDescent:n,gC:h}}wC(t,e,s,i,r,n){this.oC.push(C33.mn(C33.hC.bC,{OC:t,width:e,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:r,gC:n}))}hC(e,n,h,s,o){if("string"==typeof e&&(e=[C33.mn(C33.sC,{iC:C33.Ip(e)})]),C33.Vh(this.oC),!(!e.length||1===e.length&&e[0]._C()&&e[0].cu()||h<2)){if(1===e.length){const a=e[0];if(a._C()&&a.GC()<=100&&!a.PC()){let{width:t,height:e,fontBoundingBoxAscent:s,fontBoundingBoxDescent:i,gC:r}=n(a);if(t+=o,a.TC(t),a.pC(e),a.CC(s||0),a.mC(i||0),a.SC(r||0),t<=h)return void this.wC([a],t,e,s,i,r)}}let t;t="word"===s?this.vC(e):"cjk"===s?this.xC(e):this.LC(e),this.DC(t,n,h,o)}}vC(t){let e=[],s=[],i=!1;for(const r of t){const n=r.NC();if(r.yC())0<s.length&&e.push(s),e.push([r]),s=[];else for(const h of r.FC())if(IsNewline2(h))0<s.length&&e.push(s),e.push([C33.mn(C33.sC,{iC:["\n"],Qp:n})]),s=[];else if(0===s.length)s.push(C33.mn(C33.sC,{iC:[h],Qp:n})),i=IsWordBreakWhiteSpace2(h);else{const o=IsWordBreakWhiteSpace2(h);if(o===i){const a=s.at(-1);a.NC()===n?a.BC(h):s.push(C33.mn(C33.sC,{iC:[h],Qp:n}))}else e.push(s),s=[C33.mn(C33.sC,{iC:[h],Qp:n})],i=o}}return 0<s.length&&e.push(s),e}xC(t){let e=[],s=[],i=!1;for(const r of t){const n=r.NC();if(r.yC())0<s.length&&e.push(s),e.push([r]),s=[];else for(const h of r.FC())if(IsNewline2(h))0<s.length&&e.push(s),e.push([C33.mn(C33.sC,{iC:["\n"],Qp:n})]),s=[];else{if(0===s.length)s.push(C33.mn(C33.sC,{iC:[h],Qp:n}));else if(i||IsContinuingCJKPunctuationChar2(h)){const o=s.at(-1);o.NC()===n?o.BC(h):s.push(C33.mn(C33.sC,{iC:[h],Qp:n}))}else e.push(s),s=[C33.mn(C33.sC,{iC:[h],Qp:n})];i=IsOpeningCJKPunctiationChar2(h)}}return 0<s.length&&e.push(s),e}LC(t){const e=[];for(const s of t)if(s._C()){const i=s.FC();C33.sn(e,i.map(t=>[C33.mn(C33.sC,{iC:[t],Qp:s.NC()})]))}else e.push([s]);return e}kC(t){return t.map(t=>t.$C())}WC(e,s){let t=e.length?e.at(-1):null,i=0;t&&t._C()&&s[0]._C()&&s[0].NC()===t.NC()&&(t.VC(s[0].FC()),i=1);for(let t=s.length;i<t;++i){const r=s[i];e.push(r.$C())}}DC(t,e,s,i){let r=[],n=0,h=0,o=0,a=0,l=0;for(const c of t)if(1===c.length&&c[0]._C()&&1===c[0].GC()&&IsNewline2(c[0].FC()[0])){if(0===h){const u=C33.mn(C33.sC,{iC:[" "],Qp:c[0].NC()}),f=e(u);h=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.gC||0}this.wC(r,n,h,o,a,l),r=[],n=0,h=0,o=0,a=0,l=0}else{const d=this.kC(r),p=(this.WC(d,c),this.fC(d,e)),C=p.width;if(s<=C)if(0<r.length&&this.wC(r,n,h,o,a,l),r=[],c[0]._C()&&C33.Jd(c[0].FC()))n=0,h=0,o=0,a=0,l=0;else{this.WC(r,c);const m=this.fC(r,e);n=m.width,h=m.height,o=m.fontBoundingBoxAscent,a=m.fontBoundingBoxDescent,l=m.gC}else r=d,n=C,h=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.gC}0<r.length&&this.wC(r,n,h,o,a,l),this.HC(e,i)}HC(e,s){for(const i of this.oC){const r=i.UC();if(r.length){let t=r.at(-1);if(t._C()){const n=t.FC(),h=n.slice(0);if(WordBreakTrimEnd2(h),0===h.length)i.XC(-t.dC()),r.pop();else if(h.length<n.length){t.jC(h);const o=e(t).width,a=t.dC()-o;t.TC(o),i.XC(-a)}0!==s&&0<r.length&&((t=r.at(-1)).XC(s),i.XC(s))}}}}lu(){C33.Vh(this.oC)}YC(){return this.oC.reduce((t,e)=>Math.max(t,e.dC()),0)}qC(){return this.oC.reduce((t,e)=>t+e.IC(),0)}}}{const C33=self.Ve;C33.hC.bC=class WordWrapLine{constructor(t){this.Jp=t.OC||[],this.zC=t.width||-1,this.JC=t.height||-1,this.KC=t.fontBoundingBoxAscent||-1,this.ZC=t.fontBoundingBoxDescent||-1,this.QC=t.gC||-1,this.t1=0,this.e1=0}OC(){return this.Jp.values()}*s1(){const e=this.Jp;for(let t=e.length-1;0<=t;--t)yield e[t]}UC(){return this.Jp}XC(t){this.zC+=t}dC(){return this.zC}IC(){return this.JC}i1(){return this.KC}MC(){return this.ZC}RC(){return this.QC}n1(t){this.t1=t}h1(){return this.t1}o1(t){this.e1=t}a1(){return this.e1}}}{const C33=self.Ve;C33.l1=class FragmentBase{constructor(t){this.c1=t.Qp||[],this.zC=t.width||-1,this.JC=t.height||-1,this.KC=t.fontBoundingBoxAscent||-1,this.ZC=t.fontBoundingBoxDescent||-1,this.QC=t.gC||-1,this.t1=0,this.e1=0}_C(){return!1}yC(){return!1}NC(){return this.c1}u1(e){const s=this.c1;for(let t=s.length-1;0<=t;--t){const i=s[t];if(i.tag===e)return i}return null}f1(t){return!!this.u1(t)}d1(){const t=new Map;for(const e of this.c1)t.set(e.tag,e.param);return t}XC(t){this.zC+=t}TC(t){this.zC=t}dC(){return this.zC}pC(t){this.JC=t}IC(){return this.JC}CC(t){this.KC=t}AC(){return this.KC}mC(t){this.ZC=t}MC(){return this.ZC}SC(t){this.QC=t}RC(){return this.QC}n1(t){this.t1=t}h1(){return this.t1}o1(t){this.e1=t}a1(){return this.e1}}}{const C33=self.Ve;C33.sC=class TextFragment extends C33.l1{constructor(t){super(t),this.C1=t.iC}_C(){return!0}VC(t){C33.sn(this.C1,t),this.zC=-1,this.JC=-1,this.KC=-1,this.ZC=-1,this.QC=-1}BC(t){this.C1.push(t)}$C(){return C33.mn(C33.sC,{iC:this.C1.slice(0),Qp:this.c1,width:this.zC,height:this.JC,fontBoundingBoxAscent:this.KC,fontBoundingBoxDescent:this.ZC,gC:this.QC})}FC(){return this.C1}jC(t){this.C1=t}GC(){return this.C1.length}cu(){return 0===this.C1.length}PC(){return this.C1.includes("\n")}}}{const C33=self.Ve;C33.eC=class IconFragment extends C33.l1{constructor(t){super(t),this.m1=t.icon}yC(){return!0}S1(){return this.m1}$C(){return C33.mn(C33.eC,{icon:this.m1,Qp:this.c1,width:this.zC,height:this.JC,fontBoundingBoxAscent:this.KC,fontBoundingBoxDescent:this.ZC,gC:this.QC})}g1(t){if(!t)return null;let e=Number(this.m1);return String(e)===this.m1?(e=Math.floor(e),t._1(e)):t.T1(this.m1)}EC(t){const e=this.g1(t);this.zC=e?this.JC*e.dC()/e.IC():0}E1(t){const e=this.g1(t);return e?e.E1():null}GC(){return 1}}}{const C33=self.Ve;C33.I1=class TextIconManager{constructor(t){this.A1=new Map,this.M1=t.R1,this.w1=t.b1}Sn(){for(const t of this.A1.values())t.Sn();this.A1.clear()}O1(t){let e=this.A1.get(t);if(!e){const s=this.M1(t);e=C33.mn(C33.G1,this,{source:t,P1:s}),this.A1.set(t,e)}return e}v1(t){return this.A1.has(t)}L1(t){const e=this.A1.get(t);e&&e.Sn(),this.A1.delete(t)}async D1(t){return this.w1(t)}}}{const C33=self.Ve;C33.G1=class TextIconSet{constructor(t,e){this.N1=t,this.F1=e.source,this.B1=[],this.W1=new Map,this.V1=!1,this.H1=!1,this.U1=null;const s=e.P1.X1;for(let t=0,e=s.length;t<e;++t){const i=s[t],r=C33.mn(C33.j1,this,{index:t,tag:i.tag,source:i.source,width:i.width,height:i.height});this.B1.push(r),i.tag&&this.W1.set(i.tag.toLowerCase(),r)}}Sn(){for(const t of this.B1)t.Sn();C33.Vh(this.B1),this.W1.clear(),this.N1=null,this.F1=null}Y1(){return this.V1}q1(){return this.H1}z1(){return this.U1||(this.U1=this.J1()),this.U1}async J1(){if(!this.V1){this.V1=!0,this.H1=!0;const t=await this.N1.D1(this.F1);if(this.N1){const s=t.X1;for(let t=0,e=Math.min(s.length,this.B1.length);t<e;++t){const i=s[t].K1;this.B1[t].Z1(i)}this.H1=!1}}}_1(t){return(t=Math.floor(t))<0||t>=this.B1.length?null:this.B1[t]}T1(t){return this.W1.get(t.toLowerCase())||null}}}{const C33=self.Ve;C33.j1=class TextIcon{constructor(t,e){this.Q1=t,this.F1=e.source||null,this.tm=e.index,this.rm=e.tag,this.zC=e.width,this.JC=e.height,this.nm=null}Sn(){this.zC=0,this.JC=0,this.Q1=null}hm(){return this.F1}dC(){return this.zC}IC(){return this.JC}Z1(t){this.nm=t}E1(){return this.nm}}}{let PlaneFromPoints2=function(t,e,s,i){const r=tempVec3c;vec32.$(tempVec3a,s,e),vec32.$(tempVec3b,t,e),vec32.Dt(r,tempVec3a,tempVec3b),vec32.normalize(r,r),i.set(r[0],r[1],r[2],vec32.Lt(t,r))},IsInFrontOfPlane2=function(t,e,s,i,r,n,h){const o=h.x,a=h.y,l=h.z,c=h.w,u=h.am,f=h.lm,d=h.um,p=1-u,C=1-f,m=1-d,S=o*t*u+o*i*p+a*e*f+a*r*C+l*s*d+l*n*m;if(c<=S)return!0;const g=o*i*u+o*t*p+a*r*f+a*e*C+l*n*d+l*s*m;return c<g},IsPointInFrontOfPlane2=function(t,e,s,i){const r=i.x,n=i.y,h=i.z,o=i.w,a=r*t+n*e+h*s;return o<=a};PlaneFromPoints=PlaneFromPoints2,IsInFrontOfPlane=IsInFrontOfPlane2,IsPointInFrontOfPlane=IsPointInFrontOfPlane2;const C33=self.Ve,glMatrix=self._e,vec32=glMatrix.we,vec42=glMatrix.Oe,mat42=glMatrix.Ie,tempVec3a=vec32.create(),tempVec3b=vec32.create(),tempVec3c=vec32.create(),tempVec4=vec42.create(),tempMat4=mat42.create(),neartl=vec32.create(),neartr=vec32.create(),nearbl=vec32.create(),nearbr=vec32.create(),fartl=vec32.create(),fartr=vec32.create(),farbl=vec32.create(),farbr=vec32.create(),unitViewport=vec42.M(0,0,1,1);C33.fm={pm(t,e,s,i,r,n,h){let o=i[0]*t+i[4]*e+i[8]*s+i[12],a=i[1]*t+i[5]*e+i[9]*s+i[13],l=i[2]*t+i[6]*e+i[10]*s+i[14],c=i[3]*t+i[7]*e+i[11]*s+i[15],u=r[0]*o+r[4]*a+r[8]*l+r[12]*c,f=r[1]*o+r[5]*a+r[9]*l+r[13]*c,d=r[2]*o+r[6]*a+r[10]*l+r[14]*c,p=r[3]*o+r[7]*a+r[11]*l+r[15]*c;return 0!=p&&(f*=p=1/p,d*=p,h[0]=(.5*(u*=p)+.5)*n[2]+n[0],h[1]=(.5*f+.5)*n[3]+n[1],h[2]=.5*(1+d),!0)},Cm(t,e,s,i,r,n,h){const o=tempMat4,a=tempVec4;return mat42.multiply(o,r,i),null!==mat42.O(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(e-n[1])/n[3]*2-1,a[2]=2*s-1,a[3]=1,vec42.$t(a,a,o),0!==a[3])&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0)},Sm(t,e,s,i,r,n,h){const o=tempVec3a,a=tempVec3b;if(!C33.fm.Cm(t,e,0,i,r,n,o))return!1;if(!C33.fm.Cm(t,e,1,i,r,n,a))return!1;let l=tempVec3b,c=(vec32.$(l,a,o),tempVec3c),u=(vec32.set(c,0,0,1),-s),f=vec32.Lt(c,l),d=0;if(0===f){const p=vec32.Lt(c,o)+u;if(0!==p)return!1}else if((d=-(vec32.Lt(o,c)+u)/f)<0)return!1;return vec32.Ot(h,o,l,d),!0}};class Plane{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.am=NaN,this.lm=NaN,this.um=NaN}set(t,e,s,i){this.x=t,this.y=e,this.z=s,this.w=i,this.am=0<t?1:0,this.lm=0<e?1:0,this.um=0<s?1:0}}C33.fm.gm=class ViewFrustum{constructor(){this._m=new Plane,this.Tm=new Plane,this.ym=new Plane,this.Em=new Plane,this.Im=new Plane,this.Am=new Plane}Mm(t,e){const s=unitViewport;C33.fm.Cm(0,1,0,t,e,s,neartl),C33.fm.Cm(1,1,0,t,e,s,neartr),C33.fm.Cm(0,0,0,t,e,s,nearbl),C33.fm.Cm(1,0,0,t,e,s,nearbr),C33.fm.Cm(0,1,1,t,e,s,fartl),C33.fm.Cm(1,1,1,t,e,s,fartr),C33.fm.Cm(0,0,1,t,e,s,farbl),C33.fm.Cm(1,0,1,t,e,s,farbr),PlaneFromPoints2(nearbl,neartl,fartl,this._m),PlaneFromPoints2(neartl,neartr,fartr,this.Tm),PlaneFromPoints2(neartr,nearbr,farbr,this.ym),PlaneFromPoints2(nearbr,nearbl,farbl,this.Em),PlaneFromPoints2(farbl,fartl,fartr,this.Am),PlaneFromPoints2(nearbr,neartr,neartl,this.Im)}Rm(t,e,s,i,r,n){return IsInFrontOfPlane2(t,e,s,i,r,n,this._m)&&IsInFrontOfPlane2(t,e,s,i,r,n,this.Tm)&&IsInFrontOfPlane2(t,e,s,i,r,n,this.ym)&&IsInFrontOfPlane2(t,e,s,i,r,n,this.Em)&&IsInFrontOfPlane2(t,e,s,i,r,n,this.Im)&&IsInFrontOfPlane2(t,e,s,i,r,n,this.Am)}wm(t,e,s){return!IsPointInFrontOfPlane2(t,e,s,this.Im)}}}{const C33=self.Ve,glMatrix=self._e,vec32=glMatrix.we,vec42=glMatrix.Oe,mat42=glMatrix.Ie,tempMat4=mat42.create(),tmpVec3a=vec32.M(0,0,0),tmpVec3b=vec32.M(0,0,0),tmpVec3c=vec32.M(0,0,0),defaultUpVector=vec32.M(0,1,0),tmpVec4=vec42.M(0,0,0,0),tmpQuad=new C33.nc,tmpRect=new C33.Rect,defaultTexCoordsQuad=new C33.nc(0,0,1,0,1,1,0,1),DEFAULT_RENDERERBASE_OPTS={Om:1,Gm:1e4},matWebGLtoWebGPU=mat42.M(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);C33.fm.Pm=class RendererBase{constructor(t){t=Object.assign({},DEFAULT_RENDERERBASE_OPTS,t),this.zC=0,this.JC=0,this.vm=C33.An(45),this.xm=Math.tan(this.vm/2),this.Lm=mat42.create(),this.Dm=mat42.create(),this.Nm=!1,this.Fm=t.Om,this.Bm=t.Gm,this.km=[],this.$m=new Map,this.Wm=null,this.Vm=null,this.Hm=null,this.Um=null,this.Xm=null,this.jm=null,this.Ym=null,this.qm=null,this.zm=null,this.Jm=null,this.Km=null,this.Zm=null,this.Qm=new Map,this.t2=null,this.e2=[],this.s2=new Map,this.i2=0,this.n2=0,this.h2=1,this.o2=[this.h2],this.a2=1,this.l2=[this.a2],this.c2=.5,this.u2=[this.c2],this.f2=0,this.d2=!0,this.C2=!1}m2(t){let e=0,s=t.length,i=0;for(;e<s;)t[e++]=i,t[e++]=i+1,t[e++]=i+2,t[e++]=i,t[e++]=i+2,t[e++]=i+3,i+=4}S2(){this.i2=0,this.n2=0,this.Wm=null,this.Vm=null,this.Hm=null,this.Um=null,this.Xm=null,this.jm=null,this.Ym=null,this.qm=null,this.zm=null,this.Jm=null,this.Km=null,this.Zm=null,this.g2()}_2(){this.S2(),this.t2=null}T2(){for(const t of this.km)t.Sn();this.S2()}dC(){return this.zC}IC(){return this.JC}E2(t){return this.I2()?100:t/(2*this.A2())}M2(t){if(this.I2()){const e=t/(2*this.A2());return e/this.E2(t)}return 1}R2(t){this.Fm=t}w2(){return this.Fm}b2(t){this.Bm=t}O2(){return this.Bm}G2(t){this.vm=t,this.xm=Math.tan(this.vm/2)}P2(){return this.vm}A2(){return this.xm}v2(){this.Nm=!1}L2(){this.Nm=!0}I2(){return!this.Nm}D2(){return this.Nm}N2(t,e,s=.5,i=.5){const r=this.w2(),n=this.O2(),h=this.P2();if(.5===s&&.5===i)this.F2()?mat42.yt(t,h,e,r,n):mat42.perspective(t,h,e,r,n);else{const o=2*(s=1-s)-2,a=2*s,l=2*i-2,c=2*i,u=this.A2()*r,f=u*e;mat42._t(t,o*f,a*f,l*u,c*u,r,n),this.F2()&&mat42.mul(t,matWebGLtoWebGPU,t)}}B2(t,e,s,i=1){const r=self.devicePixelRatio,n=2*this.E2(s)*r*this.A2()/s,h=e*n/(2*r*i),o=s*n/(2*r*i),a=-h,l=h,c=-o,u=o;this.F2()?mat42.At(t,a,l,c,u,this.w2(),this.O2()):mat42.ortho(t,a,l,c,u,this.w2(),this.O2())}W2(t,e,s,i,r,n=1){let h=1;this.I2()&&(h=200*this.A2()/r);const o=tmpVec3c,a=(vec32.set(o,h,-h,1),tmpVec3a),l=tmpVec3b;vec32.multiply(a,e,o),vec32.multiply(l,s,o),mat42.Mt(t,a,l,i||defaultUpVector),o[2]=n,mat42.scale(t,t,o)}V2(t,e,s,i,r,n,h,o){return vec32.set(tmpVec3a,t,e,s),vec32.set(tmpVec3b,i,r,n),this.W2(tempMat4,tmpVec3a,tmpVec3b,defaultUpVector,h,o),tempMat4}H2(t){this.km.push(t),this.$m.set(t.i3(),t)}U2(t){const e=this.km.indexOf(t);-1!==e&&this.km.splice(e,1),this.$m.delete(t.i3())}g2(){C33.Vh(this.km),this.$m.clear()}X2(t){return this.$m.get(t)||null}j2(){return this.Wm}Y2(){this.q2(this.Wm)}z2(){return this.Vm}J2(){this.q2(this.Vm)}K2(){this.q2(this.Hm)}Z2(){this.q2(this.Um)}Q2(){this.q2(this.Xm)}tS(){this.q2(this.jm)}eS(){this.q2(this.Ym)}sS(){this.q2(this.qm)}iS(){this.q2(this.zm)}rS(){this.q2(this.Jm)}nS(){this.q2(this.Km)}hS(){this.q2(this.Zm)}oS(t){this.t2=t}aS(){return this.t2}lS(t,e,s,i){let r=C33.fm.uS.cS(t,e,s,i),n=this.Qm.get(r);return n||(n=C33.mn(C33.fm.uS,this,t,e,s,i),this.Qm.set(r,n)),n.fS(),n}dS(t){t.pS(),0===t.CS()&&(this.t2===t&&(this.t2=null),this.Qm.delete(t.mS()),t.Sn())}SS(t){C33.Vh(this.e2),this.s2.clear();let e=0;for(const s of t){const i=s[0],r=s[1],n=s[2];this.e2.push([r,n]),this.s2.set(i,{number:e,gS:r,_S:n}),e++}}TS(t){return this.e2[t]}yS(t){return this.TS(t)[0]}ES(t){return this.TS(t)[1]}IS(t){const e=this.s2.get(t);if(void 0===e)throw new Error("invalid blend name");return e}AS(t){const e=this.s2.get(t);if(void 0===e)throw new Error("invalid blend name");return e.number}MS(t){this.i2=t}RS(){return this.i2}wS(t){this.n2=t,this.t2=null}bS(){return this.n2}bC(t,e,s,i){const r=C33.bn(t,e,s,i),n=Math.sin(r),h=Math.cos(r),o=.5*this.h2,a=n*o,l=h*o,c=this.a2;2===c?this.OS(t,e,0,s,i,0,a,l):1===c?this.GS(t,e,0,s,i,0,a,l):this.PS(t,e,0,s,i,0,a,l)}vS(t,e,s,i,r,n){const h=C33.bn(t,e,i,r),o=Math.sin(h),a=Math.cos(h),l=.5*this.h2,c=o*l,u=a*l,f=this.a2;2===f?this.OS(t,e,s,i,r,n,c,u):1===f?this.GS(t,e,s,i,r,n,c,u):this.PS(t,e,s,i,r,n,c,u)}OS(t,e,s,i,r,n,h,o){const a=this.c2,l=t+a-o,c=e+a-h,u=i+a+o,f=r+a+h,d=2*o,p=2*h,C=l+h,m=c-o,S=l-h+d,g=c+o+p,_=u+h,T=f-o,y=u-h-d,E=f+o-p;this.xS(C,m,s,_,T,n,y,E,n,S,g,s,defaultTexCoordsQuad)}GS(t,e,s,i,r,n,h,o){const a=this.c2,l=t+a-o,c=e+a-h,u=i+a+o,f=r+a+h,d=l+h,p=c-o,C=l-h,m=c+o,S=u+h,g=f-o,_=u-h,T=f+o;this.xS(d,p,s,S,g,n,_,T,n,C,m,s,defaultTexCoordsQuad)}PS(t,e,s,i,r,n,h,o){const a=this.c2,l=t+a,c=e+a,u=i+a,f=r+a,d=l+h,p=c-o,C=l-h,m=c+o,S=u+h,g=f-o,_=u-h,T=f+o;this.xS(d,p,s,S,g,n,_,T,n,C,m,s,defaultTexCoordsQuad)}LS(t,e,s,i,r,n){const h=C33.bn(t,e,s,i),o=Math.sin(h),a=Math.cos(h),l=.5*this.h2,c=o*l,u=a*l,f=this.a2;2===f?this.DS(t,e,s,i,c,u,r,n):1===f?this.NS(t,e,s,i,c,u,r,n):this.FS(t,e,s,i,c,u,r,n)}DS(t,e,s,i,r,n,h,o){const a=this.c2,l=t+a-n,c=e+a-r,u=s+a+n,f=i+a+r,d=2*n,p=2*r,C=l+r,m=c-n,S=l-r+d,g=c+n+p,_=u+r,T=f-n,y=u-r-d,E=f+n-p;tmpQuad.set(C,m,_,T,y,E,S,g),tmpRect.set(h,0,o,0),this.BS(tmpQuad,tmpRect)}NS(t,e,s,i,r,n,h,o){const a=this.c2,l=t+a-n,c=e+a-r,u=s+a+n,f=i+a+r,d=l+r,p=c-n,C=l-r,m=c+n,S=u+r,g=f-n,_=u-r,T=f+n;tmpQuad.set(d,p,S,g,_,T,C,m),tmpRect.set(h,0,o,0),this.BS(tmpQuad,tmpRect)}FS(t,e,s,i,r,n,h,o){const a=this.c2,l=t+a,c=e+a,u=s+a,f=i+a,d=l+r,p=c-n,C=l-r,m=c+n,S=u+r,g=f-n,_=u-r,T=f+n;tmpQuad.set(d,p,S,g,_,T,C,m),tmpRect.set(h,0,o,0),this.BS(tmpQuad,tmpRect)}kS(t,e,s,i){const r=.5*this.h2,n=this.a2;2===n?this.$S(t,e,s,i,r):1===n?this.WS(t,e,s,i,r):this.VS(t,e,s,i,r)}$S(t,e,s,i,r){this.OS(t,e,0,s,e,0,0,r),this.OS(s,e,0,s,i,0,r,0),this.OS(s,i,0,t,i,0,0,-r),this.OS(t,i,0,t,e,0,-r,0)}WS(t,e,s,i,r){this.GS(t,e,0,s,e,0,0,r),this.GS(s,e,0,s,i,0,r,0),this.GS(s,i,0,t,i,0,0,-r),this.GS(t,i,0,t,e,0,-r,0)}VS(t,e,s,i,r){this.PS(t,e,0,s,e,0,0,r),this.PS(s,e,0,s,i,0,r,0),this.PS(s,i,0,t,i,0,0,-r),this.PS(t,i,0,t,e,0,-r,0)}HS(t){this.kS(t.bl(),t.Ol(),t.Gl(),t.Pl())}US(t){const e=C33.bn(t.hh(),t.oh(),t.ah(),t.lh()),s=Math.sin(e),i=Math.cos(e),r=.5*this.h2,n=s*r,h=i*r,o=this.a2;2===o?this.XS(t,n,h):1===o?this.jS(t,n,h):this.YS(t,n,h)}XS(t,e,s){this.OS(t.hh(),t.oh(),0,t.ah(),t.lh(),0,e,s),this.OS(t.ah(),t.lh(),0,t.uh(),t.fh(),0,s,-e),this.OS(t.uh(),t.fh(),0,t.ph(),t.Ch(),0,-e,-s),this.OS(t.ph(),t.Ch(),0,t.hh(),t.oh(),0,-s,e)}jS(t,e,s){this.GS(t.hh(),t.oh(),0,t.ah(),t.lh(),0,e,s),this.GS(t.ah(),t.lh(),0,t.uh(),t.fh(),0,s,-e),this.GS(t.uh(),t.fh(),0,t.ph(),t.Ch(),0,-e,-s),this.GS(t.ph(),t.Ch(),0,t.hh(),t.oh(),0,-s,e)}YS(t,e,s){this.PS(t.hh(),t.oh(),0,t.ah(),t.lh(),0,e,s),this.PS(t.ah(),t.lh(),0,t.uh(),t.fh(),0,s,-e),this.PS(t.uh(),t.fh(),0,t.ph(),t.Ch(),0,-e,-s),this.PS(t.ph(),t.Ch(),0,t.hh(),t.oh(),0,-s,e)}qS(t){this.h2=t,this.o2[this.o2.length-1]=t}zS(){return this.h2}JS(t){if(100<=this.o2.length)throw new Error("pushed too many line widths - check push/pop pairs");this.o2.push(t),this.h2=t}KS(){if(this.o2.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.o2.pop(),this.h2=this.o2.at(-1)}ZS(){this.a2=0,this.l2[this.l2.length-1]=0}QS(){this.a2=1,this.l2[this.l2.length-1]=0}tg(){this.a2=2,this.l2[this.l2.length-1]=0}eg(t){if("butt"===t)this.sg();else if("square"===t)this.ig();else{if("zag"!==t)throw new Error("invalid line cap");this.rg()}}sg(){if(100<=this.l2.length)throw new Error("pushed too many line caps - check push/pop pairs");this.l2.push(0),this.a2=0}ig(){if(100<=this.l2.length)throw new Error("pushed too many line caps - check push/pop pairs");this.l2.push(1),this.a2=1}rg(){if(100<=this.l2.length)throw new Error("pushed too many line caps - check push/pop pairs");this.l2.push(2),this.a2=2}ng(){if(this.l2.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.l2.pop(),this.a2=this.l2.at(-1)}hg(t){this.c2=t,this.u2[this.u2.length-1]=t}og(){return this.c2}ag(t){if(100<=this.u2.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.u2.push(t),this.c2=t}lg(){if(this.u2.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.u2.pop(),this.c2=this.u2.at(-1)}ug(e){const t=e.length/2;if(t<3)throw new Error("need at least 3 points");const s=t-2,i=s-1,r=e[0],n=e[1];for(let t=0;t<s;t+=2){const h=2*t,o=e[2+h],a=e[3+h],l=e[4+h],c=e[5+h];if(t===i)this.fg(r,n,o,a,l,c,l,c);else{const u=e[6+h],f=e[7+h];this.fg(r,n,o,a,l,c,u,f)}}}dg(){return 3}pg(){this.Cg(!0),this.f2++}mg(){return this.f2}Sg(){this.f2++}gg(t){this.d2=!!t}_g(){return this.d2}Tg(t){this.C2=!!t}yg(){return this.C2}Eg(){return!1}F2(){return!1}Ig(){}Ag(){}Mg(){}Rg(){return this.Ig()+this.Ag()+this.Mg()}wg(){return C33.mn(C33.fm.bg,this)}}}{const C33=self.Ve;C33.fm.Og=class ShaderProgramBase{constructor(t,e){this.Tn=e.name,this.Gg=t,this.Pg=e.vg||0,this.xg=e.Lg||0,this.Dg=!!e.Ng,this.Fg=!!e.Bg,this.kg=!!e.$g,this.Wg=!!e.Vg,this.Hg=!!e.Ug,this.Xg=!!e.jg,this.Yg=!!e.qg,this.zg=!1,this.Jg=this.Dg||this.Xg||0!==this.Pg||0!==this.xg}Sn(){this.Gg=null}Kg(){return this.Gg}i3(){return this.Tn}Zg(){return 0!==this.Pg||0!==this.xg}Qg(){return this.Pg}t_(){return this.xg}e_(){return this.Dg}s_(){return this.Fg}i_(){return this.kg}r_(){return this.Wg}n_(){return this.Hg}h_(){return this.Xg}o_(){return this.Yg}a_(){return this.zg}l_(){return this.Jg}c_(){return!1}}}{const C33=self.Ve;C33.fm.uS=class StateGroup{constructor(t,e,s,i,r){this.Gg=t,this.Id=0,this.u_=null,this.f_="",this.d_=s,this.p_=C33.mn(C33.qo),this.p_.set(i),this.C_=r,"string"==typeof e?this.f_=e:(this.u_=e,this.f_=this.u_.i3())}Sn(){if(0<this.Id)throw new Error("releasing state group still in use");this.Gg=null,this.u_=null,this.f_=""}m_(){const t=this.Gg;t.q2(this.u_),t.S_(this.d_),t.g_(this.p_),t.wS(this.C_),t.oS(this)}mS(){return C33.fm.uS.cS(this.f_,this.d_,this.p_,this.C_)}fS(){++this.Id}pS(){--this.Id}CS(){return this.Id}__(){this.u_=null}T_(t){if(this.u_=t.X2(this.f_),!this.u_)throw new Error("failed to restore shader program")}static cS(t,e,s,i){const r="string"==typeof t?t:t.i3();return r+","+e+","+s.ca()+","+s.ua()+","+s.fa()+","+s.Ca()+","+i}}}{let interpolateQuad2=function(t,e,s){const i=s.hh(),r=s.oh(),n=s.ah()-i,h=s.lh()-r,o=s.ph()-i,a=s.Ch()-r,l=n*t,c=h*t,u=o*e,f=a*e;return[i+l+u,r+c+f]};interpolateQuad=interpolateQuad2;const C33=self.Ve,tempQuadTex=C33.mn(C33.nc);C33.fm.y_=class MeshPoint{constructor(t,e,s){this.E_=t,this.I_=e,this.A_=s,this.nl=NaN,this.hl=NaN,this.C_=NaN,this.M_=NaN,this.R_=NaN,this.nl=0,this.hl=0,this.C_=0,this.M_=0,this.R_=0}w_(t,e,s,i){this.nl=t,this.hl=e,this.M_=s,this.R_=i}b_(){return this.nl}O_(t){this.nl!==t&&(this.nl=t,this.E_.G_())}P_(){return this.hl}v_(t){this.hl!==t&&(this.hl=t,this.E_.G_())}x_(){return this.C_}L_(t){this.C_!==t&&(this.C_=Math.max(t,0),this.E_.G_())}D_(){return this.M_}N_(t){this.M_=t}F_(){return this.R_}B_(t){this.R_=t}k_(t,e,s){[this.nl,this.hl]=interpolateQuad2(t.nl,t.hl,e),this.C_=t.C_,this.M_=C33.Nt(s.bl(),s.Gl(),t.M_),this.R_=C33.Nt(s.Ol(),s.Pl(),t.R_)}W_(t,e,s){[this.nl,this.hl]=interpolateQuad2(t.nl,t.hl,e),this.C_=t.C_,[this.M_,this.R_]=interpolateQuad2(t.M_,t.R_,s)}V_(){return{x:this.b_(),y:this.P_(),z:this.x_(),u:this.D_(),v:this.F_()}}H_(t){this.O_(t.x),this.v_(t.y),t.hasOwnProperty("z")&&this.L_(t.z),this.N_(t.u),this.B_(t.v)}U_(){return this.E_}X_(){return this.I_}j_(){return this.A_}},C33.fm.Y_=class Mesh{constructor(s,t,e){if(s<2||t<2)throw new Error("invalid mesh size");this.q_=s,this.z_=t,this.J_=e||null,this.K_=[],this.Z_=0,this.Q_=0,this.tT=1,this.eT=1,this.sT=0,this.iT=!1;const i=s-1,r=t-1;for(let e=0;e<t;++e){const n=[];for(let t=0;t<s;++t){const h=C33.mn(C33.fm.y_,this,t,e),o=t/i,a=e/r;h.w_(o,a,o,a),n.push(h)}this.K_.push(n)}}Sn(){C33.Vh(this.K_)}rT(){return this.q_}nT(){return this.z_}hT(){return this.J_}oT(){return this.K_}G_(){this.iT=!0}aT(){if(this.iT){let t=1/0,e=1/0,s=-1/0,i=-1/0,r=0;for(const n of this.K_)for(const h of n){const o=h.b_(),a=h.P_();t=Math.min(t,o),e=Math.min(e,a),s=Math.max(s,o),i=Math.max(i,a),r=Math.max(r,h.x_())}this.Z_=t,this.Q_=e,this.tT=s,this.eT=i,this.sT=r,this.iT=!1}}lT(){return this.aT(),this.Z_}cT(){return this.aT(),this.Q_}uT(){return this.aT(),this.tT}fT(){return this.aT(),this.eT}dT(){return this.aT(),this.sT}pT(){return 0<this.dT()}CT(t,e){return t=Math.floor(t),e=Math.floor(e),t<0||t>=this.q_||e<0||e>=this.z_?null:this.K_[e][t]}mT(t,s,i){const r=i instanceof C33.Rect;if(t.rT()!==this.rT()||t.nT()!==this.nT())throw new Error("source mesh wrong size");const n=t.K_,h=this.K_;for(let t=0,e=h.length;t<e;++t){const o=n[t],a=h[t];for(let t=0,e=a.length;t<e;++t){const l=o[t],c=a[t];r?c.k_(l,s,i):c.W_(l,s,i)}}}ST(n){let h=this.K_,o=h[0];for(let t=1,e=h.length;t<e;++t){let s=h[t],i=o[0],r=s[0];for(let t=1,e=s.length;t<e;++t){const a=o[t],l=s[t];tempQuadTex.set(i.D_(),i.F_(),a.D_(),a.F_(),l.D_(),l.F_(),r.D_(),r.F_()),n.xS(i.b_(),i.P_(),i.x_(),a.b_(),a.P_(),a.x_(),l.b_(),l.P_(),l.x_(),r.b_(),r.P_(),r.x_(),tempQuadTex),i=a,r=l}o=s}}gT(o,a){a=a||((t,e,s)=>[t,e,s]);let t=this.K_,l=t[0];for(let n=1,h=t.length;n<h;++n){let s=t[n],i=l[0],r=s[0];for(let t=1,e=s.length;t<e;++t){const c=l[t],u=s[t],[f,d,p]=a(i.b_(),i.P_(),i.x_()),[C,m,S]=a(c.b_(),c.P_(),c.x_()),[g,_,T]=a(u.b_(),u.P_(),u.x_()),[y,E,I]=a(r.b_(),r.P_(),r.x_());o.vS(f,d,p,C,m,S),o.vS(f,d,p,g,_,T),o.vS(f,d,p,y,E,I),t===e-1&&o.vS(C,m,S,g,_,T),n===h-1&&o.vS(y,E,I,g,_,T),i=c,r=u}l=s}}_T(t){let s=.99999999,i=t.Yc(),r=[],n=this.rT()-1,h=this.nT()-1,o=1/n,a=1/h,l=n-1,c=h-1,u=i[0],f=i[1],d=C33.En(Math.floor(u*n),0,l),p=C33.En(Math.floor(f*h),0,c),C=!0,m=0,S=0,g=0,_=-1,T=()=>{u=C33.En(C33.Nt(u,m,g),0,1),f=C33.En(C33.Nt(f,S,g),0,1),r.push(u,f)};for(let t=0,e=i.length;t<e;t+=2){u=i[t],f=i[t+1],r.push(u,f),d=C33.En(Math.floor(u*n),0,l),p=C33.En(Math.floor(f*h),0,c);const y=(t+2)%e;for(m=i[y],S=i[1+y],_=-1;;){if(1e6<r.length)throw new Error("Too many mesh poly points");const E=d*o,I=p*a,A=(d+1)*o,M=(p+1)*a;if(C=C33._h(u,f,E,I,A,I,A,M),0!==_&&0<=(g=C33.gh(u,f,m,S,E,I,A,M,-.001))&&g<=s)T(),C=!C,_=0;else if(0<p&&2!==_&&0<=(g=C33.gh(u,f,m,S,E,I,A,I,.001))&&g<=s)T(),p--,C=!1,_=4;else if(d<l&&3!==_&&0<=(g=C33.gh(u,f,m,S,A,I,A,M,.001))&&g<=s)T(),d++,C=!1,_=1;else if(0<d&&1!==_&&0<=(g=C33.gh(u,f,m,S,E,I,E,M,.001))&&g<=s)T(),d--,C=!0,_=3;else{if(!(p<c&&4!==_&&0<=(g=C33.gh(u,f,m,S,E,M,A,M,.001))&&g<=s))break;T(),p++,C=!0,_=2}}}return C33.mn(C33.Vc,r)}TT(t,e){const s=this.yT(t);this.ET(s),e.zc(s)}yT(t){const s=[],i=t.Yc();for(let t=0,e=i.length;t<e;t+=2){const r=i[t],n=i[t+1],[h,o]=this.IT(r,n);s.push(h,o)}return s}IT(t,e){const s=this.rT()-1,i=this.nT()-1,r=1/s,n=1/i,h=C33.En(Math.floor(t*s),0,s-1),o=C33.En(Math.floor(e*i),0,i-1),a=h*r,l=o*n,c=(h+1)*r,u=(o+1)*n,f=this.CT(h,o),d=this.CT(h+1,o+1),p=C33._h(t,e,a,l,c,l,c,u),C=p?a+r:a,m=p?l:l+n,S=this.CT(h+(p?1:0),o+(p?0:1)),[g,_,T]=C33.Th(t,e,a,l,C,m,c,u);return C33.yh(g,_,T,f.b_(),f.P_(),f.x_(),S.b_(),S.P_(),S.x_(),d.b_(),d.P_(),d.x_())}ET(s){let i=[],r=s[0],n=s[1],h=r-s.at(-2),o=n-s.at(-1);for(let t=0,e=s.length;t<e;t+=2){const a=(t+2)%e,l=s[a],c=s[1+a],u=l-r,f=c-n,d=Math.abs(u)<1e-7&&Math.abs(h)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(u)===Math.sign(h);(!d&&!p&&.001<Math.abs(u/h-f/o)||0==u&&0==f)&&i.push(r,n),r=l,n=c,h=u,o=f}6<=i.length&&i.length<s.length&&C33.jh(s,i)}V_(){return{cols:this.rT(),rows:this.nT(),points:this.K_.map(t=>t.map(t=>t.V_()))}}H_(t){const s=this.rT(),i=this.nT();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const r=t.points;for(let e=0;e<i;++e){const n=r[e];for(let t=0;t<s;++t){const h=this.CT(t,e);h.H_(n[t])}}}}}{let GetFormatSpecifiers2=function(t,e){let s,i,r,n;switch(t){case"rgba8":s=e.RGBA8,i=e.RGBA,r=e.RGBA,n=e.UNSIGNED_BYTE;break;case"rgb8":s=e.RGB8,i=e.RGB,r=e.RGB,n=e.UNSIGNED_BYTE;break;case"rgba4":s=e.RGBA4,i=e.RGBA,r=e.RGBA,n=e.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":s=e.RGB5_A1,i=e.RGBA,r=e.RGBA,n=e.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":s=e.RGB565,i=e.RGB,r=e.RGB,n=e.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{AT:s,MT:i,format:r,type:n}};GetFormatSpecifiers=GetFormatSpecifiers2;const C33=self.Ve,VALID_PIXEL_FORMATS=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]),VALID_MIPMAP_QUALITIES=new Set(["default","low","high"]),VALID_WRAP_MODES=new Set(["clamp-to-edge","repeat","mirror-repeat"]),CREATEFROM_DEFAULT_OPTIONS={RT:"clamp-to-edge",wT:"clamp-to-edge",bT:"trilinear",OT:0,GT:"rgba8",PT:!0,vT:"default",premultiplyAlpha:!0,xT:!1,width:-1,height:-1},UPDATE_DEFAULT_OPTIONS={premultiplyAlpha:!0,flipY:!1},allTextures=new Set;C33.fm.LT=class WebGLRendererTexture{constructor(t){this.Gg=t,this.DT=null,this.zC=0,this.JC=0,this.NT=!0,this.FT="clamp-to-edge",this.BT="clamp-to-edge",this.kT="trilinear",this.$T=0,this.WT="rgba8",this.VT=!1,this.HT="default",this.Id=0}UT(e,t){if(!("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||e instanceof ImageData||e instanceof ArrayBuffer||null===e))throw new Error("invalid texture source");if(t=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,t),this.DT)throw new Error("already created texture");if(this.FT=t.RT,this.BT=t.wT,this.kT=t.bT,this.$T=t.OT,this.WT=t.GT,this.VT=!!t.PT&&this.Gg._g(),this.HT=t.vT,!VALID_WRAP_MODES.has(this.FT)||!VALID_WRAP_MODES.has(this.BT))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this.kT))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this.WT))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this.HT))throw new Error("invalid mipmap quality");if(this.NT=!0,e instanceof ArrayBuffer||null===e||t.xT){if(this.zC=t.width,this.JC=t.height,e instanceof ArrayBuffer&&e.byteLength!==this.zC*this.JC*4)throw new Error("ArrayBuffer wrong size")}else this.zC=e.width,this.JC=e.height;if(this.zC<=0||this.JC<=0)throw new Error("invalid texture data size");if(t.xT){const o=C33.No(this.zC,this.JC),a=o.getContext("2d");a.drawImage(e,0,0,this.zC,this.JC),e=o}const s=C33.Wn(this.zC)&&C33.Wn(this.JC),i=this.Gg.XT();if(this.zC>i||this.JC>i)throw new Error("texture data exceeds maximum texture size");const r=this.Gg.jT(),n=this.Gg.YT(),h=(this.DT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.DT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),GetFormatSpecifiers2(this.WT,r));if(this.Gg.qT()||s||!this.zT())if(2<=n){let t;t=this.VT?Math.floor(Math.log2(Math.max(this.zC,this.JC))+1):1,r.texStorage2D(r.TEXTURE_2D,t,h.AT,this.zC,this.JC),e instanceof ArrayBuffer?r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.zC,this.JC,h.format,h.type,new Uint8Array(e)):null!==e&&r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,e)}else e instanceof ArrayBuffer?r.texImage2D(r.TEXTURE_2D,0,h.MT,this.zC,this.JC,0,h.format,h.type,new Uint8Array(e)):null===e?r.texImage2D(r.TEXTURE_2D,0,h.MT,this.zC,this.JC,0,h.format,h.type,null):r.texImage2D(r.TEXTURE_2D,0,h.MT,h.format,h.type,e);else{if(null===e)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((e=e instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(e),this.zC,this.JC):e)instanceof ImageData){const u=C33.No(this.zC,this.JC),f=u.getContext("2d");f.putImageData(e,0,0),e=u}const l=C33.No(C33.Vn(this.zC),C33.Vn(this.JC)),c=l.getContext("2d");c.imageSmoothingEnabled="nearest"!==this.kT,c.drawImage(e,0,0,this.zC,this.JC,0,0,l.width,l.height),r.texImage2D(r.TEXTURE_2D,0,h.MT,h.format,h.type,l)}null!==e&&this.JT(r),r.bindTexture(r.TEXTURE_2D,null),this.Gg.KT(),this.Id=1,allTextures.add(this)}ZT(t,e,s){if(s=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,s),this.DT)throw new Error("already created texture");if(this.FT=s.RT,this.BT=s.wT,this.kT=s.bT,this.WT=s.GT,this.VT=!!s.PT&&this.Gg._g(),this.HT=s.vT,!VALID_WRAP_MODES.has(this.FT)||!VALID_WRAP_MODES.has(this.BT))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this.kT))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this.WT))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this.HT))throw new Error("invalid mipmap quality");this.NT=!1,this.zC=Math.floor(t),this.JC=Math.floor(e);const i=C33.Wn(this.zC)&&C33.Wn(this.JC),r=this.Gg.XT();if(this.zC<=0||this.JC<=0)throw new Error("invalid texture size");if(this.zC>r||this.JC>r)throw new Error("texture exceeds maximum texture size");if(!this.Gg.qT()&&this.zT()&&!i)throw new Error("non-power-of-two tiled textures not supported");const n=this.Gg.jT(),h=this.Gg.YT(),o=(this.DT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.DT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),GetFormatSpecifiers2(this.WT,n)),a=2<=h?o.AT:o.MT;n.texImage2D(n.TEXTURE_2D,0,a,this.zC,this.JC,0,o.format,o.type,null),this.JT(n),n.bindTexture(n.TEXTURE_2D,null),this.Gg.KT(),this.Id=1,allTextures.add(this)}QT(t){if("default"===this.HT)return this.NT?t.NICEST:t.FASTEST;if("low"===this.HT)return t.FASTEST;if("high"===this.HT)return t.NICEST;throw new Error("invalid mipmap quality")}zT(){return"clamp-to-edge"!==this.FT||"clamp-to-edge"!==this.BT}ty(t,e){if("clamp-to-edge"===e)return t.CLAMP_TO_EDGE;if("repeat"===e)return t.REPEAT;if("mirror-repeat"===e)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}JT(t){const e=C33.Wn(this.zC)&&C33.Wn(this.JC);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.ty(t,this.FT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.ty(t,this.BT)),"nearest"===this.kT)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.VT=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(e||this.Gg.qT())&&this.VT){t.hint(t.GENERATE_MIPMAP_HINT,this.QT(t)),t.generateMipmap(t.TEXTURE_2D);const i="trilinear"===this.kT&&!this.Gg.yg();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.VT=!1;const s=this.Gg.ey();s&&0<this.$T&&"nearest"!==this.kT&&t.texParameterf(t.TEXTURE_2D,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.$T,this.Gg.iy()))}ny(t,e){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.DT||this.Id<=0)throw new Error("texture not created");if(this.NT)throw new Error("cannot update static texture");e=Object.assign({},UPDATE_DEFAULT_OPTIONS,e);const s=t.width||t.videoWidth,i=t.height||t.videoHeight,r=this.Gg.YT(),n=this.Gg.jT(),h=(n.bindTexture(n.TEXTURE_2D,this.DT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!e.flipY),GetFormatSpecifiers2(this.WT,n)),o=2<=r?h.AT:h.MT;try{if(this.zC===s&&this.JC===i){const a=C33.Wn(this.zC)&&C33.Wn(this.JC);n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t),(a||this.Gg.qT())&&this.VT&&(n.hint(n.GENERATE_MIPMAP_HINT,this.QT(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.zC=s,this.JC=i;const l=C33.Wn(this.zC)&&C33.Wn(this.JC);if(!this.Gg.qT()&&this.zT()&&!l)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,h.format,h.type,t),(l||this.Gg.qT())&&this.VT&&(n.hint(n.GENERATE_MIPMAP_HINT,this.QT(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.Gg.KT()}hy(){if(0<this.Id)throw new Error("texture still has references");if(!this.DT)throw new Error("already deleted texture");allTextures.delete(this);const t=this.Gg.jT();t.deleteTexture(this.DT),this.DT=null}oy(){return!!this.DT}uy(){return this.DT}Kg(){return this.Gg}Cy(){this.Id++}my(){if(this.Id<=0)throw new Error("no more references");this.Id--}Sy(){return this.Id}dC(){return this.zC}IC(){return this.JC}gy(){return this.NT}_y(){let t=this.zC*this.JC;switch(this.WT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.VT&&(t+=Math.floor(t/3)),t}static __(){allTextures.clear()}static Ty(){return allTextures.values()}}}{const C33=self.Ve,assert=self.assert,glMatrix=self._e,vec32=glMatrix.we,mat42=glMatrix.Ie,VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]),DEFAULT_RENDERTARGET_OPTIONS={bT:"trilinear",alpha:!0,depth:!1,yy:!0,Ey:!0,Iy:0},allRenderTargets=new Set;C33.fm.Ay=class WebGLRenderTarget{constructor(t){this.Gg=t,this.My=null,this.Ry=null,this.DT=null,this.wy=null,this.zC=0,this.JC=0,this.by=!0,this.kT="trilinear",this.Oy=!0,this.Gy=!1,this.Py=!0,this.xy=0,this.Ly=mat42.create(),this.Dy=0,this.Ny=0,this.Fy=0}By(t,e,s){s=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,s);const i=this.Gg.YT();if(this.DT||this.wy)throw new Error("already created render target");if(this.kT=s.bT,this.Oy=!!s.alpha,this.Gy=!!s.depth,this.Py=!!s.yy,this.by=!!s.Ey,this.xy=s.Iy,!VALID_SAMPLINGS.has(this.kT))throw new Error("invalid sampling");if(0<this.xy&&(i<2||this.Py))throw new Error("invalid use of multisampling");if(i<2&&(this.Py=!0),this.zC=t,this.JC=e,this.zC<=0||this.JC<=0)throw new Error("invalid render target size");this.ky();const r=this.Gg.jT();if(this.My=r.createFramebuffer(),this.Gy&&(this.Ry=r.createFramebuffer()),this.Py){this.DT=this.Gg.$y(this.zC,this.JC,{bT:this.kT,GT:this.Oy?"rgba8":"rgb8",PT:!1});const h=this.DT.uy();r.bindFramebuffer(r.FRAMEBUFFER,this.My),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h,0),this.Gy&&(r.bindFramebuffer(r.FRAMEBUFFER,this.Ry),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h,0))}else{this.wy=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,this.wy);const o=this.Oy?r.RGBA8:r.RGB8;if(0<this.xy){const a=r.getInternalformatParameter(r.RENDERBUFFER,o,r.SAMPLES);if(a&&a[0]){const l=a[0];this.xy>l&&(this.xy=l)}else this.xy=0}0===this.xy?r.renderbufferStorage(r.RENDERBUFFER,o,this.zC,this.JC):r.renderbufferStorageMultisample(r.RENDERBUFFER,this.xy,o,this.zC,this.JC),r.bindFramebuffer(r.FRAMEBUFFER,this.My),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.wy),this.Gy&&(r.bindFramebuffer(r.FRAMEBUFFER,this.Ry),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.wy)),r.bindRenderbuffer(r.RENDERBUFFER,null)}const n=this.Gg.Wy();this.Gy&&n&&(r.bindFramebuffer(r.FRAMEBUFFER,this.My),this.Gg.Vy()?r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,n,0):r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n)),r.bindFramebuffer(r.FRAMEBUFFER,null),allRenderTargets.add(this)}Hy(t,e){if(this.zC!==t||this.JC!==e){this.zC=t,this.JC=e,this.ky();const s=this.Gg.jT(),i=(s.bindFramebuffer(s.FRAMEBUFFER,this.My),this.DT?this.DT.ny(new ImageData(this.zC,this.JC)):(s.bindRenderbuffer(s.RENDERBUFFER,this.wy),s.renderbufferStorage(s.RENDERBUFFER,this.Oy?s.RGBA8:s.RGB8,this.zC,this.JC),s.bindRenderbuffer(s.RENDERBUFFER,null)),this.Gg.Wy());this.Gy&&i&&(this.Gg.Vy()?s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,i,0):s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,i)),s.bindFramebuffer(s.FRAMEBUFFER,null)}}hy(){if(!this.DT&&!this.wy)throw new Error("already deleted render target");allRenderTargets.delete(this);const t=this.Gg.jT(),e=(this.DT?(t.bindFramebuffer(t.FRAMEBUFFER,this.My),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.Gy&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Ry),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Gg.Uy(this.DT),this.DT=null):this.wy&&(t.bindFramebuffer(t.FRAMEBUFFER,this.My),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.Gy&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Ry),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.wy),this.wy=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.Gg.YT()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.My),this.Gy&&t.deleteFramebuffer(this.Ry),this.Gg.Xy());e.jy=null,this.My=e.Yy=null}ky(){this.Gg.N2(this.Ly,this.zC/this.JC),this.Dy=this.Gg.P2(),this.Ny=this.Gg.w2(),this.Fy=this.Gg.O2()}qy(){return this.My}zy(){return this.Ry}Kg(){return this.Gg}Jy(){return this.DT}Ky(){return this.Gg.P2()===this.Dy&&this.Gg.w2()===this.Ny&&this.Gg.O2()===this.Fy||this.ky(),this.Ly}Zy(){return"nearest"!==this.kT}Qy(){return this.Oy}tE(){return this.Py}eE(){return this.Gy}dC(){return this.zC}IC(){return this.JC}sE(){return this.by}iE(){return this.xy}rE(){const t={bT:this.kT,alpha:this.Oy,yy:this.Py};return this.by||(t.width=this.zC,t.height=this.JC),t}nE(t){return"nearest"!==(t=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,t)).bT===this.Zy()&&!!t.alpha===this.Qy()&&!!t.depth===this.eE()&&!(2<=this.Gg.YT()&&!!t.yy!==this.tE())&&("number"==typeof t.width||"number"==typeof t.height?!this.sE()&&this.dC()===Math.floor(t.width)&&this.IC()===Math.floor(t.height):this.sE())}hE(){return this.DT?this.DT.uy():null}_y(){return this.DT?this.DT._y():this.zC*this.JC*(this.Oy?4:3)}static async oE(t,e){const s=await t.aE(e,!0);return C33.ko(s)}static __(){allRenderTargets.clear()}static lE(){return allRenderTargets.values()}static cE(t,e){for(const s of allRenderTargets)s.sE()&&s.Hy(t,e)}}}{const C33=self.Ve,glMatrix=self._e,vec32=glMatrix.we,mat42=glMatrix.Ie,RESERVED_UNIFORM_NAMES=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);C33.fm.uE=class WebGLShaderProgram extends C33.fm.Og{static async fE(t,e){const s=t.jT(),i=e.src,r=e.dE,n=e.name,h=s.createShader(s.FRAGMENT_SHADER),o=(s.shaderSource(h,i),s.compileShader(h),s.createShader(s.VERTEX_SHADER)),a=(s.shaderSource(o,r),s.compileShader(o),s.createProgram()),l=(s.attachShader(a,h),s.attachShader(a,o),s.bindAttribLocation(a,0,"aPos"),s.bindAttribLocation(a,1,"aTex"),s.bindAttribLocation(a,2,"aPoints"),s.linkProgram(a),t.pE());if(l?await t.CE(()=>s.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await C33.Nh(5),!s.getShaderParameter(h,s.COMPILE_STATUS)){const u=s.getShaderInfoLog(h);throw s.deleteShader(h),s.deleteShader(o),s.deleteProgram(a),new Error("Error compiling fragment shader: "+u)}if(!s.getShaderParameter(o,s.COMPILE_STATUS)){const f=s.getShaderInfoLog(o);throw s.deleteShader(h),s.deleteShader(o),s.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!s.getProgramParameter(a,s.LINK_STATUS)){const d=s.getProgramInfoLog(a);throw s.deleteShader(h),s.deleteShader(o),s.deleteProgram(a),new Error("Error linking shader program: "+d)}const c=C33.Zd(s.getProgramInfoLog(a)||"").trim();return c&&!C33.zd(c)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,c),s.deleteShader(h),s.deleteShader(o),a}static async mE(t,e){const s=await C33.fm.uE.fE(t,e);return new C33.fm.uE(t,s,e)}constructor(t,e,s){super(t,s);const i=t.jT(),r=t.Xy(),n=(t.Cg(),i.useProgram(e),this.SE=i,this.u_=e,this.gE="<default-device-transform>"===s.name,i.getAttribLocation(e,"aPos")),h=i.getAttribLocation(e,"aTex"),o=(this._E=i.getAttribLocation(e,"aPoints"),-1!==n&&(i.bindBuffer(i.ARRAY_BUFFER,t.TE),i.vertexAttribPointer(n,t.dg(),i.FLOAT,!1,0,0),i.enableVertexAttribArray(n)),-1!==h&&(i.bindBuffer(i.ARRAY_BUFFER,t.yE),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(h)),-1!==this._E&&(i.bindBuffer(i.ARRAY_BUFFER,t.EE),i.vertexAttribPointer(this._E,4,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this._E)),i.bindBuffer(i.ARRAY_BUFFER,null),this.IE=new C33.fm.AE(this,"matP","mat4"),this.ME=new C33.fm.AE(this,"matMV","mat4"),this.RE=new C33.fm.AE(this,"color","vec4"),this.wE=new C33.fm.AE(this,"samplerFront","sampler"),this.bE=new C33.fm.AE(this,"pointTexStart","vec2"),this.OE=new C33.fm.AE(this,"pointTexEnd","vec2"),this.GE=new C33.fm.AE(this,"zElevation","float"),this.PE=new C33.fm.AE(this,"tileSize","vec2"),this.vE=new C33.fm.AE(this,"tileSpacing","vec2"),this.xE=new C33.fm.AE(this,"color2_","vec4"),this.LE=new C33.fm.AE(this,"outlineThickness","float"),this.DE=new C33.fm.AE(this,"samplerBack","sampler"),this.NE=new C33.fm.AE(this,"samplerDepth","sampler"),this.FE=new C33.fm.AE(this,"destStart","vec2"),this.BE=new C33.fm.AE(this,"destEnd","vec2"),this.kE=new C33.fm.AE(this,"srcStart","vec2"),this.$E=new C33.fm.AE(this,"srcEnd","vec2"),this.WE=new C33.fm.AE(this,"srcOriginStart","vec2"),this.VE=new C33.fm.AE(this,"srcOriginEnd","vec2"),this.HE=new C33.fm.AE(this,"pixelSize","vec2"),this.UE=new C33.fm.AE(this,"seconds","float"),this.XE=new C33.fm.AE(this,"devicePixelRatio","float"),this.jE=new C33.fm.AE(this,"layerScale","float"),this.YE=new C33.fm.AE(this,"layerAngle","float"),this.qE=new C33.fm.AE(this,"layoutStart","vec2"),this.zE=new C33.fm.AE(this,"layoutEnd","vec2"),this.JE=new C33.fm.AE(this,"zNear","float"),this.KE=new C33.fm.AE(this,"zFar","float"),this.ZE=!!(this.HE.QE()||this.UE.QE()||this.DE.QE()||this.FE.QE()||this.BE.QE()||this.kE.QE()||this.$E.QE()||this.WE.QE()||this.VE.QE()||this.XE.QE()||this.jE.QE()||this.YE.QE()||this.qE.QE()||this.zE.QE()),s.parameters||[]);this.tI=[],this.zg=this.HE.QE()||this.kE.QE()||this.$E.QE()||this.WE.QE()||this.VE.QE(),this.eI=!1,this.sI=!1,this.RE.iI(1,1,1,1),this.xE.iI(1,1,1,1),this.wE.rI(0),this.DE.rI(1),this.NE.rI(2),this.bE.nI(0,0),this.OE.nI(1,1),this.GE.hI(0),this.PE.nI(0,0),this.vE.nI(0,0),this.FE.nI(0,0),this.BE.nI(1,1),this.kE.nI(0,0),this.$E.nI(0,0),this.WE.nI(0,0),this.VE.nI(0,0),this.HE.nI(0,0),this.XE.hI(1),this.JE.hI(t.w2()),this.KE.hI(t.O2()),this.jE.hI(1),this.YE.hI(0),this.UE.hI(0),this.qE.nI(0,0),this.zE.nI(0,0),this.LE.hI(1);for(const l of o){const c=l[0],u=l[2],f=new C33.fm.AE(this,c,u);"color"===u?f.oI(0,0,0):f.hI(0),this.tI.push(f)}this.gE?this.aI(r.lI):(this.cI(r.lI,!0),this.uI(r.fI,!0));const a=r.dI;i.useProgram(a?a.u_:null)}Sn(){this.SE.deleteProgram(this.u_),this.u_=null,this.Gg.U2(this),this.SE=null,super.Sn()}pI(){return this.SE}CI(){return this.u_}mI(){return this.tI.length}SI(t){return t<0||t>=this.tI.length?null:this.tI[t].gI()}_I(s){for(let t=0,e=s.length;t<e;++t)if(!this.tI[t].TI(s[t]))return!1;return!0}yI(s){for(let t=0,e=s.length;t<e;++t)this.tI[t].EI(s[t])}II(t,e,s,i,r,n,h,o,a,l){return!this.DE.QE()&&!(this.HE.QE()&&!this.HE.AI(r,n)||this.FE.QE()&&!this.FE.AI(t.bl(),t.Ol())||this.BE.QE()&&!this.BE.AI(t.Gl(),t.Pl())||this.XE.QE()&&!this.XE.MI(h)||this.jE.QE()&&!this.jE.MI(o)||this.YE.QE()&&!this.YE.MI(a)||this.kE.QE()&&!this.kE.AI(e.bl(),e.Ol())||this.$E.QE()&&!this.$E.AI(e.Gl(),e.Pl())||this.WE.QE()&&!this.WE.AI(s.bl(),s.Ol())||this.VE.QE()&&!this.VE.AI(s.Gl(),s.Pl())||this.qE.QE()&&!this.qE.AI(i.bl(),i.Ol())||this.zE.QE()&&!this.zE.AI(i.Ol(),i.Pl())||this.UE.QE()&&!this.UE.MI(l))}RI(t,e,s,i,r,n,h,o,a,l){this.DE.QE()||(this.HE.QE()&&this.HE.wI(r,n),this.FE.QE()&&this.FE.wI(t.bl(),t.Ol()),this.BE.QE()&&this.BE.wI(t.Gl(),t.Pl()),this.XE.QE()&&this.XE.bI(h),this.jE.QE()&&this.jE.bI(o),this.YE.QE()&&this.YE.bI(a),this.kE.QE()&&this.kE.wI(e.bl(),e.Ol()),this.$E.QE()&&this.$E.wI(e.Gl(),e.Pl()),this.WE.QE()&&this.WE.wI(s.bl(),s.Ol()),this.VE.QE()&&this.VE.wI(s.Gl(),s.Pl()),this.qE.QE()&&this.qE.wI(i.bl(),i.Ol()),this.zE.QE()&&this.zE.wI(i.Ol(),i.Pl()),this.UE.QE()&&this.UE.bI(l))}cI(t,e){this.eI&&!e||this.gE||(this.IE.QE()&&this.IE.OI(t),this.eI=!0)}GI(){this.eI=!1}uI(t,e){this.sI&&!e||this.gE||(this.ME.QE()&&this.ME.OI(t),this.sI=!0)}vI(){this.sI=!1}aI(t){if(!this.gE)throw new Error("not device transform shader");this.IE.OI(t);const e=this.Gg,s=e.dC()/2,i=e.IC()/2,r=e.V2(s,i,e.E2(e.IC()),s,i,0,e.IC());this.ME.OI(r)}xI(t){this.RE.QE()&&this.RE.LI(t[0],t[1],t[2],t[3])}static DI(){return RESERVED_UNIFORM_NAMES}static NI(t){const e=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${e} vec2 aTex;`,`varying ${e} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static FI(t){const e=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${e} vec2 aTex;`,`out ${e} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static BI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static kI(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static $I(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static WI(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static VI(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static HI(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static UI(t,e,s){let i="";return 2<=t?i="#version 300 es\n":(e&&(i="#extension GL_EXT_frag_depth : enable\n"),s&&(i+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),i+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&s?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!s?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||s?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||s?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&e?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static XI(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static jI(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static YI(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static qI(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static zI(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static JI(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static KI(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static ZI(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static QI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static tA(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static eA(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static sA(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static iA(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const C33=self.Ve,glMatrix=self._e,mat42=glMatrix.Ie,TYPE_SIZES=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);C33.fm.AE=class WebGLShaderUniform{constructor(t,e,s){if(!TYPE_SIZES.has(s))throw new Error("invalid uniform type");this.J_=t,this.SE=this.J_.pI(),this.Tn=e,this.y3=s,this.rA="color"===this.y3,this.nA=this.SE.getUniformLocation(this.J_.CI(),e),this.hA=!!this.nA;const i=TYPE_SIZES.get(s);this.oA=new Float32Array(i),this.aA=new Float32Array(i)}Sn(){this.J_=null,this.SE=null,this.nA=null}QE(){return this.hA}gI(){return this.y3}lA(){return this.rA}hI(t){this.QE()&&(this.oA[0]=t,this.aA.set(this.oA),this.SE.uniform1f(this.nA,t))}rI(t){this.QE()&&(this.oA[0]=t,this.aA.set(this.oA),this.SE.uniform1i(this.nA,t))}nI(t,e){this.QE()&&(this.oA[0]=t,this.oA[1]=e,this.aA.set(this.oA),this.SE.uniform2f(this.nA,t,e))}oI(t,e,s){this.QE()&&(this.oA[0]=t,this.oA[1]=e,this.oA[2]=s,this.aA.set(this.oA),this.SE.uniform3f(this.nA,t,e,s))}iI(t,e,s,i){this.QE()&&(this.oA[0]=t,this.oA[1]=e,this.oA[2]=s,this.oA[3]=i,this.aA.set(this.oA),this.SE.uniform4f(this.nA,t,e,s,i))}cA(t){t=Math.fround(t);const e=this.oA;e[0]!==t&&(e[0]=t,this.SE.uniform1f(this.nA,t))}uA(t){const e=this.oA;e[0]!==t&&this.SE.uniform1i(this.nA,e[0]=t)}fA(t,e){t=Math.fround(t),e=Math.fround(e);const s=this.oA;s[0]===t&&s[1]===e||(s[0]=t,s[1]=e,this.SE.uniform2f(this.nA,t,e))}dA(t,e,s){t=Math.fround(t),e=Math.fround(e),s=Math.fround(s);const i=this.oA;i[0]===t&&i[1]===e&&i[2]===s||(i[0]=t,i[1]=e,i[2]=s,this.SE.uniform3f(this.nA,t,e,s))}LI(t,e,s,i){t=Math.fround(t),e=Math.fround(e),s=Math.fround(s),i=Math.fround(i);const r=this.oA;r[0]===t&&r[1]===e&&r[2]===s&&r[3]===i||(r[0]=t,r[1]=e,r[2]=s,r[3]=i,this.SE.uniform4f(this.nA,t,e,s,i))}OI(t){const e=this.oA;mat42.W(e,t)||(C33.$h(e,t,0),this.SE.uniformMatrix4fv(this.nA,!1,t))}TI(t){const e=this.aA;return this.lA()?e[0]===Math.fround(t.ca())&&e[1]===Math.fround(t.ua())&&e[2]===Math.fround(t.fa()):e[0]===Math.fround(t)}EI(t){const e=this.aA;this.lA()?(e[0]=t.ca(),e[1]=t.ua(),e[2]=t.fa()):e[0]=t}MI(t){return this.aA[0]===Math.fround(t)}AI(t,e){const s=this.aA;return s[0]===Math.fround(t)&&s[1]===Math.fround(e)}bI(t){this.aA[0]=t}wI(t,e){const s=this.aA;s[0]=t,s[1]=e}}}{const C33=self.Ve,glMatrix=self._e,vec42=glMatrix.Oe,mat42=glMatrix.Ie,BATCH_NULL=0,BATCH_QUAD=1,BATCH_SETTEXTURE=2,BATCH_SETCOLOR=3,BATCH_SETBLEND=4,BATCH_SETVIEWPORT=5,BATCH_SETPROJECTION=6,BATCH_SETMODELVIEW=7,BATCH_SETRENDERTARGET=8,BATCH_CLEARSURFACE=9,BATCH_POINTS=10,BATCH_SETPROGRAM=11,BATCH_SETPROGRAMPARAMETERS=12,BATCH_SETPROGRAMCUSTOMPARAMETERS=13,BATCH_INVALIDATEFRAMEBUFFER=14,BATCH_SETPOINTTEXCOORDS=15,BATCH_SETTILEMAPINFO=16,BATCH_BLITFRAMEBUFFER=17,BATCH_STARTQUERY=18,BATCH_ENDQUERY=19,BATCH_SETELLIPSEPARAMS=20,BATCH_SETGRADIENTCOLOR=21,BATCH_CLEARDEPTH=22,BATCH_SETDEPTHENABLED=23,BATCH_SETDEPTHSAMPLINGENABLED=24,BATCH_COPLANAR_STARTSTENCILPASS=25,BATCH_COPLANAR_STARTCOLORPASS=26,BATCH_COPLANAR_RESTORE=27,BATCH_SET_SCISSOR=28,BATCH_SETTILERANDOMIZATIONINFO=29;C33.fm.pA=class BatchState{constructor(t){this.renderer=t,this.fI=mat42.create(),this.lI=mat42.create(),this.jy=null,this.Yy=null,this.CA=!1,this.mA=vec42.M(1,1,1,1),this.dI=null,this.SA=new C33.Rect,this.clearColor=C33.mn(C33.qo,0,0,0,0)}},C33.fm.gA=class WebGLBatchJob{constructor(t){const e=new ArrayBuffer(96);this.y3=0,this._A=t,this.SE=t.renderer.jT(),this.TA=0,this.yA=0,this.EA=null,this.IA=new Float32Array(e,0,16),this.AA=new Float32Array(e,64,4),this.MA=new Float32Array(e,80,4),this.RA=[]}wA(t,e){this.y3=BATCH_QUAD,this.TA=t,this.yA=e}bA(){const t=this.SE;t.drawElements(t.TRIANGLES,this.yA,t.UNSIGNED_SHORT,this.TA)}OA(t){this.y3=BATCH_SETTEXTURE,this.EA=t}GA(){const t=this.SE,e=this.EA;t.bindTexture(t.TEXTURE_2D,e?e.uy():null)}PA(t){this.y3=BATCH_SETCOLOR,t.ga(this.AA,0)}vA(){const t=this.AA,e=this._A;vec42.A(e.mA,t),e.dI.xI(t)}xA(t){this.y3=BATCH_SETGRADIENTCOLOR,t.ga(this.AA,0)}LA(){const t=this.AA,e=this._A.dI;e.xE.QE()&&e.xE.LI(t[0],t[1],t[2],t[3])}DA(t,e){this.y3=BATCH_SETBLEND,this.TA=t,this.yA=e}NA(){this.SE.blendFunc(this.TA,this.yA)}FA(t,e,s,i){this.y3=BATCH_SETVIEWPORT;const r=this.AA;r[0]=t,r[1]=e,r[2]=s,r[3]=i}BA(){const t=this.AA;this.SE.viewport(t[0],t[1],t[2],t[3])}kA(t){this.y3=BATCH_SETPROJECTION,mat42.A(this.IA,t)}$A(){const t=this._A,s=t.renderer.km,i=t.dI,r=this.IA;for(let t=0,e=s.length;t<e;++t){const n=s[t];n===i?n.cI(r,!0):n.GI()}mat42.A(t.lI,r)}WA(t){this.y3=BATCH_SETMODELVIEW,mat42.A(this.IA,t)}VA(){const t=this._A,s=t.renderer.km,i=t.dI,r=this.IA;for(let t=0,e=s.length;t<e;++t){const n=s[t];n===i?n.uI(r,!0):n.vI()}mat42.A(t.fI,r)}HA(t){this.y3=BATCH_SETRENDERTARGET,this.EA=t}UA(){const t=this.SE,e=this.EA,s=this._A;e?(s.jy=e.qy(),s.Yy=e.zy(),s.CA&&s.Yy?t.bindFramebuffer(t.FRAMEBUFFER,s.Yy):t.bindFramebuffer(t.FRAMEBUFFER,s.jy)):(s.jy=null,s.Yy=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}XA(t){this.y3=BATCH_CLEARSURFACE,t.ga(this.IA,0)}jA(t,e,s,i){this.y3=BATCH_CLEARSURFACE;const r=this.IA;r[0]=t,r[1]=e,r[2]=s,r[3]=i}YA(){const t=this.SE,e=this.IA,s=this._A,i=s.clearColor,r=e[0],n=e[1],h=e[2],o=e[3];i.Ea(r,n,h,o)||(t.clearColor(r,n,h,o),i.Qo(r,n,h,o)),t.clear(t.COLOR_BUFFER_BIT)}qA(t){this.y3=BATCH_SETPOINTTEXCOORDS,t.ga(this.IA,0)}zA(){const t=this.IA;this._A.SA.set(t[0],t[1],t[2],t[3])}JA(t,e){this.y3=BATCH_POINTS,this.TA=t,this.yA=1,this.IA[0]=e}KA(){const t=this.SE,e=this._A,s=e.renderer,i=s.Vm,r=(t.useProgram(i.u_),i.cI(e.lI,!1),i.uI(e.fI,!1),e.SA),n=(i.bE.QE()&&i.bE.fA(r.bl(),r.Ol()),i.OE.QE()&&i.OE.fA(r.Gl(),r.Pl()),this.IA[0]);if(i.GE.QE()&&i.GE.cA(n),i.RE.QE()){const h=e.mA;i.RE.LI(h[0],h[1],h[2],h[3])}t.drawArrays(t.POINTS,this.TA/4,this.yA),t.useProgram(e.dI.u_)}ZA(t){this.y3=BATCH_SETPROGRAM,this.EA=t}QA(){const t=this.SE,e=this._A,s=this.EA;if(e.dI=s,t.useProgram(s.u_),s.cI(e.lI,!1),s.uI(e.fI,!1),s.RE.QE()){const i=e.mA;s.RE.LI(i[0],i[1],i[2],i[3])}}tM(){this.y3=BATCH_SETPROGRAMPARAMETERS}eM(){const t=this._A.dI,e=this.SE,s=this.IA,i=this.AA,r=this.MA;if(t.DE.QE()){const n=this._A.renderer,h=this.EA;n.sM!==h&&(e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h?h.uy():null),n.sM=h,e.activeTexture(e.TEXTURE0))}t.HE.QE()&&t.HE.fA(s[0],s[1]),t.FE.QE()&&t.FE.fA(s[2],s[3]),t.BE.QE()&&t.BE.fA(s[4],s[5]),t.XE.QE()&&t.XE.cA(this.yA),t.jE.QE()&&t.jE.cA(s[6]),t.YE.QE()&&t.YE.cA(s[7]),t.kE.QE()&&t.kE.fA(s[12],s[13]),t.$E.QE()&&t.$E.fA(s[14],s[15]),t.WE.QE()&&t.WE.fA(r[0],r[1]),t.VE.QE()&&t.VE.fA(r[2],r[3]),t.qE.QE()&&t.qE.fA(i[0],i[1]),t.zE.QE()&&t.zE.fA(i[2],i[3]),t.UE.QE()&&t.UE.cA(this.TA)}iM(){this.y3=BATCH_SETPROGRAMCUSTOMPARAMETERS}rM(){const t=this._A.dI,s=t.tI,i=this.RA;for(let t=0,e=s.length;t<e;++t){const r=s[t],n=i[t];r.lA()?r.dA(n.ca(),n.ua(),n.fa()):r.cA(n)}}nM(t){this.y3=BATCH_INVALIDATEFRAMEBUFFER,this.EA=t}hM(){const t=this.SE,e=this.EA,s=this._A.jy;e!==s&&t.bindFramebuffer(t.FRAMEBUFFER,e),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),e!==s&&t.bindFramebuffer(t.FRAMEBUFFER,s)}oM(t,e,s){this.y3=BATCH_BLITFRAMEBUFFER;const i=this.IA,r=this._A.renderer,n=(i[0]=t.dC(),i[1]=t.IC(),i[2]=(e||r).dC(),i[3]=(e||r).IC(),i[4]=t.Zy()?1:0,i[5]="stretch"===s,this.RA);C33.Vh(n),n.push(t.qy()),n.push(e?e.qy():null)}aM(){const t=this.IA,e=this.RA,s=this.SE,i=t[0],r=t[1],n=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=e[0],c=e[1];if(s.bindFramebuffer(s.READ_FRAMEBUFFER,l),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,c),a)s.blitFramebuffer(0,0,i,r,0,0,n,h,s.COLOR_BUFFER_BIT,o?s.LINEAR:s.NEAREST);else{const u=Math.min(i,n),f=Math.min(r,h),d=Math.max(r-h,0),p=Math.max(h-r,0);s.blitFramebuffer(0,d,u,f+d,0,p,u,f+p,s.COLOR_BUFFER_BIT,s.NEAREST)}}lM(t){this.y3=BATCH_STARTQUERY,this.EA=t}cM(){this.EA.uM(),this.EA=null}fM(t){this.y3=BATCH_ENDQUERY,this.EA=t}dM(){this.EA.pM(),this.EA=null}CM(t,e,s){this.y3=BATCH_SETELLIPSEPARAMS;const i=this.IA;i[0]=t,i[1]=e,i[2]=s}mM(){const t=this._A.dI,e=this.IA;t.HE.QE()&&t.HE.fA(e[0],e[1]),t.LE.QE()&&t.LE.cA(e[2])}SM(t,e,s,i,r,n,h){this.y3=BATCH_SETTILEMAPINFO;const o=this.IA;t.ga(o,0),o[4]=1/e,o[5]=1/s,o[6]=i/e,o[7]=r/s,o[8]=n/e,o[9]=h/s}gM(){const t=this._A.dI,e=this.IA;t.kE.QE()&&t.kE.fA(e[0],e[1]),t.HE.QE()&&t.HE.fA(e[4],e[5]),t.PE.QE()&&t.PE.fA(e[6],e[7]),t.vE.QE()&&t.vE.fA(e[8],e[9])}_M(t,e,s,i,r,n,h){this.y3=BATCH_SETTILERANDOMIZATIONINFO;const o=this.IA;o[0]=1/t,o[1]=1/e,o[2]=s,o[3]=i,o[4]=r,o[5]=n,o[6]=h}TM(){const t=this._A.dI,e=this.IA;t.HE.QE()&&t.HE.fA(e[0],e[1]),t.PE.QE()&&t.PE.fA(e[2],e[3]),t.LE.QE()&&t.LE.cA(e[4]),t.vE.QE()&&t.vE.fA(e[5],e[6])}yM(t){this.y3=BATCH_CLEARDEPTH,this.TA=t?1:0}EM(){const t=this.SE,e=0!==this.TA;e||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),e||t.depthMask(!1)}IM(t){this.y3=BATCH_SETDEPTHENABLED,this.TA=t?1:0}AM(){const t=this.SE;0===this.TA?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}MM(t){this.y3=BATCH_SETDEPTHSAMPLINGENABLED,this.TA=t?1:0}RM(){const t=this.SE,e=this._A,s=e.renderer,i=0!==this.TA;e.CA=i,t.activeTexture(t.TEXTURE2),i?(e.Yy&&t.bindFramebuffer(t.FRAMEBUFFER,e.Yy),t.bindTexture(t.TEXTURE_2D,s.Wy())):(t.bindTexture(t.TEXTURE_2D,null),e.Yy&&t.bindFramebuffer(t.FRAMEBUFFER,e.jy)),t.activeTexture(t.TEXTURE0)}wM(){this.y3=BATCH_COPLANAR_STARTSTENCILPASS}bM(){const t=this.SE;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}OM(){this.y3=BATCH_COPLANAR_STARTCOLORPASS}GM(){const t=this.SE;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}PM(){this.y3=BATCH_COPLANAR_RESTORE}vM(){const t=this.SE;t.disable(t.STENCIL_TEST)}xM(t,e,s,i,r){this.y3=BATCH_SET_SCISSOR,this.TA=t?1:0;const n=this.IA;n[0]=e,n[1]=s,n[2]=i,n[3]=r}LM(){const t=this.SE,e=this.IA;1===this.TA?(t.enable(t.SCISSOR_TEST),t.scissor(e[0],e[1],e[2],e[3])):t.disable(t.SCISSOR_TEST)}DM(){switch(this.y3){case 1:return void this.bA();case 2:return void this.GA();case 3:return void this.vA();case 4:return void this.NA();case 5:return void this.BA();case 6:return void this.$A();case 7:return void this.VA();case 8:return void this.UA();case 9:return void this.YA();case 10:return void this.KA();case 11:return void this.QA();case 12:return void this.eM();case 13:return void this.rM();case 14:return void this.hM();case 15:return void this.zA();case 16:return void this.gM();case 17:return void this.aM();case 18:return void this.cM();case 19:return void this.dM();case 20:return void this.mM();case 21:return void this.LA();case 22:return void this.EM();case 23:return void this.AM();case 24:return void this.RM();case 25:return void this.bM();case 26:return void this.GM();case 27:return void this.vM();case 28:return void this.LM();case 29:return void this.TM()}}}}{let fillOrStrokeRect2=function(t,e,s,i,r,n){e?t.strokeRect(s,i,r,n):t.fillRect(s,i,r,n)},ptToPx2=function(t){return t*(4/3)},getOffsetParam2=function(t,e){t=t.trim();const s=parseFloat(t);return isFinite(s)?t.endsWith("%")?e*s/100:s:0};fillOrStrokeRect=fillOrStrokeRect2,ptToPx=ptToPx2,getOffsetParam=getOffsetParam2;const C33=self.Ve,MAX_TEXTURE_SIZE=4096,EXTRA_LINE_HEIGHT=4,GENERIC_FONT_FAMILIES=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),DEFAULT_OPTS={timeout:60},tempColor=new C33.qo(0,0,0,1),VALID_HORIZ_ALIGNMENTS=new Set(["left","center","right"]),VALID_VERT_ALIGNMENTS=new Set(["top","center","bottom"]),VALID_WORD_WRAP_MODES=new Set(["word","cjk","character"]),VALID_TEXT_DIRECTIONS=new Set(["ltr","rtl"]),allRendererTexts=new Set;C33.FontManager&&C33.FontManager.addEventListener("fontload",t=>{const e=t.font.i3();for(const s of allRendererTexts)(s.NM()||C33.Ar(s.FM(),e))&&s.BM()});let didCheckFoundBoundingBoxSupport=!1,supportsFontBoundingBoxMeasurements=!1;C33.fm.bg=class RendererText{constructor(t,e){e=Object.assign({},DEFAULT_OPTS,e),this.Gg=t,this.kM="Arial",this.$M=16,this.WM=1,this.VM=0,this.HM=!1,this.UM=!1,this.XM="black",this.jM=!1,this.aC=null,this.YM=!0,this.qM=null,this.zM=new Set,this.JM="left",this.KM="top",this.d3="",this.ZM=null,this.QM=C33.mn(C33.hC),this.tR="word",this.eR="ltr",this.sR=!1,this.iR=!1,this.rR=!1,this.nR=-1,this.hR=0,this.oR=0,this.aR=0,this.zC=0,this.JC=0,this.lR=1,this.cR=null,this.uR=null,this.fR=null,this.dR=null,this.pR=-1,this.CR=-1,this.mR="",this.SR="",this.gR="",this._R=1,this.TR=1,this.yR=t=>this.ER(t),this.DT=null,this.IR=new C33.Rect,this.AR=1,this.MR=new C33.df(()=>{this.RR(),this.wR(8,8)},e.timeout),this.bR=null,this.OR=!1,allRendererTexts.add(this)}Sn(){this.qM=null,this.zM.clear(),this.aC=null,this.ZM=null,this.cR=null,this.uR=null,this.fR=null,this.dR=null,this.yR=null,this.MR.Sn(),this.bR=null,this.RR(),this.QM.lu(),this.QM=null,this.Gg=null,this.OR=!0,allRendererTexts.delete(this)}GR(){this.rR=!0}PR(){this.GR(),this.iR=!0}BM(){this.PR(),this.sR=!0}vR(t){if(this.jM!==(t=!!t)){this.jM=t;const e=this.jM?"alphabetic":"top";this.uR&&(this.uR.textBaseline=e),this.fR&&(this.fR.textBaseline=e),this.BM()}}NM(){return this.jM}uC(t){this.aC!==t&&(this.aC=t,this.QM.uC(t),this.aC&&this.aC.q1()&&this.aC.z1().then(()=>this.GR()),this.BM())}xR(t){this.YM!==(t=!!t)&&(this.YM=t,this.GR())}LR(t){this.kM!==(t=t||"serif")&&(this.kM=t,this.BM())}FM(){return this.kM}DR(t){this.$M!==(t=t<.1?.1:t)&&(this.$M=t,this.BM())}NR(){return this.$M}FR(t){this.WM!==t&&(this.WM=t,this.BM())}BR(t){this.VM!==t&&(this.VM=t,this.PR())}kR(){return this.VM}$R(t){this.HM!==(t=!!t)&&(this.HM=t,this.BM())}WR(){return this.HM}VR(t){this.UM!==(t=!!t)&&(this.UM=t,this.BM())}HR(){return this.UM}UR(t){t=Math.floor(t),this.nR!==t&&(this.nR=t,this.GR())}jR(){return this.nR}YR(t,e){let s=[];(this.HM||e.f1("b"))&&s.push("bold"),(this.UM||e.f1("i"))&&s.push("italic");const i=e.u1("size"),r=(i?parseFloat(i.param):this.$M)*this.WM;s.push(t?r+"pt":r*this.qR()+"pt");let n=this.kM,h=e.u1("font");return h&&h.param&&(n=h.param,this.qM)&&!this.zM.has(n)&&(this.qM(n),this.zM.add(n)),n&&(GENERIC_FONT_FAMILIES.has(n)?s.push(n):s.push('"'+n+'"')),s.join(" ")}g_(t){t instanceof C33.qo&&(t=t.Oa()),this.XM!==t&&(this.XM=t,this.GR())}zR(t,e,s){tempColor.ta(t,e,s),this.g_(tempColor)}JR(t){if(!VALID_HORIZ_ALIGNMENTS.has(t))throw new Error("invalid horizontal alignment");this.JM!==t&&(this.JM=t,this.PR())}KR(){return this.JM}ZR(t){if(!VALID_VERT_ALIGNMENTS.has(t))throw new Error("invalid vertical alignment");this.KM!==t&&(this.KM=t,this.PR())}QR(){return this.KM}ew(t){if(!VALID_WORD_WRAP_MODES.has(t))throw new Error("invalid word wrap mode");this.tR!==t&&(this.tR=t,this.BM())}iw(){return this.tR}rw(t){if(!VALID_TEXT_DIRECTIONS.has(t))throw new Error("invalid text direction");this.eR!==t&&(this.eR=t,this.uR&&(this.uR.direction=this.eR),this.fR&&(this.fR.direction=this.eR),this.BM())}hw(){return this.eR}S3(t){this.d3!==t&&(this.d3=t,this.BM())}ow(){return this.d3}qR(){return this.AR*this.lR*self.devicePixelRatio}aw(n,h,o){if(void 0===o&&(o=1),!(n<=0||this.oR===n&&this.aR===h&&this.lR===o)){let t=this.oR,e=(this.oR=n,this.aR=h,this.lR=o,self.devicePixelRatio),s=(this.zC=this.oR*this.lR*e,this.JC=this.aR*this.lR*e,Math.max(this.zC,this.JC)),i=Math.min(this.Gg.XT(),MAX_TEXTURE_SIZE),r=1;i<s&&(r=i/s,this.zC=Math.min(this.zC*r,i),this.JC=Math.min(this.JC*r,i)),this.AR=r,this.oR!==t?this.BM():this.PR()}}dC(){return this.zC}IC(){return this.JC}lw(){return this.lR}cw(){return this.uw(),this.QM.YC()}fw(){return this.uw(),this.QM.qC()+this.QM.cC()*(this.VM+EXTRA_LINE_HEIGHT)-this.VM}pw(){this.uw();let t=0;for(const e of this.QM.lC())for(const s of e.OC())t+=s.GC();return t}Jy(){return this.MR.gf(),this.Cw(),this.DT}mw(t,e){this.uw();const s=this.qR(),i=this.QM.lC();for(const r of i){const n=r.MC()*s;if(e>=r.a1()-r.IC()*s+n&&e<r.a1()+n)for(const h of r.OC())if(t>=h.h1()&&t<h.h1()+h.dC()*s)return h}return null}*Sw(t){this.uw();const e=this.QM.lC();for(const s of e)for(const i of s.OC()){const r=i.u1("tag");r&&C33.Ar(r.param,t)&&(yield i)}}gw(t,e){for(const s of this.Sw(t)){if(0===e)return s;--e}return null}_w(t){let e=0;for(const s of this.Sw(t))++e;return e}Cw(){this.DT&&!this.rR&&!this.iR&&!this.sR||this.OR||this.zC<=0||this.JC<=0||(this.rR=!1,this.Tw())}Tw(){this.OR||(this.uw(),this.wR(Math.max(C33.Vn(Math.ceil(this.zC)),128),Math.max(C33.Vn(Math.ceil(this.JC)),64)),this.yw(),this.Ew(),this.MR.gf())}wR(t,e){this.cR||(this.cR=C33.No(16,16));let s=!1;this.pR===t&&this.CR===e||(this.pR=t,this.CR=e,this.cR.width=t,this.cR.height=e,s=!0),this.uR||(this.uR=this.cR.getContext("2d"),s=!0),s?(this.uR.textBaseline=this.jM?"alphabetic":"top",this.uR.direction=this.eR,this.uR.font=this.mR,this.uR.fillStyle=this.gR,this.uR.strokeStyle=this.gR,this.uR.globalAlpha=this._R,this.uR.lineWidth=this.TR):this.uR.clearRect(0,0,t,e)}Iw(){this.fR||(this.fR=C33.No(16,16).getContext("2d"),this.dR=C33.No(16,16).getContext("2d"),this.fR.textBaseline=this.jM?"alphabetic":"top",this.dR.textBaseline="top",this.fR.direction=this.eR,this.dR.direction=this.eR)}Aw(t){this.SR!==t&&(this.SR=t,this.fR.font=t,this.dR.font=t)}Mw(){if(!didCheckFoundBoundingBoxSupport){didCheckFoundBoundingBoxSupport=!0,this.Iw();const t=this.fR.measureText("test");supportsFontBoundingBoxMeasurements="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return supportsFontBoundingBoxMeasurements}uw(){this.Rw(),this.ww()}Rw(){this.sR&&(this.Iw(),!this.jM||this.ZM&&this.ZM.toString()===this.d3||(this.ZM=new C33.kr(this.d3,{Wp:!0})),this.QM.hC(this.jM?this.ZM.Zp():this.d3,this.yR,this.oR,this.tR,0),this.sR=!1)}ww(){this.iR&&(this.bw(),this.iR=!1)}ER(t){let e=t._C()?t.FC().join(""):" ",s=(this.Aw(this.YR(!0,t)),t.u1("size")),i=(s?parseFloat(s.param):this.$M)*this.WM,r=this.fR.measureText(e),n=0;if(this.jM&&this.Mw()){const h=this.dR.measureText(e);n=r.fontBoundingBoxAscent-h.fontBoundingBoxAscent}return{width:r.width,height:ptToPx2(i),fontBoundingBoxAscent:r.fontBoundingBoxAscent||0,fontBoundingBoxDescent:r.fontBoundingBoxDescent||0,gC:n}}Ow(t){this.mR!==t&&(this.mR=t,this.uR.font=t)}Gw(t){this.gR!==t&&(this.gR=t,this.uR.fillStyle=t,this.uR.strokeStyle=t)}Pw(t){this._R!==t&&(this._R=t,this.uR.globalAlpha=t)}xw(t){this.TR!==t&&(this.TR=t,this.uR.lineWidth=t)}bw(){let i=this.qR(),r=(EXTRA_LINE_HEIGHT+this.VM)*i,n=0,h=this.QM.lC();if(0!==h.length){for(const e of h){e.n1(NaN),e.o1(NaN);for(const o of e.OC())o.n1(NaN),o.o1(NaN)}let t=this.jM&&this.Mw(),s=h[0].IC()*i;if("center"===this.KM){const a=h.reduce((t,e)=>t+e.IC()*i+r,0)-r;n=Math.max(this.JC/2-a/2,0),t&&(s=h[0].RC()*i)}else if("bottom"===this.KM){const l=h.reduce((t,e)=>t+e.IC()*i+r,0)-this.VM*i,c=t?h.at(-1).MC()*i:0;n=this.JC-l-c-2}for(let t=0,e=h.length;t<e;++t){const u=h[t],f=u.IC()*i,d=n;if(this.jM){if(n+=0===t?s:f,0<t&&n>this.JC-EXTRA_LINE_HEIGHT*i)break}else if(0<t&&n>=this.JC-f)break;0<=d&&this.Lw(u,n,i),this.jM||(n+=f),n+=r}}}Lw(t,e,s){let i=0;"center"===this.JM?i=(this.zC-t.dC()*s)/2:"right"===this.JM&&(i=this.zC-t.dC()*s),t.n1(i),t.o1(e);for(const r of"ltr"===this.eR?t.OC():t.s1())this.Dw(r,i,e,s),i+=r.dC()*s}Dw(t,e,s,i){const r=t.u1("offsetx"),n=(e+=r?getOffsetParam2(r.param,t.IC())*i:0,t.u1("offsety"));if(s+=n?getOffsetParam2(n.param,t.IC())*i:0,t.yC()){const h=t.u1("iconoffsety");s+=h?getOffsetParam2(h.param,t.IC())*i:.2*t.IC()*i}t.n1(e),t.o1(s)}yw(){this.uR.imageSmoothingEnabled=this.YM,this.uR.imageSmoothingQuality="high",this.hR=0;const t=this.qR(),e=this.QM.lC();for(const s of e)this.Nw(s,t)}Nw(t,e){const s=t.h1(),i=t.a1();if(Number.isFinite(s)&&Number.isFinite(i))for(const r of"ltr"===this.eR?t.OC():t.s1())this.Fw(r,e,t.IC())}Fw(h,o,a){const l=this.uR,c=h.h1(),u=h.a1();if(Number.isFinite(c)&&Number.isFinite(u)){let t=a/16,e=h.dC()*o,s=h.IC()*o,i=h.IC()/16,r=(EXTRA_LINE_HEIGHT+this.VM)*o,n=h._C()?h.FC():null;if(-1!==this.nR){if(this.hR>=this.nR)return;h._C()&&this.hR+n.length>this.nR&&(n=n.slice(0,this.nR-this.hR),e=this.ER(h).width*o),this.hR+=h.GC()}const f=h.u1("background"),d=h.f1("u"),p=h.f1("s");if((!h._C()||!C33.Jd(n)||f||d||p)&&!h.f1("hide")){const C=h.u1("color"),m=h.u1("opacity"),S=(this.Pw(m?parseFloat(m.param)/100:1),f&&(this.Gw(f.param),l.fillRect(c,u-s,e,s+r)),h.u1("linethickness")),g=S?parseFloat(S.param):1,_=h.f1("stroke");if(_&&this.xw(.5*i*g*this.qR()),h._C()){const T=n.join("");if(this.Ow(this.YR(!1,h)),!_){this.xw(.5*i*g*this.qR());const y=h.u1("outlineback");y&&(this.Gw(y.param),this.Bw(!0,T,c,u,e))}if(this.Gw(C?C.param:this.XM),this.Bw(_,T,c,u,e),!_){this.xw(.5*i*g*this.qR());const E=h.u1("outline");E&&(this.Gw(E.param),this.Bw(!0,T,c,u,e))}}else if(h.yC()&&0<h.dC()){const I=h.E1(this.aC);I&&l.drawImage(I,c,u-s,e,s)}if(this.Gw(C?C.param:this.XM),d&&fillOrStrokeRect2(l,_,c,u+o*t,e,o*t*g),p){const A=u-s/4,M=o*i,R=A+M/2;l.fillRect(c,R-M*g/2,e,M*g)}}}}Bw(t,e,s,i,r){"rtl"===this.eR&&(s+=r),t?"Gecko"===C33._s.Ms?this.uR.strokeText(e,s,i,r):this.uR.strokeText(e,s,i):"Gecko"===C33._s.Ms?this.uR.fillText(e,s,i,r):this.uR.fillText(e,s,i)}Ew(){this.Gg.kw()||(this.DT||(this.DT=this.Gg.$y(this.cR.width,this.cR.height,{PT:!0,vT:"high"})),this.Gg.$w(this.cR,this.DT),this.IR.set(0,0,this.zC/this.DT.dC(),this.JC/this.DT.IC()),this.bR&&this.bR())}Ww(){return this.IR}RR(){this.DT&&(this.Gg.kw()||this.Gg.Uy(this.DT),this.DT=null)}static __(){for(const t of allRendererTexts)t.RR()}static Vw(){return allRendererTexts.values()}}}{const C33=self.Ve;class WebGLRealTimeElapsedQuery{constructor(t){this.SE=t.jT(),this.Hw=t.YT(),this.Uw=t.Xw(),this.jw=null,this.Sf=!1,this.Yw=!1,this.qw=0,1===this.Hw?this.jw=this.Uw.createQueryEXT():this.jw=this.SE.createQuery()}Sn(){this.zw(),this.SE=null,this.Uw=null,this.Yw=!1}zw(){this.jw&&(1===this.Hw?this.Uw.deleteQueryEXT(this.jw):this.SE.deleteQuery(this.jw),this.jw=null)}uM(){if(this.Sf)throw new Error("query already active");1===this.Hw?this.Uw.beginQueryEXT(this.Uw.TIME_ELAPSED_EXT,this.jw):this.SE.beginQuery(this.Uw.TIME_ELAPSED_EXT,this.jw),this.Sf=!0}pM(){if(!this.Sf)throw new Error("query not active");1===this.Hw?this.Uw.endQueryEXT(this.Uw.TIME_ELAPSED_EXT):this.SE.endQuery(this.Uw.TIME_ELAPSED_EXT),this.Sf=!1}Jw(){if(this.jw&&!this.Yw&&!this.Sf){let t=!1;t=1===this.Hw?this.Uw.getQueryObjectEXT(this.jw,this.Uw.QUERY_RESULT_AVAILABLE_EXT):this.SE.getQueryParameter(this.jw,this.SE.QUERY_RESULT_AVAILABLE);const e=this.SE.getParameter(this.Uw.GPU_DISJOINT_EXT);t&&!e&&(1===this.Hw?this.qw=this.Uw.getQueryObjectEXT(this.jw,this.Uw.QUERY_RESULT_EXT):this.qw=this.SE.getQueryParameter(this.jw,this.SE.QUERY_RESULT),this.qw/=1e9,this.Yw=!0),(t||e)&&this.zw()}}Kw(){return this.Yw}Zw(){if(this.Yw)return this.qw;throw new Error("no result available")}}C33.fm.Qw=class WebGLTimeElapsedQuery{constructor(t){this.Gg=t,this.f2=t.mg(),this.Sf=!1,this.tb=null,this.eb=!1,this.sb=null,this.ib=[]}Sn(){for(const t of this.ib)t instanceof WebGLRealTimeElapsedQuery&&t.Sn();C33.Vh(this.ib),this.tb=null,this.sb=null,this.Gg=null}uM(){if(this.Sf)throw new Error("query already active");const t=this.Gg.rb();0<t.length?(this.eb=!0,this.tb=t.at(-1),this.tb.nb(),this.tb.ib.push(this)):(this.eb=!1,this.tb=null),this.Sf=!0,t.push(this),this.hb()}pM(){if(!this.Sf)throw new Error("query not active");const t=this.Gg.rb().pop();if(t!==this)throw new Error("can only end most nested query");this.Sf=!1,this.nb(),this.tb&&(this.tb.hb(),this.tb=null)}hb(){this.sb=C33.mn(WebGLRealTimeElapsedQuery,this.Gg),this.ib.push(this.sb),this.sb.uM()}nb(){this.sb.pM(),this.sb=null}Jw(){for(const t of this.ib)t.Jw()}ob(){return this.eb}Kw(){return this.ib.every(t=>t.Kw())}Zw(){return this.ib.reduce((t,e)=>t+e.Zw(),0)}mg(){return this.f2}}}{const C33=self.Ve;C33.fm.ab=class WebGLQueryResultBuffer{constructor(t,e=1e3){this.Gg=t,this.lb=e,this.cb=[],this.Gg.ub(this)}Sn(){this.lu(),this.Gg.fb(this),this.Gg=null}lu(){for(const t of this.cb)t.Sn();C33.Vh(this.cb)}pb(){const t=new C33.fm.Qw(this.Gg);if(this.cb.push(t),this.cb.length>this.lb){const e=this.cb.shift();e.Sn()}return t}Cb(t){for(const e of this.cb){if(e.mg()>=t)return;if(e.ob())return;e.Jw()}}mb(t,e){if(e<=t)return NaN;let s=0;for(const i of this.cb){if(i.mg()>=e)break;if(!(i.mg()<t)){if(!i.Kw())return NaN;s+=i.Zw()}}return s}Sb(s){for(let t=0,e=this.cb.length;t<e;++t){const i=this.cb[t];if(!(i.mg()<s))return void(0<t&&this.cb.splice(0,t));i.Sn()}}}}{let CheckPendingPolls2=function(){pollRafId=-1;for(const t of pendingPolls)t.gb()&&(t.resolve(),pendingPolls.delete(t));0<pendingPolls.size&&(pollRafId=self.requestAnimationFrame(CheckPendingPolls2))},C33=(CheckPendingPolls=CheckPendingPolls2,self.Ve),assert=self.assert,glMatrix=self._e,vec32=glMatrix.we,vec42=glMatrix.Oe,mat42=glMatrix.Ie,DEFAULT_WEBGLRENDERER_OPTS={powerPreference:"default",_b:!0,alpha:!1,depth:!1,Tb:!1,yb:2,failIfMajorPerformanceCaveat:!1},VALID_POWER_PREFERENCES=new Set(["default","low-power","high-performance"]),MAX_VERTICES=8e3,MAX_INDICES=MAX_VERTICES/2*3,MAX_POINTS=8e3,LAST_POINT=MAX_POINTS-4,PARTIAL_TEXTURE_UPLOAD_CHUNK_SIZE=262144,defaultTexCoordsQuad=new C33.nc(0,0,1,0,1,1,0,1),tmpProjection=mat42.create(),tmpModelView=mat42.create(),tmpQuad=new C33.nc,tmpRect=new C33.Rect,loseContextExtension=null,pendingPolls=(C33.isDebug&&(self.Eb=function(){loseContextExtension?loseContextExtension.loseContext():console.warn("WEBGL_lose_context not supported")},self.Ib=function(){loseContextExtension?loseContextExtension.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),pollRafId=-1;C33.fm.Ab=class WebGLRenderer extends C33.fm.Pm{constructor(t,e){if(super(e),e=Object.assign({},DEFAULT_WEBGLRENDERER_OPTS,e),!VALID_POWER_PREFERENCES.has(e.powerPreference))throw new Error("invalid power preference");let s={alpha:!!e.alpha,depth:!1,antialias:!1,powerPreference:e.powerPreference,failIfMajorPerformanceCaveat:!!e.failIfMajorPerformanceCaveat},i=null,r=0;if(2<=e.yb&&(i=t.getContext("webgl2",s),r=2),i||(i=t.getContext("webgl",s),r=1),!i)throw new Error("renderer-unavailable (could not get WebGL context)");this.SE=i,this.Mb=i.getContextAttributes(),this.Rb=i.getParameter(i.VERSION),this.Hw=r,this.wb=vec42.create(),this.bb=!1,this.Ob=mat42.create(),this.Gb=!!e.depth,this.Pb=!(!e.depth||!e.Tb),this.vb=this.Gb,this.xb=!1,this.Lb=null,this.Db=!0,this.Nb=0,this.Fb=0,this.TE=null,this.yE=null,this.Bb=null,this.EE=null,this.kb=new Float32Array(MAX_VERTICES*this.dg()),this.$b=new Uint16Array(MAX_INDICES),this.Wb=new Float32Array(2*MAX_VERTICES),this.Vb=new Float32Array(4*MAX_POINTS),this.Hb=0,this.Ub=0,this.Xb=0,this.jb=0,this.Yb=null,this.qb=null,this.zb=[],this.Jb=0,this.Kb=0,this.Zb=null,this.Qb=0,this._A=C33.mn(C33.fm.pA,this),this.tO=C33.mn(C33.qo,1,1,1,1),this.eO=null,this.sM=null,this.sO=0,this.iO=0,this.rO=new C33.Rect,this.nO=C33.mn(C33.Rect,0,0,-1,-1),this.hO=0,this.oO=-1,this.aO=0,this.lO=0,this.cO=0,this.uO="(unavailable)",this.fO="(unavailable)",this.dO=[],this.pO=!1,this.CO=null,this.mO=null,this.SO=null,this.gO=null,this._O=null,this.TO=null,this.yO=0,this.EO=!!e._b,this.Uw=null,this.IO=new Set,this.AO=[],this.m2(this.$b)}Eg(){return!0}async _2(){super._2();const t=this.SE,e=this.dg(),s=(this.tO.Qo(1,1,1,1),this.eO=null,this.sM=null,this.Hb=0,this.Xb=0,this.jb=MAX_VERTICES*e-4*e,C33.Vh(this.zb),this.Jb=0,this.Kb=0,this.Yb=null,this.Zb=null,this.rO.set(0,0,1,1),this.Qb=0,this._A),i=(s.dI=null,s.jy=null,s.Yy=null,vec42.set(s.mA,1,1,1,1),s.clearColor.Qo(0,0,0,0),s.SA.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.sO=t.ONE,this.iO=t.ONE_MINUS_SRC_ALPHA,this.MO(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.Gb?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.vb=this.Gb,this.xb=!1,this.EE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.EE),t.bufferData(t.ARRAY_BUFFER,this.Vb.byteLength,t.DYNAMIC_DRAW),this.TE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.TE),t.bufferData(t.ARRAY_BUFFER,this.kb.byteLength,t.DYNAMIC_DRAW),this.yE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.yE),t.bufferData(t.ARRAY_BUFFER,this.Wb.byteLength,t.DYNAMIC_DRAW),this.Bb=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.Bb),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.$b,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.oO=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),r=(this.aO=i[0],this.lO=i[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),h=(this.cO=r&&n?Math.min(r.precision,n.precision):0,2048<this.lO&&(this.lO=2048),this.dO=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(h&&(this.uO=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.fO=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this.CO=t.getExtension("KHR_parallel_shader_compile"),C33.isDebug&&(loseContextExtension=t.getExtension("WEBGL_lose_context")),this.EO&&(1===this.YT()?this.Uw=t.getExtension("EXT_disjoint_timer_query"):this.Uw=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.mO=t.getExtension("EXT_texture_filter_anisotropic"),this.mO?this.yO=t.getParameter(this.mO.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.yO=0,this.YT()<2&&this.Gb&&this.Pb&&(this.SO=t.getExtension("WEBGL_depth_texture"),!this.SO))throw new Error("no depth texture support");this.YT()<2&&(this.gO=t.getExtension("EXT_frag_depth"),this._O=t.getExtension("OES_standard_derivatives"),this.TO=t.getExtension("EXT_shader_texture_lod"));let o=C33.fm.uE,a=o.NI(!1),l=o.BI(),c=a,u=o.YI(),f=o.XI(),d=o.WI(),p=o.NI(!0),C=!1;this.Gb&&(this.YT()<2?this.gO&&(l=o.kI(),u=o.qI(),d=o.VI(),C=!0):(c=o.FI(),l=o.$I(),u=o.zI(),f=o.jI(),d=o.HI(),p=o.FI(!0)));const m=o.UI(this.YT(),C,this._O&&this.TO),S=2<=this.YT()?o.FI():a,g=[[l,c,"<default>"],[l,c,"<default-device-transform>"],[u,f,"<point>"],[o.JI(),a,"<fill>"],[o.KI(),a,"<lineargradient>"],[o.ZI(),a,"<penumbra>"],[o.tA(),a,"<hardellipse>"],[o.eA(),a,"<hardellipseoutline>"],[o.sA(),a,"<smoothellipse>"],[o.iA(),a,"<smoothellipseoutline>"],[o.QI(),a,"<smoothline>"],[d,p,"<tilemap>"],[m,S,"<tilerandomization>"]],_=await Promise.all(g.map(t=>this.RO({src:t[0],dE:t[1],name:t[2]})));this.Wm=_[0],this.qb=_[1],this.Vm=_[2],this.Xm=_[3],this.jm=_[4],this.Ym=_[5],this.qm=_[6],this.zm=_[7],this.Jm=_[8],this.Km=_[9],this.Zm=_[10],this.Hm=_[11],this.Um=_[12],this.Y2()}async RO(t){const e=await C33.fm.uE.mE(this,t);return this.H2(e),e}wO(){this.Yb=null}aw(t,e,s){if(this.zC!==t||this.JC!==e||s){this.Cg();const i=this.SE,r=this._A;this.zC=t,this.JC=e,this.bO(0,0,t,e),this.N2(this.Ob,t/e),this.OO(this.Ob),this.qb&&(i.useProgram(this.qb.CI()),this.qb.aI(this.Lm),this.Yb=this.qb,this._A.dI=this.qb),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE0),this.eO=null,this.sM=null,this.Gb&&this.Db&&this.GO(this.zC,this.JC),this.Zb&&this.Zb.Hy(this.zC,this.JC),i.bindFramebuffer(i.FRAMEBUFFER,null),this.Zb=null,r.jy=null,r.Yy=null}}GO(t,e){const s=this.SE;this.Lb&&this.Nb===t&&this.Fb===e||(this.Pb?(this.Lb&&s.deleteTexture(this.Lb),this.Lb=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.Lb),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),2<=this.YT()?s.texImage2D(s.TEXTURE_2D,0,s.DEPTH24_STENCIL8,t,e,0,s.DEPTH_STENCIL,s.UNSIGNED_INT_24_8,null):this.SO&&s.texImage2D(s.TEXTURE_2D,0,s.DEPTH_STENCIL,t,e,0,s.DEPTH_STENCIL,this.SO.UNSIGNED_INT_24_8_WEBGL,null),s.bindTexture(s.TEXTURE_2D,null)):(this.Lb&&s.deleteRenderbuffer(this.Lb),this.Lb=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,this.Lb),s.renderbufferStorage(s.RENDERBUFFER,2<=this.Hw?s.DEPTH24_STENCIL8:s.DEPTH_STENCIL,t,e),s.bindRenderbuffer(s.RENDERBUFFER,null)),this.Nb=t,this.Fb=e)}PO(t,e){this.Gb&&(this.Db=!1,this.GO(t,e))}vO(){this.Gb&&(this.Db=!0,this.GO(this.zC,this.JC))}bO(t,e,s,i){const r=this.wb;if(r[0]!==t||r[1]!==e||r[2]!==s||r[3]!==i){const n=this.xO();n.FA(t,e,s,i),vec42.set(r,t,e,s,i),this.Kb=0}}G2(t){super.G2(t),this.N2(this.Ob,this.zC/this.JC)}R2(t){super.R2(t),this.N2(this.Ob,this.zC/this.JC)}b2(t){super.b2(t),this.N2(this.Ob,this.zC/this.JC)}OO(t){if(!mat42.W(this.Lm,t)){const e=this.xO();e.kA(t),mat42.A(this.Lm,t),this.Kb=0,this.bb=!0}}LO(){let t,e,s,i=this.Zb;s=(null===i?(t=this.Ob,e=this.dC(),this):(t=i.Ky(),e=i.dC(),i)).IC(),this.OO(t),this.bO(0,0,e,s)}DO(t){if(!mat42.W(this.Dm,t)){const e=this.xO();e.WA(t),mat42.A(this.Dm,t),this.Kb=0,this.bb=!0}}NO(){this.bb=!1}FO(){return this.bb}Xy(){return this._A}xO(){const t=this.zb;return this.Jb===t.length&&t.push(new C33.fm.gA(this._A)),t[this.Jb++]}Cg(){0===this.Jb||this.kw()||(this.BO(),this.kO(),this.Jb=0,this.Hb=0,this.Ub=0,this.Xb=0,this.Kb=0)}BO(){const t=this.SE;0<this.Xb&&(t.bindBuffer(t.ARRAY_BUFFER,this.EE),t.bufferSubData(t.ARRAY_BUFFER,0,this.Vb.subarray(0,this.Xb))),0<this.Hb&&(t.bindBuffer(t.ARRAY_BUFFER,this.TE),t.bufferSubData(t.ARRAY_BUFFER,0,this.kb.subarray(0,this.Hb)),t.bindBuffer(t.ARRAY_BUFFER,this.yE),t.bufferSubData(t.ARRAY_BUFFER,0,this.Wb.subarray(0,this.Ub)))}kO(){const s=this.zb;for(let t=0,e=this.Jb;t<e;++t)s[t].DM()}$O(){return this.tO.Ca()}WO(t,e,s,i){const r=this.tO;if(!r.Ea(t,e,s,i)){r.Qo(t,e,s,i);const n=this.xO();n.PA(r),this.Kb=0,this.t2=null}}VO(t){const e=this.tO;if(e.Ca()!==t){e.aa(t);const s=this.xO();s.PA(e),this.Kb=0,this.t2=null}}g_(t){const e=this.tO;if(!e.equals(t)){e.set(t);const s=this.xO();s.PA(e),this.Kb=0,this.t2=null}}HO(){this.WO(1,1,1,1)}UO(){return this.tO}XO(t){if(t!==this.eO){const e=this.xO();e.OA(t),this.eO=t,this.Kb=0}}KT(){this.eO=null}S_(t){const e=this.TS(t);this.jO(e[0],e[1])}YO(t){const e=this.IS(t);this.jO(e.gS,e._S)}jO(t,e){if(t!==this.sO||e!==this.iO){const s=this.xO();s.DA(t,e),this.sO=t,this.iO=e,this.Kb=0,this.t2=null}}qO(){return this.sO===this.SE.ONE&&this.iO===this.SE.ONE_MINUS_SRC_ALPHA}zO(){this.jO(this.SE.ONE,this.SE.ONE_MINUS_SRC_ALPHA)}JO(){this.jO(this.SE.SRC_ALPHA,this.SE.ONE_MINUS_SRC_ALPHA)}KO(){this.jO(this.SE.ONE,this.SE.ZERO)}Rect(t){this.ZO(t.bl(),t.Ol(),t.Gl(),t.Pl())}ZO(t,e,s,i){this.fg(t,e,s,e,s,i,t,i)}QO(){let t=this.Hb;if(t>=this.jb&&(this.Cg(),t=0),1===this.Kb)this.zb[this.Jb-1].yA+=6;else{const e=this.xO();e.wA(t,6),this.Kb=1}}tG(t){t.wc(this.kb,this.Hb,this.i2+this.n2),this.Hb+=12}nc(t){this.QO(),this.tG(t),defaultTexCoordsQuad.ga(this.Wb,this.Ub),this.Ub+=8}fg(t,e,s,i,r,n,h,o){this.QO();let a=this.kb,l=this.Hb,c=this.i2+this.n2;a[l++]=t,a[l++]=e,a[l++]=c,a[l++]=s,a[l++]=i,a[l++]=c,a[l++]=r,a[l++]=n,a[l++]=c,a[l++]=h,a[l++]=o,a[l++]=c,this.Hb=l,defaultTexCoordsQuad.ga(this.Wb,this.Ub),this.Ub+=8}BS(t,e){this.QO(),this.tG(t),e.Ll(this.Wb,this.Ub),this.Ub+=8}eG(t,e){this.QO(),this.tG(t),e.ga(this.Wb,this.Ub),this.Ub+=8}sG(t,e,s,i,r,n,h,o,a,l,c,u,f){this.QO();let d=this.kb,p=this.Hb,C=this.i2+this.n2;d[p++]=t,d[p++]=e,d[p++]=C+s,d[p++]=i,d[p++]=r,d[p++]=C+n,d[p++]=h,d[p++]=o,d[p++]=C+a,d[p++]=l,d[p++]=c,d[p++]=C+u,this.Hb=p,f.Ll(this.Wb,this.Ub),this.Ub+=8}xS(t,e,s,i,r,n,h,o,a,l,c,u,f){this.QO();let d=this.kb,p=this.Hb,C=this.i2+this.n2;d[p++]=t,d[p++]=e,d[p++]=C+s,d[p++]=i,d[p++]=r,d[p++]=C+n,d[p++]=h,d[p++]=o,d[p++]=C+a,d[p++]=l,d[p++]=c,d[p++]=C+u,this.Hb=p,f.ga(this.Wb,this.Ub),this.Ub+=8}iG(i,r,n){const h=this.kb,o=this.Wb;if(n.length%3!=0)throw new Error("invalid index buffer length");for(let s=0,t=n.length;s<t;){const a=n[s++],l=n[s++],c=n[s++],u=3*a,f=3*l,d=3*c,p=2*a,C=2*l,m=2*c;this.QO();let t=this.Hb,e=this.Ub;h[t++]=i[0+u],h[t++]=i[1+u],h[t++]=i[2+u],h[t++]=i[0+f],h[t++]=i[1+f],h[t++]=i[2+f],h[t++]=i[0+d],h[t++]=i[1+d],h[t++]=i[2+d],h[t++]=i[0+d],h[t++]=i[1+d],h[t++]=i[2+d],o[e++]=r[0+p],o[e++]=r[1+p],o[e++]=r[0+C],o[e++]=r[1+C],o[e++]=r[0+m],o[e++]=r[1+m],o[e++]=r[0+m],o[e++]=r[1+m],this.Hb=t,this.Ub=e}}rG(t,e){this.wS(0),mat42.A(tmpProjection,this.Lm),mat42.A(tmpModelView,this.Dm),this.LO();const[s,i]=this.nG(this.Zb),r=this.V2(0,0,this.E2(i),0,0,0,i);if(this.DO(r),"crop"===t&&this.Zb&&e){const n=this.zC/2,h=this.JC/2,o=e.dC(),a=e.IC(),l=this.Zb.dC(),c=this.Zb.IC(),u=Math.min(l,o),f=Math.min(c,a),d=Math.max(a-c,0),p=Math.max(c-a,0);tmpRect.set(-n,h-p,-n+u,h-f-p),tmpQuad.Oc(tmpRect),tmpRect.set(0,d,u,f+d),tmpRect.bt(o,a),this.BS(tmpQuad,tmpRect)}else{const C=s/2,m=i/2;this.ZO(-C,m,C,-m)}this.OO(tmpProjection),this.DO(tmpModelView)}hG(t){if(!this.rO.equals(t)){this.rO.A(t);const e=this.xO();e.qA(t),this.Kb=0}}oG(){}aG(t,e,s,i){this.Xb>=LAST_POINT&&this.Cg();let r=this.Xb,n=this.i2+this.n2;if(2===this.Kb&&this.Qb===n)this.zb[this.Jb-1].yA++;else{const o=this.xO();o.JA(r,n),this.Kb=2,this.Qb=n}const h=this.Vb;h[r++]=t,h[r++]=e,h[r++]=s,h[r++]=i,this.Xb=r}q2(t){if(this.Yb!==t){const e=this.xO();e.ZA(t),this.Yb=t,this.Kb=0,this.t2=null}}lG(){return this.Yb}cG(){this.q2(this.qb)}uG(t){const e=this.xO();e.xA(t),this.Kb=0}fG(t,e,s=1){const i=this.xO();i.CM(t,e,s),this.Kb=0}dG(t,e,s,i,r,n,h){if(this.Yb!==this.Hm)throw new Error("must set tilemap fill mode first");const o=this.xO();o.SM(t,e,s,i,r,n,h),this.Kb=0}pG(t,e,s,i,r,n,h){if(this.Yb!==this.Um)throw new Error("must set tile randomization mode first");const o=this.xO();o._M(t,e,s,i,r,n,h),this.Kb=0}CG(t,e,s,i,r,n,h,o,a,l,c){const u=this.Yb;if(c%=10800,u.ZE&&!u.II(e,s,i,r,n,h,o,a,l,c)){const f=this.xO(),d=(f.tM(),u.RI(e,s,i,r,n,h,o,a,l,c),f.IA),p=(d[0]=n,d[1]=h,e.ga(d,2),d[6]=a,d[7]=l,s.ga(d,12),f.AA),C=(r.ga(p,0),p[1]);p[1]=p[3],p[3]=C,i.ga(f.MA,0),f.TA=c,f.yA=o,u.DE.QE()?f.EA=t?t.Jy():null:f.EA=null,this.Kb=0}}mG(t){const e=this.Yb;if(0!==t.length&&!e._I(t)){const s=this.xO();s.iM(),e.yI(t),C33.jh(s.RA,t),this.Kb=0}}SG(t,e,s,i){const r=this.xO();r.jA(t,e,s,i),this.Kb=0}lu(t){const e=this.xO();e.XA(t),this.Kb=0}gG(){}pg(){super.pg(),this.SE.flush()}_G(){if(this.Gb&&this.Zb&&this.Zb.eE()){const t=this.xO();t.yM(this.vb),this.Kb=0}}TG(t){if(this.vb!==(t=!!t)&&this.Gb){this.vb=t;const e=this.xO();e.IM(t),this.Kb=0}}yG(){return this.vb}Wy(){return this.Lb}Vy(){return this.Pb}EG(t){if(t=!!t,this.Pb&&this.xb!==t){if(t&&this.yG())throw new Error("depth still enabled");this.xb=t;const e=this.xO();e.MM(t),this.Kb=0}}IG(t,e,s,i,r=0){if(t=Math.floor(t),e=Math.floor(e),s=Math.floor(s),i=Math.floor(i),!this.nO.wl(t,e,s,i)){this.nO.Tl(t,e,s,i);const n=r||this.nG(this.AG())[1],h=(e=n-e-i,this.xO());h.xM(!0,t,e,s,i),this.Kb=0}}MG(){if(-1!==this.nO.Gl()){this.nO.set(0,0,-1,-1);const t=this.xO();t.xM(!1,0,0,0,0),this.Kb=0}}wG(){for(const t of this.IO)t.Cb(this.f2)}kw(){return!this.SE||this.SE.isContextLost()||this.pO}__(){super.T2(),C33.fm.LT.__(),C33.fm.Ay.__(),C33.fm.bg.__();for(const t of this.IO)t.lu();this.dO=[],this.Uw=null,this.CO=null,this.mO=null,this.SO=null,this.gO=null,this._O=null,this.TO=null,this.yO=0,this.uO="(unavailable)",this.fO="(unavailable)",this.Yb=null,this.qb=null,this.Lb=null;for(const e of this.Qm.values())e.__()}async T_(){this.pO=!0,await this._2(),this.pO=!1;for(const t of this.Qm.values())t.T_(this);this.aw(this.zC,this.JC,!0)}bG(t,e){if(this.kw())throw new Error("context lost");this.Cg();const s=C33.mn(C33.fm.LT,this);return s.UT(t,e),s}async OG(i,r){if(this.kw())throw new Error("context lost");if(r=Object.assign({},r),C33.js.ImageBitmapOptions){let t=await createImageBitmap(i,{premultiplyAlpha:"premultiply"}),e=r.RT&&"clamp-to-edge"!==r.RT||r.wT&&"clamp-to-edge"!==r.wT,s=C33.Wn(t.width)&&C33.Wn(t.height);return this.qT()||s||!e?r.premultiplyAlpha=!1:C33.js.Js?(t=await createImageBitmap(i,{premultiplyAlpha:"premultiply",resizeWidth:C33.Vn(t.width),resizeHeight:C33.Vn(t.height)}),r.premultiplyAlpha=!1):t=await createImageBitmap(i,{premultiplyAlpha:"none"}),C33.H3(()=>this.bG(t,r))}if(i instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await C33.Do(i);i=t}return C33.H3(()=>this.bG(i,r))}$y(t,e,s){this.Cg();const i=C33.mn(C33.fm.LT,this);return i.ZT(t,e,s),i}$w(t,e,s){this.Cg(),e.ny(t,s)}Uy(t){t&&(t.my(),0<t.Sy()||(this.Cg(),t===this.eO&&(this.SE.bindTexture(this.SE.TEXTURE_2D,null),this.eO=null),t===this.sM&&(this.SE.activeTexture(this.SE.TEXTURE1),this.SE.bindTexture(this.SE.TEXTURE_2D,null),this.SE.activeTexture(this.SE.TEXTURE0),this.sM=null),t.hy()))}GG(t){let e=this.zC,s=this.JC,i=!0;if(t&&("number"==typeof t.width&&(e=Math.floor(t.width),i=!1),"number"==typeof t.height)&&(s=Math.floor(t.height),i=!1),e<=0||s<=0)throw new Error("invalid size");this.Cg();const r=C33.mn(C33.fm.Ay,this);return r.By(e,s,Object.assign({Ey:i},t)),this.Zb=null,this._A.jy=null,this._A.Yy=null,r}PG(t,e=!0){if(t!==this.Zb){t&&t.sE()&&t.Hy(this.zC,this.JC);const s=this.xO();s.HA(t),this.Zb=t,this.Kb=0,e&&this.LO()}}AG(){return this.Zb}nG(t){return t?[t.dC(),t.IC()]:[this.zC,this.JC]}vG(t,e="stretch"){if(this.Hw<2||this.Zb&&0<this.Zb.iE())this.KO(),this.HO(),this.xG(t,e);else{const s=this.xO();s.oM(t,this.Zb,e),this.Kb=0}}xG(t,e="stretch"){const s=t.Jy();if(!s)throw new Error("not a texture-backed render target");this.XO(s),this.rG(e,s)}LG(t){if(!(this.Hw<2)){const e=this.xO();e.nM(t.qy()),this.Kb=0}}DG(t){this.PG(null),this.Cg();const e=t.Jy();e===this.eO&&(this.SE.bindTexture(this.SE.TEXTURE_2D,null),this.eO=null),e===this.sM&&(this.SE.activeTexture(this.SE.TEXTURE1),this.SE.bindTexture(this.SE.TEXTURE_2D,null),this.SE.activeTexture(this.SE.TEXTURE0),this.sM=null),t.hy()}async aE(t,e,s){this.Cg();let i=this.Zb,r,n,h,o=(h=t?(r=t.dC(),n=t.IC(),t.qy()):(r=this.dC(),n=this.IC(),null),0),a=0,l=r,c=n;if(s){o=C33.En(Math.floor(s.bl()),0,r-1),a=C33.En(Math.floor(s.Ol()),0,n-1);let t=s.width(),e=(t=0===t?r-o:C33.En(Math.floor(t),0,r-o),s.height());e=0===e?n-a:C33.En(Math.floor(e),0,n-a),l=t,c=e,a=n-(a+c)}let u=this.SE,f=(u.bindFramebuffer(u.FRAMEBUFFER,h),()=>{u.bindFramebuffer(u.FRAMEBUFFER,null),this.Zb=null,this._A.jy=null,this._A.Yy=null,this.PG(i)}),d;if(!e&&2<=this.YT()){u.bindFramebuffer(u.READ_FRAMEBUFFER,h);const p=u.createBuffer(),C=l*c*4,m=u.PIXEL_PACK_BUFFER,S=(u.bindBuffer(m,p),u.bufferData(m,C,u.STREAM_READ),u.readPixels(o,a,l,c,u.RGBA,u.UNSIGNED_BYTE,0),u.bindFramebuffer(u.READ_FRAMEBUFFER,null),u.bindBuffer(m,null),f(),u.fenceSync(u.SYNC_GPU_COMMANDS_COMPLETE,0));await this.CE(()=>u.getSyncParameter(S,u.SYNC_STATUS)===u.SIGNALED),u.deleteSync(S),d=new ImageData(l,c),u.bindBuffer(m,p),u.getBufferSubData(m,0,new Uint8Array(d.data.buffer),0,C),u.bindBuffer(m,null),u.deleteBuffer(p)}else d=new ImageData(l,c),u.readPixels(o,a,l,c,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}NG(){this.TG(!0);const t=this.xO();t.wM(),this.Kb=0,this.hO=1}FG(){this.TG(!1);const t=this.xO();t.OM(),this.Kb=0,this.hO=2}BG(){return 2===this.hO}kG(){this.TG(!0);const t=this.xO();t.PM(),this.Kb=0,this.hO=0}$G(t){if(this.WG()){const e=this.xO();e.lM(t),this.Kb=0}}VG(t){if(this.WG()){const e=this.xO();e.fM(t),this.Kb=0}}CE(e){const t=new Promise(t=>pendingPolls.add({resolve:t,gb:e}));return-1===pollRafId&&(pollRafId=self.requestAnimationFrame(CheckPendingPolls2)),t}Ig(){return this.zC*this.JC*(this.Mb.alpha?4:3)}Ag(){let t=0;for(const e of C33.fm.Ay.lE())e.Jy()||(t+=e._y());return t}Mg(){let t=0;for(const e of C33.fm.LT.Ty())t+=e._y();return t}HG(){return this.Rb}YT(){return this.Hw}UG(){return"webgl"+this.YT()}qT(){return 2<=this.YT()}XT(){return this.oO}XG(){return this.aO}jG(){return this.lO}YG(){return 0!==this.cO}qG(){return this.cO}zG(){return this.uO}JG(){return this.fO}KG(){if(2<=this.YT())return"webgl2";{const t=[];return this.gO&&t.push("EXT_frag_depth"),this._O&&t.push("OES_standard_derivatives"),this.TO&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}ZG(){return this.dO}WG(){return!!this.Uw}Xw(){return this.Uw}pE(){return this.CO}ey(){return this.mO}iy(){return this.yO}ub(t){this.IO.add(t)}fb(t){this.IO.delete(t)}rb(){return this.AO}jT(){return this.SE}MO(t){this.SS([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}QG(){return this.wg()}}}{const C33=self.Ve,DEFAULT_CTOR_OPTS={tP:null,eP:null,sP:null,getTime:null,iP:null};C33.fm.rP=class EffectChainManager{constructor(t){t=Object.assign({},DEFAULT_CTOR_OPTS,t),this.nP=t.tP,this.hP=t.eP,this.oP=t.sP,this.aP=t.getTime,this.lP=t.iP,this.cP=null,this.uP=new Set}fP(t){this.uP.add(t)}dP(t){this.uP.delete(t)}__(){this.cP=null;for(const t of this.uP)t.__()}pP(t){return this.nP?this.nP(t):[t.dC(),t.IC()]}AG(t){return this.hP(t)}CP(t,e){this.oP(t,e)}mP(){return this.aP()}ud(t){this.lP(t)}SP(t,e,s){return e=Math.floor(e),s=Math.floor(s),!this.cP||this.cP.dC()===e&&this.cP.IC()===s||(t.Uy(this.cP),this.cP=null),null===this.cP&&(this.cP=t.bG(null,{width:e,height:s,bT:"nearest",PT:!1})),this.cP}}}{const C33=self.Ve,assert=self.assert,glMatrix=self._e,mat42=glMatrix.Ie,tempRect=C33.mn(C33.Rect),tempRect2=C33.mn(C33.Rect),tempRect3=C33.mn(C33.Rect),tempRect4=C33.mn(C33.Rect),tempMat4a=mat42.create(),tempMat4b=mat42.create(),DEFAULT_CTOR_OPTS={gP:null,_P:null,TP:null,yP:!1},DEFAULT_BUILDSTEPS_OPTS={EP:null,IP:!1,AP:!1,MP:!1,RP:!1,wP:!1,bP:!1};C33.fm.OP=class EffectChain{constructor(t,e){e=Object.assign({},DEFAULT_CTOR_OPTS,e),this.yd=t,this.GP=e.gP,this.PP=e._P,this.vP=e.TP,this.xP=null,this.LP=[],this.DP=[],this.NP=[],this.FP=!1,this.d_=0,this.BP=!1,this.kP=!1,this.$P=!1,this.WP=!1,this.VP=!1,this.HP=!1,this.bb=!1,this.UP=!1,this.XP=!1,this.jP=!1,this.YP=!1,this.qP=!1,this.zP=0,this.JP=[null,null,null],this.KP=!!e.yP,this.ZP=0,this.QP=0,this.tv=0,this.sv=0,this.rv=null,this.nv=null,this.hv=C33.mn(C33.Rect),this.ov=C33.mn(C33.Rect),this.av=C33.mn(C33.Rect),this.lv=C33.mn(C33.Rect),this.cv=C33.mn(C33.Rect),this.uv=1,this.dv=1,this.pv=0,this.Cv=0,this.Sv=null,this.gv=null,this._v=0,this.Tv=0,this.yv=!1,this.Ly=mat42.create(),this.Ev=mat42.create(),this.yd.fP(this)}Sn(){this.yd.dP(this),C33.Vh(this.NP),C33.Vh(this.LP),C33.Vh(this.DP),this.rv=null,this.nv=null,this.GP=null,this.PP=null,this.vP=null}__(){this.FP=!0,C33.Vh(this.NP),C33.Vh(this.LP),C33.Vh(this.DP)}Iv(){return this.FP}Av(r,t){if(t=Object.assign({},DEFAULT_BUILDSTEPS_OPTS,t),C33.Vh(this.NP),this.ZP=0,this.QP=0,this.BP=!1,this.kP=!1,this.$P=!1,this.WP=!1,this.VP=!1,this.HP=!1,this.zP=0,this.qP=!!t.RP,this.YP=!!t.bP,this.FP=!1,C33.jh(this.LP,r),0!==r.length){if(t.EP){if(t.EP.length!==r.length)throw new Error("incorrect indexMap length");C33.jh(this.DP,t.EP)}else{C33.Vh(this.DP);for(let t=0,e=r.length;t<e;++t)this.DP.push(t)}for(const e of r)this.ZP+=e.Qg(),this.QP+=e.t_(),e.n_()&&(this.BP=!0),e.o_()&&(this.kP=!0),e.h_()&&(this.$P=!0),e.e_()&&(this.WP=!0),e.c_()&&(this.VP=!0);this.HP=this.Mv(r[0].Kg());const n=this.Rv(r[0],t),h=this.wv(r.at(-1),t);if(1!==r.length||n||h){this.jP=!1;let i=0;n&&(this.zP=1,this.NP.push(C33.mn(C33.fm.OP.Step.bv,this,-1,1)),i=1);for(let e=0,s=r.length;e<s;++e)if(0!==e||n){let t=1===i?2:1;e!==s-1||h||(t=0),this.zP=Math.max(this.zP,t),this.NP.push(C33.mn(C33.fm.OP.Step.Ov,this,i,t,e)),i=t}else this.zP=1,this.NP.push(C33.mn(C33.fm.OP.Step.Gv,this,-1,1,e)),i=1;h&&this.NP.push(C33.mn(C33.fm.OP.Step.Pv,this,i,0))}else this.jP=!0}}Rv(t,e){return!!(e.IP||t.s_()||e.MP&&!t.r_()||t.o_()&&!this.YP||0!==this.ZP||0!==this.QP)||(t.Kg().Eg()?t.h_()&&(e.wP||e.RP)||t.a_()&&e.RP:t.h_()&&!this.HP&&e.wP)}wv(t,e){return!!e.AP||(t.Kg().Eg()?t.h_()||t.e_():(t.h_()||t.e_())&&this.vv())}Mv(t){return t.F2()&&this.$P&&!this.WP}xv(t,e,s){t.F2()&&null===e&&(e=t.GetBackbufferRenderTarget()),this.Sv=e,this.rv=s.Lv||null,this.nv=s.contextObject||null,this.d_=s.Dv||0,this.uv=s.devicePixelRatio||1,this.dv=s.Nv||1,this.pv=s.Fv||0,this.Cv="number"==typeof s.time?s.time:this.yd.mP(),this.bb=!1,t.NO(),this.BP&&this.Bv();let i=!1;if(this.kv()&&(this.$v(t,s),i=!0,this.gv=this.yd.SP(t,this.tv,this.sv),tempRect.A(this.ov),tempRect.Jl(),t.F2()&&t._MaybeDoPendingClearRenderPass(this.Sv),t.CopyTextureToTexture(this.Sv.Jy(),this.gv,tempRect.bl(),tempRect.Ol(),tempRect.width(),tempRect.height())),this.jP)this.Wv(t,s);else if(i||this.$v(t,s),0!==this.av.width()||0!==this.av.height()){t.zO(),t.HO(),t.MS(0),t.wS(0),this.xP=s.Vv||null,this._v=s.Hv||0,this.Tv=s.Uv||0,this.yv=!!s.Xv,this.jv(t),this.JP[0]=e,this.JP[1]=1<=this.zP?this.Yv():null,this.JP[2]=2===this.zP?this.Yv():null;for(const r of this.NP){const n=this.qv(r.zv()),h=this.qv(r.Jv());t.F2()?r.Kv(t,n,h):r.Zv(t,n,h)}t.XO(null),this.JP[1]&&this.Qv(this.JP[1]),this.JP[2]&&this.Qv(this.JP[2]),this.JP.fill(null),this.t4(t),this.Sv=null,this.gv=null,this.rv=null,this.nv=null,this.xP=null}}$v(t,e){const[s,i]=this.yd.pP(t);this.e4(t,s,i),this.s4(e)}e4(t,e,s){if(e<=0||s<=0)throw new Error("invalid draw size");this.tv===e&&this.sv===s||this.i4(t,e,s,0,0,this.Ly,this.Ev),this.tv=e,this.sv=s}i4(t,e,s,i,r,n,h){const o=e/2+i,a=s/2+r,l=(t.N2(n,e/s),t.V2(o,a,t.E2(s),o,a,0,s));mat42.A(h,l)}s4(t){this.hv.A(t.r4),t.n4?this.ov.A(t.n4):this.ov.set(0,0,this.tv,this.sv),this.av.A(this.ov),this.av.bt(this.tv,this.sv);const e=this.dv*this.uv;this.ov.Wl(this.ZP*e,this.QP*e),this.cv.A(this.ov),this.cv.bt(this.tv,this.sv),this.ov.Kl(0,0,this.tv,this.sv),this.lv.A(this.ov),this.lv.bt(this.tv,this.sv)}jv(t){if(this.UP=t.yG(),this.XP=t.BG(),this.YP)t.TG(!1),this.kP&&t.EG(!0);else{if(tempRect.A(this.ov),t.Eg()){const e=this.dv*this.uv;tempRect.Wl(Math.max(this.ZP,1)*e,Math.max(this.QP,1)*e),tempRect.Jl(),tempRect.En(0,0,this.tv,this.sv)}else tempRect.Jl();t.IG(tempRect.bl(),tempRect.Ol(),tempRect.width(),tempRect.height(),this.sv)}}h4(t){t.HO(),this.YP||(this.XP&&t.kG(),t.TG(!1),this.kP&&t.EG(!0)),t.F2()&&t.SetNormalizedCoordsProgramVariant(!0)}t4(t){t.EG(!1),this.XP&&t.FG(),t.TG(this.UP),this.YP||t.MG(),t.F2()&&t.SetNormalizedCoordsProgramVariant(!1),this.bb=t.FO()}o4(){this.cv.En(0,0,1,1)}qv(t){return t<0?null:this.JP[t]}Yv(){return this.yd.AG(this)}a4(){return this.Sv}Qv(t){this.yd.CP(t,this)}l4(t){return this.LP[t]}c4(t){this.xP?this.xP(this,t,()=>this.GP(t,this)):this.GP(t,this),this.jP||this.h4(t)}u4(t){if(this.YP)return!0;if(0!==this._v||0!==this.Tv)return!1;const[e,s]=t.nG(t.AG());return e===this.tv&&s===this.sv}f4(t,e){let s=this.Ly,i=this.Ev;if(e&&!this.u4(t)){s=tempMat4a,i=tempMat4b;const[r,n]=t.nG(t.AG());this.i4(t,r,n,this._v,this.Tv,s,i),this.YP||t.MG()}t.OO(s),t.DO(i)}Bv(){this.yd.ud(this)}d4(t,e){return this.vP(this.DP[t],e)}C4(t,e){let s=this.cv,i=this.lv,r=this.av;t.Eg()&&(tempRect2.A(s),tempRect2.Ul(1),s=tempRect2,tempRect3.A(i),tempRect3.Ul(1),i=tempRect3,tempRect4.A(r),tempRect4.Ul(1),r=tempRect4),this.m4(t,e,i,r,s,1/this.tv,1/this.sv)}S4(t,e){let i=this.lv,r=this.av,n=1/this.tv,h=1/this.sv;if(this.PP){let{g4:t,_4:e,T4:s}=this.PP(this.rv);t||(tempRect.set(0,0,0,0),t=tempRect),e=e||this.tv,s=s||this.sv,i=t,r=t,n=1/e,h=1/s}else t.Eg()&&(tempRect3.A(i),tempRect3.Ul(1),i=tempRect3,tempRect4.A(r),tempRect4.Ul(1),r=tempRect4);let s=this.cv;t.Eg()&&((s=tempRect2).A(this.cv),s.Ul(1)),this.m4(t,e,i,r,s,n,h),t.F2()&&this.VP&&t.SetProgramParameter_IsSrcTexRotated(this.qP)}y4(t){return this.$P?t.F2()?this.kv()?this.gv:this.Sv.Jy():this.Sv:null}m4(t,e,s,i,r,n,h){t.CG(this.y4(t),r,s,i,this.hv,n,h,this.uv,this.dv,this.pv,this.Cv),t.mG(this.d4(e,t))}Wv(t,e){const s=this.LP[0],i=t.yG(),r=s.o_();r&&(t.TG(!1),t.EG(!0),this.cv.set(0,0,1,1),this.av.set(0,0,1,1)),t.q2(s),t.S_(this.d_),t.PG(this.Sv);let n=0,h=1;if(this.av.set(0,0,1,1),s.a_()&&this.PP){const{g4:o,_4:a,T4:l}=this.PP(this.rv);o&&this.av.A(o),n=Number.isFinite(a)?1/a:0,h=Number.isFinite(l)?1/l:0}else{const[c,u]=this.yd.pP(t);n=1/c,h=1/u}e.r4?this.hv.A(e.r4):this.hv.set(0,0,0,0),t.CG(this.y4(t),this.cv,this.av,this.av,this.hv,n,h,this.uv,this.dv,this.pv,this.Cv),t.mG(this.d4(0,t)),t.F2()&&this.VP&&t.SetProgramParameter_IsSrcTexRotated(this.qP),t.MS(0),this.c4(t),r&&(t.EG(!1),t.TG(i))}kv(){return this.HP}vv(){return!this.HP}E4(){return this.$P}I4(){return!!this.jP&&!this.kv()}A4(){return this.YP}M4(){return this.rv}R4(){return this.nv}w4(){return this.d_}b4(){return this.yv}FO(){return this.bb}O4(){return this.ov}G4(){return this.lv}P4(){return this.KP}async v4(t,e,s){}}}{const C33=self.Ve;C33.fm.OP.Step=class EffectChainStep{constructor(t,e,s,i=-1){this.x4=t,this.L4=e,this.D4=s,this.tm=i}N4(){return this.x4}zv(){return this.L4}Jv(){return this.D4}F4(){return this.tm}CI(){return this.N4().l4(this.F4())}Zv(t,e,s){}Kv(t,e,s){}}}{const C33=self.Ve;C33.fm.OP.Step.bv=class PreDrawStep extends C33.fm.OP.Step{constructor(t,e,s,i){super(t,e,s,i)}Zv(t,e,s){const i=this.N4();t.zO(),t.Y2(),t.PG(s,i.b4()),t.SG(0,0,0,0),i.c4(t),i.o4()}Kv(t,e,s){const i=this.N4();t.zO(),t.Y2(),t.PG(s,!1),t.SG(0,0,0,0),i.c4(t),i.o4()}}}{const C33=self.Ve,tempRect=C33.mn(C33.Rect),tempQuad=C33.mn(C33.nc);C33.fm.OP.Step.Pv=class PostDrawStep extends C33.fm.OP.Step{constructor(t,e,s,i){super(t,e,s,i)}Zv(t,e,s){const i=this.N4();t.Y2(),t.PG(s),i.f4(t,!0),t.S_(i.w4()),t.XO(e.Jy()),tempQuad.Oc(i.O4()),tempRect.A(i.G4()),tempRect.Ul(1),t.BS(tempQuad,tempRect),i.P4()&&t.LG(e)}Kv(t,e,s){const i=this.N4();t.Y2(),t.PG(s,!1),i.u4(t)?tempQuad.Oc(i.G4()):(t.SetNormalizedCoordsProgramVariant(!1),i.f4(t,!0),tempQuad.Oc(i.O4())),t.SetBackTexture(null),t.S_(i.w4()),t.XO(e.Jy()),i.A4()?t.rG():t.BS(tempQuad,i.G4())}}}{const C33=self.Ve;C33.fm.OP.Step.Gv=class FirstBounceStep extends C33.fm.OP.Step{constructor(t,e,s,i){super(t,e,s,i)}Zv(t,e,s){const i=this.N4();t.PG(s,i.b4()),t.SG(0,0,0,0),t.KO(),t.q2(this.CI()),i.S4(t,this.F4()),i.c4(t),i.o4()}Kv(t,e,s){const i=this.N4();t.PG(s,!1),t.SG(0,0,0,0),t.KO(),t.q2(this.CI()),i.S4(t,this.F4()),i.c4(t),i.o4()}}}{const C33=self.Ve,tempRect=C33.mn(C33.Rect),tempQuad=C33.mn(C33.nc);C33.fm.OP.Step.Ov=class BounceStep extends C33.fm.OP.Step{constructor(t,e,s,i){super(t,e,s,i)}Zv(t,e,s){const i=this.N4(),r=(t.PG(s),0===this.Jv());r?t.S_(i.w4()):(t.SG(0,0,0,0),t.KO()),t.q2(this.CI()),i.C4(t,this.F4()),t.XO(e.Jy()),i.f4(t,r),tempQuad.Oc(i.O4()),tempRect.A(i.G4()),tempRect.Ul(1),t.BS(tempQuad,tempRect),i.P4()&&t.LG(e)}Kv(t,e,s){const i=this.N4(),r=(t.PG(s,!1),0===this.Jv());r?(t.S_(i.w4()),t.SetBackTexture(null),i.u4(t)?tempQuad.Oc(i.G4()):(t.SetNormalizedCoordsProgramVariant(!1),i.f4(t,!0),tempQuad.Oc(i.O4()))):(t.SG(0,0,0,0),t.KO(),tempQuad.Oc(i.G4())),t.q2(this.CI()),i.C4(t,this.F4()),t.XO(e.Jy()),i.A4()?t.rG():t.BS(tempQuad,i.G4())}}}{let SortZOrderList2=function(t,e){const s=t[0],i=e[0],r=s-i;if(0!=r)return r;const n=t[1],h=e[1];return n-h},C33=(SortZOrderList=SortZOrderList2,self.Ve),C3X=self.Qe,runtime=null,keysDownByKey=new Set,tempZOrderList=[],tempInstances=[],didWarnInAlertPolyfill=!1,didWarnFpsDeprecated=!1,VALID_FRAMERATE_MODES=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.B4=class IRuntime{constructor(t){runtime=t,Object.defineProperties(this,{W4:{value:runtime.H4().V4(),writable:!1},U4:{value:runtime.j4().X4(),writable:!1},Y4:{value:{},writable:!1},q4:{value:{},writable:!1},z4:{value:runtime.J4(),writable:!1},K4:{value:runtime.Z4(),writable:!1},storage:{value:new self.Q4(runtime),writable:!1},isInWorker:{value:runtime.tx(),writable:!1},ix:{value:runtime.nx(),writable:!1},hx:{value:runtime.ox(),writable:!1},bT:{value:runtime.ux(),writable:!1},Cx:{value:runtime.mx(),writable:!1},Sx:{value:new self.gx(t),writable:!1}}),runtime._x().addEventListener("keydown",t=>{keysDownByKey.has(t.key)?t.stopPropagation():keysDownByKey.add(t.key)}),runtime._x().addEventListener("keyup",t=>keysDownByKey.delete(t.key)),runtime.q3().addEventListener("window-blur",()=>keysDownByKey.clear()),runtime.tx()&&(self.alert=t=>(didWarnInAlertPolyfill||(didWarnInAlertPolyfill=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}Tx(t){Object.defineProperties(this.Y4,t)}yx(t){Object.defineProperties(this.q4,t)}addEventListener(t,e){runtime._x().addEventListener(t,e)}removeEventListener(t,e){runtime._x().removeEventListener(t,e)}Ex(t,...e){C3X.wi(t);const s=runtime.Ix(),i=s.Ax(t);if(!i)throw new Error(`cannot find function name '${t}'`);if(!i.hu())return i.Mx();if(e.length<i.Rx())throw new Error(`not enough function parameters passed for '${t}' (${e.length} passed, ${i.Rx()} expected)`);let r=i.wx(),n=r.bx(),h=s.Ox();if(h){n=n.slice(0);const a=new Set(n);for(const l of h.bx())a.has(l)||(n.push(l),a.add(l));for(const c of s.Gx())a.has(c)||(n.push(c),a.add(c))}const o=r.Px(n,i.xx(),i.Lx(),i.Mx(),...e);return o}Dx(t){const e=runtime.Fx().Nx();if(!e)throw new Error("not in a function which returns a value");switch(e.Bx()){case 1:"number"==typeof t&&e.kx(t);break;case 2:"string"==typeof t&&e.kx(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||e.kx(t)}}signal(t){C3X.wi(t),runtime.Ix().$x(t)}Wx(t){return C3X.wi(t),runtime.Ix().Vx(t)}Hx(){return[runtime.nx(),runtime.ox()]}get isSuspended(){return runtime.Ux()}get Xx(){return runtime.jx()}get Yx(){return runtime.qx()}get gameTime(){return runtime.zx()}get Jx(){return runtime.Kx()}get timeScale(){return runtime.Zx()}set timeScale(t){C3X.Ii(t),runtime.Qx(t)}get fps(){return didWarnFpsDeprecated||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),didWarnFpsDeprecated=!0),runtime.t5()}get framesPerSecond(){return runtime.t5()}get e5(){return runtime.s5()}get i5(){return runtime.r5()}get n5(){return runtime.h5()}get o5(){return runtime.a5()}set o5(t){if(!VALID_FRAMERATE_MODES.has(t))throw new Error("invalid framerate mode");runtime.l5(t)}get c5(){return runtime.u5()}set c5(t){C3X.Ii(t),runtime.f5(t)}get d5(){return runtime.p5()}set d5(t){runtime.C5(t)}random(){return runtime.m5()}get layout(){const t=runtime.S5();if(t)return t.g5();throw new Error("no layout is running - make sure a layout is loaded before accessing")}_5(t){let e=runtime.T5(),s=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(s=e.y5(t))return s.g5();throw new Error("invalid layout")}E5(){return runtime.T5().I5().map(t=>t.g5())}A5(t){let e=runtime.T5(),s=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(s=e.y5(t)))throw new Error("invalid layout");e.M5()||e.R5(s)}get keyboard(){const t=runtime.w5().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get b5(){const t=runtime.w5().b5;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get O5(){const t=runtime.w5().O5;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get G5(){const t=runtime.w5().G5;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}get P5(){const t=runtime.w5().P5;if(t)return t;throw new Error("runtime.platformInfo used but Platform Info object missing - add it to your project first")}v5(t,e){C3X.wi(t),C3X.wi(e),runtime.x5(t,e)}L5(t){C3X.Ii(t);const e=runtime.D5(t);return e?e.N5():null}F5(t,i){C3X.Ki(i);const r=runtime.B5();for(const e of t){const s=runtime.k5(e),n=s.W5();tempZOrderList.push([n.V5().F4(),n.H5()]),tempInstances.push(s)}if(0!==tempZOrderList.length){tempZOrderList.sort(SortZOrderList2),tempInstances.sort((t,e)=>i(t.N5(),e.N5()));let s=!1;for(let t=0,e=tempZOrderList.length;t<e;++t){const h=tempInstances[t],o=r.U5(tempZOrderList[t][0]),a=tempZOrderList[t][1],l=o.X5();l[a]!==h&&((l[a]=h).W5().j5(o,!0),o.Y5(h),s=!0)}s&&runtime.q5(),C33.Vh(tempZOrderList),C33.Vh(tempInstances)}}async z5(t,e){const s=new MessageChannel,i=s.port1,r=s.port2;return await runtime.J5("runtime","script-create-worker",{url:t,opts:e,port2:r},[r]),i}alert(t){return runtime.J5("runtime","alert",{message:t+(runtime.tx()?" [via Web Worker]":"")})}K5(t){return C3X.Ii(t),runtime.Z5(t)}Q5(t){runtime.tL(t)}}}{let C33=self.Ve,C3X=self.Qe,assetManager=null;self.eL=class IAssetManager{constructor(t){assetManager=t,Object.defineProperties(this,{sL:{value:assetManager.iL("audio/webm; codecs=opus"),writable:!1}})}rL(t){const e=self.hL.nL(t);if(!e)throw new Error("invalid IImageInfo");e.oL(assetManager.aL())}lL(t){return assetManager.wo(t)}cL(t){return assetManager.bo(t)}uL(t){return assetManager.Oo(t)}fL(t){return assetManager.Go(t)}dL(t){return assetManager.pL(t)}CL(t){return"flat"===assetManager.mL()&&C33.Ao(t)&&(t=t.toLowerCase()),assetManager.SL(t)}get gL(){return assetManager._L()}async TL(t,e){if(this.sL)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const s=await assetManager.aL().yL(e),i=new Float32Array(s),r=t.createBuffer(1,i.length,48e3),n=r.getChannelData(0);return n.set(i),r}EL(...t){return assetManager.IL(...t)}AL(t){return assetManager.ML(t)}RL(t){return assetManager.wL(t)}}}{let C33=self.Ve,C3X=self.Qe,collisionEngine=null;self.bL=class ICollisionEngine{constructor(t){collisionEngine=t,Object.defineProperties(this,{runtime:{value:collisionEngine.aL(),writable:!1}})}OL(t,e){const s=collisionEngine.aL(),i=s.k5(t),r=s.k5(e);return collisionEngine.GL(i,r)}PL(t,e){const s=collisionEngine.aL(),i=s.k5(t);for(const r of e){const n=s.k5(r);if(collisionEngine.GL(i,n))return r}return null}vL(t){const e=collisionEngine.aL().k5(t),s=collisionEngine.xL(e);return s?s.N5():null}LL(t,e){if(C3X.Ii(t),C3X.Ii(e),t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid cell size");collisionEngine.DL(t,e)}NL(){return collisionEngine.FL()}BL(t,e){let s=collisionEngine.aL(),i;i=Array.isArray(t)?t.map(t=>s.kL(t)):[s.kL(t)];const r=C33.Rect.Rl(e),n=[];return collisionEngine.$L(null,i,r,n),n.map(t=>t.N5())}}}{const C33=self.Ve,C3X=self.Qe;self.Q4=class IStorage{constructor(t){this.WL=t.VL()}getItem(t){return C3X.wi(t),this.WL.getItem(t)}setItem(t,e){return C3X.wi(t),this.WL.setItem(t,e)}removeItem(t){return C3X.wi(t),this.WL.removeItem(t)}clear(){return this.WL.clear()}keys(){return this.WL.keys()}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,internalApiToken=C33.He();self.HL=class IPlugin{constructor(){const t=C33.XL.UL(internalApiToken);map.set(this,t),Object.defineProperties(this,{runtime:{value:t.aL().jL(),writable:!1},YL:{value:t.qL(),writable:!1},zL:{value:t.JL(),writable:!1},KL:{value:t.ZL(),writable:!1},QL:{value:t.tD(),writable:!1},eD:{value:t.sD(),writable:!1},iD:{value:t.rD(),writable:!1},nD:{value:t.hD(),writable:!1},oD:{value:t.aD(),writable:!1}})}static lD(t){if(!t)return null;const e=C33.XL.cD(t);return e?e.uD():null}fD(){return map.get(this).pD().dD()}CD(){return map.get(this).mD().N5()}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,internalApiToken=C33.He();self.SD=class IObjectClass{constructor(){const t=C33.XL.UL(internalApiToken);map.set(this,t),Object.defineProperties(this,{name:{value:t.i3(),writable:!1},runtime:{value:t.aL().jL(),writable:!1},gD:{value:t._D().uD(),writable:!1}}),t.aL().TD(this,t)}addEventListener(t,e){C3X.wi(t),C3X.Ki(e),map.get(this)._x().addEventListener(t,e)}removeEventListener(t,e){C3X.wi(t),C3X.Ki(e),map.get(this)._x().removeEventListener(t,e)}yD(){return[...this.instances()]}ED(){return C33.first(this.instances())}ID(){return[...this.AD()]}MD(){return C33.first(this.AD())}RD(t){const e=map.get(this),s=e.aL().wD(t),i=e.bD(s);return i?i.N5():null}*instances(){for(const t of map.get(this).OD())yield t.N5()}*AD(){for(const t of map.get(this).PD().GD())yield t.N5()}vD(t){C3X.Ki(t);const e=map.get(this);if(0<e.xD())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");map.get(this).LD(t)}Ws(t,e,s,i,r){if(C3X.gi(e),C3X.gi(s),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=map.get(this),h=n.aL(),o=h.S5().V5(t);if(!o)throw new Error("invalid layer");const a=h.DD(n,o,e,s,i,r),l=(i&&o.ND(a),h.Ix());return l.FD(!0),a.BD(),l.FD(!1),l.kD()||h.T5().$D()||h.WD(),a.N5()}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,VALID_WHERE_STRINGS=["above","below","top-sublayer","bottom-sublayer"];self.VD=class ILayout{constructor(t){map.set(this,t);const e=[],s=t.HD(),i=s.UD().length;for(let t=0;t<i;++t)e.push(new self.XD(s,t));Object.defineProperties(this,{name:{value:t.i3(),writable:!1},index:{value:t.F4(),writable:!1},effects:{value:e,writable:!1}})}addEventListener(t,e){C3X.wi(t),C3X.Ki(e),map.get(this)._x().addEventListener(t,e)}removeEventListener(t,e){C3X.wi(t),C3X.Ki(e),map.get(this)._x().removeEventListener(t,e)}get width(){return map.get(this).dC()}set width(t){C3X.Ii(t),map.get(this).TC(t)}get height(){return map.get(this).IC()}set height(t){C3X.Ii(t),map.get(this).pC(t)}jD(t,e){C3X.Ii(t),C3X.Ii(e);const s=map.get(this);s.TC(t),s.pC(e)}getSize(){const t=map.get(this);return[t.dC(),t.IC()]}set scale(t){C3X.Ii(t),map.get(this).YD(t)}get scale(){return map.get(this).qD()}set angle(t){C3X.Ii(t),map.get(this).zD(t)}get angle(){return map.get(this).GetAngle()}set scrollX(t){C3X.gi(t),map.get(this).JD(t)}get scrollX(){return map.get(this).KD()}set scrollY(t){C3X.gi(t),map.get(this).ZD(t)}get scrollY(){return map.get(this).QD()}scrollTo(t,e){C3X.gi(t),C3X.gi(e);const s=map.get(this);s.JD(t),s.ZD(e)}tN(){const t=map.get(this);return[t.KD(),t.QD()]}eN(t){let e=map.get(this),s=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(s=e.V5(t))?s.sN():null}iN(){return map.get(this).rN().map(t=>t.sN())}*nN(){for(const t of map.get(this).nN())yield t.sN()}hN(t,e,s){const i=map.get(this),r=self.oN,n=(C3X.wi(t),C3X.hr(e,r),e?i.aL().aN(e):null),h=VALID_WHERE_STRINGS.indexOf(s);if(h<0)throw new Error("invalid location");i.lN(t,n,h)}cN(t,e,s){const i=map.get(this),r=i.aL(),n=self.oN,h=(C3X.nr(t,n),r.aN(t));if(!h)throw new Error("invalid layer");C3X.hr(e,n);const o=e?r.aN(e):null,a=VALID_WHERE_STRINGS.indexOf(s);if(a<0)throw new Error("invalid location");i.uN(h,o,a)}fN(t){const e=map.get(this),s=self.oN,i=(C3X.nr(t,s),e.aL().aN(t));if(!i)throw new Error("invalid layer");const r=i.aL();e.dN(i),r.Ix().kD()||r.WD()}pN(){const t=map.get(this),e=t.aL();t.CN(),e.Ix().kD()||e.WD()}mN(t,e){C3X.Ii(t),C3X.Ii(e),map.get(this).SN(t,e)}gN(){return map.get(this)._N()}set K(t){C3X.wi(t);const e=map.get(this);if("perspective"===t)e.TN();else{if("orthographic"!==t)throw new Error("invalid projection");e.yN()}}get K(){return map.get(this).EN()?"orthographic":"perspective"}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,BLEND_MODE_TO_INDEX=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(t=>[t[1],t[0]])),tempColor=C33.mn(C33.qo);self.oN=class ILayer{constructor(t){map.set(this,t);const e=[],s=t.HD(),i=s.UD().length;for(let t=0;t<i;++t)e.push(new self.XD(s,t));Object.defineProperties(this,{name:{value:t.i3(),writable:!1},layout:{value:t.y5().g5(),writable:!1},effects:{value:e,writable:!1}}),t.aL().TD(this,t)}get IN(){const t=map.get(this).AN();return t?t.sN():null}*MN(){for(const t of map.get(this).MN())yield t.sN()}*RN(){for(const t of map.get(this).wN())yield t.sN()}*bN(){for(const t of map.get(this).wN())for(const e of t.ON())yield e.sN()}get index(){return map.get(this).F4()}get isVisible(){return map.get(this).GN()}set isVisible(t){map.get(this).PN(t)}get vN(){return map.get(this).xN()}get LN(){return map.get(this).DN()}set LN(t){map.get(this).NN(t)}get FN(){return map.get(this).BN()}set FN(t){map.get(this).kN(!!t)}get $N(){return map.get(this).WN()}get opacity(){return map.get(this).$O()}set opacity(t){t=C33.En(+t,0,1),isNaN(t)||map.get(this).VO(t)}set scale(t){C3X.Ii(t),map.get(this).VN(t)}get scale(){return map.get(this).HN()}set scaleRate(t){C3X.Ii(t),map.get(this).UN(t)}get scaleRate(){return map.get(this).XN()}set angle(t){C3X.Ii(t),map.get(this).zD(t)}get angle(){return map.get(this).jN()}set parallaxX(t){C3X.Ii(t),map.get(this).YN(t)}get parallaxX(){return map.get(this).qN()}set parallaxY(t){C3X.Ii(t),map.get(this).zN(t)}get parallaxY(){return map.get(this).JN()}set KN(t){C3X.Ii(t),map.get(this).L_(t)}get KN(){return map.get(this).x_()}set ZN(t){map.get(this).QN(t)}get ZN(){return map.get(this).tF()}set eF(t){map.get(this).sF(t)}get eF(){return map.get(this).iF()}set Dv(t){C3X.wi(t);const e=BLEND_MODE_TO_INDEX.get(t);if("number"!=typeof e)throw new Error("invalid blend mode");map.get(this).S_(e)}get Dv(){return INDEX_TO_BLEND_MODE.get(map.get(this).rF())}set backgroundColor(t){if(C3X.Vi(t),t.length<3)throw new Error("expected 3 elements");tempColor.ta(t[0],t[1],t[2]);const e=map.get(this),s=e.nF();s.Ta(tempColor)||(s.la(tempColor),e.aL().q5())}get backgroundColor(){const t=map.get(this).nF();return[t.ca(),t.ua(),t.fa()]}set scrollX(t){C3X.gi(t);const e=map.get(this);e.hF(!0),e.JD(t)}get scrollX(){return map.get(this).KD()}set scrollY(t){C3X.gi(t);const e=map.get(this);e.hF(!0),e.ZD(t)}get scrollY(){return map.get(this).QD()}scrollTo(t,e){C3X.gi(t),C3X.gi(e);const s=map.get(this);s.hF(!0),s.JD(t),s.ZD(e)}tN(){const t=map.get(this);return[t.KD(),t.QD()]}oF(){map.get(this).hF(!1)}getViewport(){return map.get(this).aF().vl()}lF(t,e,s=0){C3X.gi(t),C3X.gi(e),C3X.gi(s);const i=map.get(this),r=i.aL();return i.cF(t-r.uF(),e-r.fF(),s)}dF(t,e,s=0){C3X.gi(t),C3X.gi(e),C3X.gi(s);const i=map.get(this),r=i.aL(),[n,h]=i.pF(t,e,s);return[n+r.uF(),h+r.fF()]}CF(t,e,s=0){return C3X.gi(t),C3X.gi(e),C3X.gi(s),map.get(this).mF(t,e,s)}SF(t,e,s=0){return C3X.gi(t),C3X.gi(e),C3X.gi(s),map.get(this).gF(t,e,s)}get _F(){return map.get(this).TF()}}}{let GetDispatcher2=function(t){let e=dispatchers.get(t);return e||(e=C33.mn(C33.Event.q3),dispatchers.set(t,e)),e};GetDispatcher=GetDispatcher2;const C33=self.Ve,C3X=self.Qe,map=new WeakMap,dispatchers=new WeakMap,internalApiToken=C33.He();self.yF=class IInstance{constructor(){const t=C33.XL.UL(internalApiToken),e=(map.set(this,t),{runtime:{value:t.aL().jL(),writable:!1},EF:{value:t.IF().dD(),writable:!1},gD:{value:t._D().uD(),writable:!1}});t.AF(e),t.MF(e),Object.defineProperties(this,e),t.aL().TD(this,t)}static RF(){return C33.XL.wF()}bF(){const t=dispatchers.get(this);t&&(t.Sn(),dispatchers.delete(this)),map.delete(this)}addEventListener(t,e,s){C3X.wi(t),C3X.Ki(e),GetDispatcher2(this).addEventListener(t,e,s)}removeEventListener(t,e,s){C3X.wi(t),C3X.Ki(e),GetDispatcher2(this).removeEventListener(t,e,s)}dispatchEvent(t){GetDispatcher2(this).dispatchEvent(t)}destroy(){const t=map.get(this),e=t.aL();e.OF(t),e.Ix().kD()||e.T5().$D()||e.Ix().GF()||e.WD()}PF(){const t=map.get(this).vF();return t?t.map(t=>t.N5()):[]}*xF(){const t=map.get(this);if(t.LF())for(const e of t.DF())yield e.N5()}get uid(){return map.get(this).NF()}get FF(){return map.get(this).BF()}set timeScale(t){C3X.Ii(t),map.get(this).Qx(t)}get timeScale(){return map.get(this).kF()}$F(){map.get(this).WF()}get Xx(){const t=map.get(this);return t.aL().jx(t)}VF(...t){C3X.Vi(t);const e=new Set(t),s=map.get(this).HF();return e.di(s)}UF(t){C3X.nr(t,Set),map.get(this).XF(t)}jF(){return new Set(map.get(this).HF())}signal(t){C3X.wi(t);const e=map.get(this);e.aL().Ix().YF(e,t)}Wx(t){C3X.wi(t);const e=map.get(this);return e.aL().Ix().qF(e,t)}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,internalApiToken=C33.He();self.zF=class ISDKInstanceBase extends self.yF{constructor(t){super(),map.set(this,C33.XL.UL(internalApiToken)),this.JF=!1,this.KF=null,this.ZF=!1,this.QF=null,this.t7=t?.domComponentId,this.e7=t?.wrapperComponentId}bF(){super.bF(),map.delete(this)}s7(){return C33.XL.i7()}r7(t){const e=map.get(this);e.aL().n7(t,e)}h7(t){const e=map.get(this);return e.aL().o7(t,e)}a7(t,e){if(C3X.wi(t),C3X.Ki(e),!this.t7)throw new Error("no DOM component id set");const s=map.get(this).aL();s.l7(this.t7,t,e)}c7(t){C3X.Vi(t);for(const[e,s]of t)this.a7(e,s)}u7(t,e){if(C3X.wi(t),!this.t7)throw new Error("no DOM component id set");const s=map.get(this).aL();s.m3(this.t7,t,e)}f7(t,e){if(C3X.wi(t),!this.t7)throw new Error("no DOM component id set");const s=map.get(this).aL();return s.J5(this.t7,t,e)}d7(t,e){const s=map.get(this).aL();if(!s.tx())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.t7,handler:t,data:e,responseId:null});this.u7(t,e)}p7(t){if(this.JF!==(t=!!t)){this.JF=t;const e=map.get(this).aL();t?(this.KF||(this.KF=()=>this.C7()),e.q3().addEventListener("tick",this.KF)):e.q3().removeEventListener("tick",this.KF)}}m7(){return this.JF}C7(){}S7(t){if(this.ZF!==(t=!!t)){this.ZF=t;const e=map.get(this).aL();t?(this.QF||(this.QF=()=>this.g7()),e.q3().addEventListener("tick2",this.QF)):e.q3().removeEventListener("tick2",this.QF)}}_7(){return this.ZF}g7(){}T7(){return[]}y7(){return null}E7(t){}I7(){if(!this.e7)throw new Error("no wrapper component id set");const t=map.get(this).aL();return t.A7(this.e7)}M7(t,e){if(C3X.wi(t),C3X.Ki(e),!this.e7)throw new Error("no wrapper component id set");const s=map.get(this).aL();s.R7(this.e7,t,e)}w7(t){C3X.Vi(t);for(const[e,s]of t)this.M7(e,s)}b7(t,e){if(!this.e7)throw new Error("no wrapper component id set");this.runtime.Sx.O7(this.e7,t,e)}G7(t,e){if(this.e7)return this.runtime.Sx.P7(this.e7,t,e);throw new Error("no wrapper component id set")}}}{let MakeIWorldInstanceClass2=function(t){return class r extends t{constructor(t){super(t);const e=C33.XL.UL(internalApiToken),s=(map.set(this,e),[]),i=e.W5(),r=i.v7();if(r){const h=i.IF().HD().UD().length;for(let t=0;t<h;++t)s.push(new self.XD(r,t))}const n={effects:{value:s,writable:!1}};Object.defineProperties(this,n)}get layout(){return map.get(this).W5().y5().g5()}get x7(){return map.get(this).W5().V5().sN()}get x(){return map.get(this).W5().b_()}set x(t){t=+t;const e=map.get(this).W5();isNaN(t)||e.b_()===t||(e.O_(t),e.L7())}get y(){return map.get(this).W5().P_()}set y(t){t=+t;const e=map.get(this).W5();isNaN(t)||e.P_()===t||(e.v_(t),e.L7())}setPosition(t,e){t=+t,e=+e;const s=map.get(this).W5();isNaN(t)||isNaN(e)||s.b_()===t&&s.P_()===e||(s.D7(t,e),s.L7())}N7(){const t=map.get(this).W5();return[t.b_(),t.P_()]}F7(t,e){if(t=+t,e=+e,!(isNaN(t)||isNaN(e)||0===t&&0===e)){const s=map.get(this).W5();s.B7(t,e),s.L7()}}get KN(){return map.get(this).W5().x_()}set KN(t){t=+t;const e=map.get(this),s=e.W5();isNaN(t)||s.x_()===t||(s.L_(t),e.aL().q5())}get k7(){return map.get(this).W5().W7()}get width(){return map.get(this).W5().dC()}set width(t){t=+t;const e=map.get(this).W5();isNaN(t)||e.dC()===t||(e.TC(t),e.L7())}get height(){return map.get(this).W5().IC()}set height(t){t=+t;const e=map.get(this).W5();isNaN(t)||e.IC()===t||(e.pC(t),e.L7())}jD(t,e){t=+t,e=+e;const s=map.get(this).W5();isNaN(t)||isNaN(e)||s.dC()===t&&s.IC()===e||(s.aw(t,e),s.L7())}getSize(){const t=map.get(this).W5();return[t.dC(),t.IC()]}get angle(){return map.get(this).W5().GetAngle()}set angle(t){t=C33.In(+t);const e=map.get(this).W5();isNaN(t)||e.GetAngle()===t||(e.zD(t),e.L7())}get V7(){return C33.Mn(this.angle)}set V7(t){this.angle=C33.An(t)}vc(){return map.get(this).W5().H7().vl()}U7(){return map.get(this).W5().X7().Mc()}j7(){return map.get(this).W5().Y7()}get isVisible(){return map.get(this).W5().xN()}set isVisible(t){t=!!t;const e=map.get(this),s=e.W5();s.xN()!==t&&(s.PN(t),e.aL().q5())}get opacity(){return map.get(this).W5().$O()}set opacity(t){t=C33.En(+t,0,1);const e=map.get(this),s=e.W5();isNaN(t)||s.$O()===t||(s.VO(t),e.aL().q5())}set q7(t){if(C3X.Vi(t),t.length<3)throw new Error("expected 3 elements");tempColor.ta(t[0],t[1],t[2]);const e=map.get(this),s=e.W5();s.z7().Ta(tempColor)||(s.J7(tempColor),e.aL().q5())}get q7(){const t=map.get(this).W5().z7();return[t.ca(),t.ua(),t.fa()]}set Dv(t){C3X.wi(t);const e=BLEND_MODE_TO_INDEX.get(t);if("number"!=typeof e)throw new Error("invalid blend mode");const s=map.get(this),i=s.W5();i.S_(e),s.aL().q5()}get Dv(){return INDEX_TO_BLEND_MODE.get(map.get(this).W5().rF())}K7(){map.get(this).W5().Z7()}Q7(){map.get(this).W5().t6()}e6(t){C3X.nr(t,ILayer);const e=map.get(this),s=e.aL().aN(t);if(!s)throw new Error("invalid layer");e.W5().s6(s)}i6(t,e){C3X.nr(t,r),map.get(this).W5().r6(map.get(t),e)}get zIndex(){return map.get(this).W5().H5()}get n6(){return map.get(this).W5().h6()}set n6(t){map.get(this).W5().o6(!!t)}tc(t,e){return C3X.gi(t),C3X.gi(e),map.get(this).W5().a6(+t,+e)}OL(t){C3X.nr(t,r);const e=map.get(this),s=map.get(t);return e.aL().j4().GL(e,s)}vL(){const t=map.get(this),e=t.aL().j4().xL(t);return e?e.N5():null}getParent(){const t=map.get(this).l6();return t?t.N5():null}c6(){const t=map.get(this).u6();return t?t.N5():null}*f6(){for(const t of map.get(this).f6())yield t.N5()}d6(){return map.get(this).p6()}C6(t){const e=map.get(this).m6(t);return e?e.N5():null}*children(){for(const t of map.get(this).children())yield t.N5()}*S6(){for(const t of map.get(this).S6())yield t.N5()}g6(t,e){C3X.nr(t,r),C3X.Di(e),e=e||{};const s=map.get(this),i=map.get(t);s._6(i,e)}removeChild(t){C3X.nr(t,r);const e=map.get(this),s=map.get(t);e.T6(s)}y6(){const t=map.get(this);if(t.E6()){const e=t.l6();e.T6(t)}}I6(){const t=map.get(this).W5();return{A6:t.M6(),R6:t.w6(),b6:t.O6(),G6:t.P6(),v6:t.x6(),L6:t.D6(),N6:t.F6(),B6:t.k6(),W6:t.V6()}}H6(t,e){C3X.Ii(t),C3X.Ii(e),map.get(this).W5().U6(t,e)}X6(){const t=map.get(this).W5();t.j6(),t.L7()}Y6(t,e,s){C3X.Ii(t),C3X.Ii(e),C3X.Li(s);const i=map.get(this).W5();i.q6(t,e,s)&&i.L7()}z6(t,e){let s=NaN,i=NaN,r=NaN,n=NaN,h=NaN,o=map.get(this).W5();if(o.J6()){const a=o.K6(),l=a.CT(t,e);null!==l&&(s=l.b_(),i=l.P_(),r=l.x_(),n=l.D_(),h=l.F_())}return{x:s,y:i,KN:r,u:n,v:h}}Z6(){const t=map.get(this).W5();if(!t.J6())return[0,0];const e=t.K6();return[e.rT(),e.nT()]}}};MakeIWorldInstanceClass=MakeIWorldInstanceClass2;const C33=self.Ve,C3X=self.Qe,IInstance=self.yF,ILayer=self.oN,map=new WeakMap,internalApiToken=C33.He(),BLEND_MODE_TO_INDEX=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(t=>[t[1],t[0]])),tempColor=C33.mn(C33.qo);self.Q6=MakeIWorldInstanceClass2(self.yF),self.tB=MakeIWorldInstanceClass2(self.zF)}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap;self.eB=class IDOMInstance extends self.Q6{constructor(){super(),map.set(this,self.yF.RF())}sB(){return map.get(this).rB().iB()}focus(){map.get(this).rB().nB()}blur(){map.get(this).rB().hB()}oB(t,e){C3X.wi(t),map.get(this).rB().aB(t,e)}}}{let GetDispatcher2=function(t){let e=dispatchers.get(t);return e||(e=C33.mn(C33.Event.q3),dispatchers.set(t,e)),e};GetDispatcher=GetDispatcher2;const C33=self.Ve,C3X=self.Qe,map=new WeakMap,dispatchers=new WeakMap,internalApiToken=C33.He();self.lB=class IBehaviorInstance{constructor(){const t=C33.XL.UL(internalApiToken),e=(map.set(this,t),{runtime:{value:t.aL().jL(),writable:!1},behavior:{value:t.uB().cB(),writable:!1},fB:{value:t.pB().dB(),writable:!1}});Object.defineProperties(this,e),t.aL().TD(this,t)}static RF(){return C33.XL.wF()}get CB(){return map.get(this).mB().N5()}bF(){const t=dispatchers.get(this);t&&(t.Sn(),dispatchers.delete(this)),map.delete(this)}addEventListener(t,e,s){C3X.wi(t),C3X.Ki(e),GetDispatcher2(this).addEventListener(t,e,s)}removeEventListener(t,e,s){C3X.wi(t),C3X.Ki(e),GetDispatcher2(this).removeEventListener(t,e,s)}dispatchEvent(t){GetDispatcher2(this).dispatchEvent(t)}}}{const C33=self.Ve,C3X=self.Qe,internalApiToken=C33.He();self.SB=class IBehaviorType{constructor(){const t=C33.XL.UL(internalApiToken),e={runtime:{value:t.aL().jL(),writable:!1},behavior:{value:t.uB().cB(),writable:!1},name:{value:t.i3(),writable:!1}};Object.defineProperties(this,e)}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,internalApiToken=C33.He();self.gB=class IBehavior{constructor(){const t=C33.XL.UL(internalApiToken),e=(map.set(this,t),{runtime:{value:t.aL().jL(),writable:!1}});Object.defineProperties(this,e)}yD(){return map.get(this).GD().map(t=>t.N5())}static lD(t){if(!t)return null;const e=C33.XL._B(t);return e?e.cB():null}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,tempColor=C33.mn(C33.qo);self.XD=class IEffectInstance{constructor(t,e){map.set(this,t);const s={index:{value:e,writable:!1}};Object.defineProperties(this,s)}get name(){const t=map.get(this).UD();return t[this.index].i3()}get isActive(){return map.get(this).TB(this.index)}set isActive(t){t=!!t;const e=map.get(this);e.TB(this.index)!==t&&(e.yB(this.index,t),e.EB(),e.aL().q5())}setParameter(t,e){C3X.Ii(t),t=Math.floor(+t);const s=map.get(this),i=s.IB(this.index,t);if(null===i)throw new RangeError("invalid index");if(i instanceof C33.qo){if(!Array.isArray(e)||e.length<3)throw new TypeError("expected array with 3 elements");tempColor.ta(e[0],e[1],e[2]),e=tempColor}else if("number"!=typeof e)throw new TypeError("expected number");const r=s.AB(this.index,t,e);r&&s.TB(this.index)&&s.aL().q5()}getParameter(t){C3X.Ii(t),t=Math.floor(+t);const e=map.get(this),s=e.IB(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof C33.qo?[s.ca(),s.ua(),s.fa()]:s}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap;self.MB=class IAnimation{constructor(t){map.set(this,t),Object.defineProperties(this,{name:{value:t.i3(),writable:!1}})}get speed(){return map.get(this).RB()}get isLooping(){return map.get(this).wB()}get repeatCount(){return map.get(this).bB()}get OB(){return map.get(this).GB()}get PB(){return map.get(this).vB()}get frameCount(){return map.get(this).xB()}LB(){return map.get(this).DB().map(t=>t.NB())}*frames(){for(const t of map.get(this).DB())yield t.NB()}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap;self.hL=class IImageInfo{constructor(t){map.set(this,t)}static nL(t){return map.get(t)}get width(){return map.get(this).dC()}get height(){return map.get(this).IC()}getSize(){const t=map.get(this);return[t.dC(),t.IC()]}BB(t){return t.kB(this)}$B(){return map.get(this).Ww().vl()}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap;self.WB=class IAnimationFrame extends self.hL{constructor(t){super(t.VB()),map.set(this,t),Object.defineProperties(this,{duration:{value:t.HB(),writable:!1},UB:{value:t.XB(),writable:!1},jB:{value:t.YB(),writable:!1}})}qB(){const t=map.get(this);return[t.XB(),t.YB()]}zB(){return map.get(this).JB()}KB(t){return this.ZB(t)[0]}QB(t){return this.ZB(t)[1]}ZB(t){let e=map.get(this),s=null;if("number"==typeof t)s=e.ek(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");s=e.sk(t)}return s?[s.b_(),s.P_()]:this.qB()}ik(){const t=map.get(this).rk();return t?t.qc():0}nk(t){return this.hk(t)[0]}ak(t){return this.hk(t)[1]}hk(t){C3X.Ii(t),t=Math.floor(t);const e=map.get(this).rk();if(!e||t<0||t>=e.qc())return[0,0];const s=e.Yc(),i=s[2*t],r=s[2*t+1];return[i,r]}get tag(){return map.get(this).lk()}}}{let GetTimelineState2=function(t){const e=map.get(t);if(e.ck())throw new Error("timeline/tween was released and is no longer valid");return e};GetTimelineState=GetTimelineState2;const C33=self.Ve,C3X=self.Qe,map=new WeakMap;self.uk=class ITimelineStateBase{constructor(t){map.set(this,t),t.aL().TD(this,t)}pause(){GetTimelineState2(this).fk()}resume(){GetTimelineState2(this).dk()}stop(){GetTimelineState2(this).gf()}VF(t){return GetTimelineState2(this).pk(t)}set time(t){C3X.Ii(t),GetTimelineState2(this).Ck(t)}get time(){return GetTimelineState2(this).mP()}set totalTime(t){C3X.Ii(t),GetTimelineState2(this).mk(t)}get totalTime(){return GetTimelineState2(this).Sk()}set isLooping(t){GetTimelineState2(this).gk(!!t)}get isLooping(){return GetTimelineState2(this)._k()}set PB(t){GetTimelineState2(this).Tk(!!t)}get PB(){return GetTimelineState2(this).yk()}set playbackRate(t){C3X.Ii(t),GetTimelineState2(this).Ek(t)}get playbackRate(){return GetTimelineState2(this).Ik()}get progress(){const t=GetTimelineState2(this);return t.mP()/t.Sk()}get tags(){return GetTimelineState2(this).Ak()}get finished(){return GetTimelineState2(this).Mk()}get isPlaying(){return GetTimelineState2(this).IsPlaying()}get Rk(){return GetTimelineState2(this).wk()}get bk(){return map.get(this).ck()}}}{let GetTimelineState2=function(t){const e=map.get(t);if(e.ck())throw new Error("timeline was released and is no longer valid");return e},C33=(GetTimelineState=GetTimelineState2,self.Ve),C3X=self.Qe,map=new WeakMap,easeToIndexFunc=null;self.Ok=class ITimelineState extends self.uk{constructor(t){super(t),map.set(this,t);const e={name:{value:t.i3(),writable:!1}};Object.defineProperties(this,e)}}}{let GetTweenState2=function(t){const e=map.get(t);if(e.ck())throw new Error("tween was released and is no longer valid");return e},C33=(GetTweenState=GetTweenState2,self.Ve),C3X=self.Qe,map=new WeakMap,behInstMap=new WeakMap,easeToIndexFunc=null;self.Gk=class ITweenState extends self.uk{constructor(t,e,s){super(t),easeToIndexFunc=easeToIndexFunc||s.easeToIndexFunc,map.set(this,t),e&&behInstMap.set(this,e)}stop(){const t=GetTweenState2(this),e=behInstMap.get(this);e.ReleaseTween(t)}Pk(t){C3X.wi(t);const e=self.Eu.ku(easeToIndexFunc(t));GetTweenState2(this).vk(e)}get CB(){const t=GetTweenState2(this).xk();return t?t.N5():null}get Lk(){return GetTweenState2(this).Dk()}set Lk(t){GetTweenState2(this).Nk(!!t)}get value(){const t=GetTweenState2(this);if("value"!==t.Fk())throw new Error("not a value tween");return t.kk("value").Bk()}}}{const C33=self.Ve,C3X=self.Qe;self.$k=class ISDKPluginBase extends self.HL{constructor(){super()}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,internalApiToken=C33.He();self.Wk=class ISDKDOMPluginBase extends self.$k{constructor(t){if(super(),map.set(this,C33.XL.UL(internalApiToken)),!t?.domComponentId)throw new Error("no DOM component ID specified");this.t7=t.domComponentId,this.Vk=0,this.Hk=new Map,this.Uk("elem-focused",t=>t.Xk()),this.Uk("elem-blurred",t=>{t&&t.jk()})}Yk(t){const e=this.Vk++;return this.Hk.set(e,t),e}qk(t){this.Hk.delete(t)}Uk(t,s){const e=map.get(this).aL();e.l7(this.t7,t,t=>{const e=this.Hk.get(t.elementId);s(e,t)})}zk(t){C3X.Vi(t);for(const[e,s]of t)this.zk(e,s)}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,internalApiToken=C33.He();self.Jk=class ISDKObjectTypeBase extends self.SD{constructor(){super();const t=C33.XL.UL(internalApiToken);map.set(this,t)}Kk(){}Zk(){return map.get(this).VB().Qk()}t8(t){}e8(t){}s8(){}i8(t){}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,internalApiToken=C33.He();self.r8=class ISDKWorldInstanceBase extends self.tB{constructor(t){super(t),map.set(this,C33.XL.UL(internalApiToken)),this.n8=null,this.h8=null}bF(){if(super.bF(),this.n8){const t=map.get(this).aL().q3();t.removeEventListener("renderercontextlost",this.n8),t.removeEventListener("renderercontextrestored",this.h8),this.n8=null,this.h8=null}map.delete(this)}o8(){if(!this.n8){this.n8=()=>this.a8(),this.h8=()=>this.l8();const t=map.get(this).aL().q3();t.addEventListener("renderercontextlost",this.n8),t.addEventListener("renderercontextrestored",this.h8)}}a8(){}l8(){}c8(t){}}}{const C33=self.Ve,C3X=self.Qe,tempRect=C33.mn(C33.Rect),map=new WeakMap,internalApiToken=C33.He();self.u8=class ISDKDOMInstanceBase extends self.r8{constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const e=C33.XL.UL(internalApiToken),s=(map.set(this,e),this.f8=this.gD.Yk(this),this.d8=!0,this.p8=!1,this.C8=!1,this.m8=-.2,this.S8=C33.mn(C33.Rect,0,0,-1,-1),e.aL().g8());this._8=s.T8(),this.y8=s.E8(),this.I8=-1,this.A8=-1,this.M8=!1,this.p7(!0)}bF(){super.bF(),this.gD.qk(this.f8),this.w8("destroy"),this.f8=-1,map.delete(this)}b8(){const t=map.get(this).aL();if(t.tx())throw new Error("not valid in worker mode");return this.O8("get-element")}w8(t,e){(e=e||{}).elementId=this.f8,this.u7(t,e)}O8(t,e){return(e=e||{}).elementId=this.f8,this.d7(t,e)}G8(t,e){return(e=e||{}).elementId=this.f8,this.f7(t,e)}P8(t){t=t||{};const e=map.get(this).W5();t.elementId=this.f8,t.isVisible=e.xN(),t.htmlIndex=e.V5().v8(),t.htmlZIndex=e.x8(),Object.assign(t,this.L8()),this.d8=!!t.isVisible,this.d7("create",t),this.D8(!0)}N8(t){this.d8!==(t=!!t)&&(this.d8=t,this.w8("set-visible",{isVisible:t}))}C7(){this.D8(!1)}F8(){const t=map.get(this).aL(),e=t.g8().B8();return"Android"===C33._s.Ts&&("scale-inner"===e||"scale-outer"===e||"crop"===e)}D8(c){const u=map.get(this);if(!u.k8()){let t=u.W5(),e=t.V5(),s=t.H7(),[i,r]=e.pF(s.bl(),s.Ol()),[n,h]=e.pF(s.Gl(),s.Pl()),o=u.aL().g8(),a=o.W8(),l=o.V8();if(t.xN()&&e.xN())if(!this.F8()&&(n<=0||h<=0||a<=i||l<=r))this.N8(!1);else{tempRect.set(i,r,n,h);const f=o.T8(),d=o.E8(),p=e.v8(),C=t.x8();if(!c&&tempRect.equals(this.S8)&&this._8===f&&this.y8===d&&this.I8===p&&this.A8===C)this.N8(!0);else{this.S8.A(tempRect),this._8=f,this.y8=d,this.I8=p,this.A8=C,this.N8(!0);let t=null;this.C8&&(t=e.H8()+this.m8),this.w8("update-position",{left:Math.round(this.S8.bl()),top:Math.round(this.S8.Ol()),width:Math.round(this.S8.width()),height:Math.round(this.S8.height()),htmlIndex:p,htmlZIndex:C,fontSize:t})}}else this.N8(!1)}}U8(){this.O8("focus",{focus:!0})}X8(){this.O8("focus",{focus:!1})}Xk(){this.p8=!0}jk(){this.p8=!1}j8(){return this.p8}Y8(t,e){this.postToDOMElement("set-css-style",{prop:C33.Xo(t),val:e})}q8(t,e){this.postToDOMElement("set-attribute",{name:t,val:e})}z8(t){this.postToDOMElement("remove-attribute",{name:t})}J8(){this.M8||(this.M8=!0,Promise.resolve().then(()=>{this.M8=!1,this.w8("update-state",this.L8())}))}L8(){}K8(){return this.f8}}}{const C33=self.Ve,C3X=self.Qe;self.Z8=class ISDKBehaviorBase extends self.gB{constructor(){super()}}}{const C33=self.Ve,C3X=self.Qe;self.Q8=class ISDKBehaviorTypeBase extends globalThis.SB{constructor(){super()}Kk(){}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,internalApiToken=C33.He();self.t$=class ISDKBehaviorInstanceBase extends self.lB{constructor(){super(),map.set(this,C33.XL.UL(internalApiToken)),this.JF=!1,this.ZF=!1,this.e$=!1}bF(){super.bF(),this.p7(!1),this.S7(!1),this.s$(!1),map.delete(this)}s7(){return C33.XL.i7()}i$(){}r7(t){const e=map.get(this);e.aL().n7(t,e.mB(),e.pB())}h7(t){const e=map.get(this);return e.aL().o7(t,e.mB(),e.pB())}p7(t){if(this.JF!==(t=!!t)){this.JF=t;const e=map.get(this).aL();t?e.r$(this):e.n$(this)}}m7(){return this.JF}C7(){}S7(t){if(this.ZF!==(t=!!t)){this.ZF=t;const e=map.get(this).aL();t?e.h$(this):e.o$(this)}}_7(){return this.ZF}g7(){}s$(t){if(this.e$!==(t=!!t)){this.e$=t;const e=map.get(this).aL();t?e.a$(this):e.l$(this)}}c$(){return this.e$}u$(){}T7(){return[]}y7(){return null}E7(t){}}}{let C33=self.Ve,C3X=self.Qe,runtime=null;self.gx=class ISDKUtils{constructor(t){runtime=t}Q5(t){runtime.tL(t)}O7(t,e,s){C3X.wi(t),C3X.wi(e),C3X.Hi(s),runtime.f$(t,e,s)}P7(t,e,s){return C3X.wi(t),C3X.wi(e),C3X.Hi(s),runtime.d$(t,e,s)}p$(t){return C3X.bi(t),new self.C$(runtime,t)}set m$(t){runtime.S$(!!t)}get m$(){return runtime.g$()}_$(t){runtime.T$(!!t)}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap;self.C$=class ILoopingConditionContext{constructor(t,e){const s=t.Ix(),i=t.Ox(),r=i.y$(),n=t.Fx(),h=n.E$(),o=n.I$(i),a=s.A$(),l=a.I$();e&&l.M$(e),t.R$(!1),map.set(this,{runtime:t,w$:i,b$:r,O$:h,G$:o,loop:l})}P$(){const{runtime:t,w$:e,b$:s,O$:i,G$:r,loop:n}=map.get(this),h=t.Ix();h.v$(s),e.x$(i,r),h.L$(s),n.D$(n.F4()+1)}get N$(){const t=map.get(this).loop;return t.F$()}release(){const t=map.get(this).runtime,e=t.Fx(),s=t.Ix().A$();t.R$(!0),s.B$(),e.B$(),map.delete(this)}}}{let C33=self.Ve,C3X=self.Qe,renderer=null,runtime=null;self.k$=class IRenderer{constructor(t,e){runtime=t,renderer=e}$$(){renderer.zO()}W$(t){renderer.YO(t)}V$(){renderer.Q2()}H$(){renderer.Y2()}U$(){renderer.hS()}setColor(t){renderer.WO(t[0],t[1],t[2],t[3])}X$(t,e,s,i){renderer.WO(t,e,s,i)}j$(){renderer.HO()}Y$(t){renderer.VO(t)}q$(t){renderer.wS(t)}z$(){renderer.bS()}rect(t){renderer.ZO(t.left,t.top,t.right,t.bottom)}J$(t,e,s,i){renderer.ZO(t,e,s,i)}K$(t){renderer.nc(C33.nc.Rc(t))}Z$(t,e,s,i,r,n,h,o){renderer.fg(t,e,s,i,r,n,h,o)}Q$(t,e){renderer.BS(C33.nc.Rc(t),C33.Rect.xl(e))}t9(t,e){renderer.eG(C33.nc.Rc(t),C33.nc.Rc(e))}e9(t,e,s,i,r,n,h,o,a,l,c,u,f){renderer.sG(t,e,s,i,r,n,h,o,a,l,c,u,C33.Rect.xl(f))}s9(t,e,s,i,r,n,h,o,a,l,c,u,f){renderer.xS(t,e,s,i,r,n,h,o,a,l,c,u,C33.nc.Rc(f))}i9(t,e,s){renderer.iG(t,e,s)}r9(t){renderer.ug(t)}line(t,e,s,i){renderer.bC(t,e,s,i)}n9(t,e,s,i,r,n){renderer.LS(t,e,s,i,r,n)}h9(t,e,s,i){renderer.kS(t,e,s,i)}o9(t){renderer.HS(C33.Rect.xl(t))}a9(t){renderer.US(C33.nc.Rc(t))}l9(t){renderer.JS(t)}c9(){renderer.KS()}u9(t){renderer.eg(t)}f9(){renderer.ng()}d9(t){C3X.hr(t,self.p9);const e=t?runtime.aN(t):null;renderer.XO(e)}C9(t,e){const s=self.hL.nL(t);if(s)return s.m9(renderer,{RT:e?.RT??"clamp-to-edge",wT:e?.wT??"clamp-to-edge",bT:e?.bT??"trilinear",PT:e?.PT??!0});throw new Error("invalid IImageInfo")}S9(t){const e=self.hL.nL(t);if(!e)throw new Error("invalid IImageInfo");e.RR()}kB(t){const e=self.hL.nL(t);if(!e)throw new Error("invalid IImageInfo");const s=e.Jy();return self.p9.g9(runtime,s)}_9(t,e,s){C3X.Ii(t),C3X.Ii(e);const i=renderer.$y(t,e,{RT:s?.RT??"clamp-to-edge",wT:s?.wT??"clamp-to-edge",bT:s?.bT??"trilinear",PT:s?.PT??!0});return self.p9.g9(runtime,i)}T9(t,e,s){C3X.nr(e,self.p9);const i=runtime.aN(e);renderer.$w(t,i,{premultiplyAlpha:s?.premultiplyAlpha??!0})}deleteTexture(t){C3X.nr(t,self.p9);const e=runtime.aN(t);renderer.Uy(e)}y9(){const t=renderer.wg();return new self.E9(runtime,t)}I9(){runtime.g8().A9(renderer)}M9(t){C3X.nr(t,globalThis.oN);const e=runtime.aN(t);e.R9(renderer)}}}{const C33=self.Ve,C3X=self.Qe,map=new WeakMap,reverseMap=new WeakMap;self.p9=class ITexture{constructor(t,e){map.set(this,{runtime:t,w9:e}),reverseMap.set(e,this),t.TD(this,e),Object.defineProperties(this,{width:{value:e.dC(),writable:!1},height:{value:e.IC(),writable:!1}})}static g9(t,e){if(!e)return null;const s=reverseMap.get(e);return s||new self.p9(t,e)}}}{let getActual2=function(t){return map.get(t).b9};getActual=getActual2;const C33=self.Ve,C3X=self.Qe,map=new WeakMap;self.E9=class IRendererText{constructor(t,e){map.set(this,{runtime:t,b9:e}),t.TD(this,e)}release(){getActual2(this).Sn()}set O9(t){C3X.wi(t),getActual2(this).LR(t)}get O9(){return getActual2(this).FM()}set G9(t){C3X.Ii(t),getActual2(this).DR(t)}get G9(){return getActual2(this).NR()}set lineHeight(t){C3X.Ii(t),getActual2(this).BR(t)}get lineHeight(){return getActual2(this).kR()}set P9(t){getActual2(this).$R(t)}get P9(){return getActual2(this).WR()}set v9(t){getActual2(this).VR(t)}get v9(){return getActual2(this).HR()}setColor(t){C3X.Vi(t),this.x9(t[0],t[1],t[2])}x9(t,e,s){getActual2(this).zR(t,e,s)}L9(t){C3X.wi(t),getActual2(this).g_(t)}set D9(t){getActual2(this).JR(t)}get D9(){return getActual2(this).KR()}set verticalAlign(t){getActual2(this).ZR(t)}get verticalAlign(){return getActual2(this).QR()}set N9(t){getActual2(this).ew(t)}get N9(){return getActual2(this).iw()}set F9(t){getActual2(this).rw(t)}get F9(){return getActual2(this).hw()}set text(t){C3X.wi(t),getActual2(this).S3(t)}get text(){return getActual2(this).ow()}jD(t,e,s){C3X.Ii(t),C3X.Ii(e),C3X.Ii(s),getActual2(this).aw(t,e,s)}BB(){const{runtime:t,b9:e}=map.get(this),s=e.Jy();return self.p9.g9(t,s)}$B(){return getActual2(this).Ww().vl()}B9(t){C3X.Ki(t),getActual2(this).bR=t}k9(){getActual2(this).RR()}get W9(){return getActual2(this).cw()}get V9(){return getActual2(this).fw()}}}{let GetTypeFromFileExtension2=function(t){if(!t)return"";const e=t.split(".");if(e.length<2)return"";const s=e.at(-1).toLowerCase();return EXT_TO_TYPE.get(s)||""},AddScript2=function(i){return new Promise((t,e)=>{const s=document.createElement("script");s.onload=t,s.onerror=e,s.async=!1,s.type="module",s.src=i,document.head.appendChild(s)})};GetTypeFromFileExtension=GetTypeFromFileExtension2,AddScript=AddScript2;const C33=self.Ve,VALID_LOAD_POLICIES=new Set(["local","remote"]),EXT_TO_TYPE=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);C33.H9=class AssetManager extends C33.pn{constructor(t,e){super();const s=e.exportType,i=(this.f3=t,this.U9="folders",this.X9=new Map,this.j9="cordova"===s,this.Y9=!!e.isiOSCordova,this.q9=!!e.isFileProtocol,this.z9=e.swClientId,this.J9=e.supportedAudioFormats||{},this.K9=new Map,this.Z9=!1,this.Q9=e.scriptFolder,this.tW="",this.eW="",this.sW="",this.iW=e.fileMap||new Map,this.rW=new Map,"html5"===s||"scirra-arcade"===s||"instant-games"===s);this.nW=i?"remote":"local",this.hW=new Map,this.oW=[],this.aW=[],this.lW=!1,this.cW=0,this.uW=0,this.fW=0,this.dW=!1,this.pW=C33.mn(C33.G0,()=>this.mW(),50),this.SW=C33.mn(C33.y0,Math.max(C33.hardwareConcurrency,8)),this.gW=C33.mn(C33.y0,20),this._W=new self.eL(this)}Sn(){for(const t of this.hW.values())t.Sn();this.hW.clear(),C33.Vh(this.aW),this.f3=null}aL(){return this.f3}TW(t){this.U9=t}mL(){return this.U9}yW(){return this.Q9}EW(t){this.tW=t}_L(){return this.tW}IW(t){this.eW=t}AW(){return this.eW}MW(t){this.sW=t}RW(){return this.sW}wW(){return this.q9}Oo(t,e){return e=e||this.nW,C33.Ao(t)?("flat"===this.U9&&(t=t.toLowerCase()),this.j9&&this.q9?this.bW(t):"playable-ad-single-file"===this.f3.OW()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===e?this.SW:this.gW)._u(()=>C33.Oo(t))):C33.Oo(t)}Go(t){return C33.Ao(t)?("flat"===this.U9&&(t=t.toLowerCase()),this.j9&&this.q9?this.GW(t):"playable-ad-single-file"===this.f3.OW()?C33.vo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.nW?this.SW:this.gW)._u(()=>C33.Go(t))):C33.Go(t)}wo(t){return C33.Ao(t)?("flat"===this.U9&&(t=t.toLowerCase()),this.j9&&this.q9?this.PW(t):"playable-ad-single-file"===this.f3.OW()?C33.xo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.nW?this.SW:this.gW)._u(()=>C33.wo(t))):C33.wo(t)}async bo(t){const e=await this.wo(t);return JSON.parse(e)}vW(t,e){return"flat"===this.U9&&(t=t.toLowerCase()),this.f3.J5("runtime","cordova-fetch-local-file",{filename:t,as:e})}PW(t){return this.vW(t,"text")}async bW(t){const e=await this.vW(t,"buffer"),s=GetTypeFromFileExtension2(t);return new Blob([e],{type:s})}async xW(t){"flat"===this.U9&&(t=t.toLowerCase());let e=this.X9.get(t);if(!e){const s=await this.bW(t);e=URL.createObjectURL(s),this.X9.set(t,e)}return e}GW(t){return this.vW(t,"buffer")}SL(t){"flat"===this.U9&&(t=t.toLowerCase());let e=this.tW+t;return e="Gecko"===C33._s.Ms&&"preview"===this.f3.OW()?this.LW(e):e}pL(t){return C33.Io(t)?Promise.resolve(t):this.j9&&this.q9?this.xW(t):"playable-ad-single-file"===this.f3.OW()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.U9&&(t=t.toLowerCase()),Promise.resolve(t))}DW(e){if(C33.Io(e)||"preview"!==this.f3.OW()||!this.z9||!e)return e;try{const t=new URL(e,location.href);return t.searchParams.set("__c3_client_id",this.z9),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+e),e}}NW(t){return this.pL(t)}FW(t){if(t.BW&&!VALID_LOAD_POLICIES.has(t.BW))throw new Error("invalid load policy");let e=this.hW.get(t.url);return e||(e=C33.mn(C33.kW,this,{url:t.url,size:t.size||0,BW:t.BW||this.nW}),this.hW.set(e.$W(),e),this.lW)||(this.cW+=e.du(),this.aW.push(e.WW().then(()=>this.VW(e.du())))),e}HW(t){this.hW.delete(t.$W())}async UW(){try{await Promise.all(this.aW),this.fW=1}catch(t){console.error("Error loading: ",t),this.dW=!0,this.mW()}}XW(){this.lW=!0}jW(){return this.dW}VW(t){this.uW+=t,this.pW.V0()}mW(){const t=C33.mn(C33.Event,"loadingprogress");this.fW=C33.En(this.uW/this.cW,0,1),t.progress=this.fW,this.f3.q3().dispatchEvent(t)}YW(){return this.fW}qW(t){C33.jh(this.oW,t),this.oW.length&&this.aW.push(this.zW())}async zW(){const t=[],e=[];for(const[s,i,r]of this.oW)this.cW+=r,t.push(this.JW(s,i,e).then(()=>this.VW(r)));await Promise.all(t),this.f3.tx()&&0<e.length&&await this.f3.J5("runtime","load-webfonts",{webfonts:e})}async JW(e,s,i){try{let t=await this.pL(s);"Gecko"===C33._s.Ms&&(e=`'${e}'`),("Gecko"===C33._s.Ms&&"preview"===this.f3.OW()||"playable-ad-single-file"===this.f3.OW())&&(t=this.LW(t));const r=new FontFace(e,`url('${t}')`);(this.f3.tx()?self:document).fonts.add(r),await r.load(),this.f3.tx()&&i.push({name:e,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${e}': `,t)}}iL(t){return!!this.J9[t]}KW(t,e){this.Z9=!!e;for(const[s,i,r]of t)this.K9.set(s,{fileName:s,ZW:i.map(t=>({type:t[0],QW:t[1],tV:s+t[1],fileSize:t[2]})),isMusic:r})}eV(t){"flat"===this.U9&&(t=t.toLowerCase());const e=this.K9.get(t);if(!e)return null;let s=null;for(const i of e.ZW)if(s||"audio/webm; codecs=opus"!==i.type||(s=i),this.iL(i.type))return i;return s}sV(t){const e=this.eV(t);return e?{url:this.SL(e.tV),type:e.type}:null}iV(){if(this.Z9){const t=[];for(const e of this.K9.values())if(!e.isMusic){const s=this.eV(e.fileName);s&&t.push({originalUrl:e.fileName,url:this.SL(s.tV),type:s.type,fileSize:s.fileSize})}return t}return[]}rV(t){return"preview"===this.f3.OW()&&(t=new URL(t,location.href).toString()),this.iW.get(t)||null}LW(t){let e=this.rW.get(t);if(!e){const s=this.rV(t);if(!s)return t;e=URL.createObjectURL(s),this.rW.set(t,e)}return e}V4(){return this._W}async IL(...t){const e=await Promise.all(t.map(t=>this.pL(t)));if(this.f3.tx())if(1===t.length){const s=t[0];await self.c3_import((C33.Ao(s)?"./":"")+s)}else{const i=t.map(t=>`import "${C33.Ao(t)?"./":""}${t}";`).join("\n"),r=URL.createObjectURL(new Blob([i],{type:"application/javascript"}));await self.c3_import(r)}else await Promise.all(e.map(t=>AddScript2(t)))}async ML(t){if(WebAssembly.compileStreaming){const e=await this.pL(t);return WebAssembly.compileStreaming(fetch(e))}{const s=await C33.Go(t);return WebAssembly.compile(s)}}async wL(t){const e=await this.pL(t);return this.f3.J5("runtime","add-stylesheet",{url:e})}}}{const C33=self.Ve;C33.nV=class Asset extends C33.pn{constructor(t,e){super(),this.hV=t,this.f3=t.aL(),this.oV=e.url||"",this.aV=e.size,this.lV=e.BW,this.cV=e.blob||null,this.uV=!!this.cV,this.U1=null}Sn(){this.U1=null,this.hV=null,this.f3=null,this.cV=null}$W(){return this.oV}du(){return this.aV}WW(){return"local"===this.lV||this.cV?(this.uV=!0,Promise.resolve()):(this.U1||(this.U1=this.hV.Oo(this.oV,this.lV).then(t=>(this.uV=!0,this.U1=null,this.cV=t)).catch(t=>{console.error("Error loading resource: ",t),this.U1=null})),this.U1)}fV(){return this.uV}dV(){return this.cV?Promise.resolve(this.cV):this.U1||this.hV.Oo(this.oV,this.lV)}}}{const C33=self.Ve,promiseThrottle=new C33.y0,allImageAssets=new Set;C33.kW=class ImageAsset extends C33.nV{constructor(t,e){super(t,e),this.pV=null,this.CV=null,this.Id=0,this.mV=-1,this.SV=-1,allImageAssets.add(this)}Sn(){if(0!==this.Id)throw new Error("released image asset which still has texture references");this.hV.HW(this),this.pV=null,allImageAssets.delete(this),super.Sn()}static gV(){for(const t of allImageAssets)t.pV=null,t.CV=null,t.Id=0}m9(t,e){return e=e||{},this.Id++,this.CV?Promise.resolve(this.CV):(this.pV||(e.OT=this.f3.g8()._V(),this.pV=this.TV(t,e)),this.pV)}async TV(e,s){try{const i=await this.dV();return 0===this.Id?this.pV=null:await promiseThrottle._u(async()=>{const t=await e.OG(i,s);return this.pV=null,0===this.Id?(e.Uy(t),null):(this.CV=t,this.mV=t.dC(),this.SV=t.IC(),this.CV)})}catch(t){throw console.error("Failed to load texture: ",t),t}}RR(){if(this.Id<=0)throw new Error("texture released too many times");if(this.Id--,0===this.Id&&this.CV){const t=this.CV.Kg();t.Uy(this.CV),this.CV=null}}yV(){return this.Id}Jy(){return this.CV}dC(){return this.mV}IC(){return this.SV}async EV(){const t=await this.dV();return C33.js.ImageBitmap?createImageBitmap(t):C33.Do(t)}}}{let SortByInstLastCachedZIndex2=function(t,e){return t.W5().IV()-e.W5().IV()};SortByInstLastCachedZIndex=SortByInstLastCachedZIndex2;const C33=self.Ve,assert=self.assert;C33.AV=class RenderCell extends C33.pn{constructor(t,e,s){super(),this.MV=t,this.nl=e,this.hl=s,this.RV=[],this.wV=!0,this.bV=new Set,this.OV=!1}Sn(){C33.Vh(this.RV),this.bV.clear(),this.MV=null}gf(){C33.Vh(this.RV),this.wV=!0,this.bV.clear(),this.OV=!1}GV(){this.wV=!1}cu(){if(this.RV.length){if(this.RV.length>this.bV.size)return!1;this.PV()}return!0}vV(t){this.bV.has(t)?(this.bV.delete(t),0===this.bV.size&&(this.OV=!1)):(this.RV.push(t),this.wV=1===this.RV.length)}Gf(t){this.bV.add(t),this.OV=!0,50<=this.bV.size&&this.PV()}PV(){this.OV&&(this.RV.length===this.bV.size?this.gf():(C33.Kh(this.RV,this.bV),this.bV.clear(),this.OV=!1))}xV(){this.wV||(this.RV.sort(SortByInstLastCachedZIndex2),this.wV=!0)}LV(t){this.PV(),this.xV(),this.RV.length&&t.push(this.RV)}}}{const C33=self.Ve;C33.DV=class RenderGrid extends C33.pn{constructor(t,e){super(),this.NV=t,this.FV=e,this.BV=C33.mn(C33.ou)}Sn(){this.BV.Sn(),this.BV=null}kV(t,e,s){let i=this.BV.cs(t,e);return i||(s?(i=C33.mn(C33.AV,this,t,e),this.BV.Set(t,e,i),i):null)}$V(t){return Math.floor(t/this.NV)}WV(t){return Math.floor(t/this.FV)}VV(i,r,n){if(r)for(let s=r.bl(),t=r.Gl();s<=t;++s)for(let t=r.Ol(),e=r.Pl();t<=e;++t)if(!n||!n.tc(s,t)){const h=this.kV(s,t,!1);h&&(h.Gf(i),h.cu())&&this.BV.uu(s,t)}if(n)for(let s=n.bl(),t=n.Gl();s<=t;++s)for(let t=n.Ol(),e=n.Pl();t<=e;++t)r&&r.tc(s,t)||this.kV(s,t,!0).vV(i)}HV(t,e){let s=this.$V(t.bl()),i=this.WV(t.Ol()),r=this.$V(t.Gl()),n=this.WV(t.Pl());for(;s<=r;++s)for(let t=i;t<=n;++t){const h=this.kV(s,t,!1);h&&h.LV(e)}}UV(t){let e=t.bl(),s=t.Ol(),i=t.Gl(),r=t.Pl();for(;e<=i;++e)for(let t=s;t<=r;++t){const n=this.kV(e,t,!1);n&&n.GV()}}}}{let SortByInstLastCachedZIndex2=function(t,e){return t.W5().IV()-e.W5().IV()},SortByInstZElevation2=function(t,e){return t.W5().x_()-e.W5().x_()};SortByInstLastCachedZIndex=SortByInstLastCachedZIndex2,SortByInstZElevation=SortByInstZElevation2;const C33=self.Ve,assert=self.assert,tmpRect=new C33.Rect,tmpQuad=new C33.nc,renderCellArr=[],tmpDestRect=new C33.Rect,tmpSrcRect=new C33.Rect,glMatrix=self._e,vec32=glMatrix.we,vec42=glMatrix.Oe,mat42=glMatrix.Ie,tempMat4=mat42.create(),tempVec3=vec32.create(),tempVec4=vec42.create(),camVector=vec32.create(),lookVector=vec32.create(),upVector=vec32.create(),tempVec2=C33.mn(C33.rl),tempRect=C33.mn(C33.Rect),tempInstanceList1=[],tempInstanceList2=[],tempInstancesByCameraDist=[],DEFAULT_LAYER_OPTIONS={name:"",sid:-1,XV:!1,isVisible:!0,LN:!0,FN:!1,backgroundColor:[1,1,1,1],ZN:!0,jV:[1,1],opacity:1,eF:!1,YV:!1,qV:!1,zV:!1,scaleRate:1,Dv:0,KN:0,JV:[],KV:[],ZV:[]};C33.QV=class Layer extends C33.pn{constructor(t,e,s){super(),s=Object.assign({},DEFAULT_LAYER_OPTIONS,s),this.tH=t,this.f3=t.aL(),this.eH=e,this.Tn=s.name,this.tm=-1,this.sH=!!s.FN,this.iH=-1,this.rH=s.sid,this.nH=!!s.XV,this.hH=!!s.isVisible,this.oH=!!s.LN,this.aH=C33.mn(C33.qo),this.aH.qa(s.backgroundColor),this.lH=!!s.ZN,this.cH=s.jV[0],this.uH=s.jV[1],this.p_=C33.mn(C33.qo,1,1,1,s.opacity),this.fH=C33.mn(C33.qo),this.dH=!!s.eF,this.pH=!!s.YV,this.CH=!!s.qV,this.mH=!!s.zV,this.SH=s.scaleRate,this.d_=s.Dv,this.gH=null,this._H=1,this.C_=s.KN,this.TH=0,this.yH=0,this.EH=0,this.IH=!1,this.wb=C33.mn(C33.Rect),this.AH=C33.mn(C33.Rect),this.MH=C33.mn(C33.Rect),this.RH=!0,this.Ly=mat42.create(),this.wH=!0,this.Ev=mat42.create(),this.bH=!0,this.OH=C33.mn(C33.fm.gm),this.GH=!0,this.PH=[],this.vH=s.JV,this.xH=[],this.LH=[],this.DH=new Map,this.RV=[],this.NH=!1,this.FH=!1,this.BH=!1;const r=this.f3.g8();this.kH=C33.mn(C33.$H,this,s.KV),this.x4=C33.mn(C33.fm.OP,r.WH(),{gP:(t,e)=>{const s=e.M4(),i=s.AG();t.g_(s.VH()),t.xG(i),t.LG(i),r.HH(i)},TP:t=>this.HD().UH(t)}),this.XH=!0,this.jH=!0,this.YH=null,this.qH=[],this.zH=!1,this.JH=C33.mn(C33.Rect,0,0,-1,-1),this.KH=C33.mn(C33.Rect,0,0,-1,-1),this.ZH=new self.oN(this),this.QH(),this.tU()&&(this.YH=C33.mn(C33.DV,this.f3.nx(),this.f3.ox())),this.eU=s.ZV.map(t=>C33.QV.sU(this.tH,this,t))}iU(){for(const t of this.vH){const e=this.f3.rU(t[1]);this.tH.nU(e),e.hU()||(e.oU(t),e.aU(this.tm)),this.xH.push(t),this.DH.set(t[2],t)}C33.jh(this.PH,this.xH),this.vH=null}static sU(t,e,s){return C33.mn(C33.QV,t,e,{name:s[0],sid:s[2],isVisible:s[3],LN:s[13],FN:s[19],backgroundColor:s[4].map(t=>t/255),ZN:s[5],jV:[s[6],s[7]],opacity:s[8],eF:s[9],YV:s[17],qV:s[18],zV:s[10],scaleRate:s[11],Dv:s[12],KN:s[16],JV:s[14],KV:s[15],ZV:s[20]})}Sn(){for(const t of this.eU)t.Sn();C33.Vh(this.eU);for(const e of this.RV)this.f3.OF(e);C33.Vh(this.RV),this.kH.Sn(),this.kH=null,this.x4.Sn(),this.x4=null,this.ZH=null,this.eH=null,this.tH=null,this.f3=null}lU(t){return this.DH.get(t)}cU(r){let n=this.tH.uU(),h=0,o=this.xH;for(let i=0,t=o.length;i<t;++i){let t=o[i],e=this.f3.rU(t[1]),s=!0;if(!e.fU()||n){const a=this.f3.dU(t,this,!0);r.push(a),e.pU()&&(s=!1,this.LH.push(a.NF()))}s&&(o[h]=o[i],++h)}C33.Wh(o,h),this.f3.WD(),this.Y5()}CU(t,e){if(!t._D().JL())throw new Error("instance is not of world type");const s=t.W5();if(s.V5()!==this)throw new Error("instance added to wrong layer");this.RV.push(t),0!==s.x_()&&(this.BH=!0),e&&this.tU()&&t.W5().L7(),this.Y5(t)}mU(t){this.RV.includes(t)||(this.RV.push(t),0!==t.W5().x_()&&(this.BH=!0),this.Y5(t))}SU(t,e){const s=t.W5();if(s.V5()!==this)throw new Error("instance added to wrong layer");this.RV.unshift(t),0!==s.x_()&&(this.BH=!0),this.Y5(t),e&&this.tU()&&t.W5().L7()}gU(t,e){const s=this.RV.indexOf(t);s<0||(e&&this.tU()&&t.W5()._U(),this.RV.splice(s,1),this.Y5(t),this.TU())}yU(){this.BH=!0}TU(){0===this.RV.length&&(this.BH=!1)}EU(t){if(t){const e=new Set;for(const s of this.RV){const i=s.W5().IV();0<=i&&e.add(i)}let t=-1;for(const r of this.RV){const n=r.W5();if(!(0<=n.IV())){for(++t;e.has(t);)++t;n.IU(t)}}}this.RV.sort(SortByInstLastCachedZIndex2)}AU(){}MU(){for(const t of this.RV)t.IF().pU()||this.f3.OF(t);this.f3.WD(),C33.Vh(this.RV),this.BH=!1,this.Y5()}RU(e,t,s,i,r,n){const h=this.f3.Ix(),o=this.f3.wU(),a=e.bU(),l=[];for(const c of this.xH){const u=c[0],f=u[0],d=u[1];if(t.tc(f,d)){const p=o[c[1]];if(p!==e){if(!a)continue;if(!e.OU(p))continue}let t=r;if(!t){const S=this.f3.B5();t=this.y5()===S?this:(t=S.GU(this.i3()))||S.U5(this.F4())}const C=this.f3.dU(c,t,!1,void 0,void 0,!1,n),m=(t.ND(C),C.W5());m.B7(s,i),m.L7(),h.FD(!0),C.BD(),h.FD(!1),l.push(C)}}return l}xD(){return this.RV.length}y5(){return this.tH}i3(){return this.Tn}PU(t){this.tm=t}F4(){return this.tm}vU(t){this.iH=t}v8(){return this.iH}BN(){return this.sH}kN(t){this.sH!==(t=!!t)&&(this.sH=t,this.tH.xU(),this.f3.q5())}LU(){let t=-1,e=this.AN();return t=(e?e.wN():this.y5().DU()).indexOf(this)}NU(){return this.rH}aL(){return this.f3}FU(){return this.nH}BU(){for(const t of this.MN())if(t.FU())return!0;return!1}kU(){return this.f3.kU()}HD(){return this.kH}N4(){return this.$U(),this.x4}$U(){const t=this.WU();if(this.XH||t!==this.jH||this.x4.Iv()){const e=this.HD().VU();this.x4.Av(e.map(t=>t.CI()),{EP:e.map(t=>t.F4()),IP:!t,bP:!0}),this.XH=!1,this.jH=t}}EB(){this.HD().EB(),this.XH=!0}tU(){return this.mH&&!this.CH}HU(){return this.YH}UU(){this.zH=!1}xN(){for(const t of this.XU())if(!t.GN())return!1;return!0}GN(){return this.hH}PN(t){this.hH!==(t=!!t)&&(this.hH=t,this.f3.q5())}NN(t){this.oH=!!t}DN(){return this.oH}WN(){for(const t of this.XU())if(!t.DN())return!1;return!0}hF(t){if(this.IH!==(t=!!t)){if(this.IH=t){const e=this.y5();this.yH=e.KD(),this.EH=e.QD()}this.jU(),this.f3.q5()}}YU(){return this.IH}JD(t){const e=this.y5(),s=e.qU(),i=e.zU();this.yH!==(t=(t=i<t?i:t)<s?s:t)&&(this.yH=t,this.YU())&&(this.jU(),this.f3.q5())}ZD(t){const e=this.y5(),s=e.JU(),i=e.KU();this.EH!==(t=(t=i<t?i:t)<s?s:t)&&(this.EH=t,this.YU())&&(this.jU(),this.f3.q5())}KD(){return this.YU()?this.yH:this.y5().KD()}QD(){return this.YU()?this.EH:this.y5().QD()}aF(){return this.ZU(),this.wb}QU(){return this.ZU(),this.AH}tX(){return this.ZU(),this.MH}_N(){const t=this.y5();return[t.eX(),t.sX()]}E2(t){return this.f3.E2(t)}iX(c,i){const r=this.QU();if(0===c)i.A(r);else{let h=r.Nl(),o=r.Fl(),t=this.rX(c),e=r.width()/t,s=r.height()/t,[a,l]=this._N();if(.5!==a||.5!==l){let t=this.nX(),e=this.f3,s=this.E2()/t,i=(a-.5)*e.hX()/s,r=(l-.5)*e.aX()/s,n=this.GetAngle();0!==n&&(tempVec2.set(i,r),tempVec2.rotate(n),i=tempVec2.ll(),r=tempVec2.ul());const u=C33.Nn(t,0,c);h+=C33.Nt(i,0,u),o+=C33.Nt(r,0,u)}i.set(h-e/2,o-s/2,h+e/2,o+s/2)}}$O(){return this.p_.Ca()}VO(t){t=C33.En(t,0,1),this.p_.Ca()!==t&&(this.p_.aa(t),this.QH(),this.f3.q5())}QH(){this.fH.A(this.p_),this.fH.Ra()}VH(){return this.fH}WU(){return this.p_.Ea(1,1,1,1)}XN(){return this.SH}UN(t){this.SH!==t&&(this.SH=t,this.jU(),this.f3.q5())}qN(){return this.cH}JN(){return this.uH}lX(t,e){this.cH===t&&this.uH===e||(this.cH=t,this.uH=e,this.jU(),this.f3.q5())}YN(t){this.lX(t,this.JN())}zN(t){this.lX(this.qN(),t)}L_(t){this.C_!==t&&(this.C_=t,this.f3.q5())}x_(){return this.C_}zD(t){t=C33.In(t),this.TH!==t&&(this.TH=t,this.jU(),this.f3.q5())}GetAngle(){return C33.In(this.tH.GetAngle()+this.TH)}jN(){return this.TH}cX(){return 0<this.RV.length}X5(){return this.RV}uX(){return this.fX()&&this.CH?(C33.jh(tempInstancesByCameraDist,this.X5()),tempInstancesByCameraDist.sort((t,e)=>this.dX(t,e)),tempInstancesByCameraDist):this.X5()}pX(t){C33.sn(t,this.uX());for(const e of this.eU)e.xN()&&0<e.$O()&&e.pX(t)}dX(t,e){const s=this.y5().CX(),i=s[0],r=s[1],n=s[2],h=t.W5(),o=e.W5(),a=h.b_()-i,l=h.P_()-r,c=h.x_()-n,u=o.b_()-i,f=o.P_()-r,d=o.x_()-n;return u*u+f*f+d*d-(a*a+l*l+c*c)}nF(){return this.aH}tF(){return this.lH}QN(t){this.lH!==(t=!!t)&&(this.lH=t,this.f3.q5())}iF(){return this.dH}sF(t){this.dH!==(t=!!t)&&(this.dH=t,this.f3.q5())}mX(){return!this.aL().SX()||!this.pH}fX(){return!this.mX()}gX(){return this.fX()&&this.y5()._X()}TX(){if(!this.gX())return!1;for(const t of this.eU)if(!t.TX())return!1;return!0}S_(t){this.d_!==t&&(this.d_=t,this.f3.q5())}rF(){return this.d_}yX(){return!this.eH}AN(){return this.eH}EX(t){this.eH=t}wN(){return this.eU}IX(){return 0<this.eU.length}AX(t,e=!0){e?this.eU.push(t):this.eU.unshift(t)}MX(t,e,s){let i=this.eU.indexOf(e);if(-1===i)throw new Error("cannot find layer to insert by");s&&++i,this.eU.splice(i,0,t)}RX(t){const e=this.eU.indexOf(t);if(-1===e)throw new Error("cannot find layer to remove");this.eU.splice(e,1)}wX(){for(const t of this.eU)if(t.bX())return!0;return!1}*ON(){for(const t of this.eU)yield*t.ON();yield this}*MN(){let t=this.AN();for(;t;)yield t,t=t.AN()}*XU(){yield this,yield*this.MN()}OX(t){for(const e of this.MN())if(e===t)return!0;return!1}GX(t){return this===t||this.cH===t.cH&&this.uH===t.uH&&this._H===t._H&&this.SH===t.SH&&this.TH===t.TH&&this.KD()===t.KD()&&this.QD()===t.QD()}PX(){return{parallaxX:this.qN(),parallaxY:this.JN(),scale:this.HN(),scaleRate:this.XN(),angle:this.jN(),hasOwnScroll:this.YU(),scrollX:this.KD(),scrollY:this.QD()}}vX(t){this.lX(t.parallaxX,t.parallaxY),this.VN(t.scale),this.UN(t.scaleRate),this.zD(t.angle),this.hF(t.hasOwnScroll),this.JD(t.scrollX),this.ZD(t.scrollY),this.ZU()}xX(t){if(0!==t.size){const e=C33.Kh(this.RV,t);0<e&&(this.TU(),this.Y5())}}Y5(t){this.NH=!1,this.zH=!1,t&&!t.IF()._D().ZL()||(this.FH=!1)}LX(){if(!this.NH){if(this.RV.sort(SortByInstZElevation2),this.tU())for(let t=0,e=this.RV.length;t<e;++t){const s=this.RV[t].W5();s.IU(t),this.YH.UV(s.DX())}else for(let t=0,e=this.RV.length;t<e;++t)this.RV[t].W5().IU(t);this.NH=!0}}NX(){if(!this.FH){let t=this.tH.FX(this.v8()),e=t.map(t=>[...t.ON()]).flat(),s=0;for(const i of e){for(const r of i.X5())r.IF()._D().ZL()&&r.W5().BX(s++);i.kX()}}}kX(){this.FH=!0}$X(t,e,s){const i=t.W5(),r=e.W5();if(i.V5()!==this||r.V5()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let n=i.H5(),h=r.H5();return n!==h+(s?1:-1)&&(C33.Yh(this.RV,n),n<h&&h--,s&&h++,h===this.RV.length?this.RV.push(t):this.RV.splice(h,0,t),this.Y5(t),!0)}WX(t,e){let s=[],i=0,r=0,n=t.length,h=e.length;for(;i<n&&r<h;){const o=t[i],a=e[r];o.W5().IV()<a.W5().IV()?(s.push(o),++i):(s.push(a),++r)}for(;i<n;++i)s.push(t[i]);for(;r<h;++r)s.push(e[r]);return s}VX(e){const s=[],i=e.length;for(let t=0;t<i-1;t+=2){const r=e[t],n=e[t+1];s.push(this.WX(r,n))}return i%2==1&&s.push(e[i-1]),s}HX(t){for(;1<t.length;)t=this.VX(t);return t[0]}UX(){return this.LX(),C33.Vh(renderCellArr),this.YH.HV(this.aF(),renderCellArr),renderCellArr.length?1===renderCellArr.length?renderCellArr[0]:this.HX(renderCellArr):[]}bX(){return this.xN()&&0<this.$O()&&this.XX()}XX(){if(this.cX()||!this.tF())return!0;for(const t of this.eU)if(t.XX())return!0;return!1}jX(){return this.iF()||!this.WU()||0!==this.rF()||this.kH.YX()}qX(){if(this.jX())return!0;for(const t of this.eU)if(t.qX())return!0;return!1}AG(){return this.gH}rX(t){if(this.tH.EN())return 1;{const e=this.zX();return e/(e-t)}}JX(t){const e=this.f3.TF();if(this.tH.EN())return e;{const s=this.zX(),i=this.E2();return i/Math.abs(s-t)*e}}jU(){this.bH=!0,this.GH=!0,this.RH=!0}KX(t){return this.bH&&(this.ZX(t,this.Ev,0,0,null),this.bH=!1),this.Ev}nX(t){return this.E2(t)/this.QX()}zX(){return this.gX()?this.y5().CX()[2]:this.nX()}tj(){if(this.gX()){const t=this.y5().CX();return[t[0],t[1],t[2]]}return this.ej()}ej(t=0,e=0,r=0){let n=this.f3,s=this.y5(),i=n.sj(),h=n.ij(),o=(this.KD()-i)*this.cH+i,a=(this.QD()-h)*this.uH+h,l=(n.mx()&&(o=Math.round(o),a=Math.round(a)),o+t),c=a+e,u=s.EN()?this.E2(r):this.nX(r),[f,d]=this._N();if(.5!==f||.5!==d){let t=this.E2(r)/u,e=(f-.5)*n.hX()/t,s=(d-.5)*n.aX()/t,i=this.GetAngle();0!==i&&(tempVec2.set(e,s),tempVec2.rotate(i),e=tempVec2.ll(),s=tempVec2.ul()),l+=e,c+=s}return[l,c,u]}ZX(t,e,s,i,r){const n=this.f3,h=this.y5();if(this.gX()){vec32.A(camVector,h.CX()),vec32.A(lookVector,h.rj()),vec32.A(upVector,h.nj());const o=n.sj(),a=n.ij(),l=lookVector[0]-camVector[0],c=lookVector[1]-camVector[1],u=lookVector[2]-camVector[2];camVector[0]=(camVector[0]-o)*this.cH+o,camVector[1]=(camVector[1]-a)*this.uH+a,camVector[2]*=Math.max(this.cH,this.uH),lookVector[0]=camVector[0]+l,lookVector[1]=camVector[1]+c,lookVector[2]=camVector[2]+u}else{const[f,d,p]=this.ej(s,i,r),C=(vec32.set(camVector,f,d,p),vec32.set(lookVector,f,d,p-100),this.GetAngle());0===C?vec32.set(upVector,0,1,0):vec32.set(upVector,Math.sin(C),Math.cos(C),0)}t.W2(e,camVector,lookVector,upVector,r||n.aX())}hj(){this.wH=!0,this.GH=!0,this.RH=!0}oj(t){return this.wH&&(this.aj(t),this.wH=!1),this.Ly}aj(t){const e=this.f3.g8(),[s,i]=this._N();if(this.tH.EN())t.B2(this.Ly,e.lj(),e.cj());else if(.5===s&&.5===i)mat42.A(this.Ly,e.uj());else{const r=e.lj(),n=e.cj();t.N2(this.Ly,r/n,s,i)}}R9(t,e=!0,s=0,i=0,r=0){e&&t.OO(this.oj(t));let n=null;n=0===s&&0===i&&0===r?this.KX(t):(this.ZX(t,tempMat4,s,i,r),tempMat4),t.DO(n)}fj(t){this.R9(t),t.MS(this.x_())}dj(t){let e=null;if(t.Eg()&&this.f3.pj()){const s=this.f3.g8().Cj(this);s&&(e=s.pb(),t.$G(e))}return e}mj(t){if(t.F2()&&this.f3.pj()){const e=2*(this.F4()+1);t.StartMeasuringRenderPassTime(e,1+e)}}ST(t,e,s){let i=this.f3.g8(),r=this.jX(),n=null,h=this.dj(t);if(this.mj(t),r){const o={bT:this.f3.ux(),yy:!0,Sj:!!t.F2()&&this.f3.gj()};"low"===i._j()&&(o.width=i.lj(),o.height=i.cj()),n=this.f3.Tj(o),this.gH=n,t.PG(n),this.tF()&&t.SG(0,0,0,0)}else this.gH=e,t.PG(e);if(this.tF()||t.lu(this.aH),this.tH.yj(t,this.gH,this.eU,r&&this.tF()),this.mj(t),this.R9(t),t.MS(this.x_()),t.TG(this.fX()),this.QX()>Number.EPSILON){this.LX();const a=this.tU()&&0===this.x_()&&!this.BH;this.gX()?this.Ej(t):a?this.Ij(t):this.Aj(t,this.uX())}t.MS(0),t.wS(0),r&&(t.TG(!1),this.Mj(t,n,e,s)),h&&t.VG(h),this.gH=null}Aj(s,i){let r=this.aF(),n=this.gH,h=this.y5().EN(),o=this.y5().Rj(),a=null;for(let t=0,e=i.length;t<e;++t){const l=i[t];if(l!==a){const c=(a=l).W5();c.xN()&&c.wj(r,o,h)&&this.bj(l,c,s,n)}}}Ej(i){const r=this.gH,n=this.Oj(),h=tempInstanceList1,o=tempInstanceList2,a=this.uX();for(let e=0,s=a.length;e<s;){const l=a[e],c=l.W5();if(c.xN()&&c.Gj(n)){(!l.Pj()||0<c.vj())&&o.push(l);const u=l.W5().W7();h.push(l);let t=e+1;for(;t<s;++t){const f=a[t],d=f.W5();if(d.xN()&&d.Gj(n)){if(d.W7()!==u)break;(f.Pj()?(0<d.vj()&&o.push(f),h):o).push(f)}}if(1!==h.length||h[0].xj()){this.Lj(i,h);for(let t=0,e=o.length;t<e;++t){const p=o[t],C=p.W5();C.Dj(!0),this.bj(p,C,i,r),C.Dj(!1)}}else{this.bj(l,c,i,r);for(let t=0,e=o.length;t<e;++t){const m=o[t];if(m!==l){const S=m.W5(),g=S.V5();g.bj(m,S,i,r)}}}e=t,C33.Vh(h),C33.Vh(o)}else++e}}Lj(s,i){const r=this.gH;s.NG();for(let t=0,e=i.length;t<e;++t){const n=i[t],h=n.W5();h.Nj(!0),this.Fj(n,h,s)}s.FG();for(let t=0,e=i.length;t<e;++t){const o=i[t],a=o.W5();this.bj(o,a,s,r),a.Nj(!1)}s.kG()}Ij(t){let e=this.YH,s=this.KH,i=this.JH,r=this.aF(),n;s.set(e.$V(r.bl()),e.WV(r.Ol()),e.$V(r.Gl()),e.WV(r.Pl())),this.zH&&s.equals(i)?n=this.qH:(n=this.UX(),this.zH=!0,i.A(s)),this.Aj(t,n),n!==this.qH&&C33.jh(this.qH,n)}bj(t,e,s,i){e.YX()?this.Bj(t,e,s,i):this.Fj(t,e,s)}Fj(t,e,s){const i=e.kj();s.aS()!==i&&i.m_(),t.ST(s)}Bj(t,e,s,i){this.$j(t,e,s,i,null)&&this.R9(s)}$j(t,e,s,i,r){const n=e.v7().N4();return n.xv(s,i,{Lv:t,Dv:e.rF(),devicePixelRatio:this.f3.Wj(),time:t.Vj(),Nv:this.f3.Hj()*this.QX(),Fv:this.GetAngle(),r4:e.H7(),n4:n.I4()?null:this.Uj(e),Vv:r&&r.Vv,Hv:r&&r.Hv,Uv:r&&r.Uv,Xv:r&&r.Xv}),s.MS(this.x_()),n.FO()}Mj(t,e,s,i){const r=this.kH.VU(),n=this.f3;0===r.length?(t.PG(s),t.Y2(),i&&0===this.d_&&this.WU()?t.vG(e):(t.S_(this.d_),t.g_(this.fH),t.xG(e)),t.LG(e),n.HH(e)):this.N4().xv(t,s,{Lv:this,Dv:this.rF(),devicePixelRatio:n.Wj(),Nv:n.Hj()*this.QX(),Fv:this.GetAngle(),r4:this.aF(),n4:null,yP:!0})}HN(){return this._H}VN(t){this._H!==t&&(this._H=t,this.tH.Xj(),this.jU(),this.f3.q5())}TF(){return this.QX()*this.f3.TF()}H8(){return this.QX()*this.f3.H8()}QX(){return(this._H*this.tH.qD()-1)*this.SH+1}ZU(){if(this.RH){this.RH=!1;let t=this.f3.sj(),e=this.f3.ij(),s=(this.KD()-t)*this.cH+t,i=(this.QD()-e)*this.uH+e,r=this.QX(),n=this.f3.hX()/r,h=this.f3.aX()/r,o=s-n/2,a=i-h/2;this.f3.mx()&&(o=Math.round(o),a=Math.round(a));const l=this.AH,c=(l.set(o,a,o+n,a+h),this.GetAngle()),u=(0!==c&&(tmpRect.A(l),tmpRect.offset(-l.Nl(),-l.Fl()),tmpQuad.Gc(tmpRect,c),tmpQuad.vc(tmpRect),tmpRect.offset(l.Nl(),l.Fl()),l.A(tmpRect)),this.C_);this.iX(u,this.wb),this.gX()?this.jj(u,this.MH):this.MH.A(this.wb)}}jj(t,e){let s=this.f3.g8(),i=s.W8(),r=s.V8(),[n,h]=this.cF(0,0,t),[o,a]=this.cF(i,0,t),[l,c]=this.cF(i,r,t),[u,f]=this.cF(0,r,t),d=Math.min(n,o,l,u),p=Math.min(h,a,c,f),C=Math.max(n,o,l,u),m=Math.max(h,a,c,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(C)||(C=1/0),isFinite(m)||(m=1/0),e.set(d,p,C,m)}cF(t,e,s=0){return this.Yj(t,e,s,this.H8())}mF(t,e,s=0){return this.Yj(t,e,s,this.TF()*this.kU())}Yj(t,e,s,i){const r=this.f3,n=r.Kg(),h=this.QX(),o=r.hX()/h,a=r.aX()/h,l=tempVec4,c=(vec42.set(l,0,0,o,a),t/=i,e=l[3]-e/i,this.oj(n)),u=this.KX(n),f=tempVec3,d=C33.fm.Sm(t,e,s,u,c,l,f);return d?[f[0],f[1]]:[NaN,NaN]}qj(t,e){const s=this._H,i=this.SH,r=this.cH,n=this.uH,h=this.TH,o=(this._H=1,this.SH=1,this.cH=1,this.uH=1,this.TH=0,this.jU(),this.cF(t,e));return this._H=s,this.SH=i,this.cH=r,this.uH=n,this.TH=h,this.jU(),o}pF(t,e,s=0){return this.zj(t,e,s,this.H8())}gF(t,e,s=0){return this.zj(t,e,s,this.TF()*this.kU())}zj(t,e,s,i){const r=this.f3,n=r.Kg(),h=this.QX(),o=r.hX()/h,a=r.aX()/h,l=tempVec4,c=(vec42.set(l,0,0,o,a),this.oj(n)),u=this.KX(n),f=tempVec3,d=C33.fm.pm(t,e,s,u,c,l,f);return d?[f[0]*i,(l[3]-f[1])*i]:[NaN,NaN]}Jj(t,e){return t*=this.TF()*this.kU(),0!==e&&(t*=this.rX(e)),t}Uj(t){const e=t.H7(),s=t.W7(),i=t.vj(),l=s+i,c=e.bl(),u=e.Ol(),f=e.Gl(),d=e.Pl();if(this.gX()){if(this.Kj(c,u,s)||this.Kj(f,u,s)||this.Kj(f,d,s)||this.Kj(c,d,s))return null;if(0<i&&(this.Kj(c,u,l)||this.Kj(f,u,l)||this.Kj(f,d,l)||this.Kj(c,d,l)))return null}else if(l>=this.nX())return null;let[p,C]=this.gF(c,u,s),[m,S]=this.gF(f,d,s);if(0!==this.GetAngle()||0<i||this.gX()){const[g,_]=this.gF(f,u,s),[T,y]=this.gF(c,d,s);if(0<i){let[t,e]=this.gF(c,u,l),[s,i]=this.gF(f,u,l),[r,n]=this.gF(f,d,l),[h,o]=this.gF(c,d,l),a=Math.min(p,m,g,T,t,s,r,h);m=Math.max(p,m,g,T,t,s,r,h),p=a,a=Math.min(C,S,_,y,e,i,n,o),S=Math.max(C,S,_,y,e,i,n,o),C=a}else{let t=Math.min(p,m,g,T);m=Math.max(p,m,g,T),p=t,t=Math.min(C,S,_,y),S=Math.max(C,S,_,y),C=t}}return tmpRect.set(p,C,m,S),tmpRect}Oj(){return this.GH&&(this.Zj(),this.GH=!1),this.OH}Zj(){const t=this.f3.Kg(),e=this.oj(t),s=this.KX(t);this.OH.Mm(s,e)}Kj(t,e,s){return this.Oj().wm(t,e,s)}Qj(){const t={d:this.FU(),s:this.HN(),a:this.jN(),v:this.GN(),i:this.DN(),html:this.BN(),bc:this.aH.toJSON(),t:this.tF(),sx:this.yH,sy:this.EH,hosp:this.IH,px:this.qN(),py:this.JN(),c:this.p_.toJSON(),sr:this.XN(),fx:this.kH.V_(),cg:this.LH};return t}tY(t){this.nH=!!t.d,this._H=t.s,this.TH=t.a,this.hH=!!t.v,this.oH=!t.hasOwnProperty("i")||t.i,this.sH=!!t.html,this.aH.qa(t.bc),this.lH=!!t.t,t.hasOwnProperty("sx")&&(this.yH=t.sx),t.hasOwnProperty("sy")&&(this.EH=t.sy),t.hasOwnProperty("hosp")&&(this.IH=!!t.hosp),this.cH=t.px,this.uH=t.py,this.p_.qa(t.c),this.QH(),this.SH=t.sr,C33.jh(this.LH,t.cg),C33.jh(this.xH,this.PH);let s=new Set(this.LH),i=0;for(let t=0,e=this.xH.length;t<e;++t)s.has(this.xH[t][2])||(this.xH[i]=this.xH[t],++i);C33.Wh(this.xH,i),this.kH.H_(t.fx),this.XH=!0}eY(){this.EU(!1),this.Y5(),this.jU(),this.hj()}sN(){return this.ZH}ND(t,e=!1){if(this.RV.includes(t))e&&this.RV.sort((t,e)=>{const s=t.W5().sY(),i=e.W5().sY();return s-i});else if(t.iY()){const s=[...t.S6()];s.push(t),s.sort((t,e)=>{const s=t.W5().sY(),i=e.W5().sY();return s-i});for(const i of s)if(i.LF())for(const r of i.DF())if(!s.includes(r)){const n=[...r.S6()];n.push(r),n.sort((t,e)=>{const s=t.W5().sY(),i=e.W5().sY();return s-i}),n&&n.length&&s.splice(s.length,0,...n)}for(const h of s)h._D().JL()&&this.CU(h,!0)}else if(t._D().JL()&&this.CU(t,!0),t.LF())for(const o of t.DF()){const a=[...o.S6()];if(a.push(o),a.sort((t,e)=>{const s=t.W5().sY(),i=e.W5().sY();return s-i}),a&&a.length)for(const l of a)l._D().JL()&&this.CU(l,!0)}}}}{let vec3EqualsXYZ2=function(t,e,s,i){return t[0]===Math.fround(e)&&t[1]===Math.fround(s)&&t[2]===Math.fround(i)},MaybePrepareLayerDraw2=function(t,e){lastLayerPreparedForDrawing!==t&&(t.fj(e),lastLayerPreparedForDrawing=t)},C33=(vec3EqualsXYZ=vec3EqualsXYZ2,MaybePrepareLayerDraw=MaybePrepareLayerDraw2,self.Ve),C3Debugger=self.C3Debugger,assert=self.assert,tempDestRect=C33.mn(C33.Rect),tempSrcRect=C33.mn(C33.Rect),tempLayoutRect=C33.mn(C33.Rect),tempColor=C33.mn(C33.qo),glMatrix=self._e,vec32=glMatrix.we,tempRender3dList=[],tempInstanceList1=[],tempInstanceList2=[],tempInstanceList3=[],lastLayerPreparedForDrawing=null;C33.rY=class Layout extends C33.pn{constructor(t,e,s){super(),this.nY=t,this.f3=t.aL(),this.Tn=s[0],this.hY=s[1],this.aY=s[2],this.zC=s[1],this.JC=s[2],this.lY=!!s[3],this.cY=!!s[4],this.uY=s[5],this.fY=s[6],this.dY=s[7],this.pY=null,this.rH=s[8],this.tm=e,this.yH=0,this.EH=0,this._H=1,this.TH=0,this.CY=new Set,this.mY=new Set,this.SY=new Set,this.gY=[],this._Y=[],this.TY=new Map,this.yY=new Map,this.EY=[],this.IY=!1,this.AY=vec32.create(),this.MY=vec32.create(),this.RY=vec32.create(),this.wY=[],this.bY=[],this.OY=new Map,this.GY=new Map,this.PY=-1;const r=this.f3.g8();this.kH=C33.mn(C33.$H,this,s[11]),this.x4=C33.mn(C33.fm.OP,r.WH(),{gP:(t,e)=>{const s=e.M4(),i=s.AG();t.HO(),t.xG(i),t.LG(i),r.HH(i)},TP:t=>this.HD().UH(t)}),this.XH=!0,this.vY=!1,this.gH=null,this.xY={},this.LY=new Map,this.DY=!0,this.NY=new self.VD(this),this.FY=C33.mn(C33.Event.q3);for(const i of s[9])this.wY.push(C33.QV.sU(this,null,i));this.BY();for(const n of this.nN())n.iU();for(const h of s[10]){const o=this.f3.rU(h[1]);if(!o)throw new Error("missing nonworld object class");o.hU()||o.oU(h),this.EY.push(h),this.nU(o)}}Sn(){for(const t of this.bY)t.Sn();C33.Vh(this.bY),this.SY.clear(),this.pY=null,this.nY=null,this.f3=null}aL(){return this.f3}i3(){return this.Tn}NU(){return this.rH}F4(){return this.tm}HD(){return this.kH}N4(){return this.$U(),this.x4}$U(){const t="low"===this.f3.g8()._j();if(this.XH||this.vY!==t||this.x4.Iv()){const e=this.HD().VU();this.x4.Av(e.map(t=>t.CI()),{EP:e.map(t=>t.F4()),AP:t,bP:!0}),this.XH=!1,this.vY=t}}EB(){this.HD().EB(),this.XH=!0}kY(){let s=this.bY[0].QX();for(let t=1,e=this.bY.length;t<e;++t){const i=this.bY[t];0===i.qN()&&0===i.JN()||(s=Math.min(s,i.QX()))}return s}$Y(){return.5*this.f3.hX()/this.kY()}WY(){return.5*this.f3.aX()/this.kY()}qU(){return this.VY()?-1/0:this.$Y()}zU(){return this.VY()?1/0:this.dC()-this.$Y()}JU(){return this.VY()?-1/0:this.WY()}KU(){return this.VY()?1/0:this.IC()-this.WY()}JD(t){const e=this.qU(),s=this.zU();this.yH!==(t=(t=s<t?s:t)<e?e:t)&&(this.yH=t,this.HY(),this.f3.q5())}KD(){return this.yH}ZD(t){const e=this.JU(),s=this.KU();this.EH!==(t=(t=s<t?s:t)<e?e:t)&&(this.EH=t,this.HY(),this.f3.q5())}QD(){return this.EH}VY(){return this.lY}Xj(){this.JD(this.KD()),this.ZD(this.QD());for(const t of this.bY)t.YU()&&(t.JD(t.KD()),t.ZD(t.QD()))}SN(t,e){this.uY===t&&this.fY===e||(this.uY=t,this.fY=e,this.UY()&&(this.XY(),this.HY(),this.f3.q5()))}eX(){return this.EN()?.5:this.uY}sX(){return this.EN()?.5:this.fY}Rj(){const t=this.eX(),e=this.sX();return t<0||1<t||e<0||1<e}TN(){this.cY&&(this.cY=!1,this.XY(),this.HY(),this.f3.q5())}yN(){this.cY||(this.cY=!0,this.XY(),this.HY(),this.f3.q5())}EN(){return this.cY}UY(){return!this.EN()}jY(t){this.IY!==(t=!!t)&&(this.IY=t,this.HY(),this.f3.q5())}_X(){return this.IY}YY(t,e,s,i,r,n,h,o,a){vec3EqualsXYZ2(this.AY,t,e,s)&&vec3EqualsXYZ2(this.MY,i,r,n)&&vec3EqualsXYZ2(this.RY,h,o,a)||(vec32.set(this.AY,t,e,s),vec32.set(this.MY,i,r,n),vec32.set(this.RY,h,o,a),this.qY())}qY(){this.HY(),this.f3.q5()}CX(){return this.AY}rj(){return this.MY}nj(){return this.RY}qD(){return this._H}YD(t){this._H!==t&&(this._H=t,this.HY(),this.Xj(),this.f3.q5())}zD(t){t=C33.In(t),this.TH!==t&&(this.TH=t,this.HY(),this.f3.q5())}GetAngle(){return this.TH}dC(){return this.zC}TC(t){!isFinite(t)||t<1||(this.zC=t)}IC(){return this.JC}pC(t){!isFinite(t)||t<1||(this.JC=t)}zY(){return this.pY}DU(){return this.wY}*nN(){for(const t of this.wY)yield*t.ON()}rN(){return this.bY}JY(){return this.bY.length}V5(t){return"number"==typeof t?this.U5(t):this.GU(t.toString())}U5(t){return t=C33.En(Math.floor(t),0,this.bY.length-1),this.bY[t]}GU(t){return this.OY.get(t.toLowerCase())||null}KY(t){return!!this.GU(t)}ZY(t){return this.GY.get(t)||null}XY(){for(const t of this.bY)t.hj()}HY(){for(const t of this.bY)t.jU()}lN(t,e,s){if(this.KY(t))throw new Error(`layer name '${t}' already in use`);if(!e&&s<2)throw new Error("invalid insert position");const i=2<=s?e:e.AN(),r=C33.mn(C33.QV,this,i,{name:t,sid:Math.floor(1e15*Math.random()),XV:!0});this.QY(r,e,s),this.aL().q5(),this.xU()}uN(t,e,s){if(!e&&s<2)throw new Error("invalid insert position");t===e&&s<2||(this.tq(t),this.QY(t,e,s),this.aL().q5(),this.xU())}dN(t){if(this.tq(t)){const e=this.f3.Ix();e.FD(!0),t.Sn(),e.FD(!1),this.aL().q5(),this.xU()}}CN(){const t=new Set;for(const e of this.nN())e.FU()&&!e.BU()&&t.add(e);if(0!==t.size){const s=this.f3.Ix();s.FD(!0);for(const i of t)this.tq(i),i.Sn();s.FD(!1),this.aL().q5(),this.xU()}}QY(e,s,i){if(2<=i)if(s){if(s===e||s.OX(e))throw new Error(`cannot move layer '${e.i3()}' to sub-layer of itself`);s.AX(e,2===i),e.EX(s)}else 2===i?this.wY.push(e):this.wY.unshift(e),e.EX(null);else{const t=s.AN();if(t){if(s.OX(e))throw new Error(`cannot move layer '${e.i3()}' to sub-layer of itself`);t.MX(e,s,0===i),e.EX(t)}else{let t=this.wY.indexOf(s);if(-1===t)throw new Error("cannot find layer to insert by");0===i&&++t,this.wY.splice(t,0,e),e.EX(null)}}}tq(t){const e=t.AN();if(e)return e.RX(t),!0;if(1<this.wY.length){const s=this.wY.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.wY.splice(s,1),!0}return!1}BY(){this.bY=[...this.nN()],this.OY.clear(),this.GY.clear();for(let t=0,e=this.bY.length;t<e;++t){const s=this.bY[t];s.PU(t),this.OY.set(s.i3().toLowerCase(),s),this.GY.set(s.NU(),s)}}eq(){let t=0;for(const e of this.wY){for(const s of e.ON())s.vU(t);e.BN()&&t++}}sq(){return this.wY.at(-1).v8()+1}async xU(){this.BY(),this.eq(),this.PY=this.sq()}iq(){return this.PY}rq(){this.PY=-1}FX(t){const e=[];for(const s of this.wY){const i=s.v8();if(i===t)e.push(s);else if(t<i)break}return e}PX(){return{scrollX:this.KD(),scrollY:this.QD(),scale:this.qD(),angle:this.GetAngle(),vpX:this.eX(),vpY:this.sX()}}vX(t){this.JD(t.scrollX),this.ZD(t.scrollY),this.YD(t.scale),this.zD(t.angle),this.SN(t.vpX,t.vpY)}nq(){let t=this.wY.filter(t=>t.bX())[0];for(;t;){if(!t.tF())return tempColor.la(t.nF()),tempColor.aa(1),tempColor;if(t.jX())return tempColor.Qo(0,0,0,0),tempColor;t=t.wN().filter(t=>t.bX())[0]}return tempColor.Qo(0,0,0,0),tempColor}uU(){return this.DY}hq(){return[...this.CY]}nU(t){if(t.LF())for(const e of t.aq().oq())this.CY.add(e);else this.CY.add(t)}lq(){return[...this.mY]}cq(t,e){if(t===this||!e)return Promise.resolve();t&&(C33.$o(this.mY,t.mY),t.mY.clear());const s=[];for(const i of this.CY)this.mY.has(i)||(s.push(i.uq(e)),this.mY.add(i));return Promise.all(s)}async fq(t){if(t.bU())throw new Error("cannot load textures for family");const e=this.f3.Kg();if(e&&!e.kw()&&!this.mY.has(t)){this.mY.add(t);const s=t.uq(e);this.pq(s),await s,t.Cq(),this.f3.q5()}}pq(t){this.SY.add(t),t.then(()=>this.SY.delete(t)).catch(()=>this.SY.delete(t))}mq(){return Promise.all([...this.SY])}Sq(t){if(t.bU()||0<t.xD())throw new Error("cannot unload textures");const e=this.f3.Kg();e&&this.mY.has(t)&&(this.mY.delete(t),t.gq(e))}_q(t,e){if(t!==this&&e)for(const s of this.mY)s.pU()||t.CY.has(s)||(s.gq(),this.mY.delete(s))}Tq(){this.mY.clear()}async yq(t){const e=this.f3,s=this.nY,i=e.Ix(),r=(this.dY&&(this.pY=i.Eq(this.dY),this.pY.Iq()),s.Aq(this),this.zC=this.hY,this.JC=this.aY,this.yH=e.nx()/2,this.EH=e.ox()/2,this.Xj(),this.XY(),this.HY(),this.eq(),await this.f3.g8().Mq(this.sq(),!0),this.Rq(t),this.f3.wq(!0),this.bq(),this.DY||this.Oq(),this.Gq(this.gY),this.Gq(this._Y),this.Pq(),s.vq(),e.WD(),this.f3.wq(!1),this.f3.xq());if(await Promise.all(r),C33.Vh(r),!e.Lq()){for(const n of this.gY)n.Dq();for(const h of this._Y)h.Nq(this.TY,this.yY);for(const[o,a]of Object.entries(this.xY)){const l=this.f3.Fq(parseInt(o,10));l&&!l.bU()&&l.fU()&&C33.Vh(a)}for(const c of this.gY)c.Bq();for(const u of this._Y)u.Bq()}C33.Vh(this.gY),C33.Vh(this._Y),this.TY.clear(),this.yY.clear(),await Promise.all([...this.CY].map(t=>t.kq(this.f3.Kg()))),t&&(e.q3().dispatchEvent(new C33.Event("beforefirstlayoutstart")),await e.$q(new C33.Event("beforeprojectstart"))),await this.Wq(new C33.Event("beforeanylayoutstart")),e.q3().dispatchEvent(new C33.Event("beforelayoutstart")),await this.$q(new C33.Event("beforelayoutstart")),e.Lq()||await e.o7(C33.Xq.Uq.Hq.Vq,null,null),e.q3().dispatchEvent(new C33.Event("afterlayoutstart")),await this.$q(new C33.Event("afterlayoutstart")),await this.Wq(new C33.Event("afteranylayoutstart")),t&&(e.q3().dispatchEvent(new C33.Event("afterfirstlayoutstart")),await e.$q(new C33.Event("afterprojectstart"))),i.jq(s),await this.mq(),this.DY=!1}Rq(t){for(const e of this.f3.wU())if(!e.bU()&&e.JL())for(const s of e.GD()){const i=s.W5(),r=i.V5(),n=C33.En(r.F4(),0,this.bY.length-1),h=this.bY[n];i.j5(h,!0),h.mU(s)}if(!t)for(const o of this.bY)o.EU(!1)}bq(){for(const t of this.bY)t.cU(this.gY),t.AU()}Oq(){let e=!1;for(const[t,s]of Object.entries(this.xY)){const i=this.f3.Fq(parseInt(t,10));if(i&&!i.bU()&&i.fU())for(const r of s){let t=null;if(!i.JL()||(t=r.hasOwnProperty("instJson")?this.ZY(r.instJson.w.l):this.ZY(r.w.l))){const n=this.f3.dU(i,t,!1,0,0,!0);r.hasOwnProperty("instJson")?n.H_(r.instJson):n.H_(r),e=!0,this._Y.push(n),r.hasOwnProperty("instJson")&&(this.TY.set(n,r),this.yY.set(r.index,n))}}}for(const h of this.bY)h.EU(!0),h.Y5();e&&(this.f3.WD(),this.f3.Yq())}Gq(e){for(const s of e)if(s.LF()){const i=s.W5(),t=s.qq();for(const r of s.IF().aq().zq())if(r!==s.IF()){const n=r.GD();if(n.length>t)s.Jq(n[t]);else{let t;t=i?this.f3.dU(r,i.V5(),!0,i.b_(),i.P_(),!0):this.f3.dU(r,null,!0,0,0,!0),this.f3.WD(),r.Kq(),s.Jq(t),e.push(t)}}}}Pq(){for(const t of this.EY){const e=this.f3.rU(t[1]);e.LF()||this.f3.dU(t,null,!0)}}Zq(){let s=[],i=this.EY,r=0;for(let t=0,e=i.length;t<e;++t){const n=i[t],h=this.f3.rU(n[1]);h.pU()?h.LF()&&h.aq().Qq()||s.push(this.f3.dU(n,null,!0)):(i[r]=n,++r)}C33.Wh(i,r),this.f3.WD(),this.Gq(s)}RU(t,e,s,i,r,n,h){if(s)return s.RU(t,e,r,n,i,h);{const o=[];for(const a of this.bY)o.push(a.RU(t,e,r,n,i,h));return o.flat()}}async ez(){const t=this.nY;this.f3.Lq()||(await this.Wq(new C33.Event("beforeanylayoutend")),await this.$q(new C33.Event("beforelayoutend")),await this.f3.o7(C33.Xq.Uq.Hq.sz,null,null),await this.$q(new C33.Event("afterlayoutend")),await this.Wq(new C33.Event("afteranylayoutend"))),t.iz(!0),this.f3.Ix().rz(),this.DY||this.nz();for(const e of this.bY)e.MU();for(const s of this.f3.wU())if(!(s.pU()||s.JL()||s._D().qL()||s.bU())){for(const i of s.GD())this.f3.OF(i);this.f3.WD()}t.iz(!1),t.S5()===this&&t.Aq(null)}hz(t,e){const s=t.IF().NU().toString(),i=(this.xY.hasOwnProperty(s)||(this.xY[s]=[]),this.xY[s]),r={index:e,instJson:t.V_(),sceneGraphJson:{children:[]}};i.push(r),this.LY.set(t,r)}oz(t){const e=this.LY.get(t);for(const s of t.az()){const i=this.LY.get(s);i&&e.sceneGraphJson.children.push({index:i.index,flags:C33.cz.lz(s.W5())})}}nz(){this.LY.clear();let t=0;for(const e of this.bY){e.LX();for(const s of e.X5()){const i=s.IF();!i.pU()&&i.fU()&&(this.hz(s,t),t++)}}for(const r of this.bY)for(const n of r.X5()){const h=n.IF();!h.pU()&&h.fU()&&this.oz(n)}this.LY.clear()}uz(){this.xY={},this.DY=!0}AG(){return this.gH}jX(){const t=this.f3,e=t.Kg().Eg();return"low"===t.g8()._j()||e&&t.gj()||this.kH.YX()||e&&t.SX()}fz(t){const e=this.f3.g8();if(this.jX()){t.PG(null),t.SG(0,0,0,0);const s={bT:this.f3.ux(),yy:t.F2()||this.f3.gj()||this.kH.YX(),Sj:!!t.F2()&&this.f3.gj()};"low"===e._j()&&(s.width=e.lj(),s.height=e.cj()),this.gH=this.f3.Tj(s)}else this.gH=null}pz(t){this.f3.Cz(t)&&(t.TG(!1),t.PG(null),t.Y2(),t.vG(this.gH))}mz(t){this.jX()&&(t.TG(!1),this.Sz(t,this.gH))}gz(t){t.PG(this.gH),t.lu(this.nq()),this.f3.SX()&&t._G();const e=this.FX(0);this.yj(t,this.gH,e,!0),t.F2()&&t.StartMeasuringRenderPassTime(0,1),this.mz(t),this.gH=null}_z(t,e){let s=null;this.f3.Cz(t)&&(s=this.gH),t.PG(s),t.SG(0,0,0,0),this.f3.SX()&&t._G();const i=this.FX(e);this.yj(t,s,i,!0),this.pz(t),t.Cg(),this.f3.g8().Tz(e)}yj(t,i,e,r){const n=e.filter(t=>t.bX());for(let e=0,s=n.length;e<s;){const h=n[e];if(h.TX()&&!h.qX()){tempRender3dList.push(h);for(let t=e+1;t<s;++t){const o=n[t];if(!o.TX()||o.qX())break;tempRender3dList.push(n[t])}if(2<=tempRender3dList.length||1===tempRender3dList.length&&tempRender3dList[0].wX()){this.yz(t,i,tempRender3dList),e+=tempRender3dList.length,C33.Vh(tempRender3dList);continue}C33.Vh(tempRender3dList)}h.ST(t,i,r&&0===e),++e}}Sz(t,e){const s=this.kH.VU(),i=this.f3;0===s.length?(t.PG(null),t.Y2(),t.vG(e),t.LG(e),i.HH(e)):(tempLayoutRect.set(0,0,i.hX(),i.aX()),this.N4().xv(t,null,{Lv:this,Dv:3,devicePixelRatio:this.f3.Wj(),Nv:this.f3.Hj()*this.qD(),Fv:this.GetAngle(),r4:tempLayoutRect,n4:null,yP:!0}))}yz(i,r,t){t[0].tF()||(tempColor.la(t[0].nF()),tempColor.aa(1),i.lu(tempColor));this.f3.g8();i.TG(!0);const n=tempInstanceList1,h=tempInstanceList2,o=tempInstanceList3;for(const a of t)a.LX(),a.pX(n);const e=t[0],s=e.dj(i);e.mj(i);for(let e=0,s=n.length;e<s;){const l=n[e],c=l.W5(),u=c.V5();if(c.xN()&&c.Gj(u.Oj())){(!l.Pj()||0<c.vj())&&o.push(l);const f=l.W5().W7();h.push(l);let t=e+1;for(;t<s;++t){const d=n[t],p=d.W5();if(p.xN()&&p.Gj(p.V5().Oj())){if(p.W7()!==f)break;(d.Pj()?(0<p.vj()&&o.push(d),h):o).push(d)}}if(1!==h.length||h[0].xj()){this.Ez(i,r,h);for(let t=0,e=o.length;t<e;++t){const C=o[t],m=C.W5(),S=m.V5();m.Dj(!0),MaybePrepareLayerDraw2(S,i),S.bj(C,m,i,r),m.Dj(!1)}}else{MaybePrepareLayerDraw2(u,i),u.bj(l,c,i,r);for(let t=0,e=o.length;t<e;++t){const g=o[t];if(g!==l){const _=g.W5(),T=_.V5();MaybePrepareLayerDraw2(T,i),T.bj(g,_,i,r)}}}e=t,C33.Vh(h),C33.Vh(o)}else++e}s&&i.VG(s),C33.Vh(n),lastLayerPreparedForDrawing=null}Ez(s,i,r){s.NG();for(let t=0,e=r.length;t<e;++t){const n=r[t],h=n.W5(),o=h.V5();h.Nj(!0),MaybePrepareLayerDraw2(o,s),o.Fj(n,h,s)}s.FG();for(let t=0,e=r.length;t<e;++t){const a=r[t],l=a.W5(),c=l.V5();MaybePrepareLayerDraw2(c,s),c.bj(a,l,s,i),l.Nj(!1)}s.kG()}Qj(){const t={sx:this.KD(),sy:this.QD(),s:this.qD(),a:this.GetAngle(),w:this.dC(),h:this.IC(),ortho:this.EN(),vpX:this.eX(),vpY:this.sX(),fv:this.DY,persist:this.xY,fx:this.kH.V_(),layers:{},dynamicLayers:[]};for(const e of this.bY)if(e.FU()){const s=e.AN();t.dynamicLayers.push({sid:e.NU(),name:e.i3(),parentSid:s?s.NU():null,siblingIndex:e.LU(),data:e.Qj()})}else t.layers[e.NU().toString()]=e.Qj();return t}tY(t){this.yH=t.sx,this.EH=t.sy,this._H=t.s,this.TH=t.a,this.zC=t.w,this.JC=t.h,this.cY=!!t.ortho,t.hasOwnProperty("vpX")&&(this.uY=t.vpX),t.hasOwnProperty("vpY")&&(this.fY=t.vpY),this.DY=!!t.fv,this.xY=t.persist,this.kH.H_(t.fx),this.XH=!0;for(const[e,s]of Object.entries(t.layers)){const i=parseInt(e,10),r=this.ZY(i);r&&r.tY(s)}if(t.hasOwnProperty("dynamicLayers")){this.CN(),this.f3.WD();const n=new Map,h=t.dynamicLayers;for(let t=h.length-1;0<=t;--t){const o=h[t],a=o.sid,l=o.name,c=o.parentSid,u=o.siblingIndex,f=o.data;if(this.BY(),!this.KY(l)&&!this.ZY(a)){let t,e;if(null===c)t=null,e=this.wY;else{if(!(t=this.ZY(c)))continue;e=t.wN()}const d=C33.mn(C33.QV,this,t,{name:l,sid:a,XV:!0});e.push(d);let s=n.get(e);s||(s=[],n.set(e,s)),s.push({x7:d,siblingIndex:u}),d.tY(f)}}for(const[p,C]of n){C.sort((t,e)=>t.siblingIndex-e.siblingIndex);for(const m of C){let t=m.x7,e=m.siblingIndex,s=p.indexOf(t);p.splice(s,1),p.splice(e,0,t)}}}this.xU(),this.XY(),this.HY()}g5(){return this.NY}_x(){return this.FY}Iz(t){t.layout=this.g5();const e=this.f3,s=e.Az()&&!e.Ix().kD();s&&C3Debugger.StartMeasuringScriptTime(),this.FY.dispatchEvent(t),s&&C3Debugger.AddScriptTime()}$q(t){return t.layout=this.g5(),this.FY.if(t)}Wq(t){return t.layout=this.g5(),this.f3.$q(t)}Mz(){this.Rz(this.wY)}Rz(t,e=0){const s=t.slice(0);s.reverse();for(const i of s)console.log("\t".repeat(e)+"- "+i.i3()),this.Rz(i.wN(),e+1)}}}{const C33=self.Ve;C33.wz=class LayoutManager extends C33.pn{constructor(t){super(),this.f3=t,this.bz=[],this.Oz=new Map,this.Gz=new Map,this.Pz=null,this.vz=[],this.xz=null,this.Lz=0,this.Dz=null}Sn(){this.f3=null,this.Pz=null,this.xz=null,this.Dz=null,C33.Vh(this.bz),this.Oz.clear(),this.Gz.clear(),C33.Vh(this.vz)}mE(t){const e=C33.mn(C33.rY,this,this.bz.length,t);this.bz.push(e),this.Oz.set(e.i3().toLowerCase(),e),this.Gz.set(e.NU(),e)}aL(){return this.f3}Nz(t){this.xz=t}Fz(){if(this.xz)return this.xz;if(this.bz.length)return this.bz[0];throw new Error("no first layout")}Bz(t){return this.Oz.get(t.toLowerCase())||null}kz(t){return this.Gz.get(t)||null}$z(t){return t=C33.En(Math.floor(t),0,this.bz.length-1),this.bz[t]}y5(t){return"number"==typeof t?this.$z(t):this.Bz(t.toString())}I5(){return this.bz}Aq(t){this.Pz=t}S5(){return this.Pz}Wz(t){if(this.vz.includes(t))throw new Error("layout already running");this.vz.push(t)}Vz(t){const e=this.vz.indexOf(t);if(-1===e)throw new Error("layout not running");this.vz.splice(e,1)}*Uz(){this.Pz&&(yield this.Pz),this.vz.length&&(yield*this.vz)}Xz(t){return this.Pz===t||this.vz.includes(t)}iz(t){if(t)this.Lz++;else{if(this.Lz<=0)throw new Error("already unset");this.Lz--}}$D(){return 0<this.Lz}R5(t){this.Dz=t}vq(){this.Dz=null}M5(){return!!this.Dz}jz(){return this.Dz}Yz(){const t=this.S5();t&&t.XY()}qz(){const t=this.S5();t&&t.HY()}}}{const C33=self.Ve,NAMES_REGEXP=new RegExp("<(.+?)>","g");C33.zz=class TimelineManager extends C33.pn{constructor(t){super(),this.f3=t,this.Jz=C33.mn(C33.Kz),this.Zz=null,this.Qz=[],this.tJ=new Map,this.eJ=new Map,this.sJ=new Map,this.iJ=[],this.rJ=[],this.nJ=[],this.hJ=!1,this.oJ=!1,this.aJ=!1,this.lJ=()=>this.cJ(),this.uJ=()=>this.fJ(),this.dJ=()=>this.pJ(),this.CJ=()=>this.mJ(),this.SJ=t=>this.gJ(t.CB),this._J=t=>this.TJ(),this.yJ=t=>this.EJ(),this.IJ=t=>this.AJ(),this.MJ=[],this.RJ=0}Sn(){this.wJ(),this.lJ=null,this.uJ=null,this.dJ=null,this.CJ=null,this.SJ=null,this.yJ=null;for(const t of this.Qz)t.fk(),t.Sn();C33.Vh(this.Qz),this.Qz=null,this.Jz.Sn(),this.Jz=null,C33.Vh(this.iJ),this.iJ=null,C33.Vh(this.rJ),this.rJ=null,C33.Vh(this.nJ),this.nJ=null,this.tJ.clear(),this.tJ=null,this.eJ.clear(),this.eJ=null,this.sJ.clear(),this.sJ=null,C33.Vh(this.MJ),this.MJ=null,this.f3=null}bJ(){const t=this.f3.q3();t.addEventListener("pretick",this.lJ),t.addEventListener("tick2",this.uJ),t.addEventListener("beforelayoutchange",this.dJ),t.addEventListener("layoutchange",this.CJ),t.addEventListener("instancedestroy",this.SJ),t.addEventListener("beforeload",this._J),t.addEventListener("afterload",this.yJ),t.addEventListener("afterlayoutstart",this.IJ)}wJ(){const t=this.f3.q3();t.removeEventListener("pretick",this.lJ),t.removeEventListener("tick2",this.uJ),t.removeEventListener("beforelayoutchange",this.dJ),t.removeEventListener("layoutchange",this.CJ),t.removeEventListener("instancedestroy",this.SJ),t.removeEventListener("beforeload",this._J),t.removeEventListener("afterload",this.yJ),t.removeEventListener("afterlayoutstart",this.IJ)}mE(t){this.Jz._u(t);const e=C33.GJ.OJ(t,this);this._u(e),this.PJ(e),this.sJ.set(e.i3(),0)}vJ(t){const e=this.xJ(),s=t.BF(),i=e.cs(s),r=C33.GJ.vJ(s+":"+this.sJ.get(s),i,this);return this.LJ(s),this._u(r),r}LJ(t){this.sJ.set(t,this.sJ.get(t)+1)}DJ(){for(const t of this.Qz)if(!t.NJ()){const e=t.BF();this.LJ(e)}}FJ(){for(const t of this.sJ.keys())this.sJ.set(t,0)}_u(t){this.Qz.push(t),this.tJ.set(t.i3().toLowerCase(),t)}Gf(t){t.BJ(),t.NJ()||(C33.qh(this.Qz,t),C33.qh(this.iJ,t),C33.qh(this.rJ,t),C33.qh(this.nJ,t),this.tJ.delete(t.i3().toLowerCase()),this.kJ(t),t.ck())||t.Sn()}n7(t){this.f3.n7(t,this.Zz,null)}aL(){return this.f3}xJ(){return this.Jz}$J(t){this.Zz=t}WJ(){return this.Zz}*VJ(){for(const t of this.Qz)yield t}*HJ(){for(const t of this.rJ)yield t}UJ(t,e){this.eJ.has(t)||this.eJ.set(t,new Set),this.eJ.get(t).add(e)}PJ(t){for(const e of t.XJ())this.UJ(e,t)}kJ(t){for(const[e,s]of this.eJ.entries())s.has(t)&&(s.delete(t),0===s.size)&&this.eJ.delete(e)}jJ(t){if(this.eJ.has(t))return this.eJ.get(t)}YJ(t,e){if(e)for(const s of this.Qz){const i=e.every(t=>s.qJ(t.CB,t.trackId));if(i&&s.i3().includes(t.i3()))return s}}zJ(t){return this.tJ.get(t.toLowerCase())||null}JJ(t){for(const e of this.iJ)if(e.i3()===t)return e;for(const s of this.rJ)if(s.i3()===t)return s;return null}*KJ(s){if(NAMES_REGEXP.test(s)){NAMES_REGEXP.lastIndex=0;let t,e=new Set;do{if(t=NAMES_REGEXP.exec(s)){const i=t[1].split(",");for(const r of i)e.add(r)}}while(t);for(const n of e.values()){const h=this.zJ(n);h&&(yield h)}e.clear()}else{const t=this.zJ(s);t&&(yield t)}}*ZJ(t){for(const e of this.Qz)e.pk(t)&&(yield e)}QJ(t){this.iJ.includes(t)||this.iJ.push(t),this.tK()}eK(t){C33.qh(this.rJ,t),this.sK()}iK(t){this.rJ.includes(t)?(t.rK(!0),t.nK(!1),t.hK(!1)):(t.rK(!1),t.nK(!0),t.hK(!1),this.iJ.includes(t)||this.iJ.push(t)),this.tK()}oK(t){t.rK(!1),t.nK(!1),t.aK(),C33.qh(this.iJ,t),this.sK()}lK(t){t.rK(!1),t.nK(!1),this.rJ.includes(t)&&(t.hK(!0),this.nJ.push(t),C33.qh(this.rJ,t)),this.iJ.includes(t)&&t.hK(!0)}cK(t){t.rK(!1),t.nK(!1),t.hK(!1),t.Ek(1),C33.qh(this.rJ,t)}uK(t){this.lK(t),t.aK()}cJ(){if(!this.aL().Lq()&&this.hJ&&!this.oJ){for(this.aJ=!0;this.iJ.length;){const t=this.iJ.pop();(t.fK()?(t.dK(),this.nJ):(t.pK(),this.rJ)).push(t),0!==t.CK()&&(this.RJ=1)}const e=this.f3.mK(),s=this.f3.SK(),i=this.f3.Zx();for(let t=this.rJ.length-1;0<=t;t--){const r=this.rJ[t];r&&r.gK(e,i,s)}this.aJ=!1,0!==this.RJ&&this.aL().q5()}}fJ(){if(!this.aL().Lq()&&this.hJ&&!this.oJ){let s;for(let t=0,e=this.nJ.length;t<e;t++){const i=this.nJ[t];s=s||new Set,i.BJ(),this._K(i),s.add(i)}if(s){C33.Kh(this.nJ,s);for(let t=this.RJ=0,e=this.rJ.length;t<e;t++)if(0!==this.rJ[t].CK()){this.RJ=1;break}}this.sK()}}_K(t){t.ck()||t.TK()&&t.yK()&&t.EK()&&t.IK()}tK(){this.hJ||(this.hJ=!0)}sK(){this.nJ.length||this.rJ.length||this.iJ.length||this.aJ||(this.hJ=!1)}pJ(){for(this.oJ=!0;this.iJ.length;)this.oK(this.iJ.pop());const t=new Set;for(const e of this.rJ){const s=e.pJ();s&&(e.BJ(),t.add(e))}C33.Kh(this.rJ,t),t.clear();for(const i of this.nJ){const r=i.pJ();r&&(i.BJ(),t.add(i))}C33.Kh(this.nJ,t),this.sK();for(const n of this.Qz)n.AK()}mJ(){this.oJ=!1}gJ(t){const e=t.IF(),s=this.jJ(e);if(s)if(this.f3.Lq())this.MJ.push(t);else for(const i of s)i.NJ()||(i.ck()?this.Gf(i):i.TK()||(this._K(i),this.Gf(i)))}TJ(){for(const t of this.iJ.map(t=>t))this._K(t),this.Gf(t);for(const e of this.rJ.map(t=>t))this._K(e),this.Gf(e)}EJ(){for(const t of this.MJ)this.gJ(t);C33.Vh(this.MJ);for(const e of this.Qz)e.EJ()}AJ(){const t=this.f3.T5(),e=t.S5();if(e)for(const s of this.Qz){const i=s.MK();i&&e.i3()===i&&this.iK(s)}}Qj(){return{timelinesJson:this.RK(),scheduledTimelinesJson:this.wK(),playingTimelinesJson:this.bK(),markedForRemovalTimelinesJson:this.GK(),hasRuntimeListeners:this.hJ,changingLayout:this.oJ,isTickingTimelines:this.aJ}}tY(t){t&&(this.FJ(),this.PK(t.timelinesJson),this.vK(t.scheduledTimelinesJson),this.xK(t.playingTimelinesJson),this.LK(t.markedForRemovalTimelinesJson),this.hJ=!t.hasRuntimeListeners,this.oJ=!!t.changingLayout,this.aJ=!!t.isTickingTimelines,this.DJ(),this.tK(),this.sK())}RK(){return this.Qz.map(t=>t.Qj())}PK(t){for(const e of t){let t=this.zJ(e.name);if(t)t.tY(e);else{const s=this.DK(e);if(!s)continue;const i=this.zJ(s);(t=this.vJ(i)).tY(e)}t.NK()||this.Gf(t)}}DK(t){const e=t.name,s=e.split(":");return s&&2===s.length?s[0]:null}wK(){return this.FK(this.iJ)}vK(t){this.BK(t,this.iJ)}bK(){return this.FK(this.rJ)}xK(t){this.BK(t,this.rJ)}GK(){return this.FK(this.nJ)}LK(t){this.BK(t,this.nJ)}kK(t,e){if(e)for(const s of e)if(s===t.i3())return!0;return!1}FK(t){return t.map(t=>t.i3())}BK(t,e){const s=new Set;for(const i of e)this.kK(i,t)||s.add(i);if(C33.Kh(e,s),t)for(const r of t){const n=this.zJ(r);if(n){const h=e.find((e=>t=>t.i3()===e)(r));h||e.push(n)}}}}}{const C33=self.Ve,STEPS=100,LENGTH_STEP_SIZE=.01,BEZIER_STEP_SIZE=25,REFINE_ITERATIONS=20,LOOKUP_STEPS_FROM_LAST=5,TANGENT_RESULT=[0,0],MAP_RESULT=[0,0],SHORT_PROJECTION_RESULT=[0,0],PROJECTION_RESULT=[0,0,0,0,0],REFINE_LUT=new Array(4),REFINE_LUT_OBJECTS=[{x:0,y:0,t:0,Gt:0},{x:0,y:0,t:0,Gt:0},{x:0,y:0,t:0,Gt:0}],REFINE_RESULT={x:0,y:0,t:0,Gt:0};C33.$K=class TimelineInfo{constructor(t,e){this.WK=!1,this.VK=t,this.HK=[];let s=null;if(s=e?this.VK.UK(e):C33.first(this.VK.XK())){const i=s.kk("offsetX"),r=s.kk("offsetY");if(i&&r){this.jK=i,this.YK=r;const n=i.qK(),h=r.qK();for(let t=1,e=Math.min(n.length,h.length);t<e;++t){const o=n[t],a=(o.zK(),o.JK()),l=h[t],c=(l.zK(),l.JK());a&&"cubic-bezier"===a.KK()&&c&&"cubic-bezier"===c.KK()?this.HK.push(C33.mn(C33.ZK,a,c,o,l,this.HK.length)):(a&&"line"===a.KK()&&c&&c.KK(),this.HK.push(C33.mn(C33.QK,o,l,this.HK.length)))}this.WK=!0}}}Sn(){for(const t of this.HK)t.Sn();C33.Vh(this.HK),this.HK=null,this.VK=null,this.jK=null,this.YK=null}tZ(){return this.WK}eZ(){return this.HK}sZ(t){const e="relative"===this.jK.iZ()?t.b_():0,s="relative"===this.YK.iZ()?t.P_():0;for(const i of this.HK)i.sZ(e,s)}pm(e,s,t){let i=NaN,r=this.HK.length;for(let t=0;t<r;t++){const n=this.HK[t];if("cubic-bezier"===n.gI()){const h=n.pm(e,s);(isNaN(i)||h[3]<i)&&(i=h[3],SHORT_PROJECTION_RESULT[0]=h[2],SHORT_PROJECTION_RESULT[1]=n.F4())}}return SHORT_PROJECTION_RESULT}rZ(e,s,t){const i=t.nZ;C33.Si(i[0])||(i[0]=0),C33.Si(i[1])||(i[1]=1);let r=NaN,n=this.HK.length;for(let t=0;t<n;t++){const h=this.HK[t];if("cubic-bezier"===h.gI()){const o=h.hZ(e,s,i);(isNaN(r)||o[3]<r)&&(r=o[3],SHORT_PROJECTION_RESULT[0]=o[2],SHORT_PROJECTION_RESULT[1]=h.F4())}}return SHORT_PROJECTION_RESULT}oZ(t,e){return this.HK[e].oZ(t)}aZ(t,e){return this.HK[e].aZ(t)}},C33.ZK=class TimelineCubicBezierSegmentInfo{constructor(t,e,s,i,r){this.tm=r;const n=t.lZ("cubic-bezier"),h=s.lZ("cubic-bezier"),o=e.lZ("cubic-bezier"),a=i.lZ("cubic-bezier");this.cZ=t.uZ(),this.fZ=e.uZ(),this.dZ=t.uZ()+n.pZ(),this.CZ=e.uZ()+o.pZ(),this.mZ=s.uZ()+h.SZ(),this.gZ=i.uZ()+a.SZ(),this._Z=s.uZ(),this.TZ=i.uZ(),this.yZ=0,this.EZ=0,this.IZ=0,this.AZ=0,this.MZ=0,this.RZ=0,this.wZ=0,this.bZ=0,this.OZ=0,this.GZ=0,this.PZ=0,this.vZ=0,this.xZ=0,this.LZ=0,this.DZ=0,this.NZ=0,this.FZ=0,this.BZ=0,this.kZ=0,this.$Z=0,this.WZ=NaN,this.WK=!1,this.VZ=STEPS,this.HZ=new Array(this.VZ+1),this.HZ[0]=0,this.UZ=0,this.XZ=[],this.jZ=[];for(let t=0;t<STEPS;t++)this.jZ.push({x:0,y:0,t:0,Gt:0});this.YZ()}Sn(){C33.Vh(this.HZ),this.HZ=null,C33.Vh(this.XZ),this.XZ=null,C33.Vh(this.jZ),this.jZ=null}gI(){return"cubic-bezier"}F4(){return this.tm}qZ(){return Math.floor(this.UZ/BEZIER_STEP_SIZE)}zZ(){return 1/this.qZ()}sZ(t,e){this.JZ=t,this.KZ=e,this.HZ=new Array(this.VZ+1),this.HZ[0]=0,this.YZ(),this.yZ=this.cZ+this.JZ,this.EZ=this.fZ+this.KZ,this.IZ=this.dZ+this.JZ,this.AZ=this.CZ+this.KZ,this.MZ=this.mZ+this.JZ,this.RZ=this.gZ+this.KZ,this.wZ=this._Z+this.JZ,this.bZ=this.TZ+this.KZ,this.OZ=3*(this.IZ-this.yZ),this.GZ=3*(this.AZ-this.EZ),this.PZ=3*(this.MZ-this.IZ),this.vZ=3*(this.RZ-this.AZ),this.xZ=3*(this.wZ-this.MZ),this.LZ=3*(this.bZ-this.RZ),this.DZ=3*(this.IZ-this.yZ),this.NZ=3*(this.yZ+this.MZ-2*this.IZ),this.FZ=this.wZ-this.yZ+3*(this.IZ-this.MZ),this.BZ=3*(this.AZ-this.EZ),this.kZ=3*(this.EZ+this.RZ-2*this.AZ),this.$Z=this.bZ-this.EZ+3*(this.AZ-this.RZ)}Map(t){if(!this.WK)return NaN;const e=this.ZZ(t);return MAP_RESULT[0]=this.QZ(e),MAP_RESULT[1]=this.tQ(e),MAP_RESULT}pm(t,e){const s=this.eQ(STEPS),i=this.sQ(t,e,s),r=this.iQ(t,e,s,i);return PROJECTION_RESULT[0]=r.x,PROJECTION_RESULT[1]=r.y,PROJECTION_RESULT[2]=r.t,PROJECTION_RESULT[3]=r.Gt,PROJECTION_RESULT}hZ(t,e,s){const i=this.eQ(STEPS),r=this.rQ(t,e,i,s),n=this.iQ(t,e,i,r);return PROJECTION_RESULT[0]=n.x,PROJECTION_RESULT[1]=n.y,PROJECTION_RESULT[2]=n.t,PROJECTION_RESULT[3]=n.Gt,PROJECTION_RESULT}oZ(t){const e=1-t,s=e*e,i=2*e*t,r=t*t,n=s*this.OZ+i*this.PZ+r*this.xZ,h=s*this.GZ+i*this.vZ+r*this.LZ,o=Math.hypot(n,h);return TANGENT_RESULT[0]=n/o,TANGENT_RESULT[1]=h/o,TANGENT_RESULT}aZ(t){const e=1-t,s=e*e,i=2*e*t,r=t*t,n=s*this.OZ+i*this.PZ+r*this.xZ,h=s*this.GZ+i*this.vZ+r*this.LZ;return Math.atan2(h,n)}ZZ(r){if(this.WK){let t=r*this.HZ[this.VZ],e=0,s=this.VZ,i=0;for(;e<s;)i=e+((s-e)/2|0),this.HZ[i]<t?e=i+1:s=i;this.HZ[i]>t&&i--;const n=this.HZ[i];return n===t?i/this.VZ:(i+(t-n)/(this.HZ[i+1]-n))/this.VZ}}QZ(t){return this.WK?self.Eu.Fu("cubicbezier")(t,this.cZ+this.JZ,this.dZ+this.JZ,this.mZ+this.JZ,this._Z+this.JZ):NaN}tQ(t){return this.WK?self.Eu.Fu("cubicbezier")(t,this.fZ+this.KZ,this.CZ+this.KZ,this.gZ+this.KZ,this.TZ+this.KZ):NaN}eQ(e){if(e=e||STEPS,!(this.XZ.length>=e)){this.XZ=new Array(e),e++;for(let t=0;t<e-1;t++){const s=t/(e-1),i=s**2,r=s**3,n=this.DZ*s,h=this.NZ*i,o=this.FZ*r,a=this.BZ*s,l=this.kZ*i,c=this.$Z*r,u=this.yZ+n+h+o,f=this.EZ+a+l+c;this.jZ[t].x=u,this.jZ[t].y=f,this.jZ[t].t=s,this.jZ[t].Gt=0,this.XZ[t]=this.jZ[t]}}return this.XZ}sQ(e,s,i,t=0,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.WZ))for(let t=0;t<STEPS;t++){const h=i[t],o=h.x-e,a=h.y-s;h.Gt=o*o+a*a,h.Gt<r&&(r=h.Gt,n=t)}else{for(let t=this.WZ;t<this.WZ+LOOKUP_STEPS_FROM_LAST&&!(t>=i.length);t++){const l=i[t],c=l.x-e,u=l.y-s;l.Gt=c*c+u*u,l.Gt<r&&(r=l.Gt,n=t)}for(let t=this.WZ;t>this.WZ-LOOKUP_STEPS_FROM_LAST&&!(t<0);t--){const f=i[t],d=f.x-e,p=f.y-s;f.Gt=d*d+p*p,f.Gt<r&&(r=f.Gt,n=t)}}return this.WZ=n}rQ(e,s,i,r,n=Number.MAX_SAFE_INTEGER){let h=0;if(isNaN(this.WZ))for(let t=0;t<STEPS;t++){const o=i[t],a=o.x-e,l=o.y-s;o.Gt=a*a+l*l,o.t>=r[0]&&o.t<=r[1]&&o.Gt<n&&(n=o.Gt,h=t)}else{for(let t=this.WZ;t<this.WZ+LOOKUP_STEPS_FROM_LAST&&!(t>=i.length);t++){const c=i[t],u=c.x-e,f=c.y-s;c.Gt=u*u+f*f,c.t>=r[0]&&c.t<=r[1]&&c.Gt<n&&(n=c.Gt,h=t)}for(let t=this.WZ;t>this.WZ-LOOKUP_STEPS_FROM_LAST&&!(t<0);t--){const d=i[t],p=d.x-e,C=d.y-s;d.Gt=p*p+C*C,d.t>=r[0]&&d.t<=r[1]&&d.Gt<n&&(n=d.Gt,h=t)}}return this.WZ=h}iQ(h,o,a,l){let c=a[l],t=1,u=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,e=0===l?0:l-1,s=l===t-1?t-1:l+1,i=a[e].t,r=a[s].t,n=(r-i)/4;if(n<.001)break;REFINE_LUT[0]=a[e];for(let t=1;t<=2;t++){const f=i+t*n,d=f**2,p=f**3,C=this.DZ*f,m=this.NZ*d,S=this.FZ*p,g=this.BZ*f,_=this.kZ*d,T=this.$Z*p,y=this.yZ+C+m+S,E=this.EZ+g+_+T,I=y-h,A=E-o,M=I*I+A*A;if(M<u){u=M,l=t,REFINE_RESULT.x=y,REFINE_RESULT.y=E,REFINE_RESULT.t=f,REFINE_RESULT.Gt=M,c=REFINE_RESULT;break t}const R=REFINE_LUT_OBJECTS[t-1];R.x=y,R.y=E,R.t=f,R.Gt=M,REFINE_LUT[t]=R}REFINE_LUT[3]=a[s],a=REFINE_LUT}while(t++<REFINE_ITERATIONS);return c}YZ(){this.WK=!0;let e=this.QZ(0),s=this.tQ(0),i=0;for(let t=1;t<=this.VZ;t++){const r=this.QZ(t*LENGTH_STEP_SIZE),n=this.tQ(t*LENGTH_STEP_SIZE),h=e-r,o=s-n;i+=Math.hypot(h,o),this.HZ[t]=i,e=r,s=n}this.UZ=i}},C33.QK=class TimelineLineSegmentInfo{constructor(t,e,s){this.tm=s,this.nQ=t.uZ(),this.hQ=e.uZ(),this.JZ=0,this.KZ=0}Sn(){}gI(){return"line"}F4(){return this.tm}sZ(t,e){this.JZ=t,this.KZ=e}b_(){return this.nQ+this.JZ}P_(){return this.hQ+this.KZ}}}{const C33=self.Ve,PING_PONG_BEGIN=0,PING_PONG_END=1;C33.GJ=class Timeline extends C33.pn{constructor(t,e,s){super(),this.f3=s.aL(),this.oQ=s,this.aQ=e,this.Tn=t,this.lQ=[],this.cQ=0,this.uQ=null,this.fQ=0,this.dQ(),this.pQ=null,this.CQ=null,this.mQ=0,this.SQ=0,this.gQ=1,this._Q=PING_PONG_BEGIN,this.TQ=1,this.yQ=!1,this.EQ=!1,this.IQ=!1,this.AQ=!0,this.MQ=!1,this.RQ=!1,this.wQ=-1,this.bQ=!1,this.OQ=!1,this.GQ=!1,this.PQ=!1,this.vQ=NaN,this.xQ=[""],this.LQ="",this.DQ=!1,this.RJ=0,this.NQ=0,this.FQ=null}static OJ(t,e){const s=e.xJ(),i=s.BQ(),r=s.cs(t[i]),n=C33.mn(C33.GJ,t[i],r,e);return n.kQ(!0),n}static vJ(t,e,s){return C33.mn(C33.GJ,t,e,s)}Sn(){if(!this.ck()){const t=this.f3.q3();this.oQ.oK(this),this.oQ.uK(this);for(const e of this.lQ)e.Sn();C33.Vh(this.lQ),this.lQ=null,this.f3=null,this.oQ=null,this.aQ=null,this.MQ=!0,this.pQ=null,this.CQ=null,this.$Q(t)}}$Q(t){const e=C33.mn(C33.Event,"timelinestatereleased");e.WQ=this,t.dispatchEvent(e)}gI(){return 0}dQ(){for(const t of this.aQ.HQ().VQ())this.cQ=this.lQ.push(C33.UQ.mE(this,t))}XQ(){return this.oQ}aL(){return this.f3}XK(){return this.lQ}jQ(i,r,n,h){if(this.NQ){let s;for(let e=0;e<this.lQ.length;e++){let t=this.lQ[e];if(i===t.xk()){const o=t.kk(n);o&&r.constructor===o.YQ().constructor&&o.iZ()===h.iZ()&&(s=s||[]).push(o)}}return s}}NK(){return!!this.lQ.length}UK(t){for(const e of this.lQ)if(C33.Ar(e.Fk(),t))return e;return null}qQ(t){for(const e of this.lQ)if(!e.zQ()&&C33.Ar(e.i3(),t))return e;return null}M$(t){this.Tn=t}i3(){return this.Tn}JQ(){return this.aQ}BF(){return this.aQ.i3()}Sk(){return this.aQ.Sk()}mk(t){this.aQ.mk(t)}KQ(){return this.aQ.KQ()}ZQ(t){this.aQ.ZQ(t)}QQ(){return this.aQ.QQ()}ttt(t){this.aQ.ttt(t)}iZ(){return this.aQ.iZ()}ett(t){this.aQ.iZ(t)}vk(t){for(const e of this.XK())e.vk(t)}_k(){return this.aQ._k()}gk(t){return this.aQ.gk(t)}yk(){return this.aQ.yk()}Tk(t){return this.aQ.Tk(t)}bB(){return this.aQ.bB()}stt(t){return this.aQ.stt(t)}Ek(t){return this.gQ=t}Ik(){return this.gQ}MK(){return this.aQ.MK()}itt(){return this.aQ.itt()}ntt(){return this.aQ.ntt()}htt(){return this._Q}ott(){return!this.IsPlaying()||0<this.gQ}Mk(){return this.pQ||(this.pQ=new Promise(t=>{this.CQ=t})),this.pQ}aK(){this.pQ&&(this.CQ(),this.pQ=null,this.CQ=null)}att(t){this.xQ=C33.GJ.ltt(t),this.DQ=!0}Ak(){return this.xQ}ctt(){return this.DQ&&(this.LQ=this.xQ.join(" ")),this.DQ=!1,this.LQ}pk(t){if(!this.xQ)return!1;if(!this.xQ.length)return!1;const e=C33.GJ.ltt(t);return!!e&&!!e.length&&e.every(C33.GJ.utt,this)}ftt(){C33.Xq.Timeline&&this.constructor===C33.GJ&&(C33.Xq.Timeline.Hq.PushTriggerTimeline(this),this.oQ.n7(C33.Xq.Timeline.Hq.OnTimelineStarted),this.oQ.n7(C33.Xq.Timeline.Hq.OnTimelineStartedByName),this.oQ.n7(C33.Xq.Timeline.Hq.OnTimelineStartedByTags),this.oQ.n7(C33.Xq.Timeline.Hq.OnAnyTimelineStarted),C33.Xq.Timeline.Hq.PopTriggerTimeline())}dtt(){this.wQ=this.f3.ptt()}IK(){this.GQ||(this.GQ=!0,C33.Xq.Timeline&&this.constructor===C33.GJ&&(C33.Xq.Timeline.Hq.PushTriggerTimeline(this),this.oQ.n7(C33.Xq.Timeline.Hq.OnTimelineFinished),this.oQ.n7(C33.Xq.Timeline.Hq.OnTimelineFinishedByName),this.oQ.n7(C33.Xq.Timeline.Hq.OnTimelineFinishedByTags),this.oQ.n7(C33.Xq.Timeline.Hq.OnAnyTimelineFinished),C33.Xq.Timeline.Hq.PopTriggerTimeline()))}rK(t){this.yQ=t}Ctt(){return this.wQ===this.f3.ptt()}IsPlaying(t=!1){return!!this.Ctt()||!(!this.mtt()||t)||this.yQ}Stt(){return this.IsPlaying(!0)}wk(){return this.gtt()}gtt(){return!(this.ck()||this.mtt()||this.Stt()||this.yK())}nK(t){this.EQ=t}mtt(){return this.EQ}_tt(t){this.AQ=t;const e=this.mP();(e<=0||e>=this.Sk())&&(this.AQ=!0)}yK(){return this.AQ}ck(){return this.MQ}hK(t){this.RQ=t}fK(){return this.RQ}Ttt(t){this.bQ=t}ytt(){return this.bQ}kQ(t){this.OQ=!!t}NJ(){return this.OQ}EK(){return this.IQ}mP(){return this.mQ}Ck(t){const e=this.mP();this.Ett(t),this._tt(!1),this.yK()||this.Ttt(!0),!this.Stt()&&!this.mtt()&&this.IQ||(this.Stt()||this.mtt()||this.IQ?this.Stt()?this.fk():this.mtt()&&(this.oQ.oK(this),this.Itt()):this.Itt()),this.Att(),this.Mtt(this.mP(),!1,!0,!0,e),this.Rtt(),this.RJ&&this.aL().q5(),this.wtt()}Ett(t){(t=C33.Si(t)?t:this.Sk())<0?this.mQ=0:t>=this.Sk()?this.mQ=this.Sk():this.mQ=t}btt(t){(t=C33.Si(t)?t:this.Sk())<0?this.mQ=0:t>=this.Sk()?this.mQ=this.Sk():this.mQ=t;for(const e of this.lQ)e.Ott()}wtt(){C33.Xq.Timeline&&this.constructor===C33.GJ&&(C33.Xq.Timeline.Hq.PushTriggerTimeline(this),this.oQ.n7(C33.Xq.Timeline.Hq.OnTimeSet),this.oQ.n7(C33.Xq.Timeline.Hq.OnTimeSetByName),this.oQ.n7(C33.Xq.Timeline.Hq.OnTimeSetByTags),C33.Xq.Timeline.Hq.PopTriggerTimeline())}Gtt(){if(!this._k())if(this.yk()&&this._Q===PING_PONG_END){if(this.ott()){if(this.mP()>=this.Sk())return!1}else if(this.mP()<=0)return!1}else if(!this._k()&&!this.yk())if(this.ott()){if(this.mP()>=this.Sk())return!1}else if(this.mP()<=0)return!1;return!0}dk(){this.ck()||this.Gtt()&&this.Play(!0)}Play(t=!1){return!this.ck()&&!this.mtt()&&(this.Stt()&&this.Ctt()?this.Ptt():!this.Stt()&&!!(this.yK()||t||this.ytt())&&this.vtt())}Ptt(){return this.Ttt(!1),this.oQ.eK(this),this.oQ.iK(this),this.Mk(),!0}vtt(){return this.Ttt(!1),this.oQ.iK(this),this.Mk(),!0}fk(t=!1){this.ck()||(this._tt(t),this.oQ.lK(this),this.yK()&&this.aK())}gf(t=!0,e=!1){if(!this.ck()){if(!this.Stt()&&this.mtt())return this.oQ.oK(this);if(!this.yK()){this.fk(!0),this.ott()?this.Ett(0):this.Ett(this.Sk());const s=this.mP();this.Att(),e?this.xtt(s):this.Mtt(s,!1,!1,!0),t&&this.wtt(),this.Rtt(),this.RJ&&t&&this.aL().q5()}}}Ltt(){this.gf(!1,!0)}xtt(t){this.Mtt(t,!1,!1,!0,NaN,!1,!0)}pJ(){if(!this.ck()){if(!this.aL().Lq()&&this.Dtt())return!1;this.oQ.cK(this),this.aL().Lq()||this.Ltt()}return!0}Itt(){this.pK(!0)}dK(){this.pK(!1,!0),this.rK(!1),this.nK(!1)}pK(t=!1,e=!1){if(!this.fK()||e){if(t){this.GQ=!1,this.IQ=!0,this.PQ=!0,this.Att();for(const s of this.lQ)s.pK()}else if(this.rK(!0),this.nK(!1),this.ftt(),this.yK()){this.wQ=-1,this._Q!==PING_PONG_BEGIN&&(this.gQ=Math.abs(this.gQ)),this._Q=PING_PONG_BEGIN,this.TQ=1,this.AQ=!1,this.GQ=!1,this.IQ=!0,this.PQ=!0,this.ott()?this.Ett(0):this.Ett(this.Sk()),this.Att();for(const i of this.lQ)i.pK()}else{this.PQ=!0,this.GQ=!1,this.Att();for(const r of this.lQ)r.Ntt()}this.Rtt()}}CK(){return this.RJ}Att(){this.NQ=0;for(const t of this.lQ)t.ob()&&(this.NQ=1)}Rtt(){this.RJ=0;for(const t of this.lQ)t.Ftt(),0===this.RJ&&1===t.CK()&&(this.RJ=1),this.uQ||1!==t.Btt()||(this.uQ||(this.uQ=[]),this.fQ=this.uQ.push(t))}gK(t,e,s){if(this.ntt()){if(0===t&&0===this.vQ)return;this.vQ=t,t=s}else{if(0===s&&0===this.vQ)return;t=this.vQ=s,e=1}const i=this.mQ+this.SQ,r=t*e*this.gQ,n=i+r,h=this.aQ.ktt;n<0?(this.mQ=0,this.SQ=-n):h<=n?(this.mQ=h,this.SQ=this.mQ-n):(this.mQ=n,this.SQ=0);let o=!1,a=!1,l=this._k(),c=this.yk();l||c?l&&!c?0<this.gQ?this.mQ>=h&&(this.btt(0),a=!0):this.mQ<=0&&(this.btt(h),a=!0):!l&&c?0<this.gQ?this.mQ>=h&&(this.Ett(h),this.Ek(-1*this.Ik()),a=!0,this._Q===PING_PONG_END?this.TQ<this.bB()?(this.TQ++,this._Q=PING_PONG_BEGIN):o=!0:this._Q===PING_PONG_BEGIN&&(this._Q=PING_PONG_END)):this.mQ<=0&&(this.Ett(0),this.Ek(-1*this.Ik()),a=!0,this._Q===PING_PONG_END?this.TQ<this.bB()?(this.TQ++,this._Q=PING_PONG_BEGIN):o=!0:this._Q===PING_PONG_BEGIN&&(this._Q=PING_PONG_END)):l&&c&&(0<this.gQ?this.mQ>=h&&(this.Ett(h),this.Ek(-1*this.Ik()),a=!0,this._Q++,C33.wrap(this._Q,0,2)):this.mQ<=0&&(this.Ett(0),this.Ek(-1*this.Ik()),a=!0,this._Q++,C33.wrap(this._Q,0,2))):0<this.gQ?this.mQ>=h&&(this.TQ<this.bB()?(this.TQ++,this.btt(0),a=!0):(this.Ett(h),o=!0)):this.mQ<=0&&(this.TQ<this.bB()?(this.TQ++,this.btt(h),a=!0):(this.Ett(0),o=!0));let u,f=this.cQ;if(o){for(u=0;u<f;u++)this.lQ[u].$tt();this.fk(!0),this.dtt()}else{const d=this.fQ;for(u=0;u<d;u++)this.uQ[u].Wtt();if(1===this.NQ)for(u=0;u<f;u++){const p=this.lQ[u],C=p.Vtt(),m=this.mQ-C,S=i-C;m<0&&0<S?(this.mQ=C<0?0:h<=C?h:C,p.Yu(C,!0,!1,a,this.PQ,!1)):p.Yu(this.mQ,!0,!1,a,this.PQ,!1)}else for(u=0;u<f;u++)this.lQ[u].Yu(this.mQ,!0,!1,a,this.PQ,!1);for(u=0;u<d;u++)this.uQ[u].Htt();this.PQ&&(this.PQ=!1)}}Mtt(e,s=!1,i=!1,r=!1,n=NaN,t=!1,h=!1){for(const o of this.lQ)o.Wtt();for(const a of this.lQ){let t=e;if("number"==typeof n&&!isNaN(n)){const l=this.mP(),c=l-a.Vtt(),u=n-a.Vtt();c<0&&0<u&&(t=a.Vtt(),this.Ett(t))}a.Yu(t,s,i,r,this.PQ,h)}for(const f of this.lQ)f.Htt();this.PQ&&t&&(this.PQ=!1)}Utt(){const t=this.aQ.HQ().Xtt(),e=C33.UQ.mE(this,t);return this.cQ=this.lQ.push(e),e}BJ(){if(!this.ck())for(const t of this.lQ)t.jtt()}AK(){for(const t of this.lQ)t.AK()}Ytt(){for(const t of this.lQ)t.qtt()}ztt(t,e,s){if(e){if("number"==typeof s&&0<=s){const i=this.lQ[s];return i?(i.Jtt(e),void this.oQ.UJ(e.IF(),this)):void 0}for(const r of this.lQ)if(r.zQ())if(t){if(r.Fk()===t){r.Jtt(e),this.oQ.UJ(e.IF(),this);break}}else if(!r.Ktt()){r.Jtt(e),this.oQ.UJ(e.IF(),this);break}}}qJ(t,e){for(const s of this.lQ)if(s.zQ())if(e){if(e===s.Fk()&&t===s.xk())return!0}else if(t===s.xk())return!0;return!1}TK(){return this.lQ.some(t=>!t.zQ()||t.Ztt())}Dtt(){return this.lQ.some(t=>{if(t.zQ()){if(!t.Ztt())return!1;const e=t.IF();return e?e.pU():!1}return!1})}kk(t){for(const e of this.XK())for(const s of e.Qtt())if(s.tet()===t)return s}eet(t){for(const e of this.lQ)if(t===e.xk())return e;return null}iet(t){let e=t?t.split(" "):[],s=new Set(e.map(t=>t.toLowerCase().trim()));e=[...s.values()];for(const i of this.XK())for(const r of i.ret()){const n=e.every(t=>r.net(t));if(n)return r}}XJ(){const t=[];for(const e of this.XK())t.push(e.IF());return t.filter(t=>t)}EJ(){for(const t of this.XK())t.EJ()}Qj(){return{tracksJson:this.het(),name:this.Tn,playheadTime:this.mP(),playbackRate:this.gQ,pingPongState:this._Q,currentRepeatCount:this.TQ,isPlaying:this.yQ,isScheduled:this.EQ,initialStateSet:this.IQ,finishedTriggers:this.GQ,complete:this.AQ,released:this.MQ,markedForRemoval:this.RQ,completedTick:this.wQ,implicitPause:this.bQ,isTemplate:this.OQ,tags:this.xQ.join(" "),stringTags:this.LQ,tagsChanged:this.DQ,firstTick:this.PQ}}tY(t){t&&(this.oet(t.tracksJson),this.Tn=t.name,this.mQ=t.playheadTime,this.gQ=t.playbackRate,this._Q=t.pingPongState,this.TQ=t.currentRepeatCount,this.yQ=!!t.isPlaying,this.EQ=!!t.isScheduled,this.IQ=!!t.initialStateSet,this.GQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.AQ=!!t.complete,this.MQ=!!t.released,this.RQ=!!t.markedForRemoval,this.wQ=t.completedTick,this.bQ=!!t.implicitPause,this.OQ=!!t.isTemplate,this.xQ=t.tags.split(" "),this.LQ=t.stringTags,this.DQ=!!t.tagsChanged,this.PQ=!!t.firstTick)}het(){return this.lQ.map(t=>t.Qj())}oet(t){this.Ytt(),t.forEach((t,e)=>{const s=this.lQ[e];s.tY(t)}),this.lQ.filter(t=>t.Ztt())}static utt(t){const e=this.Ak();return""===t?1===e.length&&""===e[0]:e.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static ltt(t){if(C33.Wi(t))return t.slice(0);if(C33.Ri(t))return t.split(" ");throw new Error("invalid tags")}aet(){return this.FQ||(this.FQ=C33.mn(self.Ok,this)),this.FQ}}}{const C33=self.Ve,INSTANCE_TRACK=0,VALUE_TRACK=1,AUDIO_TRACK=2;C33.UQ=class Track extends C33.pn{constructor(t,e){super(),this.VK=t,this.let=e,this.cet=e.HQ(),this.uet=NaN,this.fet=NaN,this.det=null,this.pet=null,this.Cet=!1,this.eb=0<e.Vtt(),this.met=!1,this._et=!1,this.Tet=NaN,this.yet=null,this.Eet=this.let.Aet().Iet(),this.Met=[],this.Ret(),this.wet=0,this.RJ=0,this.bet=0}static mE(t,e){return C33.mn(C33.UQ,t,e)}Sn(){this.Eet=null;for(const t of this.Met)t.Sn();C33.Vh(this.Met),this.Met=null,this.VK=null,this.det=null,this.pet=null,this.let=null,this.yet=null}Ret(){for(const t of this.let.Get().Oet())this.Met.push(C33.Pet.mE(this,t))}jtt(){for(const t of this.Met)t.jtt()}AK(){for(const t of this.Met)t.AK();this.det=null,this.pet=null}vet(){return this.VK}aL(){return this.VK.aL()}ret(){return this.Eet||(this.Eet=this.let.Aet().Iet()),this.Eet}Qtt(){return this.Met}kk(e){for(let t=0;t<this.Met.length;t++){const s=this.Met[t];if(s.tet()===e)return s}}xet(){this.det||this.xk()}Let(){return!!this.det&&!this.det.k8()}Ztt(){if(!this.zQ())return!1;const t=this.Det(),e=this.aL().D5(t);return!!e&&!e.k8()}IF(){if(this.zQ()){const t=this.Net();if(-1!==t)return this.aL().rU(t)}}Fet(){return this.VK.XK().indexOf(this)}qtt(){this.det=null,this.uet=NaN,this.pet=null,this.fet=NaN,this.Cet=!0}Ktt(){return!!this.det}xk(){if(!this.Cet){if(!this.det||!this.Let()){const t=this.Det();this.det=this.aL().D5(t)}return this.det}}Jtt(t){if(this.Cet=!1,this.det!==t){this.AK(),this.det=t,this.fet=t.IF().F4(),this.uet=t.NF(),this.pet=t.W5();for(const e of this.Bet()){const s=e.ket,i=e.$et,r=s.Wet();switch(r){case"instance-variable":{i.Vet();const n=t.IF(),h=n.Het(e.name),o=n.Uet(h),a=n.Xet(h);o===e.name&&a===e.type&&i.jet(h);break}case"behavior":{const l=e.fB,c=this.IF(),u=t.IF(),f=i.pB(u);if(l&&f){const d=l.i3();c.Yet(d),u.Yet(d),i.Vet();i.qet(f.NU())}break}}}}}*Bet(){for(const t of this.Met){const e=t.YQ(),s=this.IF(),i={ket:t,$et:e};switch(t.Wet()){case"world-instance":i.property=t.tet();break;case"instance-variable":{const r=e.Vet();i.name=s.Uet(r),i.type=s.Xet(r);break}case"effect":{const n=s.HD(),h=e.zet(n);i.Jet=h;break}case"behavior":{const o=e.pB(s);i.fB=o;break}case"plugin":i.gD=s._D()}yield i}}W5(){if(!this.pet||!this.Let()){const t=this.xk();t&&(this.pet=t.W5())}return this.pet}Ket(){return this.let}Det(){return isNaN(this.uet)?this.let.Det():this.uet}Zet(t){this.let.Zet(t)}QQ(){return this.let.QQ()}ttt(t){this.let.ttt(t)}iZ(){return this.let.iZ()}Fk(){return this.let.Fk()}Vtt(){return this.let.Vtt()}Qet(){return this.let.Qet()}tst(t){this.let.tst(t)}ett(t){this.let.ett(t)}vk(t){for(const e of this.ret())e.vk(t);for(const s of this.Qtt())s.vk(t)}est(){return this.let.est()}sst(t){this.let.sst(t)}Net(){return isNaN(this.fet)?this.let.Net():this.fet}ist(t){this.let.ist(t)}rst(t){this.let.rst(t)}nst(){const t=this.xk();if(t){const e=t.rB();if(e.hst())return t.rB().nst()}return this.let.nst()}ost(t){this.let.ost(t)}ast(){const t=this.xk();if(t){const e=t.rB();if(e.hst())return t.rB().ast()}return this.let.ast()}gI(){return this.let.gI()}i3(){return this.let.i3()}zQ(){return this.gI()===INSTANCE_TRACK}lst(){return this.gI()===VALUE_TRACK}cst(){return this.gI()===AUDIO_TRACK}ust(){return this.wet}CK(){return this.RJ}Btt(){return this.bet}ob(){return this.eb}Ott(){for(const t of this.Met)t.Ott()}pK(){if(this.xet(),this.Let()||!this.zQ()){const t=this.vet(),e=t.ott(),s=e?0:this.Qet();for(const r of this.Met)r.pK(s),0===this.wet&&1===r.ust()&&(this.wet=1),0===this.RJ&&1===r.CK()&&(this.RJ=1);this.bet=0;const i=this.Met.some(t=>t.Btt());i&&(this.bet=1),this.yet=this.fst(s),this.met=!1,this._et=!1,this.Yu(s),this.dst(this.fst(s))}}Ntt(){if(this.xet(),this.Let()||!this.zQ()){this.VK.ott();const t=this.VK.mP()-this.Vtt();this.yet=this.fst(t);for(const e of this.Met)e.Ntt(t)}}$tt(){if(!this.vet().yK()&&(this.xet(),this.Let()||!this.zQ())&&!this.eb){const t=this.VK.mP(),e=this.Vtt()+this.Qet();e<=t?this.Yu(this.Qet(),!0,!1,!0,!1,!1,!0):t<=0&&this.Yu(0,!0,!1,!0,!1,!1,!0)}}Ftt(){for(let t=0,e=this.Met.length;t<e;t++){const s=this.Met[t];s.Ftt(),0===this.wet&&1===s.ust()&&(this.wet=1),0===this.RJ&&1===s.CK()&&(this.RJ=1)}}Wtt(){const e=this.Met.length;for(let t=0;t<e;t++)this.Met[t].Wtt()}Yu(s,t=!1,i=!1,r=!1,e=!1,n=!1,h=!1){this.det||this.xk();const o=this.det&&!this.det.k8(),a=this.let.y3===INSTANCE_TRACK;if((o||!a)&&!(n&&a&&this.IF().pU()||(s-=this.Vtt())<0)){this.pst(s,t),this.Cst(s,t,e);for(let t=0,e=this.Met.length;t<e;t++)this.Met[t].Yu(s,i,r,h);this.mst(s,t),0!==this.wet&&(this.pet||(this.pet=this.det.W5()),this.pet)&&this.pet.L7()}}Htt(){const e=this.Met.length;for(let t=0;t<e;t++)this.Met[t].Htt()}pst(t,e){if(e&&this.eb&&!this.met){const s=this.vet();if(s.ott()){if(t<0)return}else if(t>this.Qet())return;for(const i of this.Met)i.pK();this.met=!0}}mst(t,e){if(e&&this.eb&&!this._et){const s=this.vet();if(s.ott()){if(t>=this.Qet()){for(const i of this.Met)i.Yu(this.Qet(),!1,!0);this._et=!0}}else if(t<=0){for(const r of this.Met)r.Yu(0,!1,!0);this._et=!0}}}Cst(t,e,s){if(!s&&e&&C33.Xq.Timeline){const i=this.vet(),r=this.yet.zK(),n=this.yet.mP(),h=r?r.mP():i.Sk();if(t<=n||h<=t)if(this.yet=this.cet.Sst(t,this.let),i.ott())r&&this.dst(this.yet);else{const o=this.yet.zK();o&&this.dst(o)}}}fst(t){const e=this.cet.gst(t,this.let);return e||this.cet.Sst(t,this.let)}dst(t){if(C33.Xq.Timeline){const e=this.vet(),s=e.XQ();C33.Xq.Timeline.Hq.PushTriggerTimeline(e),C33.Xq.Timeline.Hq.PushTriggerKeyframe(t),s.n7(C33.Xq.Timeline.Hq.OnAnyKeyframeReached),s.n7(C33.Xq.Timeline.Hq.dst),C33.Xq.Timeline.Hq.PopTriggerTimeline(e),C33.Xq.Timeline.Hq.PopTriggerKeyframe(t)}}_st(){const t=this.let.Aet(),e=t.Tst();return e}yst(){const t=this.let.Get(),e=t.Est(),s=C33.Pet.mE(this,e);return this.Met.push(s),s}Ist(t){const e=this.let.Aet();e.Ast(t)}Mst(t){for(const e of this.Met)e.Mst(t)}Rst(){for(const t of this.Met)t.Rst()}wst(){if(this.xet(),this.Let()||!this.zQ())for(const t of this.Met)t.wst()}bst(){if(this.xet(),this.Let()||!this.zQ()){let t=!1;for(const e of this.Met){const s=e.bst();!t&&s&&(t=!0)}if(t){const i=this._st();i.Ck(this.vet().mP()),i.vk("noease"),i.sst(!0),i.att("")}}}EJ(){isNaN(this.Tet)||this.Ost(this.Tet),this.Tet=NaN}Qj(){const t=this.xk(),e=t?t.NF():this.Det();return{propertyTracksJson:this.Gst(),lastKeyframeDataItemJson:this.Pst(),initialStateOfNestedSet:this.met,endStateOfNestedSet:this._et,instanceUid:e,cleared:this.Cet}}tY(t){if(t){this.vst(t.propertyTracksJson),this.xst(t.lastKeyframeDataItemJson),this.Tet=t.instanceUid,this.met=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.met=t.initialStateOfNestedSet),this._et=!1,t.hasOwnProperty.endStateOfNestedSet&&(this._et=t.endStateOfNestedSet),this.Cet=!!t.hasOwnProperty("cleared")&&t.cleared;for(const e of this.Met)0===this.wet&&1===e.ust()&&(this.wet=1),0===this.RJ&&1===e.CK()&&(this.RJ=1);this.bet=0,this.Met.some(t=>t.Btt())&&(this.bet=1)}}Pst(){const t=this.let.Aet();return t.Lst(this.yet)}Gst(){return this.Met.map(t=>t.Qj())}vst(t){t.forEach((t,e)=>{const s=this.Met[e];s.tY(t)})}Ost(t){if(C33.Si(t)){const e=this.aL().D5(t);if(e){const s=this.vet();s.ztt(this.let.Fk(),e,this.Fet())}}}xst(t){const e=this.let.Aet();this.yet=e.Dst(t)}}}{const C33=self.Ve;C33.Pet=class PropertyTrack extends C33.pn{constructor(t,e){super(),this.Nst=t,this.Fst=e,this.Bst=e.Get(),this.wet=0,this.RJ=0,this.bet=0,this.kst=this.YQ(),this.$st=this.Fst.Vst().Wst(),this.Hst=null,this.Ust=null}static mE(t,e){return C33.mn(C33.Pet,t,e)}Sn(){this.Nst=null,this.kst&&(this.kst.Sn(),this.kst=null),this.$st=null,this.Fst=null,this.Bst=null}ust(){return this.wet}CK(){return this.RJ}Btt(){return this.bet}Xst(){return!!this.Ust}jst(t){this.Ust=t}Yst(){return this.Ust}qst(){return this.Nst}zst(){return this.Fst}Get(){return this.Bst}vet(){return this.Nst.vet()}aL(){return this.Nst.aL()}xk(){return this.Nst.xk()}YQ(){if(!this.kst){let t=this.Fst.Wet(),e;switch(t){case"behavior":e=new C33.Pet.Jst(this);break;case"effect":e=new C33.Pet.Kst(this),this.RJ=1;break;case"instance-variable":e=new C33.Pet.Zst(this);break;case"plugin":e=new C33.Pet.Qst(this),this.RJ=1;break;case"world-instance":e=new C33.Pet.tit(this),this.RJ=1,this.wet=1;break;case"value":e=new C33.Pet.eit(this);break;case"audio":e=new C33.Pet.sit(this)}this.kst=e}return this.kst}Wet(){return this.Fst.Wet()}iit(t){this.Fst.iit(t)}rit(){return this.Fst.nit()}hit(t){this.Fst.oit(t)}Bk(){return this.YQ().ait()}tet(){return this.Fst.lit()}cit(t){this.Fst.uit(t)}dit(){return this.Fst.gI()}pit(t){this.Fst.SetType(t)}Cit(){return this.Get().mit(this.Fst).gI()}Sit(){return this.Fst.Sit()}git(t){this.Fst.git(t)}_it(){return this.Fst._it()}Tit(t){this.Fst.Tit(t)}est(){return this.Fst.est()}sst(t){this.Fst.sst(t)}QQ(){return this.Fst.QQ()}ttt(t){this.Fst.ttt(t)}iZ(){return this.Fst.iZ()}ett(t){this.Fst.ett(t)}vk(t){for(const e of this.yit())e.vk(t)}Eit(){return this.Fst.Eit()}yit(){return this.$st||(this.$st=this.Fst.Vst().Wst()),this.$st}qK(){return this.Fst.Vst().qK()}Iit(t){return this.Bst.Iit(t,this.Fst)}Ait(t){return this.Bst.Ait(t,this.Fst)}Mit(t){let e=this.Bst.Iit(t,this.Fst),s;return s=e?this.Bst.Rit(t,this.Fst):(e=this.Bst.Ait(t,this.Fst),this.Bst.wit(t,this.Fst)),{start:e,end:s}}*bit(){for(const t of this.yit())yield t.uZ()}*Oit(){for(const t of this.yit())yield t.mP()}jtt(){this.YQ().jtt()}AK(){this.YQ().AK()}Git(){return this.YQ().Git()}Ott(){this.YQ().Ott()}pK(t){this.YQ().pK(),this.Hst=this.Pit(t),this.Ftt()}Ntt(t){this.YQ().Ntt(),this.Hst=this.Pit(t)}Ftt(){const t=this.qst();if(this.bet=0,t.zQ()){const e=this.vet(),s=t.xk(),i=this.YQ(),r=this.tet(),n=i.vit();if(n){const h=e.jQ(s,i,r,this);h&&h.length&&(this.bet=1)}else this.bet=0}}Pit(t){const e=this.vet(),s=this.Bst.Iit(t,this.Fst);return s||(e.ott()?this.Bst.Ait(t,this.Fst):this.Bst.wit(t,this.Fst))}Wtt(){this.kst.Wtt()}Yu(t,e=!1,s=!1,i=!1){let r,n,h=!1;if(e)r=this.Bst.Ait(t,this.Fst);else{if(this.Hst){const o=this.vet(),a=this.Hst.zK(),l=this.Hst.mP(),c=a?a.mP():o.Sk();(t<=l||c<=t)&&(this.Hst=this.Bst.Ait(t,this.Fst),h=!0)}else this.Hst=this.Bst.Ait(t,this.Fst),h=!0;r=this.Hst}r&&(n=r.zK()),this.kst.Yu(t,r,n,e,s,i,h)}xit(t){if(this.Hst){const i=this.vet(),r=this.Hst.zK(),n=this.Hst.mP(),h=r?r.mP():i.Sk();(t<=n||h<=t)&&(this.Hst=this.Bst.Ait(t,this.Fst))}else this.Hst=this.Bst.Ait(t,this.Fst);const e=this.Hst,s=e.zK();return this.kst.xit(t,e,s)}Lit(t,e,s){return this.kst.xit(t,e,s)}Htt(){this.kst.Htt()}static Dit(t,e){const s=e.zst(),i=e.Bst;return i.Ait(t,s)}static Nit(t,e){const s=e.zst(),i=e.Bst;return i.wit(t,s)}Fit(){const t=this.Fst.Vst(),e=t.Bit();return this.Hst=null,e}Mst(t){this.Hst=null;const e=this.Fst.Vst();e.kit(t)}Rst(){this.YQ().Rst()}wst(){const t=this.YQ().wst();if(t){const e=this.Bst.mit(this.Fst),s=this.YQ().Git();e.$it(s)}}bst(){const t=this.YQ().bst();return t&&this.Wit(),this.YQ().Vit(),t}Wit(){const t=this.vet().mP(),e=this.YQ(),s=C33.Pet.Dit(t,this),i=this.Fit();i.SetType(s.gI()),i.Ck(t),i.vk(s.Hit()),i.sst(!0),i.Uit(e.Xit()),i.$it(e.Git())}Qj(){return{sourceAdapterJson:this.YQ().Qj()}}tY(t){t&&this.YQ().tY(t.sourceAdapterJson)}}}{const C33=self.Ve,NS=C33.Pet;NS.tit=class PropertySourceAdapter{constructor(t){this.jit=t,this.Yit=null,this.qit()}Sn(){this.Yit&&(this.Yit.Sn(),this.Yit=null),this.jit=null}vit(){return this.Yit.vit()}kk(){return this.jit}jtt(){this.Yit&&this.Yit.jtt()}AK(){this.Yit&&this.Yit.AK()}qit(){return this.Yit||(this.Yit=this.zit()),this.Yit}Vet(){}F4(){return this.Vet()}Jit(){}Ott(){this.qit().Ott()}pK(){this.qit().pK()}Ntt(){this.qit().Ntt()}Wtt(){this.Yit.Kit()}Yu(t,e,s,i,r,n,h){let o=this.jit.Cit(),a;switch(o){case"numeric":a=NS.Zit.Yu(t,e,s,this.jit);break;case"angle":a=NS.Qit.Yu(t,e,s,this.jit);break;case"boolean":a=NS.trt.Yu(t,e,s,this.jit);break;case"color":a=NS.ert.Yu(t,e,s,this.jit);break;case"text":a=NS.srt.Yu(t,e,s,this.jit)}this.Yit.irt(t,a,e,s,i,r,n,h)}xit(t,e,s){switch(this.jit.Cit()){case"numeric":return NS.Zit.Yu(t,e,s,this.jit);case"angle":return NS.Qit.Yu(t,e,s,this.jit);case"boolean":return NS.trt.Yu(t,e,s,this.jit);case"color":return NS.ert.Yu(t,e,s,this.jit);case"text":return NS.srt.Yu(t,e,s,this.jit)}}Htt(){this.Yit.rrt()}Rst(){this.qit().nrt()}Vit(){this.qit().Vit()}Git(){return this.qit().Git()}wst(){return this.qit().wst()}bst(){return this.qit().bst()}Xit(){const t=this.jit,e=t.qst(),s=e.vet().mP(),i=NS.Dit(s,t),r=i.zK(),n=t.Cit();switch(n){case"numeric":return NS.Zit.Yu(s,i,r,t);case"angle":return NS.Qit.Yu(s,i,r,t);case"boolean":return NS.trt.Yu(s,i,r,t);case"color":return NS.ert.Yu(s,i,r,t);case"text":return NS.srt.Yu(s,i,r,t)}}zit(){const t=this.jit,e=t.Eit()?t.Cit():"";switch(e){case"combo":case"boolean":case"text":case"string":return new NS.ort.hrt(this);case"numeric":case"number":case"angle":return new("combo"===this.jit.dit()?NS.ort.hrt:NS.ort.art)(this);case"color":case"offsetColor":return new NS.ort.lrt(this);default:return new NS.ort.art(this)}}Qj(){return{propertyAdapterJson:this.qit().Qj()}}tY(t){t&&this.qit().tY(t.propertyAdapterJson)}}}{const C33=self.Ve,INDEX=0;class InstanceVariableSourceAdapter extends C33.Pet.tit{constructor(t){super(t),this.crt=NaN}Vet(){return this.jit.zst().nit()[INDEX]}F4(){return this.crt||super.F4()}Jit(){return this.jit.qst().xk()}jet(t){const e=this.jit.zst().nit()[INDEX];e!==t&&(this.crt=t)}Yu(t,e,s,i,r,n,h){this.qit().urt(e.ait())&&super.Yu(t,e,s,i,r,n,h)}xit(t,e,s){if(this.qit().urt(e.ait()))return super.xit(t,e,s)}Qj(){return Object.assign(super.Qj(),{index:this.crt})}tY(t){t&&(super.tY(t),this.crt=t.index)}}C33.Pet.Zst=InstanceVariableSourceAdapter}{const C33=self.Ve,SID=0,INDEX=1,NAME=2;class BehaviorSourceAdapter extends C33.Pet.tit{constructor(t){super(t),this.rH=NaN}Vet(){const t=this.jit.zst();return t.nit()[INDEX]}Jit(){const t=this.jit.zst(),e=this.jit.qst(),s=this.rH||t.nit()[SID],i=e.xk(),r=i.frt(s),n=i.drt()[r];return n.rB()}pB(t){const e=this.jit.zst(),s=e.nit()[NAME];return t.prt(s)}qet(t){const e=this.jit.zst();e.nit()[SID]!==t&&(this.rH=t)}Yu(t,e,s,i,r,n,h){const o=this.jit.qst(),a=o.xk();this.pB(a.IF())&&super.Yu(t,e,s,i,r,n,h)}xit(t,e,s){const i=this.jit.qst(),r=i.xk();if(this.pB(r.IF()))return super.xit(t,e,s)}Qj(){return Object.assign(super.Qj(),{sid:this.rH})}tY(t){t&&(super.tY(t),this.rH=t.sid)}}C33.Pet.Jst=BehaviorSourceAdapter}{const C33=self.Ve,NAME=0,INDEX=1;class EffectSourceAdapter extends C33.Pet.tit{constructor(t){super(t)}Vet(){return this.jit.zst().nit()[INDEX]}Jit(){const t=this.jit,e=t.qst(),s=e.W5(),i=s.v7(),r=i.HD(),n=this.zet(r),h=n.F4();return i.TB(h)?i.Crt(h):null}zet(t){const e=this.jit,s=e.zst().nit()[NAME];return t.mrt(s)}Yu(t,e,s,i,r,n,h){this.Srt()&&super.Yu(t,e,s,i,r,n,h)}xit(t,e,s){if(this.Srt())return super.xit(t,e,s)}Srt(){const t=this.jit,e=t.qst(),s=e.W5(),i=s.v7(),r=i.HD(),n=this.zet(r);if(n){const h=n.F4();return i.TB(h)}}}C33.Pet.Kst=EffectSourceAdapter}{const C33=self.Ve,INDEX=0;class PluginSourceAdapter extends C33.Pet.tit{constructor(t){super(t)}Vet(){return this.jit.zst().nit()[INDEX]}Jit(){return this.jit.qst().xk().rB()}Yu(t,e,s,i,r,n,h){const o=this.jit.qst(),a=o.IF()._D(),l=o.xk().IF()._D();a===l&&super.Yu(t,e,s,i,r,n,h)}xit(t,e,s){const i=this.jit.qst(),r=i.IF()._D(),n=i.xk().IF()._D();if(r===n)return super.xit(t,e,s)}grt(){const t=this.jit.qst(),e=t.IF()._D();if(C33.Xq._rt&&e instanceof C33.Xq._rt&&("initial-frame"===this.jit.tet()||"initial-animation"===this.jit.tet()))switch(this.jit.iZ()){case"relative":case"absolute":return null}}}C33.Pet.Qst=PluginSourceAdapter}{const C33=self.Ve;class ValueSourceAdapter extends C33.Pet.tit{constructor(t){super(t),this.Trt=0,this.yrt=!1}vit(){return!1}pK(){let t=this.jit.Get(),e=this.jit.zst();e=t.mit(e),this.Trt=e.uZ()}Ntt(){}ait(){return this.yrt||this.jit.Yu(0),this.Trt}Yu(t,e,s,i,r,n,h){this.Trt=C33.Pet.Zit.Yu(t,e,s,this.jit),this.yrt=!0}Rst(){}Vit(){}Git(){return this.Trt}wst(){return!1}bst(){return!1}Qj(){return{value:this.Trt,init:this.yrt}}tY(t){t&&(this.Trt=t.value,this.yrt=!t.hasOwnProperty("init")||t.init)}}C33.Pet.eit=ValueSourceAdapter}{const C33=self.Ve,PROJECT_FILE=0,PROJECT_FILE_NAME=0,PROJECT_FILE_TYPE=1,START_OFFSET=1,AUDIO_DURATION=2,AUDIO_TAG=3;class AudioSourceAdapter extends C33.Pet.tit{constructor(t){super(t),this.Ert=!1,this.Irt=null,this.Art=null,this.Mrt=null,this.VK=this.jit.vet(),this.Nst=this.jit.qst(),this.Rrt=this.jit.rit(),this.wrt=this.Rrt[PROJECT_FILE],this.brt=this.Rrt[START_OFFSET],this.Rrt[AUDIO_TAG]?this.Ort=this.Rrt[AUDIO_TAG]:this.Ort=Math.random().toString(36).slice(2),this.Grt=NaN,this.Prt=NaN,this.vrt=NaN,this.xrt=null,this.Lrt()}Sn(){super.Sn(),this.Irt=null,this.Art=null,this.Mrt=null,this.VK=null,this.Nst=null,this.Rrt=null,this.wrt=null,this.xrt=null}Lrt(){if(self.Ve.Xq.Audio){const t=this.jit.aL(),e=t.Drt(self.Ve.Xq.Audio);e&&(this.Irt=e.mD().rB()),this.Art=self.Ve.Xq.Audio.Nrt,this.Mrt=self.Ve.Xq.Audio.Frt}}Brt(){if(!this.xrt){const t=this.jit.qst(),e=t.kk("audioSource");e&&(this.xrt=e.YQ())}}krt(){const t=this.jit.qst(),e=t.kk("volume");return(e?e.YQ():this).Prt}jtt(){super.jtt(),this.Ert=!1,this.Irt&&(this.Mrt&&(this.Grt=this.Mrt.$rt.call(this.Irt,this.Ort),this.Prt=this.Mrt.Wrt.call(this.Irt,this.Ort)),this.Art)&&this.Art.fk.call(this.Irt,this.Ort)}Vrt(){return this.Ort}Hrt(){return this.vrt}Urt(t){this.vrt=t}pK(){super.pK(),this.Grt=NaN,this.Ert=!1}Ntt(){super.Ntt();const t=this.jit.vet(),e=t.mP();switch(this.Grt=e-this.brt,this.jit.tet()){case"audioSource":break;case"volume":this.Prt=this.jit.xit(e)}this.Ert=!1}Yu(t,e,s,i,r,n,h){if(this.Irt)switch(this.jit.tet()){case"audioSource":{if(!this.VK.ott())return;if(i)return void(this.Art&&this.Art.fk.call(this.Irt,this.Ort));if(t<this.brt)return void(this.Ert=!1);const o=this.Mrt.Xrt.call(this.Irt,this.Ort),a=this.VK.Ik();if(a!==o&&this.Art.Ek.call(this.Irt,this.Ort,a),this.Ert)return;if(!this.jit.vet().IsPlaying())return;if(this.Ert=!0,isNaN(this.Grt)){const l=self.performance.now(),c=t-this.brt,u=this.Irt.jrt();if("suspended"===u)return void(this.Ert=!1);const f=self.performance.now(),d=(f-l)/1e3,p=c+d;if(this.Art){let t=this.Hrt();isNaN(t)?(this.Urt(0),t=0):this.Urt(t),this.Art.Yrt.call(this.Irt,this.wrt,t,this.Ort,p)}}else{const C=this.Grt,m=(this.Grt=NaN,this.krt()),S=(this.Prt=NaN,this.Irt.jrt());if("suspended"===S)return void(this.Ert=!1);this.Art&&(this.Urt(m),this.Art.Yrt.call(this.Irt,this.wrt,m,this.Ort,C))}break}case"volume":this.Brt(),super.Yu(t,e,s,i,r,n,h)}}xit(t,e,s){if(this.Irt)switch(this.jit.tet()){case"audioSource":return;case"volume":return this.Brt(),super.xit(t,e,s)}}qrt(t,e){return this.xrt?this.xrt.Hrt():0}zrt(t,e,s,i){this.xrt&&this.xrt.Urt(this.qrt()+e),this.Art&&this.xrt&&this.Art.Urt.call(this.Irt,this.xrt.Vrt(),this.xrt.Hrt())}Jrt(t,e,s){this.xrt&&this.xrt.Urt(e),this.Art&&this.xrt&&this.Art.Urt.call(this.Irt,this.xrt.Vrt(),this.xrt.Hrt())}Krt(){return!0}Qj(){return{audioPlaybackStarted:this.Ert,audioTag:this.Ort,pauseTime:this.Grt,pauseVolume:this.Prt,volume:this.vrt}}tY(t){t&&(this.Ert=t.audioPlaybackStarted,this.Ort=t.audioTag,this.Grt=t.pauseTime,this.Prt=t.pauseVolume,this.vrt=t.volume,this.Lrt())}}C33.Pet.sit=AudioSourceAdapter}{const C33=self.Ve;C33.Pet.ort=class PropertyInterpolationAdapter{constructor(t){this.kst=t,this.jit=t.kk(),this.pet=this.jit.qst().W5(),this.Zrt=this.jit.tet(),this.Qrt=!1,this.tnt=null,this.ent=null}Sn(){this.kst=null,this.jit=null,this.pet=null,this.tnt=null,this.ent=null}vit(){return!1}jtt(){}AK(){this.pet=null,this.tnt=null,this.ent=null}YQ(){return this.kst}kk(){return this.jit}W5(){return this.pet||(this.pet=this.jit.qst().W5()),this.pet}snt(t){this.Qrt=!!t}int(){return this.Qrt}Ott(){}pK(){}Ntt(){}nrt(){this.tnt=this.Git()}Vit(){this.tnt=null}Git(){}wst(){}bst(){}urt(t){const e=typeof this.rnt(),s=typeof t;return e==s}Kit(){}irt(t,e,s,i,r,n,h,o){}rrt(){}nnt(){const t=this.hnt(()=>{const t=this.jit.zst(),e=this.jit.Get();return e.mit(t)},()=>{const t=this.jit.zst(),e=this.jit.Get();return e.ont(t)});return t.ant()}lnt(){const t=this.jit.vet(),i=t.mP()-this.jit.qst().Vtt(),e=this.hnt(()=>{const t=this.jit.zst(),e=this.jit.Get();return e.Ait(i,t)},()=>{const t=this.jit.zst(),e=this.jit.Get(),s=e.wit(i,t);return s||e.ont(t)});return e.ant()}hnt(t,e){const s=this.jit.vet();return(s.ott()?t:e)()}cnt(t,e){const s=this.jit.iZ();return("relative"===s?t:e)()}unt(t,e){return(this.int()?(this.snt(!1),t):e)()}fnt(t){}dnt(){return this.kst.F4()}pnt(){return this.ent||(this.ent=this.kst.Jit()),this.ent}Cnt(t,e,s,i,r,n){const h=this.jit.Wet();switch(h){case"behavior":return t();case"effect":return e();case"instance-variable":return s();case"plugin":return i();case"world-instance":return r();case"audio":return n()}}Qj(){return{firstAbsoluteUpdate:this.Qrt,saveState:this.tnt}}tY(t){t&&(this.Qrt=t.firstAbsoluteUpdate,this.tnt=t.saveState)}mnt(t,e=!1){const s=[];for(const i of t){const r=i.qst().Vtt();for(const n of i.yit())(!e||0!==n.mP())&&e||s.push({time:r+n.mP(),value:n.ant()})}return s.sort((t,e)=>t.time-e.time)}Snt(t,e,s){return this.gnt(e,s)}gnt(e,s){for(let t=s.length-1;0<=t;t--){const i=s[t].time;if(i<=e)return s[t]}return null}}}{const C33=self.Ve,TMP_COLORS_MAP=new Map,TMP_COLOR=[0,0,0];class ColorInterpolationAdapter extends C33.Pet.ort{constructor(t){super(t)}Ott(){}pK(){}Ntt(){}Git(){const t=this.jit.Wet(),e=this.pnt(),s=this.dnt();switch(t){case"behavior":return this._nt(e.Tnt(s));case"effect":return this._nt(e[s]);case"plugin":return this._nt(e.Tnt(s));case"world-instance":return this._nt(this.rnt())}}wst(){const t=this.nnt();return!this.ynt(t,this.rnt())}bst(){return!C33.Ti(this.tnt)&&!this.ynt(this.tnt,this.rnt())}ynt(t,e){return t=this.Ent(t),e=this.Ent(e),t.Ta(e)}nnt(){const t=super.nnt();return this.Ent(t)}lnt(){const t=super.lnt();return this.Ent(t)}fnt(t){}_nt(t){return(C33.ir(t,C33.qo)?t.toArray():t).slice(0,3)}Ent(t){return C33.ir(t,C33.qo)?t:new C33.qo(t[0],t[1],t[2],1)}urt(t){return!0}vit(){return!0}Kit(){const t=this.jit.vet(),e=this.jit.xk(),s=this.jit.YQ(),i=t.jQ(e,s,this.Zrt,this.jit);if(i&&1<i.length){TMP_COLORS_MAP.has(e)||TMP_COLORS_MAP.set(e,new Map);const r=TMP_COLORS_MAP.get(e),n=this.jit.Wet(),h=(r.has(n)||r.set(n,new Map),r.get(n));h.has(this.Zrt)||h.set(this.Zrt,{Int:!1,color:new C33.qo(0,0,0,1)})}}Ant(t,e,s){const i=TMP_COLORS_MAP.get(t).get(e).get(s);return i.Int=!0,i.color}irt(t,e,s,i,r,n,h,o){const a=this.jit.vet(),l=this.jit.qst(),c=this.jit.xk(),u=this.jit.YQ(),f=this.jit.Wet(),d=this.Zrt,p=a.jQ(c,u,d,this.jit);if(p&&1<p.length){const C=this.mnt(p,!0),m=this.Snt(a,a.mP(),C);if(m){const S=l.Vtt(),g=m.time-S;if(0==g)this.Ant(c,f,this.Zrt).ea(e[0],e[1],e[2]);else if(!(g<0)){const _=e[0],T=e[1],y=e[2],E=this.jit.Yu(g,!1,!0),I=C33.qo.Za(_,E[0]),A=C33.qo.Za(T,E[1]),M=C33.qo.Za(y,E[2]);this.Ant(c,f,this.Zrt).ea(I,A,M)}}}else this.Mnt(e[0],e[1],e[2])}rrt(){const t=this.jit.xk();if(TMP_COLORS_MAP.has(t)){const e=TMP_COLORS_MAP.get(t),s=this.jit.Wet();if(e.has(s)){const i=e.get(s);if(i.has(this.Zrt)){const r=i.get(this.Zrt),n=r.Int,h=r.color;n&&this.Mnt(h.ca(),h.ua(),h.fa()),0===i.size&&e.delete(s),0===e.size&&TMP_COLORS_MAP.delete(t)}}}}rnt(){const t=this.jit.Wet(),e=this.pnt(),s=this.dnt();switch(t){case"behavior":return this.Ent(e.Tnt(s));case"effect":return e[s].clone();case"plugin":return this.Ent(e.Tnt(s));case"world-instance":return this.W5().z7().clone()}}Mnt(t,e,s){const i=this.jit.Wet(),r=this.pnt(),n=this.dnt();switch(i){case"behavior":TMP_COLOR[0]=t,TMP_COLOR[1]=e,TMP_COLOR[2]=s,r.Rnt(n,TMP_COLOR);break;case"effect":r[n].ta(t,e,s);break;case"plugin":TMP_COLOR[0]=t,TMP_COLOR[1]=e,TMP_COLOR[2]=s,r.Rnt(n,TMP_COLOR);break;case"world-instance":this.W5().wnt(t,e,s)}}Qj(){}tY(t){}}C33.Pet.ort.lrt=ColorInterpolationAdapter}{const C33=self.Ve,NS=C33.Pet;class NoInterpolationAdapter extends C33.Pet.ort{constructor(t){super(t)}Ott(){}pK(){}Ntt(){}Git(){return this.rnt()}wst(){const t=this.nnt();return t!==this.Git()}bst(){return!C33.Ti(this.tnt)&&this.tnt!==this.Git()}vit(){return!1}irt(t,e,s,i,r,n,h,o){const a=this.jit,l=a.qst(),c=a.Wet(),u=a.vet(),f=l.xk(),d=a.YQ(),p=this.Zrt,C=u.jQ(f,d,p,a);if(C&&1<C.length){const S=this.mnt(C),g=t+l.Vtt(),_=this.Snt(u,g,S);_&&(e=_.value)}const m=a.Cit();switch(m){case"numeric":if(NS.Zit.bnt(this.dnt(),this.pnt(),e,c))break;return;case"angle":if(NS.Qit.bnt(this.dnt(),this.pnt(),e,c))break;return;case"boolean":if(NS.trt.bnt(this.dnt(),this.pnt(),e,c))break;return;case"color":if(NS.ert.bnt(this.dnt(),this.pnt(),e,c))break;return;case"text":if(!NS.srt.bnt(this.dnt(),this.pnt(),e,c))return}this.Mnt(e)}rnt(){const t=this.jit.Wet(),e=this.pnt(),s=this.dnt();switch(t){case"behavior":return e.Tnt(s);case"effect":return e[s];case"instance-variable":return e.Ont(s);case"plugin":return e.Tnt(s)}}Mnt(t){const e=this.jit.Wet(),s=this.pnt(),i=this.dnt();switch(e){case"behavior":s.Rnt(i,t);break;case"effect":s[i]=t;break;case"instance-variable":s.Gnt(i,t);break;case"plugin":s.Rnt(i,t)}}}C33.Pet.ort.hrt=NoInterpolationAdapter}{const C33=self.Ve,NS=C33.Pet.ort,INSTANCE_FUNC_MAP=new Map,add2=(t,e,s,i,r,n=!1,h=null,o=null)=>{INSTANCE_FUNC_MAP.set(t,{Pnt:e,vnt:s,xnt:i,round:r,Lnt:n,init:h,reset:o})};add2("offsetX",(t,e,s,i)=>{"relative"===i.jit.iZ()?t.Dnt(e,s.vet().itt()):t.Dnt(e)},(t,e)=>t.O_(e),t=>t.b_(),!0),add2("offsetY",(t,e,s,i)=>{"relative"===i.jit.iZ()?t.Nnt(e,s.vet().itt()):t.Nnt(e)},(t,e)=>t.v_(e),t=>t.P_(),!0),add2("offsetWidth",(e,t,o,s,i)=>{if(0!==t){const r="relative"===s.jit.iZ(),l=1===s.Fnt.gI();if((r||l)&&e.E6()&&e.O6()){if(isNaN(s.Bnt)){let i=[],t=e.l6();for(;t;)i.push(t),t=t.l6();i.reverse();let a=(t,e)=>e.vet().eet(t.xk()),r=(t,e)=>{const s=a(t,e);if(s)return s.nst();const i=t.xk().rB();return i.hst()?i.nst():t.$nt().knt()},n=(t,e,s,i=0)=>{const r=a(t,e);if(!r)return i;const n=r.kk(s);if(!n)return i;const h=n.zst().Vst();if(!h)return i;const o=h.ont();return o?o.ait():i},h;if(l){let t=i[i.length-1];h=t.dC()}else{let e=i[0],t=e.$nt().knt(),s=e.$nt().Wnt();h=t*s,h=(h+=n(e,o,"offsetWidth"))+r(e,o)*n(e,o,"offsetScaleX");for(let t=1;t<i.length;t++){const c=(e=i[t]).$nt().Wnt();h=(h=(h*=c)+n(e,o,"offsetWidth"))+r(e,o)*n(e,o,"offsetScaleX")}}s.Bnt=0===h?Number.EPSILON:h}i||e.XC(t/s.Bnt,!0)}else e.XC(t)}},(t,e)=>t.TC(e),t=>t.dC(),!0),add2("offsetHeight",(e,t,o,s,i)=>{if(0!==t){const r="relative"===s.jit.iZ(),a=1===s.Fnt.gI();if((r||a)&&e.E6()&&e.P6()){if(isNaN(s.Bnt)){let i=[],t=e.l6();for(;t;)i.push(t),t=t.l6();i.reverse();let r=(t,e)=>{i=t;const s=e.vet().eet(i.xk());var i;if(s)return s.ast();const r=t.xk().rB();return r.hst()?r.ast():t.$nt().Vnt()},n=(t,e,s,i=0)=>{const r=e.vet().eet(t.xk());if(!r)return i;const n=r.kk(s);if(!n)return i;const h=n.zst().Vst();if(!h)return i;const o=h.ont();return o?o.ait():i},h;if(a){let t=i[i.length-1];h=t.IC()}else{let e=i[0],t=e.$nt().Vnt(),s=e.$nt().Hnt();h=t*s,h=(h+=n(e,o,"offsetHeight"))+r(e,o)*n(e,o,"offsetScaleY");for(let t=1;t<i.length;t++){const l=(e=i[t]).$nt().Hnt();h=(h=(h*=l)+n(e,o))+r(e,o)*n(e,o,"offsetScaleY")}}s.Bnt=0===h?Number.EPSILON:h}i||e.Unt(t/s.Bnt,!0)}else e.Unt(t)}},(t,e)=>t.pC(e),t=>t.IC(),!0),add2("offsetAngle",(t,e,s,i,r)=>{t.Xnt(e)},(t,e)=>t.zD(e),t=>t.GetAngle(),!1,!0),add2("offsetOpacity",(t,e,s,i,r)=>{const n=i.jnt||1,h=(e/=n,t.$O()),o=h+e;if(0===i.Ynt)1<o?i.Ynt+=o-1:o<0&&(i.Ynt+=o),t.qnt(e);else{const a=t.$O()+e;0<e&&0<i.Ynt?1<a&&(i.Ynt+=a-1):0<e&&i.Ynt<0?(i.Ynt+=e,0<i.Ynt&&(t.qnt(i.Ynt),i.Ynt=0)):e<0&&0<i.Ynt?(i.Ynt+=e,i.Ynt<0&&(t.qnt(i.Ynt),i.Ynt=0)):e<0&&i.Ynt<0&&a<0&&(i.Ynt+=a)}},(t,e)=>{t.VO(e)},t=>t.$O(),!1,!0,(n,r,h)=>{switch(n.Ynt=0,n.jit.iZ()){case"relative":{n.jit.Get();let t=n.jit.zst(),e=t.Vst(),s=e.Wst(),i=n.W5().$O(),r=i;for(const o of s){const a=o.mP(),l=n.jit.xit(a);r=i+l,r=C33.En(r,0,1)}n.znt=i-r,n.znt=Math.round(100*(n.znt+Number.EPSILON))/100,r=i;for(let t=s.length-1;0<=t;t--){const c=s[t].mP(),u=n.jit.xit(c);r-=u,r=C33.En(r,0,1)}n.Jnt=r,n.Jnt=Math.round(100*(n.Jnt+Number.EPSILON))/100;break}}const t="relative"===n.jit.iZ(),e=1===n.Fnt.gI();if((t||e)&&r.E6()&&r.F6()){let e=[],t=r.l6();for(;t;)e.push(t),t=t.l6();e.reverse();let s=(t,e,s)=>{const i=e.vet().eet(t.xk());if(!i)return 0;const r=i.kk(s);if(!r)return 0;const n=r.zst().Vst();if(!n)return 0;const h=n.ont();return h?h.ait():0},i=e[0].$nt().Knt();i+=s(e[0],h,"offsetOpacity");for(let t=1;t<e.length;t++)i+=s(e[t],h,"offsetOpacity");n.jnt=0===i?1:i}},s=>{switch(s.jit.iZ()){case"relative":{s.Ynt=0;let t=s.W5(),e=t.$O();e=Math.round(100*(e+Number.EPSILON))/100,s.jit.vet().ott()?(t.VO(e+s.znt),s.oA=0):(t.VO(e-s.Jnt),s.oA=s.YQ().Xit());break}}}),add2("offsetOriginX",(t,e)=>t.Znt(e),(t,e)=>t.Qnt(e),t=>t.XB(),!1),add2("offsetOriginY",(t,e)=>t.tht(e),(t,e)=>t.eht(e),t=>t.YB(),!1),add2("offsetZElevation",(t,e)=>t.sht(e),(t,e)=>t.L_(e),t=>t.x_(),!0),add2("offsetScaleX",(t,e,s,i)=>{if(0!==e){const r=t.dC()<0?-1:1;if("relative"===i.jit.iZ()&&t.E6()&&t.O6()){const n=s.nst()*r*e;isNaN(i.Bnt)&&INSTANCE_FUNC_MAP.get("offsetWidth").Pnt(t,1,s,i,!0),t.XC(n/i.Bnt,!0)}else t.XC(s.nst()*r*e)}},(t,e,s)=>{t.TC(s.nst()*e)},(i,r)=>{const n=i.dC()<0?-1:1;if(i.O6()){let t=i.l6(),e=r.vet().eet(t.xk()),s=NaN;if(e)s=t.dC()/e.nst();else{const h=t.xk().rB();s=h.hst()?t.dC()/h.nst():1}return i.dC()*n/(r.nst()*s)}return i.dC()*n/r.nst()},!1),add2("offsetScaleY",(t,e,s,i)=>{if(0!==e){const r=t.IC()<0?-1:1;if("relative"===i.jit.iZ()&&t.E6()&&t.P6()){const n=s.ast()*r*e;isNaN(i.Bnt)&&INSTANCE_FUNC_MAP.get("offsetHeight").Pnt(t,1,s,i,!0),t.Unt(n/i.Bnt,!0)}else t.Unt(s.ast()*r*e)}},(t,e,s)=>{t.pC(s.ast()*e)},(i,r)=>{const n=i.IC()<0?-1:1;if(i.P6()){let t=i.l6(),e=r.vet().eet(t.xk()),s=NaN;if(e)s=t.IC()/e.ast();else{const h=t.xk().rB();s=h.hst()?t.IC()/h.ast():1}return i.IC()*n/(r.ast()*s)}return i.IC()*n/r.ast()},!1);class NumericInterpolationAdapter extends C33.Pet.ort{constructor(t){super(t),this.oA=0,this.Ynt=0,this.znt=0,this.Jnt=0,this.jnt=NaN,this.Bnt=NaN,this.iht=void 0,this.rht=void 0,this.nht=null,this.hht=null,this.oht=null,this.aht=null,this.lht=null,this.cht=null,this.uht=null,this.fht=null,this.dht=!1,this.pht=!1,C33.ir(this.jit.vet(),C33.Cht)?this.Fnt=new C33.Pet.ort.mht(this):this.Fnt=new C33.Pet.ort.Sht(this);const e=this.jit.tet();switch(this.jit.Wet()){case"world-instance":{const s=INSTANCE_FUNC_MAP.get(e);this.nht=s.xnt,this.hht=s.Pnt,this.oht=s.vnt,this.dht=s.round,this.pht=s.Lnt,this.lht=s.init,this.aht=s.reset;break}case"audio":this.cht=t.qrt,this.uht=t.zrt,this.fht=t.Jrt,this.dht=!!t.Krt(),this.pht=!1}}Sn(){this.Fnt=null,this.nht=null,this.hht=null,this.oht=null,this.aht=null,this.lht=null,this.cht=null,this.uht=null,this.fht=null,super.Sn()}vit(){return this.Fnt.vit()}ght(){return this.oA}_ht(t){this.oA=t}Ott(){this.aht&&this.aht(this)}pK(){const t=this.Fnt.pK();if("number"==typeof t&&(this.oA=t),this.lht){const e=this.W5(),s=this.jit.qst();this.lht(this,e,s)}}Ntt(){const t=this.Fnt.Ntt();"number"==typeof t&&(this.oA=t)}Git(){return this.rnt()}wst(){const t=this.nnt();return t!==this.Git()}bst(){return!C33.Ti(this.tnt)&&this.tnt!==this.Git()}Kit(){this.Fnt.Kit()}irt(t,e,s,i,r,n,h,o){return this.Fnt.irt(t,e,s,i,r,n,h,o)}rrt(){this.Fnt.rrt()}rnt(){const t=this.pnt(),e=this.dnt(),s=this.W5(),i=this.jit.qst(),r=this.jit.Wet();switch(r){case"behavior":return t.Tnt(e);case"effect":return t[e];case"instance-variable":return t.Ont(e);case"plugin":return t.Tnt(e);case"world-instance":return this.nht(s,i);case"audio":return this.cht.call(this.YQ(),s,i)}}Mnt(t,e,s){const i=this.pnt(),r=this.dnt(),n=this.W5(),h=this.jit.qst(),o=this.jit.Wet();switch(o){case"behavior":i.Tht(r,t);break;case"effect":i[r]+=t;break;case"instance-variable":i.yht(r,t);break;case"plugin":i.Tht(r,t,this.YQ().grt());break;case"world-instance":this.hht(n,t,h,this);break;case"audio":this.uht.call(this.YQ(),n,t,h,this)}}Eht(t,e,s){let i=this.jit.QQ();if("discrete"!==(i="default"===i?"continuous":i)||e){if("discrete"===i&&s){const l=this.jit.vet(),c=l.mP(),u=this.jit.Iit(c);if(!u)return}const r=this.pnt(),n=this.dnt(),h=this.W5(),o=this.jit.qst(),a=this.jit.Wet();switch(a){case"behavior":r.Rnt(n,t);break;case"effect":r[n]=t;break;case"instance-variable":r.Gnt(n,t);break;case"plugin":r.Rnt(n,t,this.YQ().grt());break;case"world-instance":this.oht(h,t,o);break;case"audio":this.fht.call(this.YQ(),h,t,o)}}}Iht(t,e,s,i,r,n,h,o){this.Fnt.Iht(t,e,s,i,r,n,h,o)}Aht(t,e,s,i,r){let n=(t="angle"===this.jit.dit()?C33.Mn(t):t).toString(),h=n.split(".")[1]||"",o=h.length,a=this.rnt(),l;switch(l=0===o?this.dht?Math.round(a):this.pht?"angle"===this.jit.dit()?C33.An(Math.round(C33.Mn(a))):Number(C33.toFixed(a,2)):a:this.dht?Number(C33.toFixed(a,o)):(this.pht,a),this.Mnt(l-a,e,s),this.jit.tet()){case"offsetWidth":case"offsetScaleX":{const c=this.W5(),u=c.dC(),f=Number(C33.toFixed(u,2));c.XC(f-u);break}case"offsetHeight":case"offsetScaleY":{const d=this.W5(),p=d.IC(),C=Number(C33.toFixed(p,2));d.Unt(C-p);break}}}Qj(){return Object.assign(super.Qj(),{v:this.oA,a:this.Ynt,fod:this.znt,bod:this.Jnt,of:this.jnt,sf:this.Bnt,armorf:this.iht,armandf:this.rht})}tY(t){t&&(super.tY(t),this.oA=t.v,this.Ynt=t.a,this.znt=C33.Si(t.fod)?t.fod:0,this.Jnt=C33.Si(t.bod)?t.bod:0,this.jnt=C33.Si(t.of)?t.of:NaN,this.Bnt=C33.Si(t.sf)?t.sf:NaN,this.iht=C33.Si(t.armorf)?t.armorf:void 0,this.rht=C33.Si(t.armandf)?t.armandf:void 0)}}C33.Pet.ort.art=NumericInterpolationAdapter}{const C33=self.Ve;class AbsoluteValueObject{constructor(t){this.Mht=!1,this.Trt=0,this.Rht=!1,this.wht=!1,this.Met=t;for(let t=0,e=this.Met.length;t<e;t++)this.Met[t].jst(this)}Qtt(){return this.Met}bht(){this.Mht=!0}Oht(){return this.Mht}Uit(t){this.Trt=t}ait(){return this.Trt}Ght(t){this.Rht=t}Pht(){return this.Rht}$tt(t){this.wht=t}vht(){return this.wht}gf(){this.Mht=!1,this.Trt=0,this.Rht=!1,this.wht=!1}}class NumericInterpolationAdapterForTimeline{constructor(t){this.xht=t}Sn(){this.xht=null}gI(){return 0}pK(){const t=this.xht;this.xht.kk();return t.cnt(()=>t.hnt(()=>0,()=>t.YQ().Xit()),()=>{})}Ntt(){}vit(){this.xht;const t=this.xht.kk();switch(t.iZ()){case"relative":return!1;case"absolute":return!0}}Kit(){this.xht;const t=this.xht.kk(),e=t.tet();switch(t.iZ()){case"relative":break;case"absolute":if(t.Xst()){const s=t.Yst();s.gf()}else{const i=t.vet(),r=t.xk(),n=t.YQ(),h=i.jQ(r,n,e,t);h&&1<h.length&&new AbsoluteValueObject(h)}}}irt(t,e,s,i,r,n,h,o){const a=this.xht,l=this.xht.kk();switch(l.iZ()){case"relative":{const c=a.ght();a.Mnt(e-c,s,i),n&&this.Iht(t,s,i,r,c,e),a._ht(e);break}case"absolute":{const u=l.vet(),f=l.qst();l.xk(),l.YQ();if(l.Xst()){const d=l.Yst(),p=d.Qtt(),C=a.mnt(p,!0),m=a.Snt(u,u.mP(),C);if(m){const S=f.Vtt(),g=m.time-S;if(0==g)d.$tt(h),d.Ght(o),d.bht(),d.Uit(d.ait()+e);else{if(g<0)return;const _=l.xit(g);d.$tt(h),d.Ght(o),d.bht(),d.Uit(d.ait()+(e-_))}}}else a.Eht(e,o,h);break}}}rrt(){const t=this.xht,e=this.xht.kk();switch(e.iZ()){case"relative":break;case"absolute":if(e.Xst()){const s=e.Yst();s.Oht()&&t.Eht(s.ait(),s.Pht(),s.vht())}}}Iht(t,e,s,i,r,n){const h=this.xht;i||(e&&t===e.mP()?h.Aht(e.uZ(),e,s):s&&t===s.mP()?h.Aht(s.uZ(),e,s):n-r==0&&h.Aht(e.uZ(),e,s))}}C33.Pet.ort.Sht=NumericInterpolationAdapterForTimeline}{const C33=self.Ve;class NumericInterpolationAdapterForTween{constructor(t){this.xht=t}Sn(){this.xht=null}gI(){return 1}pK(){const t=this.xht;return t.snt(!0),this.fnt(t.nnt())}Ntt(){const t=this.xht;if(t.nnt()!==t.lnt())return t.snt(!0),this.fnt(t.lnt())}vit(){return!1}Kit(){}irt(t,e,s,i,r,n,h,o){const a=this.xht,l=a.ght();switch(a.kk().iZ()){case"relative":a.Mnt(e-l,s,i),n&&this.Iht(t,s,i,r,l,e,!1,h);break;case"absolute":a.int()?(a.snt(!1),a.Mnt(l,s,i)):0===t&&0===a.kk().vet().Sk()?a.Eht(e,!0,!1):(a.Mnt(e-l,s,i),n&&this.Iht(t,s,i,r,l,e,this.Lht(),h))}a._ht(e)}rrt(){}fnt(t){const e=this.xht;return t-e.Git()}Lht(){let t=this.xht,e=t.W5().xk(),s=t.kk().aL(),i=s.XQ(),r=0;for(const n of i.HJ())0===n.gI()?n.qJ(e)&&r++:1===n.gI()&&n.xk()===e&&r++;return r<=1}Iht(t,e,s,i,r,n,h,o){const a=this.xht;i?e&&t===e.mP()?a.Aht(e.uZ(),e,s,h,o):s&&t===s.mP()?a.Aht(s.uZ(),e,s,h,o):s||a.Aht(e.uZ(),e,s,h,o):e&&t===e.mP()?a.Aht(e.uZ(),e,s,h,o):s&&t===s.mP()?a.Aht(s.uZ(),e,s,h,o):n-r==0&&a.Aht(e.uZ(),e,s,h,o)}}C33.Pet.ort.mht=NumericInterpolationAdapterForTween}{const C33=self.Ve,Ease=self.Eu;C33.Pet.Zit=class NumericTypeAdapter{constructor(){}static bnt(t,e,s,i){let r;switch(i){case"behavior":r=e.Tnt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Ont(t);break;case"plugin":r=e.Tnt(t)}return r!==s}static Yu(n,h,o,a){if(!o){let t=a.zst(),e=a.Get();return(t=e.ont(t)).uZ()}let l=a.QQ();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.dit()?"discrete":l))return h.uZ();if("continuous"===l||"step"===l){const c=a.vet().KQ();if("step"===l&&0!==c){const m=1/c;n=Math.floor(n*m)/m}const u=h.uZ(),f=o.uZ(),d=h.lZ("cubic-bezier"),p=o.lZ("cubic-bezier"),C=d&&d.Dht()&&p&&p.Nht();if(!C&&u===f)return u;let t=h.mP(),e=o.mP(),s=("step"===l&&0!==c&&(n=C33.En(n,t,e)),C33.normalize(n,t,e)),i=h.Hit(),r;if(C){const S=e-t;r=Ease.Fu(i)(S*s,0,1,S),r=Ease.Fu("cubicbezier")(r,u,u+d.pZ(),f+p.SZ(),f)}else r=Ease.Fu(i)((e-t)*s,u,f-u,e-t);return"integer"===a.dit()?Math.floor(r):r}}}}{const C33=self.Ve;C33.Pet.Qit=class AngleTypeAdapter{constructor(){}static bnt(t,e,s,i){let r;switch(i){case"behavior":r=e.Tnt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Ont(t);break;case"plugin":r=e.Tnt(t)}return r!==s}static Yu(t,e,s,i){if(!s){let t=i.zst(),e=i.Get();return(t=e.ont(t)).uZ()}let r=i.QQ();if("default"===r&&(r="continuous"),"discrete"===(r="combo"===i.dit()?"discrete":r))return e.uZ();if("continuous"===r||"step"===r){const n=i.vet().KQ();if("step"===r&&0!==n){const u=1/n;t=Math.floor(t*u)/u}const h=e.mP(),o=s.mP(),a=e.uZ(),l=s.uZ(),c=("step"===r&&0!==n&&(t=C33.En(t,h,o)),e.lZ("angle"));if(!c){if(a===l)return a;const f=C33.normalize(t,h,o),d=self.Eu.Fu(e.Hit());return C33.vn(a,l,d(f,0,1,1))}{const p=c.Fht();if(a===l&&0===p)return a;const C=C33.normalize(t,h,o),m=self.Eu.Fu(e.Hit()),S=m(C,0,1,1);switch(c.Bht()){case"closest":return C33.vn(a,l,S,p);case"clockwise":return C33.xn(a,l,S,p);case"anti-clockwise":return C33.Ln(a,l,S,p)}}}}}}{const C33=self.Ve;C33.Pet.trt=class BooleanTypeAdapter{constructor(){}static bnt(t,e,s,i){let r;switch(i){case"behavior":r=e.Tnt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Ont(t);break;case"plugin":r=e.Tnt(t)}return!!r!=!!s}static Yu(t,e,s,i){if(s)return e.uZ()?1:0;{let t=i.zst(),e=i.Get();return(t=e.ont(t)).uZ()?1:0}}}}{const C33=self.Ve,TEMP_COLOR_ARRAY=[0,0,0],TEMP_COLOR_ARRAY_2=[0,0,0],TEMP_COLOR_ARRAY_3=[0,0,0];C33.Pet.ert=class ColorTypeAdapter{constructor(){}static bnt(t,e,s,i){let r;switch(i){case"behavior":r=e.Tnt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Ont(t);break;case"plugin":r=e.Tnt(t)}return Array.isArray(s)?(TEMP_COLOR_ARRAY[0]=s[0],TEMP_COLOR_ARRAY[1]=s[1],TEMP_COLOR_ARRAY[2]=s[2]):(TEMP_COLOR_ARRAY_3.Na(s),TEMP_COLOR_ARRAY[0]=Math.floor(255*TEMP_COLOR_ARRAY_3.ca()),TEMP_COLOR_ARRAY[1]=Math.floor(255*TEMP_COLOR_ARRAY_3.ua()),TEMP_COLOR_ARRAY[2]=Math.floor(255*TEMP_COLOR_ARRAY_3.fa())),Array.isArray(r)?(TEMP_COLOR_ARRAY_2[0]=r[0],TEMP_COLOR_ARRAY_2[1]=r[1],TEMP_COLOR_ARRAY_2[2]=r[2]):(TEMP_COLOR_ARRAY_3.Na(r),TEMP_COLOR_ARRAY_2[0]=Math.floor(255*TEMP_COLOR_ARRAY_3.ca()),TEMP_COLOR_ARRAY_2[1]=Math.floor(255*TEMP_COLOR_ARRAY_3.ua()),TEMP_COLOR_ARRAY_2[2]=Math.floor(255*TEMP_COLOR_ARRAY_3.fa())),TEMP_COLOR_ARRAY[0]!==TEMP_COLOR_ARRAY_2[0]||TEMP_COLOR_ARRAY[1]!==TEMP_COLOR_ARRAY_2[1]||TEMP_COLOR_ARRAY[2]!==TEMP_COLOR_ARRAY_2[2]}static Yu(t,e,s,i){if(!s){let t=i.zst(),e=i.Get(),s=(t=e.ont(t)).uZ();return TEMP_COLOR_ARRAY[0]=s[0],TEMP_COLOR_ARRAY[1]=s[1],TEMP_COLOR_ARRAY[2]=s[2],TEMP_COLOR_ARRAY}let r=i.QQ();if("discrete"===(r="default"===r?"continuous":r)){const n=e.uZ();return TEMP_COLOR_ARRAY[0]=n[0],TEMP_COLOR_ARRAY[1]=n[1],TEMP_COLOR_ARRAY[2]=n[2],TEMP_COLOR_ARRAY}if("continuous"===r||"step"===r){const h=i.vet().KQ();if("step"===r&&0!==h){const E=1/h;t=Math.floor(t*E)/E}const o=e.mP(),a=s.mP(),l=e.uZ(),c=s.uZ(),u=("step"===r&&0!==h&&(t=C33.En(t,o,a)),C33.normalize(t,o,a)),f=e.Hit(),d=l[0],p=l[1],C=l[2],m=c[0],S=c[1],g=c[2],_=self.Eu.Fu(f),T=a-o,y=T*u;return TEMP_COLOR_ARRAY[0]=d===m?d:_(y,d,m-d,T),TEMP_COLOR_ARRAY[1]=p===S?p:_(y,p,S-p,T),TEMP_COLOR_ARRAY[2]=C===g?C:_(y,C,g-C,T),TEMP_COLOR_ARRAY}}}}{const C33=self.Ve;C33.Pet.srt=class TextTypeAdapter{constructor(){}static bnt(t,e,s,i){let r;switch(i){case"behavior":r=e.Tnt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Ont(t);break;case"plugin":r=e.Tnt(t)}return r!==s}static Yu(t,e,s,i){if(s)return e.uZ();{let t=i.zst(),e=i.Get();return(t=e.ont(t)).uZ()}}}}{const C33=self.Ve;C33.Kz=class TimelineDataManager{constructor(){this.kht=new Map}Sn(){for(const t of this.kht.values())t.Sn();this.kht.clear(),this.kht=null}_u(t){const e=new C33.$ht(t),s=e.i3();this.kht.set(s,e)}cs(t){return this.kht.get(t)}BQ(){return 0}static Wht(t,e,s,i){if(e)for(const r of e)C33.Kz.Vht("create",r,t,s,i)}static Hht(t,e,s,i){if(e)for(const r of e)C33.Kz.Vht("create-including-disabled",r,t,s,i)}static Uht(s,t,e,i){s.length?t.forEach((t,e)=>{s[e].tY(t)}):t.forEach(t=>{C33.Kz.Vht("load",t,s,e,i)})}static Vht(t,e,s,i,r){let n;if("function"==typeof i)switch(t){case"load":n=new i(null,r);break;case"create":case"create-including-disabled":n=new i(e,r)}else if("object"==typeof i){const h=i.prop,o=e[h],a=i.map.get(o);switch(t){case"load":n=new a(null,r);break;case"create":case"create-including-disabled":n=new a(e,r)}}switch(t){case"load":n.tY(e),s.push(n);break;case"create":if("function"==typeof n.est&&!n.est())return n.Sn();s.push(n);break;case"create-including-disabled":s.push(n)}}}}{const C33=self.Ve,NAME=0,TOTAL_TIME=1,STEP=2,INTERPOLATION_MODE=3,RESULT_MODE=4,TRACKS=5,LOOP=6,PING_PONG=7,REPEAT_COUNT=8,START_ON_LAYOUT=9,TRANSFORM_WITH_SCENE_GRAPH=10,USE_SYSTEM_TIMESCALE=11;C33.$ht=class TimelineDataItem{constructor(t){this.Tn="",this.ktt=NaN,this.Xht=0,this.jht="default",this.Yht="default",this.qht=!1,this.zht=!1,this.Jht=1,this.cet=null,this.Kht="",this.Zht=!1,this.Qht=!0,t&&(this.Tn=t[NAME],this.ktt=t[TOTAL_TIME],this.Xht=t[STEP],this.jht=t[INTERPOLATION_MODE],this.Yht=t[RESULT_MODE],this.qht=!!t[LOOP],this.zht=!!t[PING_PONG],this.Jht=t[REPEAT_COUNT],this.Kht=t[START_ON_LAYOUT],this.Zht=!!t[TRANSFORM_WITH_SCENE_GRAPH],this.Qht=!!t[USE_SYSTEM_TIMESCALE],this.cet=new C33.tot(t[TRACKS],this))}Sn(){this.cet.Sn(),this.cet=null}HQ(){return this.cet||(this.cet=new C33.tot(null,this)),this.cet}i3(){return this.Tn}M$(t){this.Tn=t}Sk(){return this.ktt}mk(t){this.ktt=t}KQ(){return this.Xht}ZQ(t){this.Xht=t}QQ(){return this.jht}ttt(t){this.jht=t}iZ(){return this.Yht}ett(t){this.Yht=t}_k(){return this.qht}gk(t){this.qht=t}yk(){return this.zht}Tk(t){this.zht=t}bB(){return this.Jht}stt(t){this.Jht=t}MK(){return this.Kht}itt(){return this.Zht}ntt(){return this.Qht}Qj(){return{trackDataJson:this.cet.Qj(),name:this.Tn,totalTime:this.ktt,step:this.Xht,interpolationMode:this.jht,resultMode:this.Yht,loop:this.qht,pingPong:this.zht,repeatCount:this.Jht,startOnLayout:this.Kht,transformWithSceneGraph:!!this.Zht,useSystemTimescale:this.Qht}}tY(t){t&&(this.HQ().tY(t.trackDataJson),this.Tn=t.name,this.ktt=t.totalTime,this.Xht=t.step,this.jht=t.interpolationMode,this.Yht=t.resultMode,this.qht=t.loop,this.zht=t.pingPong,this.Jht=t.repeatCount,this.Kht=t.startOnLayout,this.Zht=!!t.transformWithSceneGraph,this.Qht=!!t.useSystemTimescale)}}}{const C33=self.Ve,WI_DATA=0,OC_INDEX=1,WI_UID=2,INTERPOLATION_MODE=1,RESULT_MODE=2,ENABLED=3,KEYFRAMES=4,PROPERTY_TRACKS=5,ID=6,NESTED_DATA=7,START_OFFSET=0,LOCAL_TOTAL_TIME=1,WI_ADDITIONAL_DATA=8,ORIGINAL_WIDTH=0,ORIGINAL_HEIGHT=1,TRACK_TYPE=9,TRACK_NAME=10;class TrackDataItem{constructor(t,e){this.cet=e,this.eot=null,this.sot=null,this.uet=NaN,this.fet=NaN,this.jht="default",this.Yht="default",this.jc=!1,this.iot=null,this.Bst=null,this.C3="",this.rot=null,this.not=0,this.hot=this.cet.JQ().Sk(),this.y3=0,this.Tn="",t&&(t[WI_DATA]&&(this.eot=t[WI_DATA],this.uet=t[WI_DATA][WI_UID],this.fet=t[WI_DATA][OC_INDEX]),this.jht=t[INTERPOLATION_MODE],this.Yht=t[RESULT_MODE],this.jc=!!t[ENABLED],t[ID]&&(this.C3=t[ID]),t[NESTED_DATA]&&(this.rot=t[NESTED_DATA],this.not=t[NESTED_DATA][START_OFFSET],this.hot=t[NESTED_DATA][LOCAL_TOTAL_TIME]),t[WI_ADDITIONAL_DATA]&&(this.sot=t[WI_ADDITIONAL_DATA]),t[WI_ADDITIONAL_DATA]&&(this.sot=t[WI_ADDITIONAL_DATA]),t[TRACK_TYPE]&&(this.y3=t[TRACK_TYPE]),t[TRACK_NAME]&&(this.Tn=t[TRACK_NAME]),this.iot=new C33.oot(t[KEYFRAMES],this),this.Bst=new C33.aot(t[PROPERTY_TRACKS],this))}Sn(){this.eot=null,this.cet=null,this.iot&&(this.iot.Sn(),this.iot=null),this.Bst&&(this.Bst.Sn(),this.Bst=null),this.rot=null}HQ(){return this.cet}Aet(){return this.iot||(this.iot=new C33.oot(null,this)),this.iot}Get(){return this.Bst||(this.Bst=new C33.aot(null,this)),this.Bst}lot(){return this.eot}Net(){return this.fet}ist(t){this.fet=t}Det(){return this.uet}Zet(t){this.uet=t}QQ(){return this.jht}ttt(t){this.jht=t}iZ(){return this.Yht}ett(t){this.Yht=t}est(){return this.jc}sst(t){this.jc=!!t}Fk(){return this.C3}Vtt(){return this.not}Qet(){return this.hot}tst(t){this.hot=t}nst(){return this.sot[ORIGINAL_WIDTH]}rst(t){this.sot||(this.sot=[]),this.sot[ORIGINAL_WIDTH]=t}ast(){return this.sot||(this.sot=[]),this.sot[ORIGINAL_HEIGHT]}ost(t){this.sot||(this.sot=[]),this.sot[ORIGINAL_HEIGHT]=t}gI(){return this.y3}i3(){return this.Tn}Qj(){return{keyframeDataJson:this.iot.Qj(),propertyTrackDataJson:this.Bst.Qj(),instanceData:this.eot,additionalInstanceData:this.sot,instanceUid:this.uet,objectClassIndex:this.fet,interpolationMode:this.jht,resultMode:this.Yht,enabled:this.jc,id:this.C3,nestedData:this.rot,type:this.y3,name:this.Tn}}tY(t){t&&(this.eot=t.instanceData,this.uet=t.instanceUid,this.fet=t.objectClassIndex,this.jht=t.interpolationMode,this.Yht=t.resultMode,this.jc=t.enabled,this.C3=t.id,this.y3=t.type||0,this.Tn=t.name||"",this.hot=this.cet.JQ().Sk(),t.nestedData&&(this.rot=t.nestedData,this.not=this.rot[START_OFFSET],this.hot=this.rot[LOCAL_TOTAL_TIME]),t.additionalInstanceData&&(this.sot=t.additionalInstanceData),this.Aet().tY(t.keyframeDataJson),this.Get().tY(t.propertyTrackDataJson))}}C33.tot=class TrackData{constructor(t,e){this.aQ=e,this.cot=[],C33.Kz.Wht(this.cot,t,TrackDataItem,this)}Sn(){this.aQ=null;for(const t of this.cot)t.Sn();C33.Vh(this.cot),this.cot=null}JQ(){return this.aQ}Xtt(){const t=new TrackDataItem(null,this);return this.cot.push(t),t}uot(t){return t.Aet().Iet()[0]}dot(t){const e=t.Aet().Iet();return e.at(-1)}gst(e,t){const s=t.Aet().Iet(),i=s.length;for(let t=0;t<i;t++){const r=s[t];if(r.mP()===e)return r}}pot(e,t){const s=t.Aet().Iet(),i=s.length;for(let t=0;t<i;t++){const r=s[t];if(r.mP()>e)return r}}Cot(e,t){const s=t.Aet().Iet(),i=s.length;for(let t=0;t<i;t++){const r=s[t];if(r.mP()>=e)return r}}Sst(e,t){const s=t.Aet().Iet();for(let t=s.length-1;0<=t;t--){const i=s[t];if(i.mP()<=e)return i}}*VQ(){for(const t of this.cot)yield t}Qj(){return{trackDataItemsJson:this.cot.map(t=>t.Qj())}}tY(t){t&&C33.Kz.Uht(this.cot,t.trackDataItemsJson,TrackDataItem,this)}}}{const C33=self.Ve,SOURCE_DATA=0,SOURCE=0,PROPERTY=1,TYPE=2,MIN=3,MAX=4,INTERPOLATION_MODE=5,RESULT_MODE=6,ENABLED=7,PROPERTY_KEYFRAMES=8,CAN_HAVE_PROPERTY_KEYFRAMES=9;class PropertyTrackDataItem{constructor(t,e){this.Bst=e,this.mot="",this.Sot=null,this.Zrt=null,this.y3=null,this.got=NaN,this._ot=NaN,this.jht="default",this.Yht="default",this.jc=!1,this.Tot=null,this.yot=!0,t&&(this.mot=t[SOURCE_DATA][SOURCE],this.Sot=t[SOURCE_DATA].slice(1),this.Zrt=t[PROPERTY],this.y3=t[TYPE],this.got=t[MIN],this._ot=t[MAX],this.jht=t[INTERPOLATION_MODE],this.Yht=t[RESULT_MODE],this.jc=!!t[ENABLED],this.Tot=new C33.Eot(t[PROPERTY_KEYFRAMES],this),this.yot=t[CAN_HAVE_PROPERTY_KEYFRAMES])}Sn(){this.Tot.Sn(),this.Tot=null,this.Bst=null,this.Sot=null}Get(){return this.Bst}Vst(){return this.Tot||(this.Tot=new C33.Eot(null,this)),this.Tot}Wet(){return this.mot}iit(t){this.mot=t}nit(){return this.Sot}oit(t){this.Sot=t}lit(){return this.Zrt}uit(t){this.Zrt=t}gI(){return this.y3}SetType(t){this.y3=t}Sit(){return this.got}git(t){this.got=t}_it(){return this._ot}Tit(t){this._ot=t}QQ(){return this.jht}ttt(t){this.jht=t}iZ(){return this.Yht}ett(t){this.Yht=t}est(){return this.jc}sst(t){this.jc=!!t}Eit(){return!!this.yot}Qj(){return{propertyKeyframeDataJson:this.Tot.Qj(),sourceAdapterId:this.mot,sourceAdapterArguments:this.Sot,property:this.Zrt,type:this.y3,min:this.got,max:this._ot,interpolationMode:this.jht,resultMode:this.Yht,enabled:this.jc,canHavePropertyKeyframes:this.yot}}tY(t){t&&(this.mot=t.sourceAdapterId,this.Sot=t.sourceAdapterArguments,this.Zrt=t.property,this.y3=t.type,this.got=t.min,this._ot=t.max,this.jht=t.interpolationMode,this.Yht=t.resultMode,this.jc=t.enabled,this.yot=t.canHavePropertyKeyframes,this.Vst().tY(t.propertyKeyframeDataJson))}}C33.aot=class PropertyTrackData{constructor(t,e){this.let=e,this.Iot=[],C33.Kz.Wht(this.Iot,t,PropertyTrackDataItem,this)}Sn(){this.let=null;for(const t of this.Iot)t.Sn();C33.Vh(this.Iot),this.Iot=null}Ket(){return this.let}Est(){const t=new PropertyTrackDataItem(null,this);return this.Iot.push(t),t}mit(t){const e=t.Vst();return e.Wst()[0]}ont(t){const e=t.Vst(),s=e.Wst();return s.at(-1)}Iit(e,t){const s=t.Vst(),i=s.Wst(),r=i.length;for(let t=0;t<r;t++){const n=i[t];if(n.mP()===e)return n}}Rit(e,t){const s=t.Vst(),i=s.Wst(),r=i.length;for(let t=0;t<r;t++){const n=i[t];if(n.mP()>e)return n}}wit(e,t){const s=t.Vst(),i=s.Wst(),r=i.length;for(let t=0;t<r;t++){const n=i[t];if(n.mP()>=e)return n}}Ait(e,t){const s=t.Vst(),i=s.Wst();for(let t=i.length-1;0<=t;t--){const r=i[t];if(r.mP()<=e)return r}}*Oet(){for(const t of this.Iot)yield t}Qj(){return{propertyTrackDataItemsJson:this.Iot.map(t=>t.Qj())}}tY(t){t&&C33.Kz.Uht(this.Iot,t.propertyTrackDataItemsJson,PropertyTrackDataItem,this)}}}{const C33=self.Ve,TIME=0,EASE=1,ENABLE=2,TAGS=3;class KeyframeDataItem{constructor(t,e){if(this.iot=e,this.Cv=-1,this.Aot="noease",this.Mot=!1,this.xQ=null,this.Rot=null,t){this.Cv=t[TIME],this.Aot=t[EASE],this.Mot=!!t[ENABLE];const s=t[TAGS];this.xQ=s?s.split(" "):[],this.Rot=new Set(this.xQ.map(t=>t.toLowerCase())),this.wot=null}}Sn(){this.iot=null,C33.Vh(this.xQ),this.xQ=null,this.Rot.clear(),this.Rot=null,this.wot=null}Aet(){return this.iot}zK(){return this.wot}bot(t){this.wot=t}mP(){return this.Cv}Ck(t){this.Cv=t,this.iot.Oot()}Hit(){return this.Aot}vk(t){this.Aot=t}est(){return this.Mot}sst(t){this.Mot=!!t}Ak(){return this.xQ}att(t){this.xQ=t?t.split(" "):[],this.Rot=new Set(this.xQ.map(t=>t.toLowerCase()))}Got(){return this.Rot}net(t){return this.Rot.has(t.toLowerCase())}Qj(){return{time:this.Cv,ease:this.Aot,enable:this.Mot,tags:this.xQ}}tY(t){t&&(this.Cv=t.time,this.Aot=t.ease,this.Mot=t.enable,this.xQ=t.tags,this.Rot=new Set(this.xQ.map(t=>t.toLowerCase())))}}C33.oot=class KeyframeData{constructor(t,e){this.let=e,this.Eet=[],C33.Kz.Wht(this.Eet,t,KeyframeDataItem,this),this.Oot()}Sn(){this.let=null;for(const t of this.Eet)t.Sn();C33.Vh(this.Eet),this.Eet=null}Oot(){this.Eet.sort((t,e)=>t.mP()-e.mP());for(let t=0;t<this.Eet.length;t++){const e=this.Eet[t];e.bot(this.Eet[t+1])}}Ket(){return this.let}Pot(){return this.Eet.length}Iet(){return this.Eet}Tst(){const t=new KeyframeDataItem(null,this);return this.Eet.push(t),this.Oot(),t}Ast(t){for(const e of this.Eet)if(t(e)){const s=this.Eet.indexOf(e);-1!==s&&(e.Sn(),this.Eet.splice(s,1))}this.vot(),this.Oot()}vot(){this.Eet.sort((t,e)=>t.mP()-e.mP())}Lst(t){return this.Eet.indexOf(t)}Dst(t){return this.Eet[t]}*xot(){for(const t of this.Eet)yield t}*Lot(){for(let t=this.Eet.length-1;0<=t;t--)yield this.Eet[t]}Qj(){return{keyframeDataItemsJson:this.Eet.map(t=>t.Qj())}}tY(t){t&&(C33.Kz.Uht(this.Eet,t.keyframeDataItemsJson,KeyframeDataItem,this),this.Oot())}}}{const C33=self.Ve,VALUE_DATA=0,VALUE_DATA_VALUE=0,VALUE_DATA_ABSOLUTE_VALUE=1,VALUE_DATA_TYPE=2,TIME=1,EASE=2,ENABLE=3,ADDONS=4,PATH_MODE=5;class PropertyKeyframeDataItem{constructor(t,e){this.Tot=e,this.Trt=null,this.Dot=null,this.y3="",this.Cv=NaN,this.Aot="noease",this.Mot=!1,this.Not=null,this.Fot=void 0,this.Bot="line",t&&(this.Trt=t[VALUE_DATA][VALUE_DATA_VALUE],this.Dot=t[VALUE_DATA][VALUE_DATA_ABSOLUTE_VALUE],this.y3=t[VALUE_DATA][VALUE_DATA_TYPE],this.Cv=t[TIME],this.Aot=t[EASE],this.Mot=!!t[ENABLE],this.Bot=t[PATH_MODE],this.Not=null,t[ADDONS]&&(this.Not=new C33.kot(t[ADDONS],this)),this.wot=null,this.$ot=null)}Sn(){this.Tot=null,this.Not&&(this.Not.Sn(),this.Not=null),this.wot=null,this.$ot=null}Wot(){return this.Not}bot(t){this.wot=t}zK(){return this.wot}Vot(t){this.$ot=t}JK(){return this.$ot}ait(){return this.Trt}Uit(t){"color"===this.y3&&C33.Si(t)?(this.Trt[0]=C33.Jn(t),this.Trt[1]=C33.Kn(t),this.Trt[2]=C33.Zn(t)):this.Trt=t}ant(){return this.Dot}$it(t){"color"===this.y3&&C33.Si(t)?(this.Dot[0]=C33.Jn(t),this.Dot[1]=C33.Kn(t),this.Dot[2]=C33.Zn(t)):this.Dot=t}uZ(){const t=this.Tot.zst().iZ();return"relative"===t?this.ait():"absolute"===t?this.ant():void 0}gI(){return this.y3}SetType(t){this.y3=t}mP(){return this.Cv}Ck(t){this.Cv=t,this.Tot.Hot()}Hit(){return this.Aot}vk(t){this.Aot=t}est(){return this.Mot}sst(t){this.Mot=!!t}KK(){return this.Bot}lZ(e){if(this.Not){if(!this.Fot&&null!==this.Fot){const s=this.Not.Uot();if(s){const i=s.length;for(let t=0;t<i;t++){const r=s[t];if(r.Fk()===e)return this.Fot=r,this.Fot}}this.Fot=null}return this.Fot}}Qj(){const t=this.Not;return{addonDataJson:t&&t.Qj(),value:this.Trt,aValue:this.Dot,type:this.y3,time:this.Cv,ease:this.Aot,enable:this.Mot}}tY(t){t&&(t.addonDataJson&&this.Not._SetFromJson(t.addonDataJson),this.Trt=t.value,this.Dot=t.aValue,this.y3=t.type,this.Cv=t.time,this.Aot=t.ease,this.Mot=t.enable)}}C33.Eot=class PropertyKeyframeData{constructor(t,e){this.Fst=e,this.$st=[],this.Xot=[],C33.Kz.Wht(this.$st,t,PropertyKeyframeDataItem,this),C33.Kz.Hht(this.Xot,t,PropertyKeyframeDataItem,this),this.Hot()}Sn(){this.Fst=null;for(const t of this.$st)t.Sn();C33.Vh(this.$st),this.$st=null;for(const e of this.Xot)e.Sn();C33.Vh(this.Xot),this.Xot=null}Hot(){let e=this.$st;e.sort((t,e)=>t.mP()-e.mP());for(let t=0;t<e.length;t++){const s=e[t];t+1<e.length&&s.bot(e[t+1]),0<=t-1&&s.Vot(e[t-1])}(e=this.Xot).sort((t,e)=>t.mP()-e.mP());for(let t=0;t<e.length;t++){const i=e[t];t+1<e.length&&i.bot(e[t+1]),0<=t-1&&i.Vot(e[t-1])}}Bit(){const t=new PropertyKeyframeDataItem(null,this);return this.$st.push(t),this.Hot(),t}kit(t){for(const e of this.$st)if(t(e)){const s=this.$st.indexOf(e);-1!==s&&(e.Sn(),this.$st.splice(s,1))}this.jot(),this.Hot()}jot(){this.$st.sort((t,e)=>t.mP()-e.mP())}zst(){return this.Fst}Yot(){return this.$st.length}ont(){return this.$st[this.$st.length-1]}Wst(){return this.$st}qK(){return this.Xot}*qot(){for(const t of this.$st)yield t}*zot(){for(let t=this.$st.length-1;0<=t;t--)yield this.$st[t]}Qj(){const t=this.$st,e=this.Xot;return{propertyKeyframeDataItemsJson:t.map(t=>t.Qj()),propertyKeyframeDataItemsIncludingDisabledJson:e.map(t=>t.Qj())}}tY(t){t&&(C33.Kz.Uht(this.$st,t.propertyKeyframeDataItemsJson,PropertyKeyframeDataItem,this),C33.Kz.Uht(this.Xot,t.propertyKeyframeDataItemsIncludingDisabledJson,PropertyKeyframeDataItem,this),this.Hot())}}}{const C33=self.Ve,ADDON_ID=0,ADDON_DATA=1;class AddonDataItem{constructor(t,e){this.Not=e,this.C3=t[ADDON_ID],this.Jot=t[ADDON_DATA]}Sn(){this.Not=null,this.Jot=null}Wot(){return this.Not}Fk(){return this.C3}Qj(){return{id:this.C3,data:this.Jot}}tY(t){t&&(this.C3=t.id,this.Jot=t.data)}}const START_ANCHOR=0,START_ENABLE=1,END_ANCHOR=2,END_ENABLE=3;class AddonDataCubicBezierItem extends AddonDataItem{constructor(t,e){super(t,e),this.Kot=this.Jot[START_ANCHOR],this.Zot=!!this.Jot[START_ENABLE],this.Qot=this.Jot[END_ANCHOR],this.tat=!!this.Jot[END_ENABLE]}Sn(){super.Sn()}pZ(){return this.Kot}Dht(){return this.Zot}SZ(){return this.Qot}Nht(){return this.tat}Qj(){return Object.assign(super.Qj(),{startAnchor:this.Kot,startEnable:!!this.Zot,endAnchor:this.Qot,endEnable:!!this.tat})}tY(t){t&&(super.tY(t),this.Kot=t.startAnchor,this.Zot=!!t.startEnable,this.Qot=t.endAnchor,this.tat=!!t.endEnable)}}const DIRECTION=0,REVOLUTIONS=1;class AddonDataAngleItem extends AddonDataItem{constructor(t,e){super(t,e),this.eat=this.Jot[DIRECTION],this.sat=this.Jot[REVOLUTIONS]}Sn(){super.Sn()}Bht(){return this.eat}Fht(){return this.sat}Qj(){return Object.assign(super.Qj(),{direction:this.eat,revolutions:this.sat})}tY(t){t&&(super.tY(t),this.eat=t.direction,this.sat=t.revolutions)}}C33.kot=class AddonData{constructor(t,e){this.iat=e,this.rat=[],C33.Kz.Wht(this.rat,t,{prop:0,map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}Sn(){this.iat=null;for(const t of this.rat)t.Sn();C33.Vh(this.rat),this.rat=null}nat(){return this.iat}Uot(){return this.rat}*hat(){for(const t of this.rat)yield t}Qj(){return{addonDataItemsJson:this.rat.map(t=>t.Qj())}}tY(t){t&&C33.Kz.Uht(this.rat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}}}{let C33=self.Ve,INITIAL_VALUE_MODE_START_VALUE="start-value",INITIAL_VALUE_MODE_CURRENT_STATE="current-state",PING_PONG_BEGIN=0,PING_PONG_END=1,createdTweens=0;C33.Cht=class Tween extends C33.GJ{constructor(t,e){super("tween-"+createdTweens++,t,e),this.C3="",this.oat=!1,this.aat=INITIAL_VALUE_MODE_START_VALUE,this.det=null,this.lat=null,this.cat=null,this.Nst=null,this.uat=null}$Q(t){const e=C33.mn(C33.Event,"tweenstatereleased");e.fat=this,t.dispatchEvent(e)}gI(){return 1}dQ(){for(const t of this.aQ.HQ().VQ())this.lQ.push(C33.dat.mE(this,t));this.Nst=this.lQ[0]}Utt(){const t=this.aQ.HQ().Xtt(),e=C33.dat.mE(this,t);return this.lQ.push(e),this.pat(),e}pat(){this.Nst=this.lQ[0]}kk(t){return this.Nst.Qtt()[0]}pit(t){this.Cat=t}xk(){const t=this.XK();if(t&&t.length){const e=t[0];if(this.Nst=e){const s=e.xk();return e.Let()?s:void 0}}}mat(t){this.cat||(this.cat=[]),this.cat.push(t)}Sat(t){this.lat||(this.lat=[]),this.lat.push(t)}gat(t){if(this.cat){const e=this.cat.indexOf(t);-1!==e&&this.cat.splice(e,1)}}_at(t){if(this.lat){const e=this.lat.indexOf(t);-1!==e&&this.lat.splice(e,1)}}Tat(t,e){for(const s of this.lQ)for(const i of s.Met)if(i.tet()===e){const r=i.Get(),n=i.zst(),h=r.mit(n);h.Uit(t),h.$it(t)}}yat(t){for(const e of this.lQ)for(const s of e.Met)if(s.tet()===t)return s}Eat(t){for(const e of t){const s=this.yat(e);this.Tat(s.Git(),e)}if(this.ott()){const i=this.Sk()-this.mP();this.mk(i);for(const r of this.lQ)r.tst(i);this.Ett(0)}else{const n=this.mP();this.mk(n);for(const h of this.lQ)h.tst(n);this.Ett(n)}this.Itt()}Iat(t,e){const s=this.yat(e),i=s.Get(),r=s.zst(),n=i.ont(r);n.Ck(this.Sk()),n.Uit(t),n.$it(t)}Aat(t){this.C3=t}Fk(){return this.C3}Mat(t){this.aat=t}Rat(){return this.aat}Nk(t){this.oat=t}Dk(){return this.oat}ftt(){if(this.cat)for(const t of this.cat)t(this);if(!this.yK())for(const e of this.lQ)e.bst()}dtt(){this.wQ=this.f3.ptt()}IK(){if(!this.GQ&&(this.GQ=!0,this.lat))for(const t of this.lat)t(this)}Ck(t){this.wat(),super.Ck(t)}btt(t){(t=C33.Si(t)?t:this.Sk())<0?this.mQ=0:t>=this.Sk()?this.mQ=this.Sk():this.mQ=t,this.Nst.Ott()}pK(t){if(!this.EK()&&this.Rat()===INITIAL_VALUE_MODE_CURRENT_STATE)for(const e of this.lQ)e.wst();super.pK(t)}fk(t=!1){if(super.fk(t),!this.yK())for(const e of this.lQ)e.Rst()}gf(t=!0,e=!1){this.wat(),super.gf(t,e)}wat(){for(const t of this.lQ){const e=t=>{const e=t.mP(),s=this.Sk();return 0!==e&&e!==s};t.Ist(e),t.Mst(e)}}pJ(){if(!this.ck()){const t=this.xk();if(t&&t.IF().pU())return!1;this.oQ.cK(this),this.Ltt()}return!0}gK(r,t,e){if(this.det||(this.det=this.xk()),!this.det||this.det.k8())this.fk(!0),this.dtt();else{const s=this.det.Zx();if(0!==(r=-1!==s?e*s:r)||0!==this.vQ){this.vQ=r;const n=this.mQ+this.SQ,h=r*this.gQ,o=n+h,a=this.aQ.ktt;o<0?(this.mQ=0,this.SQ=-o):a<=o?(this.mQ=a,this.SQ=this.mQ-o):(this.mQ=o,this.SQ=0);let t=!1,e=!1,s=this._k(),i=this.yk();s||i?s&&!i?0<this.gQ?this.mQ>=a&&(this.btt(0),this.bat(C33.Oat.Tween.Hq.OnAnyTweenLoop),this.bat(C33.Oat.Tween.Hq.OnTweensLoop),e=!0):this.mQ<=0&&(this.btt(a),this.bat(C33.Oat.Tween.Hq.OnAnyTweenLoop),this.bat(C33.Oat.Tween.Hq.OnTweensLoop),e=!0):!s&&i?0<this.gQ?this.mQ>=a&&(this.Ett(a),this.Ek(-1*this.Ik()),e=!0,this._Q===PING_PONG_END?this.TQ<this.bB()?(this.TQ++,this.bat(C33.Oat.Tween.Hq.OnAnyTweenLoop),this.bat(C33.Oat.Tween.Hq.OnTweensLoop),this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong),this._Q=PING_PONG_BEGIN):(this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong),t=!0):this._Q===PING_PONG_BEGIN&&(this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong),this._Q=PING_PONG_END)):this.mQ<=0&&(this.Ett(0),this.Ek(-1*this.Ik()),e=!0,this._Q===PING_PONG_END?this.TQ<this.bB()?(this.TQ++,this.bat(C33.Oat.Tween.Hq.OnAnyTweenLoop),this.bat(C33.Oat.Tween.Hq.OnTweensLoop),this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong),this._Q=PING_PONG_BEGIN):(t=!0,this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong)):this._Q===PING_PONG_BEGIN&&(this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong),this._Q=PING_PONG_END)):s&&i&&(0<this.gQ?this.mQ>=a&&(this.Ett(a),this.Ek(-1*this.Ik()),e=!0,this._Q===PING_PONG_BEGIN&&(this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong)),this._Q===PING_PONG_END&&(this.bat(C33.Oat.Tween.Hq.OnAnyTweenLoop),this.bat(C33.Oat.Tween.Hq.OnTweensLoop),this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong)),this._Q++,this._Q=C33.wrap(this._Q,0,2)):this.mQ<=0&&(this.Ett(0),this.Ek(-1*this.Ik()),e=!0,this._Q===PING_PONG_BEGIN&&(this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong)),this._Q===PING_PONG_END&&(this.bat(C33.Oat.Tween.Hq.OnAnyTweenLoop),this.bat(C33.Oat.Tween.Hq.OnTweensLoop),this.bat(C33.Oat.Tween.Hq.OnAnyTweenPingPong),this.bat(C33.Oat.Tween.Hq.OnTweensPingPong)),this._Q++,this._Q=C33.wrap(this._Q,0,2))):0<this.gQ?this.mQ>=a&&(this.TQ<this.bB()?(this.TQ++,this.btt(0),this.bat(C33.Oat.Tween.Hq.OnAnyTweenLoop),this.bat(C33.Oat.Tween.Hq.OnTweensLoop),e=!0):(this.Ett(a),t=!0)):this.mQ<=0&&(this.TQ<this.bB()?(this.TQ++,this.btt(a),this.bat(C33.Oat.Tween.Hq.OnAnyTweenLoop),this.bat(C33.Oat.Tween.Hq.OnTweensLoop),e=!0):(this.Ett(0),t=!0)),t?(this.Nst.$tt(),this.fk(!0),this.dtt()):(this.Nst.Yu(this.mQ,!0,!1,e,this.PQ,!1),this.PQ&&(this.PQ=!1))}}}bat(t){const e=this.xk(),s=e.Gat(C33.Oat.Tween);s.PushTriggerTween(this),this.f3.n7(t,e,s.pB()),s.PopTriggerTween()}Qj(){const t=super.Qj(),e=this.JQ();return Object.assign(t,{tweenDataItemJson:e.Qj(),id:this.C3,destroyInstanceOnComplete:this.oat,initialValueMode:this.aat})}tY(t){if(t){const e=this.JQ();e.tY(t.tweenDataItemJson),super.tY(t),this.C3=t.id,this.oat=t.destroyInstanceOnComplete,this.aat=t.initialValueMode,this.pat()}}static IsPlaying(t){return t.IsPlaying()}static wk(t){return t.wk()}static Pat(t){return!!t.yk()&&t.htt()===PING_PONG_BEGIN}static vat(t){return!!t.yk()&&t.htt()===PING_PONG_END}static xat(t){const e=t.runtime.XQ(),s=new C33.$ht;if(t.json){s.tY(t.json.tweenDataItemJson);const i=new C33.Cht(s,e);return i.tY(t.json),i}{const r=new C33.Cht(s,e),n=(C33.Wi(t.Lat)||(t.Lat=[t.Lat]),r.Aat(t.id),r.att(t.tags),r.Mat(t.initialValueMode),r.Nk(t.releaseOnComplete),r.gk(t.loop),r.Tk(t.pingPong),r.mk(t.time),r.ZQ(0),r.ttt("default"),r.ett(t.Lat[0].resultMode),r.stt(t.repeatCount),r.Utt()),h=(n.Zet(t.CB.NF()),n.ttt("default"),n.ett(t.Lat[0].resultMode),n.sst(!0),n.ist(t.CB.IF().F4()),t.CB.rB()),o=h.hst()?h.nst():t.CB.W5().dC(),a=h.hst()?h.ast():t.CB.W5().IC(),l=(n.rst(o),n.ost(a),n._st()),c=(l.Ck(0),l.vk("noease"),l.sst(!0),l.att(""),n._st());c.Ck(t.time),c.vk("noease"),c.sst(!0),c.att("");for(const u of t.Lat){const f=n.yst(),d=(f.iit(u.sourceId),f.hit(u.sourceArgs),f.cit(u.property),f.pit(u.type),f.git(NaN),f.Tit(NaN),f.ttt("default"),f.ett(u.resultMode),f.sst(!0),f.Fit()),p=(d.SetType(u.valueType),d.Ck(0),d.vk(u.ease),d.sst(!0),d.Uit(u.startValue),d.$it(u.startValue),f.Fit());p.SetType(u.valueType),p.Ck(t.time),p.vk(u.ease),p.sst(!0),p.Uit(u.endValue),p.$it(u.endValue),f.YQ()}return r}}static Zet(t,e){if(!isNaN(e))for(const s of t.XK())s.Zet(e)}Dat(t,e){return this.uat||(this.uat=C33.mn(self.Gk,this,t,e)),this.uat}}}{const C33=self.Ve;C33.dat=class TweenTrack extends C33.UQ{constructor(t,e){super(t,e),this.Nat=null,this.Fat=null}static mE(t,e){return C33.mn(C33.dat,t,e)}Bat(){1===this.Met.length?this.Nat=this.Met[0]:(this.Nat=this.Met[0],this.Fat=this.Met[1])}Ret(){for(const t of this.let.Get().Oet())this.Met.push(C33.kat.mE(this,t));this.Bat()}yst(){const t=this.let.Get(),e=t.Est(),s=C33.kat.mE(this,e);return this.Met.push(s),this.Bat(),s}pK(){if(this.xet(),this.Let()||!this.zQ()){const t=this.vet(),e=t.ott(),s=e?0:this.Qet();for(const r of this.Met)r.pK(s),0===this.wet&&1===r.ust()&&(this.wet=1),0===this.RJ&&1===r.CK()&&(this.RJ=1);this.bet=0;const i=this.Met.some(t=>t.Btt());i&&(this.bet=1),this.yet=this.fst(s),this.met=!1,this._et=!1,this.Yu(s)}}Wtt(){}Yu(t,e=0,s=!1,i=!1,r,n=!1,h=!1){if(this.det||this.xk(),this.det){const o=!this.det.k8();return o?(!n||!this.IF().pU())&&((this.Fat?(this.Nat.Yu(t,s,i,h),this.Fat):this.Nat).Yu(t,s,i,h),void(0!==this.Nat.ust()&&(this.pet||(this.pet=this.det.W5()),this.pet)&&this.pet.L7())):!1}}Htt(){}tY(t){super.tY(t),this.Bat()}}}{const C33=self.Ve;C33.kat=class TweenPropertyTrackState extends C33.Pet{constructor(t,e){super(t,e),this.$at=!1}static mE(t,e){return C33.mn(C33.kat,t,e)}Yu(t,e=!1,s=!1,i=!1){let r,n;if(this.$at)r=this.$st[0],n=this.$st[1];else{if(e)r=this.Bst.Ait(t,this.Fst);else{if(this.Hst){const h=this.vet(),o=this.Hst.zK(),a=this.Hst.mP(),l=o?o.mP():h.Sk();(t<=a||l<=t)&&(this.Hst=this.Bst.Ait(t,this.Fst))}else this.Hst=this.Bst.Ait(t,this.Fst);r=this.Hst}n=r.zK()}this.kst.Yu(t,r,n,e,s,i)}Fit(){const t=this.Fst.Vst(),e=t.Bit();return this.Hst=null,this.$at=this.yit().length<=2,e}Mst(t){this.Hst=null;const e=this.Fst.Vst();e.kit(t),this.$at=this.yit().length<=2}Qj(){return{sourceAdapterJson:this.YQ().Qj(),basic:this.$at}}tY(t){t&&(this.YQ().tY(t.sourceAdapterJson),this.$at=t.basic)}}}{const C33=self.Ve,Ease=self.Eu,NAME=0,TRANSITION_KEYFRAMES=1,LINEAR=2;C33.qu=class Transition extends C33.pn{constructor(t,e=!0){super(),this.Tn=t[NAME],this.Wat=t[LINEAR],this.Vat=[];for(const s of t[TRANSITION_KEYFRAMES]){const i=C33.Hat.mE(this,s);this.Vat.push(i)}for(let t=0;t<this.Vat.length;t++){const r=this.Vat[t],n=this.Vat[t+1],h=this.Vat[t-1];r.bot(n),r.Vot(h)}this.Uat=new Map,this.Xat=new Map,this.jat(),e&&Ease.Ju(this.Tn,(t,e,s,i)=>this.Yu(t,e,s,i),null,{transition:this})}static mE(t){return C33.mn(C33.qu,t)}Sn(){for(const t of this.Vat)t.Sn();C33.Vh(this.Vat),this.Vat=null,this.Uat.clear(),this.Uat=null,this.Xat.clear(),this.Xat=null}zu(t){this.Wat=!!t}Yat(t){const e=this.Xat.get(t);if(e)return e;for(const s of this.Vat)if(s.qat()===t)return this.Xat.set(t,s),s}zat(e){for(let t=this.Vat.length-1;0<=t;t--){const s=this.Vat[t],i=s.qat();if(i<=e){let t=s;if(i<e)return t;if(i===e){for(;t;){const r=t.JK();if(!r)break;if(r.qat()!==t.qat())break;t=r}return t}}}}Yu(t,e,s,i){let r=t/i;if(this.Wat){const g=this.Yat(0),_=this.Yat(1),T=e+(e+s)*g.Jat(),y=(e+s)*_.Jat(),E=y-T;return 0===i?T+E:Ease.Zu(t,T,E,i)}0===i&&(r=1);let n=this.zat(r),h=n.zK();if(!h){const I=n.JK(),A=n;n=I,h=A}const o=h.qat()-n.qat(),a=C33.yn(r,n.qat(),h.qat(),0,o);if(n.Kat()||0==o){const M=e+(e+s)*n.Jat(),R=(e+s)*h.Jat(),w=R-M;return 0==o?1===a?M+w:M:Ease.Zu(a,M,w,o)}let l=n.qat(),c=n.Jat(),u=n.qat()+n.Zat(),f=n.Jat()+n.Qat(),d=h.qat()+h.tlt(),p=h.Jat()+h.elt(),C=h.qat(),m=h.Jat(),S=Ease.Fu("spline")(a,l,c,u,f,d,p,C,m,this.Uat.get(n));return(1-(S+=n.Jat()))*e+S*(e+s)}jat(){this.Uat.clear();for(let t=0;t<this.Vat.length-1;t++){const e=this.Vat[t];if(e.Dht()){const s=e,i=this.Vat[t+1];if(i.Nht()){const r=s.qat(),n=s.qat()+s.Zat(),h=i.qat()+i.tlt(),o=i.qat();this.Uat.set(s,Ease.Qu(r,n,h,o))}}}}}}{const C33=self.Ve,VALUE_X=0,VALUE_Y=1,START_ANCHOR_X=2,START_ANCHOR_Y=3,END_ANCHOR_X=4,END_ANCHOR_Y=5,START_ENABLE=6,END_ENABLE=7,SEGMENT_MODE=8;C33.Hat=class TransitionKeyframe extends C33.pn{constructor(t,e){super(),this.slt=t,this.ilt=e[VALUE_X],this.rlt=e[VALUE_Y],this.nlt=e[START_ANCHOR_X],this.hlt=e[START_ANCHOR_Y],this.olt=e[END_ANCHOR_X],this.llt=e[END_ANCHOR_Y],this.Zot=e[START_ENABLE],this.tat=e[END_ENABLE],this.clt=e[SEGMENT_MODE],this.wot=null,this.$ot=null}Sn(){this.slt=null}static mE(t,e){return C33.mn(C33.Hat,t,e)}bot(t){this.wot=t}zK(){return this.wot}Vot(t){this.$ot=t}JK(){return this.$ot}qat(){return this.ilt}Jat(){return this.rlt}Zat(){return this.nlt}Qat(){return this.hlt}tlt(){return this.olt}elt(){return this.llt}Dht(){return this.Zot}Nht(){return this.tat}Kat(){return"linear"===this.clt}ult(){return"cubic"===this.clt}}}{const C33=self.Ve;C33.flt=class TransitionManager extends C33.pn{constructor(t){super(),this.f3=t,this.dlt=[]}Sn(){for(const t of this.dlt)t.Sn();C33.Vh(this.dlt),this.dlt=null}mE(t){this.dlt.push(C33.qu.mE(t))}}}{const C33=self.Ve;C33.plt=class TemplateManager extends C33.pn{constructor(t){super(),this.f3=t,this.Clt=null,this.mlt=null,this.SJ=t=>this.gJ(t.CB)}Sn(){if(this.wJ(),this.Clt){for(const t of this.Clt.values())t.clear();this.Clt.clear()}this.Clt=null,this.f3=null}mE(t){if(this.Clt||(this.Clt=new Map),t){const e=t[0][16],s=e[0],i=t[1],r=(this.Clt.has(i)||this.Clt.set(i,new Map),this.Clt.get(i));r.set(s,t)}}bJ(){const t=this.f3.q3();t&&t.addEventListener("instancedestroy",this.SJ)}wJ(){const t=this.f3.q3();t&&t.removeEventListener("instancedestroy",this.SJ)}Slt(){return!!this.Clt&&0!==this.Clt.size}glt(t,e){let s=0;if(s=t instanceof C33._lt?t.F4():t,this.Clt.has(s)){const i=this.Clt.get(s).get(e);return i?JSON.parse(JSON.stringify(i)):void 0}}Tlt(t,e){this.mlt||(this.mlt=new WeakMap),this.mlt.has(t)||this.mlt.set(t,e)}ylt(t){if(!this.mlt)return"";const e=this.mlt.get(t);return e||""}gJ(t){this.mlt&&this.mlt.has(t)&&this.mlt.delete(t)}}}{const C33=self.Ve;C33.Elt=class FlowchartManager{constructor(t){this.f3=t,this.Ilt=new C33.Alt}Sn(){this.Ilt.Sn(),this.Ilt=null,this.f3=null}aL(){return this.f3}mE(t){this.Ilt._u(t)}Mlt(t){return this.Ilt.cs(t)}Rlt(){return this.Ilt.Rlt()}}}{const C33=self.Ve;C33.wlt=class Flowchart{constructor(t,e,s,i,r,n,h){this.f3=r.aL(),this.blt=r,this.Olt=t,this.Glt=s,this.Plt=i,this.rm=e,this.Zz=n,this.vlt=h??n.xk().NF(),this.xlt(),this.Llt=this.Nlt?.Dlt()??-1,this.Flt=[],this.Blt=null,this.klt=NaN,this.$lt=null,this.Wlt=null,this.Vlt=null,this.Hlt="",this.Ult=null,this.Xlt="",this.jlt="",this.Ylt=0,this.qlt=!1,this.MQ=!1}Sn(){this.MQ||(C33.Vh(this.Flt),this.Flt=null,this.f3=null,this.blt=null,this.Plt=null,this.Zz=null,this.Blt=null,this.klt=NaN,this.$lt&&this.$lt.clear(),this.$lt=null,this.Wlt=null,this.Vlt=null,this.Hlt="",this.Ult=null,this.Xlt="",this.jlt="",this.MQ=!0)}gn(){return this.MQ}zlt(){return this.blt}aL(){return this.f3}i3(){return this.Olt}Jlt(){return this.Plt}lk(){return this.rm}WJ(){return this.Zz||(this.Zz=this.f3.D5(this.vlt).rB()),this.Zz}Klt(){return this.Zlt(this.Llt)}Qlt(){const t=this.Klt();return t?t.lk():""}tct(t){const e=this.Klt();if(e){if(C33.Si(t)){const s=e.ect(),i=s?s[t]:void 0;if(C33.Si(i))return this.Zlt(i)}if("string"==typeof t)for(const r of e.ect()){const n=this.Zlt(r);if(n.lk()===t)return this.Zlt(n.Dlt())}}}sct(t){const e=this.tct(t);return e?e.lk():""}ict(t){const e=this.tct(t);if(!e)return-1;const s=e.ect();return s?s.indexOf(e.Dlt()):-1}rct(){const t=this.Klt();if(!t)return 0;const e=t.ect();return e?e.length:0}Zlt(t){return this.Plt.Zlt(t)}gf(){const t=this.nct();t.hct(!0)}hct(t){if(this.oct()){for(const[e,s]of this.oct().entries())s.hct(!1);this.oct().clear()}if(this.$lt=null,this.Blt=null,this.lct=null,this.Wlt=null,this.Hlt="",this.Ult=null,this.Xlt="",this.jlt="",this.Flt=[],t){this.blt.cct(this);const i=this.Nlt.Dlt();i!==this.Llt&&this.uct(i)}else this.Llt=this.Nlt.Dlt()}fct(){const t=this.Plt.Zlt(this.Llt);return t?t.pct().dct():0}Cct(t){const e=this.mct(t);return e?e.i3():""}Sct(t){let e;return C33.Si(t)&&(e=this.mct(t)),"string"==typeof t&&(e=this.gct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),e?e.ait():""}_ct(t){let e;C33.Si(t)&&(e=this.mct(t));const s=(e="string"==typeof t?this.gct(t):e).Tct();C33.Si(s)&&(this.Flt.push(this.Llt),this.uct(s))}yct(t){const e=this.Plt.Ect(t);if(e){const s=this.Plt.Zlt(e.Dlt());s&&(this.Flt.push(this.Llt),this.uct(s.Dlt()))}}Ict(){const t=this.Flt.pop();C33.Si(t)?this.uct(t):this.Act()&&(this.blt.cct(this.Act(),!0,!1,!1),this.Act().uct(this.Mct()),this.nct().Rct(this.Act()))}wct(t){const e=this.Klt();if(e){e.Dlt();const s=this.tct(t);s&&(this.Flt.push(this.Llt),this.uct(s.Dlt()))}}bct(e){if(C33.Si(e)){const t=this.Plt.Zlt(this.Llt),s=t.pct().Oct();return!!s[e]}if("string"==typeof e){const i=this.Plt.Zlt(this.Llt),r=i.pct().Oct();for(let t=0;t<r.length;t++)if(r[t].i3()===e)return!0}return!1}Gct(){this.qlt=!0}Pct(){return 0<this.Ylt}vct(){this.Ylt++}xct(){this.Ylt--,0===this.Ylt&&this.qlt&&this.blt.Lct(this)}uct(t){const s=this.Llt,e=this.WJ().xk();if(this.vct(),this.blt.Dct(this),this.f3.n7(C33.Xq.Flowchart.Hq.OnBeforeAnyNodeChange,e),this.f3.n7(C33.Xq.Flowchart.Hq.OnBeforeTaggedNodeChange,e),this.f3.n7(C33.Xq.Flowchart.Hq.OnBeforeAnyNodeChangeInFlowchart,e),this.f3.n7(C33.Xq.Flowchart.Hq.OnBeforeTaggedNodeChangeInFlowchart,e),this.Llt=t,this.f3.n7(C33.Xq.Flowchart.Hq.OnAnyNodeChange,e),this.f3.n7(C33.Xq.Flowchart.Hq.OnTaggedNodeChange,e),this.f3.n7(C33.Xq.Flowchart.Hq.OnAnyNodeChangeInFlowchart,e),this.f3.n7(C33.Xq.Flowchart.Hq.OnTaggedNodeChangeInFlowchart,e),this.blt.Nct(),this.xct(),!this.gn()){const i=this.Zlt(this.Llt);if("reference"===i.gI()){const r=i.Fct();if(this.Bct(i)){this.Flt.pop();const n=this.kct(i),h=(this.blt.cct(n,!0,!0,!1),n.$ct(this,s),this.nct());h.Rct(n)}else{const o=i.Wct();if(r){this.Flt.pop();let e=i.Vct();if(e){let t=this.blt.Hct(e);for(;t;)e=C33.sp(e),t=this.blt.Hct(e)}else{e=r+"-ref";let t=this.blt.Hct(e);for(;t;)e=C33.sp(e),t=this.blt.Hct(e)}const a=this.blt.Uct(r,o,e,this.Zz,!0),l=(a.$ct(this,s),this.Xct(i,a),this.nct());a.jct(l),l.Rct(a)}}}}}mct(t){const e=this.Plt.Zlt(this.Llt);if(!e)return null;const s=e.pct().Oct();if(!s)return null;const i=s[t];return i||null}gct(t){const e=this.Plt.Zlt(this.Llt);if(!e)return null;const s=e.pct().Yct(t);return s||null}xlt(e){if("number"==typeof e){let t=this.Zlt(e);t=t||this.Plt.qct(),this.Nlt=t}else{let t=this.Plt.Ect(this.Glt);t=t||this.Plt.qct(),this.Nlt=t}}Qj(){return this.qlt?null:{flowchartName:this.Olt,flowchartTag:this.rm,startNodeTag:this.Glt,currentNodeId:this.Llt,previousNodeIds:this.Flt,pluginUID:this.Zz.xk().NF(),reference:{previousFlowchartTag:this.Act()?this.Act().lk():"",previousStartNodeId:C33.Si(this.Mct())?this.Mct():NaN,referencesJson:this.zct(),currentReferenceFlowchartTag:this.Jct()?this.Jct().lk():"",rootFlowchartTag:this.nct()?this.nct().lk():""}}}zct(){if(!this.Kct())return null;const t=[];for(const[e,s]of this.oct().entries())t.push({flowchartElementId:e.Dlt(),flowchartStateTag:s.lk()});return t.length?t:null}tY(t){if(t){if(this.Olt=t.flowchartName,this.rm=t.flowchartTag,this.Glt=t.startNodeTag,this.Llt=t.currentNodeId,this.Flt=t.previousNodeIds,this.vlt=t.pluginUID,t.hasOwnProperty("reference")){const e=t.reference;this.Hlt=e.previousFlowchartTag,this.klt=e.previousStartNodeId,this.Ult=e.referencesJson,this.Xlt=e.currentReferenceFlowchartTag,this.jlt=e.rootFlowchartTag}this.xlt()}}Act(){return"string"==typeof this.Hlt&&this.Hlt&&(this.Blt=this.blt.Hct(this.Hlt),this.Hlt=""),this.Blt}Mct(){return this.klt}$ct(t,e){this.Blt=t,this.klt=e}Jct(){return"string"==typeof this.Xlt&&this.Xlt&&(this.Wlt=this.blt.Hct(this.Xlt),this.Xlt=""),this.Wlt}Rct(t){this.Wlt=t,this.Wlt===this&&(this.Wlt=null)}nct(){return"string"==typeof this.jlt&&this.jlt&&(this.Vlt=this.blt.Hct(this.jlt),this.jlt=""),this.Vlt||this}jct(t){this.Vlt=t}Kct(){return this.Zct(),!!this.$lt}Bct(t){return this.Zct(),this.$lt&&this.$lt.has(t)}Zct(){if(this.Ult){this.$lt&&this.$lt.clear(),this.$lt||(this.$lt=new Map);for(const t of this.Ult){const e=this.blt.Hct(t.flowchartStateTag),s=e.Zlt(t.flowchartElementId);this.$lt.set(s,e)}this.Ult=null}}oct(){return this.Zct(),this.$lt}kct(t){return this.Zct(),this.$lt.get(t)}Xct(t,e){this.$lt||(this.$lt=new Map),this.$lt.set(t,e)}}}{const C33=self.Ve;C33.Qct=class FlowchartStateManager{constructor(t){this.f3=t,this.tut=new Map,this.eut=null,this.sut=[],this.iut=()=>this.EJ(),this.rut=null}Sn(){C33.Vh(this.sut),this.sut=null,this.tut.clear(),this.tut=null,this.eut=null,this.f3=null,this.rut=null}aL(){return this.f3}Uct(t,e,s,i,r,n){const h=this.f3.zlt().Mlt(t);if(h){if(!this.tut.has(s)){const o=new C33.wlt(t,s,e,h,this,i,n);return this.tut.set(s,o),r&&this.cct(o,!0),o}console.warn(`[Flowcharts] there already is a flowchart with the tag '${s}'`)}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Lct(t){if(t.Gct(),!t.Pct()){const e=t.lk();this.tut.delete(e),t.Sn(),this.eut===t&&(this.eut=null)}}nut(t){t.gf()}Hct(t){return this.tut.get(t)}Dct(t){this.sut.push(t)}Nct(){this.sut.pop()}cct(t,e=!1,s=!1,i=!0){if(i){const r=t.Jct();t=r||t}t!==this.eut&&(this.hut(),this.out(t,e,s))}aut(t){return"string"==typeof t?this.Hct(t):this.sut.length?this.sut[this.sut.length-1]:this.eut}hut(){if(this.eut&&!this.eut.gn()){const t=this.eut.WJ().xk();this.eut.vct(),this.Dct(this.eut),this.f3.n7(C33.Xq.Flowchart.Hq.OnBeforeFlowchartChange,t),this.Nct(),this.eut.xct()}}out(t,e=!1,s=!1){if(this.eut=t,this.eut&&!this.eut.gn()){const i=this.eut.WJ().xk();this.eut.vct(),this.Dct(this.eut),this.f3.n7(C33.Xq.Flowchart.Hq.OnFlowchartChange,i),!0!==s&&"number"!=typeof s||this.eut.xlt(s),e&&(this.f3.n7(C33.Xq.Flowchart.Hq.OnAnyNodeChange,i),this.f3.n7(C33.Xq.Flowchart.Hq.OnTaggedNodeChange,i)),this.Nct(),this.eut.xct()}}Qj(){return{flowchartJsonObjects:[...this.tut.values()].map(t=>t.Qj()),currentFlowchartTag:this.eut?this.eut.lk():null}}tY(t){if(t){this.rut=t;const e=new Map;for(const s of this.rut.flowchartJsonObjects){const i=s.flowchartTag;if(this.tut.has(i)){const r=this.tut.get(i);r.tY(s),e.set(i,r)}else{const n=this.Uct(s.flowchartName,s.startNodeTag,s.flowchartTag,null,!1,s.pluginUID);n.tY(s),e.set(s.flowchartTag,n)}}for(const[h,o]of this.tut.entries())e.has(h)||o.Sn();this.tut.clear(),this.tut=e,this.f3.Lq()?this.f3.q3().addEventListener("afterload",this.iut):this.EJ()}}EJ(){this.f3.q3().removeEventListener("afterload",this.iut);const t=this.tut.get(this.rut.currentFlowchartTag);t&&this.cct(t,!0),this.rut=null}}}{const C33=self.Ve;C33.Alt=class FlowchartDataManager{constructor(){this.lut=new Map}Sn(){for(const t of this.lut.values())t.Sn();this.lut.clear(),this.lut=null}_u(t){const e=new C33.cut(t),s=e.i3();this.lut.set(s,e)}cs(t){return this.lut.get(t)}Rlt(){return!!this.lut.size}static uut(t,e,s,i){if(e)for(const r of e){const n=new s(r,i);t.push(n)}}}}{const C33=self.Ve,NAME=0,NODES=1;C33.cut=class FlowchartDataItem{constructor(t){this.Tn=t[NAME],this.fut=new C33.dut(t[NODES],this)}Sn(){this.fut.Sn(),this.fut=null}Cut(){return this.fut}Zlt(t){return this.fut.Zlt(t)}Ect(t){return this.fut.Ect(t)}qct(){return this.fut.qct()}i3(){return this.Tn}}}{const C33=self.Ve,FLOWCHART_ID=0,TAG=1,PARENT_FLOWCHART_IDS=2,PARENT_OUTPUT_FLOWCHART_IDS=3,CHILDREN_FLOWCHART_IDS=4,OUTPUTS=5,IS_START=6,TYPE=7,REFERENCE_FLOWCHART=8,REFERENCE_FLOWCHART_START_NODE=9,REFERENCE_FLOWCHART_TAG=10;class FlowchartNodeDataItem{constructor(t,e){this.fut=e,this.y3=t[TYPE],this.mut=t[FLOWCHART_ID],this.rm=t[TAG],this.Sut=t[PARENT_FLOWCHART_IDS],this.gut=null,this._ut=null,"dictionary"===this.y3&&(this.gut=t[PARENT_OUTPUT_FLOWCHART_IDS],this._ut=t[CHILDREN_FLOWCHART_IDS]),this.Tut=t[IS_START],this.yut=null,this.Eut=null,this.Iut=null,"reference"===this.y3&&(this.yut=t[REFERENCE_FLOWCHART],this.Eut=t[REFERENCE_FLOWCHART_START_NODE],this.Iut=t[REFERENCE_FLOWCHART_TAG]),this.Aut=new C33.Mut(t[OUTPUTS],this)}Sn(){this.fut=null}Cut(){return this.fut}pct(){return this.Aut}Dlt(){return this.mut}lk(){return this.rm}Rut(){return this.Tut}ect(){return this.Sut}wut(){return this.gut}but(){return this._ut}gI(){return this.y3}Fct(){return this.yut}Wct(){return this.Eut}Vct(){return this.Iut}}C33.dut=class FlowchartNodeData{constructor(t,e){this.Plt=e,this.Out=[],this.Gut=new Map,this.Put=new Map,this.vut=null,C33.Alt.uut(this.Out,t,FlowchartNodeDataItem,this);for(const s of this.Out){const i=s.Dlt(),r=s.lk(),n=s.Rut(),h=(this.Gut.set(i,s),r&&this.Put.set(r,s),n&&(this.vut=s),s.pct());for(const o of h.xut()){const a=o.Dlt();this.Gut.set(a,o)}}}Sn(){this.Plt=null;for(const t of this.Out)t.Sn();C33.Vh(this.Out),this.Out=null}Jlt(){return this.Plt}Zlt(t){return this.Gut.get(t)}Ect(t){return this.Put.get(t)}qct(){return this.vut}*Lut(){for(const t of this.Out)yield t}}}{const C33=self.Ve,FLOWCHART_ID=0,NAME=1,VALUE=2,CONNECTED_FLOWCHART_NODE_FLOWCHART_ID=3;class FlowchartNodeDataOutputItem{constructor(t,e){this.Aut=e,this.mut=t[FLOWCHART_ID],this.Tn=t[NAME],this.Trt=t[VALUE],this.Dut=t[CONNECTED_FLOWCHART_NODE_FLOWCHART_ID]}Sn(){this.Aut=null}pct(){return this.Aut}Dlt(){return this.mut}i3(){return this.Tn}ait(){return this.Trt}Tct(){return this.Dut}}C33.Mut=class FlowchartNodeOutputData{constructor(t,e){this.Nut=e,this.Fut=[],this.But=new Map,C33.Alt.uut(this.Fut,t,FlowchartNodeDataOutputItem,this);for(const s of this.Fut)this.But.set(s.i3(),s)}Sn(){this.Nut=null;for(const t of this.Fut)t.Sn();C33.Vh(this.Fut),this.Fut=null}kut(){return this.Nut}dct(){return this.Fut.length}Oct(){return this.Fut}Yct(t){return this.But.get(t)}*xut(){for(const t of this.Fut)yield t}}}{const C33=self.Ve;C33.$ut=class SolStack extends C33.pn{constructor(t){super(),this.Wut=t,this.Vut=[],this.Vut.push(C33.mn(C33.Hut,this)),this.tm=0,this.Uut=this.Vut[0]}Sn(){for(const t of this.Vut)t.Sn();C33.Vh(this.Vut),this.Uut=null,this.Wut=null}IF(){return this.Wut}PD(){return this.Uut}Xut(){return this.Vut[this.tm-1]}lu(){this.PD().lu()}jut(){const t=this.Vut,e=++this.tm;if(e===t.length){const s=C33.mn(C33.Hut,this);t.push(s),this.Uut=s}else{const i=t[e];i.gf(),this.Uut=i}}Yut(){const t=this.Vut,e=++this.tm,s=(e===t.length&&t.push(C33.mn(C33.Hut,this)),t[e]);s.Ff(t[e-1]),this.Uut=s}B$(){this.Uut=this.Vut[--this.tm]}qut(s){const i=this.Vut;for(let t=0,e=i.length;t<e;++t)i[t].qut(s)}}}{const C33=self.Ve;C33.Hut=class Sol extends C33.pn{constructor(t){super(),this.Vut=t,this.Wut=this.Vut.IF(),this.zut=this.Wut.aL().Fx(),this.Jut=!0,this.RV=[],this.Kut=[]}Sn(){this.Zut(),this.Vut=null,this.Wut=null,this.zut=null}Zut(){C33.Vh(this.RV),C33.Vh(this.Kut)}IF(){return this.Wut}Qut(){return this.Jut}t3t(){return this.Jut?!!this.Wut.xD():!!this.RV.length}GD(){return this.Jut?this.Wut.GD():this.RV}e3t(){return!!this.Kut.length}s3t(){return this.Kut}i3t(){const t=this.GD();return t.length?t:this.Kut}gf(){this.Jut=!0,C33.Vh(this.Kut)}lu(){this.Jut=!0}Ff(t){t.Qut()?this.gf():(this.Jut=!1,C33.jh(this.RV,t.RV),C33.Vh(this.Kut))}r3t(t){this.RV.push(t)}n3t(t){this.Kut.push(t)}h3t(t){this.Jut=!!t}o3t(){return this.RV}a3t(){return this.Kut}l3t(t){this.Jut=!1,C33.Vh(this.RV),this.RV.push(t)}c3t(t){this.Jut=!1,C33.jh(this.RV,t)}u3t(t){this.Jut=!1,C33.Vh(this.RV);for(const e of t)this.RV.push(e)}f3t(t,e){for(const s of e)t.has(s)||this.Kut.push(s)}d3t(t){for(const e of t)this.RV.push(e);C33.Kh(this.Kut,t)}p3t(){C33.Vh(this.Kut)}C3t(t){if(t)if(this.zut.E$().Ox().m3t()){this.Qut()&&(C33.Vh(this.RV),C33.jh(this.Kut,t.IF().GD()),this.Jut=!1);const e=this.Kut.indexOf(t);-1!==e&&(this.RV.push(this.Kut[e]),this.Kut.splice(e,1))}else this.l3t(t)}qut(t){C33.Kh(this.RV,t),C33.Kh(this.Kut,t)}}}{const C33=self.Ve;C33.S3t=class EventStack extends C33.pn{constructor(t){super(),this.g3t=t,this.f3=this.g3t.aL(),this.Vut=[],this.Vut.push(C33.mn(C33._3t,this,null)),this.tm=0,this.T3t=[]}Sn(){for(const t of this.Vut)t.Sn();C33.Vh(this.Vut),C33.Vh(this.T3t),this.g3t=null,this.f3=null}Ix(){return this.g3t}aL(){return this.f3}E$(){return this.Vut[this.tm]}y3t(){return this.Vut}E3t(){return this.tm}I$(t){const e=this.Vut,s=++this.tm;if(s===e.length){const i=C33.mn(C33._3t,this,t);return e.push(i),i}{const r=e[s];return r.gf(t),r}}B$(){--this.tm}I3t(t){this.T3t.push(t)}A3t(){this.T3t.pop()}Nx(){const t=this.T3t;return 0===t.length?null:t.at(-1)}}}{const C33=self.Ve;C33._3t=class EventStackFrame extends C33.pn{constructor(t,e){super(),this.Vut=t,this.f3=this.Vut.aL(),this.M3t=e,this.R3t=0,this.w3t=0,this.b3t=!1,this.O3t=!1,this.G3t=null,this.P3t=0,this.v3t=0,this.x3t=null}Sn(){this.gf(null),this.Vut=null,this.f3=null}gf(t){this.M3t=t,this.R3t=0,this.w3t=0,this.b3t=!1,this.O3t=!1,this.x3t=null}L3t(t,e){this.M3t=t,this.R3t=0,this.w3t=e}D3t(){this.R3t=0,this.w3t=0}Ox(){return this.M3t}N3t(t){this.M3t=t}F3t(){return this.R3t}B3t(t){this.R3t=t}k3t(){return this.w3t}$3t(t){this.w3t=t}W3t(t){this.b3t=!!t}V3t(){return this.b3t}H3t(t){this.O3t=!!t}U3t(){return this.O3t}X3t(t){this.G3t=t}j3t(){return this.G3t}Y3t(t,e){this.P3t=t,this.v3t=e}Bx(){return this.P3t}kx(t){this.v3t=t}q3t(){return this.v3t}z3t(){const t=this.M3t;return!!t.J3t()||this.R3t<t.K3t()-1&&!!t.y$().length}Z3t(t){this.x3t=t}Q3t(){return this.x3t}}}{const C33=self.Ve;C33.tft=class LocalVarStack extends C33.pn{constructor(t){super(),this.g3t=t,this.f3=this.g3t.aL(),this.Vut=[],this.tm=-1,this.Uut=null,this.eft=[]}Sn(){C33.Vh(this.Vut),this.g3t=null,this.f3=null}ift(t){this.eft=t;const e=this.eft.slice(0);this.Vut.push(e),this.tm=0,this.Uut=e}Ix(){return this.g3t}aL(){return this.f3}rft(){return this.Uut}I$(){const t=++this.tm,e=this.Vut;t===e.length?e.push(this.eft.slice(0)):C33.jh(e[t],this.eft),this.Uut=e[t]}B$(){this.Uut=this.Vut[--this.tm]}}}{const C33=self.Ve;C33.nft=class LoopStack extends C33.pn{constructor(t){super(),this.g3t=t,this.f3=this.g3t.aL(),this.Vut=[],this.tm=-1}Sn(){C33.Vh(this.Vut),this.g3t=null,this.f3=null}Ix(){return this.g3t}aL(){return this.f3}hft(){return 0<=this.tm}rft(){return this.Vut[this.tm]}I$(){if(++this.tm,this.tm===this.Vut.length){const t=C33.mn(C33.oft,this);return this.Vut.push(t),t}{const e=this.Vut[this.tm];return e.gf(),e}}B$(){--this.tm}aft(e){const s=this.Vut;for(let t=this.tm;0<=t;--t){const i=s[t];if(i.i3()===e)return i}return null}lft(){return this.Vut.slice(0,this.tm+1)}}}{const C33=self.Ve;C33.oft=class Loop extends C33.pn{constructor(t){super(),this.cft=t,this.Tn="",this.tm=0,this.uft=!1,this.fft=NaN}gf(){this.Tn="",this.tm=0,this.uft=!1,this.fft=NaN}M$(t){this.Tn=t}i3(){return this.Tn}D$(t){this.tm=t}F4(){return this.tm}fk(){this.uft=!0}F$(){return this.uft}dft(t){this.fft=t}pft(){return this.fft}}}{const C33=self.Ve;C33.Cft=class ArrayStack extends C33.pn{constructor(){super(),this.Vut=[],this.tm=-1}Sn(){C33.Vh(this.Vut)}rft(){return this.Vut[this.tm]}I$(){if(++this.tm,this.tm!==this.Vut.length)return this.Vut[this.tm];{const t=[];return this.Vut.push(t),t}}B$(){--this.tm}}}{let SortSolArray2=function(t,e){return t.F4()-e.F4()},IsSolArrayIdentical2=function(s,i){for(let t=0,e=s.length;t<e;++t)if(s[t]!==i[t])return!1;return!0};SortSolArray=SortSolArray2,IsSolArrayIdentical=IsSolArrayIdentical2;const C33=self.Ve,assert=self.assert;C33.mft=class EventSheetManager extends C33.pn{constructor(t){super(),this.f3=t,this.Sft=[],this.gft=new Map,this._ft=[],this.Tft=new Map,this.yft=new Map,this.Eft=new Map,this.Ift=new Map,this.Aft=new Map,this.Mft=new Map,this.Rft=0,this.wft=[],this.bft=[],this.Oft=[],this.Gft=new Map,this.Pft=new Map,this.zut=C33.mn(C33.S3t,this),this.vft=C33.mn(C33.tft,this),this.cft=C33.mn(C33.nft,this),this.xft=[],this.Lft=[],this.Dft=[],this.Nft=0,this.Fft=0,this.Bft=0,this.kft=[],this.$ft=[],this.Wft=[],this.Vft=new Map,this.Hft=new Map,self.c3_callFunction=(t,e)=>this.Uft(t,e)}Sn(){this.rz(),this.zut.Sn(),this.zut=null,this.vft.Sn(),this.vft=null,C33.Vh(this.Lft),C33.Vh(this.Dft),this.f3=null,C33.Vh(this.Sft),this.gft.clear()}mE(t){const e=C33.mn(C33.Xft,this,t);this.Sft.push(e),this.gft.set(e.i3().toLowerCase(),e)}jft(t){this.xft.push(t)}Yft(){for(const t of this.Pft.values())t.qft();for(const e of this.Gft.values())e.Yft();for(const s of this.Pft.values())s.Yft();for(const i of this.Sft)i.Yft();for(const r of this.Sft)r.Iq();for(const n of this.xft)n.Yft(!1);C33.Vh(this.xft),this.vft.ift(this.Oft)}aL(){return this.f3}Eq(t){return this.gft.get(t.toLowerCase())||null}zft(t){this._ft.push(t),this.Tft.set(t.Jft(),t)}Kft(t){this.yft.set(t.NU(),t)}Zft(t){this.Eft.set(t.NU(),t)}Qft(t){this.Ift.set(t.NU(),t)}t0t(t){switch(t.e0t()){case 0:this.Gft.set(t.s0t().toLowerCase(),t);break;case 1:this.Pft.set(t.s0t().toLowerCase(),t)}}i0t(t){this.Mft.set(t.NU(),t),(t.pU()?this.wft:this.bft).push(t)}r0t(s){2<=s.length&&s.sort(SortSolArray2);let i=this.Aft.get(s.length);i||(i=[],this.Aft.set(s.length,i));for(let t=0,e=i.length;t<e;++t){const r=i[t];if(IsSolArrayIdentical2(s,r))return r}return i.push(s),s}n0t(t){return this.Oft.push(t.h0t()),this.Rft++}Fx(){return this.zut}o0t(){return this.Fx().E$()}Ox(){return this.o0t().Ox()}a0t(){const t=this.o0t(),e=t.Ox();return e.l0t(t.F3t())}c0t(){const t=this.o0t(),e=t.Ox();return e.u0t(t.k3t())}f0t(){return this.vft}A$(){return this.cft}d0t(t){const e=[];for(t=t.p0t();t;)C33.sn(e,t.C0t()),t=t.p0t();return e}m0t(t){const e={};for(const s of this.d0t(t))e[s.S0t()]=s.g0t();return Object.create(Object.prototype,e)}_0t(t){return this.Mft.get(t)||null}T0t(t){return this.yft.get(t)||null}y0t(t){return this.Eft.get(t)||null}E0t(t){return this.Ift.get(t)||null}Ax(t){return this.Gft.get(t.toLowerCase())||null}I0t(t,e){let s=this.Pft.get((t.i3()+"."+e).toLowerCase());if(s)return s;if(!t.bU())for(const i of t.A0t())if(s=this.Pft.get((i.i3()+"."+e).toLowerCase()))return s;return null}M0t(){return this.wft}R0t(){return this.bft}w0t(t){for(const e of this.wft)e.b0t();if(t)for(const s of this.bft)s.gy()&&s.b0t()}O0t(t){return this.Tft.get(t.toLowerCase())||null}G0t(t){const e=this.yft.get(t);return e&&e.P0t()?e:null}v0t(){return this._ft}x0t(){for(const t of this._ft)t.L0t()}D0t(){for(const t of this.Sft)t.N0t()}F0t(t){this.D0t(),this.Nft++;for(const e of t.Uz()){const s=e.zY();s&&(this.f3.B0t(e),s.DM(),this.f3.k0t())}this.Nft--}async $0t(t){this.D0t(),this.Nft++;for(const e of this.W0t(t))await this.f3.V0t(e);this.Nft--}*W0t(t){for(const e of t.Uz()){const s=e.zY();s&&(this.f3.B0t(e),yield*s.H0t(),this.f3.k0t())}}U0t(t,e,s,i){let r=!1;if(!t.S5())return this.X0t(e,s,i);this.Fft++;for(const n of t.Uz()){const h=n.zY();if(h){this.f3.B0t(n);for(const a of h.j0t()){const l=a.U0t(e,s,i);r=r||l}const o=h.U0t(e,s,i);r=r||o,this.f3.k0t()}}return this.Fft--,r}*Y0t(t,e,s,i){let r=!1;if(!t.S5())return this.X0t(e,s,i);this.Fft++;for(const n of t.Uz()){const h=n.zY();if(h){this.f3.B0t(n);for(const a of h.j0t()){const l=yield*a.Y0t(e,s,i);r=r||l}const o=yield*h.Y0t(e,s,i);r=r||o,this.f3.k0t()}}return this.Fft--,r}X0t(t,e,s){return this.Lft.push([t,e,s]),!1}q0t(t,e,s){let i=null,r=new Promise(t=>i=t);return this.Dft.push([t,e,s,i]),r}*z0t(){if(this.f3.J0t())throw new Error("should not be in breakpoint");const t=this.f3.T5();for(;this.Dft.length;){const[e,s,i,r]=this.Dft.shift(),n=yield*this.Y0t(t,e,s,i);r(n)}}async K0t(){for(const t of this.z0t())await this.f3.V0t(t)}Z0t(t,s,i,r){let n=!1,e=t.S5(),h=e.zY();if(h){this.Fft++,this.f3.B0t(e);const o=h.j0t();for(let t=0,e=o.length;t<e;++t){const l=o[t].Z0t(s,i,r);n=n||l}const a=h.Z0t(s,i,r);return n=n||a,this.f3.k0t(),this.Fft--,n}}*Q0t(t,s,i,r){let n=!1,e=t.S5(),h=e.zY();if(h){this.Fft++,this.f3.B0t(e);const o=h.j0t();for(let t=0,e=o.length;t<e;++t){const l=yield*o[t].Q0t(s,i,r);n=n||l}const a=yield*h.Q0t(s,i,r);return n=n||a,this.f3.k0t(),this.Fft--,n}}tdt(){return this.Fft}edt(){return 0<this.tdt()}sdt(){return++this.Fft}idt(){--this.Fft}rdt(){return 0<this.Nft}kD(){return this.rdt()||this.edt()}jq(t){for(const[e,s,i]of this.Lft)this.U0t(t,e,s,i);C33.Vh(this.Lft)}FD(t){t?this.Bft++:this.Bft--}GF(){return 0<this.Bft}ndt(s){for(let t=0,e=s.length;t<e;++t)s[t].hdt().lu()}odt(s){for(let t=0,e=s.length;t<e;++t)s[t].hdt().jut()}v$(s){for(let t=0,e=s.length;t<e;++t)s[t].hdt().Yut()}L$(s){for(let t=0,e=s.length;t<e;++t)s[t].hdt().B$()}Gx(e){const s=new Set,i=this.zut.y3t(),r=this.zut.E3t();for(let t=0;t<=r;++t){const n=i[t].Q3t();if(n)for(const h of n)e&&e.has(h)||s.add(h)}return s}adt(t){const e=new Set([...t]),s=this.Gx(e);if(0<s.size){for(const i of s)i.hdt().jut();return[...s]}return null}ldt(){const t=C33.mn(C33.cdt,this);return this.kft.push(t),t}udt(){return this.kft}fdt(){if(this.kft.length){let s=this.o0t(),i=!1;this.Nft++;for(let t=0,e=this.kft.length;t<e;++t){const r=this.kft[t];r.ddt()&&r.pdt(s),r.Cdt()&&(i=!0)}i&&(this.mdt(),s.gf(null)),this.Nft--}}async Sdt(){if(this.kft.length){let s=this.o0t(),i=!1;this.Nft++;for(let t=0,e=this.kft.length;t<e;++t){const r=this.kft[t];r.ddt()&&await r.gdt(s),r.Cdt()&&(i=!0)}i&&(this.mdt(),s.gf(null)),this.Nft--}}mdt(){const t=C33.Jh(this.kft,t=>t.Cdt());for(const e of t)e.Sn()}rz(){for(const t of this.kft)t.Sn();C33.Vh(this.kft)}_dt(t){for(const e of this.kft)e.qut(t);for(const s of t){const i=this.Hft.get(s);if(this.Hft.delete(s),i)for(const{resolve:r}of i.Tdt.values())r(!0)}}ydt(t){this.$ft.push(t)}Edt(){C33.Vh(this.$ft)}Idt(){const t=Promise.all(this.$ft);return this.$ft=[],t}$x(t){const e=t.toLowerCase();this.Wft.push(e),this.f3.n7(C33.Xq.Uq.Hq.Adt,null),this.Wft.pop();for(const i of this.f3.Ix().udt())i.Mdt()&&i.Rdt()===e&&i.wdt();const s=this.Vft.get(e);s&&(s.resolve(),this.Vft.delete(e))}Vx(t){const s=t.toLowerCase(),e=this.Vft.get(s);if(e)return e.promise;{let e=null,t=new Promise(t=>e=t);return this.Vft.set(s,{promise:t,resolve:e}),t}}bdt(){if(0===this.Wft.length)throw new Error("not in a signal");return this.Wft.at(-1)}Odt(t){let e=this.Hft.get(t);return e||(e={Gdt:[],Tdt:new Map},this.Hft.set(t,e)),e}YF(t,e){const s=this.Odt(t),i=e.toLowerCase();s.Gdt.push(i),this.f3.n7(t._D().vdt().Hq.Pdt,t),s.Gdt.pop();for(const n of this.f3.Ix().udt())n.xdt()&&n.Rdt()===i&&n.Ldt(t);const r=s.Tdt.get(i);r&&(r.resolve(!1),s.Tdt.delete(i)),0===s.Gdt.length&&0===s.Tdt.size&&this.Hft.delete(t)}qF(t,e){const s=this.Odt(t),i=e.toLowerCase(),r=s.Tdt.get(i);if(r)return r.promise;{let e=null,t=new Promise(t=>e=t);return s.Tdt.set(i,{promise:t,resolve:e}),t}}Ddt(t){const e=this.Odt(t);if(e&&0!==e.Gdt.length)return e.Gdt.at(-1);throw new Error("not in a signal")}Qj(){return{groups:this.Ndt(),cnds:this.Fdt(),acts:this.Bdt(),vars:this.kdt(),waits:this.$dt()}}tY(t){this.Wdt(t.groups),this.Vdt(t.cnds),this.Hdt(t.acts),this.Udt(t.vars),this.Xdt(t.waits)}Ndt(){const t={};for(const e of this.v0t())t[e.NU().toString()]=e.jdt();return t}Wdt(t){for(const[e,s]of Object.entries(t)){const i=parseInt(e,10),r=this.G0t(i);r&&r.Ydt(s)}}Fdt(){const t={};for(const[e,s]of this.Eft){const i=s.Qj();i&&(t[e.toString()]=i)}return t}Vdt(t){const e=new Map;for(const[s,i]of Object.entries(t))e.set(parseInt(s,10),i);for(const[r,n]of this.Eft)n.tY(e.get(r)||null)}Bdt(){const t={};for(const[e,s]of this.Ift){const i=s.Qj();i&&(t[e.toString()]=i)}return t}Hdt(t){const e=new Map;for(const[s,i]of Object.entries(t))e.set(parseInt(s,10),i);for(const[r,n]of this.Ift)n.tY(e.get(r)||null)}kdt(){const t={};for(const[e,s]of this.Mft)s.qdt()||!s.pU()&&!s.gy()||(t[e.toString()]=s.ait());return t}Udt(t){for(const[e,s]of Object.entries(t)){const i=parseInt(e,10),r=this._0t(i);r&&r.Uit(s)}}$dt(){return this.kft.filter(t=>!t.zdt()).map(t=>t.Qj())}Xdt(t){this.rz();for(const e of t){const s=C33.cdt.Jdt(this,e);s&&this.kft.push(s)}}Kdt(){return[...this.f3.T5().Uz()].map(t=>t.zY()).filter(t=>t).map(t=>t.Zdt())}Qdt(t){for(;t;){const e=t.p0t();if(e instanceof C33.tpt)return e;t=e}return null}Uft(t,e){Array.isArray(e)||(e=[]);const s=this.Ax(t.toLowerCase());if(!s)return null;if(!s.hu())return s.Mx();const i=s.ept();if(e.length<i.length)for(e=e.slice(0);e.push(i[e.length].h0t()),e.length<i.length;);const r=s.wx();return r.Px(r.bx(),!1,s.Lx(),s.Mx(),...e)}}}{const C33=self.Ve;C33.Xft=class EventSheet extends C33.pn{constructor(t,e){super(),this.g3t=t,this.f3=t.aL(),this.Tn=e[0],this.spt=[],this.ipt=new Map,this.rpt=new Map,this.npt=new Map,this.hpt=!1,this.opt=[],this.apt=[],this.lpt=new Set;for(const s of e[1])this.cpt(s,null,this.spt);this.upt=this.f3.Az()?{type:"sheet",name:this.Tn,fpt:0,children:[]}:null}Sn(){this.g3t=null,this.f3=null}cpt(t,e,s){switch(t[0]){case 0:case 3:this.dpt(t,e,s);break;case 1:this.ppt(t,e,s);break;case 2:this.Cpt(t,e,s);break;case 4:this.mpt(t,e);break;case 5:this.Spt(t,e,s);break;case 6:this.gpt(t,e);break;default:throw new Error("invalid event type")}}dpt(t,e,s){const i=C33._pt.mE(this,e,t);if(i.m3t()){s.push(i);const r=i.Tpt();for(let t=0,e=r.length;t<e;++t)r[t].ypt()&&this.Ept(i,t)}else i.ypt()?this.Ept(i,0):s.push(i)}mpt(t,e){const s=C33.tpt.Ipt(this,e,t);this.g3t.t0t(s)}gpt(t,e){const s=C33.tpt.Apt(this,e,t);this.g3t.t0t(s)}ppt(t,e,s){const i=C33.Mpt.mE(this,e,t);s.push(i)}Cpt(t,e,s){const i=C33.Rpt.mE(this,e,t);s.push(i)}Spt(t,e,s){const i=C33.wpt.mE(this,e,t);s.push(i)}Ept(r,n){r.m3t()||this.g3t.jft(r);const h=r.l0t(n),o=h.bpt(),a=h.IF();if(h.Opt()){let t=this.rpt.get(a),e=(t||(t=new Map,this.rpt.set(a,t)),h.Gpt().toLowerCase()),s=t.get(o),i=(s||(s=new Map,t.set(o,s)),s.get(e));i||(i=[],s.set(e,i)),i.push([r,n])}else{let t=this.ipt.get(a),e=(t||(t={Ppt:new Map,vpt:new Map},this.ipt.set(a,t)),h.pB()),s,i=(e?(s=t.vpt.get(e))||(s=new Map,t.vpt.set(e,s)):s=t.Ppt,s.get(o));i||(i=[],s.set(o,i)),i.push([r,n])}}Yft(){const s=this.spt;for(let t=0,e=s.length;t<e;++t){const i=t<e-1&&s[t+1]instanceof C33._pt&&s[t+1].xpt();s[t].Yft(i)}}Lpt(t){this.opt.push(t)}Iq(){C33.Vh(this.apt),this.Dpt(this),this.lpt.clear()}Dpt(t){const e=t.apt,s=t.lpt;for(const i of this.opt){const r=i.Npt();i.Fpt()&&t!==r&&!s.has(r)&&(s.add(r),r.Dpt(t),e.push(r))}}j0t(){return this.apt}Ix(){return this.g3t}aL(){return this.f3}i3(){return this.Tn}Bpt(t,e){this.npt.set(e,t)}kpt(t){return this.npt.get(t)||null}N0t(){this.hpt=!1}DM(){if(!this.hpt){const t=this.f3,e=t.$pt(),s=e?performance.now():0,i=(this.hpt=!0,this.Ix()),r=i.o0t();for(const n of this.spt)n.DM(r),i.ndt(n.y$()),i.Edt(),t.WD();r.gf(null),e&&(this.upt.fpt+=performance.now()-s)}}*H0t(){if(!this.hpt){this.hpt=!0;const t=this.f3,e=this.Ix(),s=e.o0t();for(const i of this.spt)yield*i.H0t(s),e.ndt(i.y$()),e.Edt(),t.WD();s.gf(null)}}U0t(i,r,n){if(!r)return this.Wpt(i,r,null,null);{let t=r.IF(),e=!1,s=this.Wpt(i,r,t,n);e=e||s;for(const h of t.A0t())s=this.Wpt(i,r,h,n),e=e||s}}Wpt(t,e,s,i){const r=this.ipt.get(s);if(!r)return!1;const n=i?r.vpt.get(i):r.Ppt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){const c=this.Vpt(e,a,l);o=o||c}return o}*Y0t(i,r,n){if(!r)return yield*this.Hpt(i,r,null,null);{let t=r.IF(),e=!1,s=yield*this.Hpt(i,r,t,n);e=e||s;for(const h of t.A0t())s=yield*this.Hpt(i,r,h,n),e=e||s}}*Hpt(t,e,s,i){const r=this.ipt.get(s);if(!r)return!1;const n=i?r.vpt.get(i):r.Ppt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){let t;t=a.Upt()?this.Vpt(e,a,l):yield*this.Xpt(e,a,l),o=o||t}return o}Z0t(t,e,s){const i=e.IF(),r=this.rpt.get(i);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(s);if(!h)return!1;let o=!1;for(let t=0,e=h.length;t<e;++t){const a=h[t],l=this.Vpt(null,a[0],a[1]);o=o||l}return o}*Q0t(t,e,s){const i=e.IF(),r=this.rpt.get(i);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(s);if(!h)return!1;let o=!1;for(let r=0,t=h.length;r<t;++r){let t=h[r],e=t[0],s=t[1],i;i=e.Upt()?this.Vpt(null,e,s):yield*this.Xpt(null,e,s),o=o||i}return o}Vpt(t,e,s){let i=this.f3,r=this.g3t,n=r.Ox(),h=r.Fx(),o=r.tdt(),a=!1;n&&r.odt(n.bx()),r.odt(e.bx());const l=1<o,c=(l&&r.f0t().I$(),h.I$(e));if(t){const f=e.Tpt()[s].IF(),d=f.PD();d.l3t(t),t.LF()&&t.jpt()}let u=!0;if(e.l6()){const p=e.Ypt();for(let t=0,e=p.length;t<e;++t)if(!p[t].qpt(c)){u=!1;break}}return u&&(e.m3t()?e.zpt(c,s):e.DM(c),a=c.V3t()),h.B$(),l&&r.f0t().B$(),r.L$(e.bx()),n&&r.L$(n.bx()),n||1!==o||(r.Edt(),r.GF())||i.WD(),a}*Xpt(t,e,s){let i=this.f3,r=this.g3t,n=r.Ox(),h=r.Fx(),o=r.tdt(),a=!1;n&&r.odt(n.bx()),r.odt(e.bx());const l=1<o,c=(l&&r.f0t().I$(),h.I$(e));if(t){const f=e.Tpt()[s].IF(),d=f.PD();d.l3t(t),t.LF()&&t.jpt()}let u=!0;if(e.l6()){const p=e.Ypt();for(let t=0,e=p.length;t<e;++t)if(!(yield*p[t].Jpt(c))){u=!1;break}}return u&&(e.m3t()?yield*e.Kpt(c,s):yield*e.H0t(c),a=c.V3t()),h.B$(),l&&r.f0t().B$(),r.L$(e.bx()),n&&r.L$(n.bx()),n||1!==o||(r.Edt(),r.GF())||i.WD(),a}Zdt(){return this.upt}}}{let NoActions2=function(t,e){return!0};NoActions=NoActions2;const C33=self.Ve,EMPTY_ARRAY=[];function*DebugNoActions(t,e){return!0}C33._pt=class EventBlock extends C33.pn{constructor(t,e,s){super(),this.pY=t,this.f3=t.aL(),this.Zpt=e,this.Qpt=null,this.zut=this.f3.Ix().Fx(),this.tCt=[],this.eCt=[],this.sCt=!1,this.iCt=!1,this.rCt=!1,this.nCt=!1,this.hCt=!!s[2],this.oCt=!1,this.aCt=null,this.lCt=[],this.Art=[],this.cCt=[],this.uCt=NoActions2,this.fCt=DebugNoActions,this.dCt=!1,this.pCt=!1,this.CCt="",this.mCt=!1,this.SCt=null,this.upt=null,this.rH=s[4],this.gCt=s[5],this.pY.Bpt(this,this.gCt),this._Ct=this.f3.Az()?{TCt:s[3][0],yCt:s[3][1],ECt:!1,ICt:!1,ACt:!1,MCt:!1}:null,this.Ix().Kft(this),3===s[0]&&this.RCt(s[1]);let i=0;for(const r of s[6]){const n=C33.wCt.mE(this,r,i++);this.lCt.push(n),this.bCt(n.IF())}i=0;for(const h of s[7]){const o=C33.OCt.mE(this,h,i++);this.Art.push(o)}if(9===s.length){const a=s[8];for(const l of a)this.pY.cpt(l,this,this.cCt)}this.lCt.length&&(this.oCt=null===this.lCt[0].IF()&&this.lCt[0].bpt()===C33.Xq.Uq.Hq.GCt),0===this.lCt.length&&(this.lCt=EMPTY_ARRAY),0===this.Art.length&&(this.Art=EMPTY_ARRAY),0===this.cCt.length&&(this.cCt=EMPTY_ARRAY)}static mE(t,e,s){return C33.mn(C33._pt,t,e,s)}RCt(t){this.dCt=!0,this.pCt=!!t[0],this.mCt=this.pCt,this.CCt=t[1].toLowerCase(),this.SCt=[],this.Ix().zft(this),this.f3.Az()&&(this.upt={type:"group",name:t[1],fpt:0,children:[]})}PCt(t){this.SCt.push(t)}vCt(t,e){for(const s of t.aq().zq())e.includes(s)||e.push(s)}xCt(t,e){if(t)if(e.includes(t)||e.push(t),t.bU())for(const s of t.LCt())s.LF()&&this.vCt(s,e);else t.LF()&&this.vCt(t,e)}bCt(t){this.xCt(t,this.tCt)}DCt(t){this.xCt(t,this.eCt)}NCt(){this.tCt=this.f3.wU()}Yft(t){this.nCt=!!t,this.FCt(),this.BCt();for(const e of this.lCt)e.Yft();if(0<this.Art.length){let t=!1;for(const i of this.Art)i.Yft(),i.kCt()&&(t=!0);t?(this.uCt=this.$Ct,this.fCt=this.WCt):(this.uCt=this.VCt,this.fCt=this.HCt)}const s=this.cCt;for(let t=0,e=s.length;t<e;++t){const r=t<e-1&&s[t+1]instanceof C33._pt&&s[t+1].xpt();s[t].Yft(r)}this._Ct&&this.UCt(),this.upt&&this.XCt().Zdt().children.push(this.upt)}Zdt(){return this.upt}XCt(){let t=this.l6();for(;t;){if(t.P0t())return t;t=t.l6()}return this.pY}UCt(){const t=this._Ct;t.ECt=this.lCt.every(t=>t.Upt()),t.ICt=this.Art.every(t=>t.Upt()),t.ACt=this.cCt.every(t=>t.Upt()),t.MCt=t.ECt&&t.ICt&&t.ACt}jCt(){let t=this;for(;t.UCt(),t=t.l6(););}FCt(){if(this.P0t()){let t=this.l6();for(this.rCt=!0;t;){if(!t.P0t()){this.rCt=!1;break}t=t.l6()}}}YCt(){const t=this.f3.wU();if(this.tCt===t)this.eCt=t;else{this.eCt=C33.eo(this.tCt);let t=this.l6();for(;t;){for(const s of t.tCt)this.DCt(s);t=t.l6()}const e=this.Ix();this.tCt=e.r0t(this.tCt),this.eCt=e.r0t(this.eCt)}}BCt(){if(this.qCt()){this.aCt=[];let t=this.l6();for(;t;)this.aCt.push(t),t=t.l6();this.aCt.reverse()}}zCt(){this.iCt=!0,this.Zpt&&this.Zpt.zCt()}J3t(){return this.iCt}y$(){return this.tCt}bx(){return this.sCt||(this.sCt=!0,this.YCt()),this.eCt}JCt(t){return this.tCt.includes(t)}Ypt(){return this.aCt}zY(){return this.pY}Ix(){return this.pY.Ix()}aL(){return this.f3}l6(){return this.Zpt}KCt(t){this.Qpt=t}p0t(){return this.Qpt||this.Zpt}ZCt(){return this.gCt}QCt(){return this._Ct&&this._Ct.yCt}t1t(){return this.QCt()&&this._Ct.TCt}e1t(t){this._Ct.TCt=!!t,this.jCt()}P0t(){return this.dCt}s1t(){return this.rCt}xpt(){return this.oCt}i1t(){return this.nCt}Jft(){return this.CCt}jdt(){return this.mCt}L0t(){this.Ydt(this.pCt)}Ydt(t){if(t=!!t,!this.dCt)throw new Error("not a group");if(this.mCt!==t){this.mCt=t;for(const e of this.SCt)e.r1t();if(this.SCt.length){const s=this.f3.B5(),i=s.zY();i&&i.Iq()}}}NU(){return this.rH}m3t(){return this.hCt}ypt(){return this.lCt.length&&this.lCt[0].ypt()}n1t(){return this.Qpt&&this.Qpt instanceof C33.tpt}qCt(){return this.n1t()||this.lCt.some(t=>t.ypt())}Tpt(){return this.lCt}K3t(){return this.lCt.length}l0t(t){if((t=Math.floor(t))<0||t>=this.lCt.length)throw new RangeError("invalid condition index");return this.lCt[t]}h1t(t){return this.l0t(t)}o1t(t){let e=t.F4();if(0!==e){--e;const s=t.a1t()?t.l1t():t.IF();for(;0<=e;--e){const i=this.lCt[e];if(s===i.IF()||i.a1t()&&i.l1t()===s)return!1}}return!0}c1t(){return this.Art}u1t(){return this.Art.length}u0t(t){if((t=Math.floor(t))<0||t>=this.Art.length)throw new RangeError("invalid action index");return this.Art[t]}f1t(e){e=Math.floor(e);const t=this.Art.find(t=>t.d1t()===e);if(t)return t;throw new RangeError("invalid action debug index")}p1t(t){return 0<=(t=Math.floor(t))&&t<this.Art.length}C1t(){return this.cCt}C0t(){return this.cCt.filter(t=>t instanceof C33.Mpt)}qpt(s){s.N3t(this);let i=this.lCt,r=0===i.length;for(let t=0,e=i.length;t<e;++t){const n=i[t];if(s.B3t(t),n.wB())throw new Error("trigger cannot be used as sub-event to a loop");if(n.DM())r=!0;else if(!this.hCt)return!1}return!this.hCt||r}zpt(t,e){t.N3t(this),t.B3t(e),this.lCt[e].DM()&&(this.uCt(t,0)&&this.m1t(t),t.W3t(!0))}*Jpt(s){s.N3t(this);let i=this.lCt,r=0===i.length;for(let e=0,t=i.length;e<t;++e){const n=i[e];if(s.B3t(e),n.wB())throw new Error("trigger cannot be used as sub-event to a loop");let t;if(t=n.Upt()?n.DM():yield*n.H0t())r=!0;else if(!this.hCt)return!1}return!this.hCt||r}*Kpt(e,t){e.N3t(this),e.B3t(t);let s=this.lCt[t],i;if(i=s.Upt()?s.DM():yield*s.H0t()){let t;(t=this.S1t()?this.uCt(e,0):yield*this.fCt(e,0))&&(this.g1t()?this.m1t():yield*this._1t()),e.W3t(!0)}}DM(t){t.N3t(this),this.oCt||t.H3t(!1),this.hCt?this.T1t(t):this.y1t(t)}*H0t(t){(this.t1t()||this.f3.E1t())&&(yield this),t.N3t(this),this.oCt||t.H3t(!1),this.hCt?yield*this.I1t(t):yield*this.A1t(t)}T1t(s){let i=this.lCt,r=0===i.length;for(let t=0,e=i.length;t<e;++t){const n=i[t];if(!n.ypt()){s.B3t(t);const h=n.DM();r=r||h}}s.W3t(r),r&&(this.uCt(s,0)&&this.m1t(s),this.nCt)&&s.H3t(!0)}*I1t(s){let i=this.lCt,r=0===i.length;for(let e=0,t=i.length;e<t;++e){const n=i[e];if(!n.ypt()){s.B3t(e);let t;t=n.Upt()?n.DM():yield*n.H0t(),r=r||t}}if(s.W3t(r),r){let t;(t=this.S1t()?this.uCt(s,0):yield*this.fCt(s,0))&&(this.g1t()?this.m1t():yield*this._1t()),this.nCt&&s.H3t(!0)}}y1t(s){const i=this.lCt;for(let t=0,e=i.length;t<e;++t){const r=i[t],n=(s.B3t(t),r.DM());if(!n)return void s.W3t(!1)}s.W3t(!0),this.uCt(s,0)&&this.m1t(s),s.V3t()&&this.nCt&&s.H3t(!0)}*A1t(s){const i=this.lCt;for(let e=0,t=i.length;e<t;++e){const r=i[e];s.B3t(e);let t;if(!(t=r.Upt()?r.DM():yield*r.H0t()))return void s.W3t(!1)}s.W3t(!0);let t;(t=this.S1t()?this.uCt(s,0):yield*this.fCt(s,0))&&(this.g1t()?this.m1t():yield*this._1t()),s.V3t()&&this.nCt&&s.H3t(!0)}VCt(s,i){const r=this.Art;for(let t=i,e=r.length;t<e;++t){const n=r[t];s.$3t(t),n.DM()}return!0}*HCt(s,i){const r=this.Art;for(let t=i,e=r.length;t<e;++t){const n=r[t];s.$3t(t),n.Upt()?n.DM():yield*n.H0t()}return!0}$Ct(s,i){const r=this.Ix(),n=this.Art;for(let t=i,e=n.length;t<e;++t){const h=n[t],o=(s.$3t(t),h.DM());if(h.M1t()&&!0===o)return!1;h.R1t()&&o instanceof Promise&&r.ydt(o)}return!0}*WCt(s,i){const r=this.Ix(),n=this.Art;for(let e=i,t=n.length;e<t;++e){const h=n[e];s.$3t(e);let t;if(t=h.Upt()?h.DM():yield*h.H0t(),h.M1t()&&!0===t)return!1;h.R1t()&&t instanceof Promise&&r.ydt(t)}return!0}w1t(t){this.uCt(t,t.k3t())&&this.m1t()}*b1t(t){(yield*this.fCt(t,t.k3t()))&&(yield*this._1t())}m1t(){if(this.cCt.length){const t=this.P0t()&&this.f3.$pt(),e=t?performance.now():0,s=this.zut,i=s.I$(this);this.iCt?this.O1t(i):this.G1t(i),s.B$(),t&&(this.upt.fpt+=performance.now()-e)}}O1t(i){const r=this.dCt,n=this.rCt,h=this.Ix(),o=this.cCt;for(let t=0,e=o.length,s=e-1;t<e;++t){const a=o[t],l=a.y$(),c=!n||!r&&t<s;c&&h.v$(l),a.DM(i),c?h.L$(l):h.ndt(l)}}G1t(s){const i=this.cCt;for(let t=0,e=i.length;t<e;++t)i[t].DM(s)}*_1t(){if(this.cCt.length){const t=this.zut,e=t.I$(this);this.iCt?yield*this.P1t(e):yield*this.v1t(e),t.B$()}}*P1t(i){const r=this.dCt,n=this.rCt,h=this.Ix(),o=this.cCt;for(let t=0,e=o.length,s=e-1;t<e;++t){const a=o[t],l=a.y$(),c=!n||!r&&t<s;c&&h.v$(l),yield*a.H0t(i),c?h.L$(l):h.ndt(l)}}*v1t(s){const i=this.cCt;for(let t=0,e=i.length;t<e;++t)yield*i[t].H0t(s)}x$(s,i){i.D3t();const r=this.lCt;if(!this.m3t())for(let t=s.F3t()+1,e=r.length;t<e;++t){const n=r[t],h=(i.B3t(t),n.DM());if(!h)return!1}return this.uCt(i,0)&&this.m1t(i),!0}*x1t(s,i){i.D3t();const r=this.lCt;if(!this.m3t())for(let e=s.F3t()+1,t=r.length;e<t;++e){const n=r[e];i.B3t(e);let t;if(!(t=n.Upt()?n.DM():yield*n.H0t()))return!1}let t;return(t=this.S1t()?this.uCt(i,0):yield*this.fCt(i,0))&&(this.g1t()?this.m1t():yield*this._1t()),!0}Upt(){return!this.t1t()&&!this.f3.E1t()&&this._Ct.MCt}S1t(){return!this.f3.E1t()&&this._Ct.ICt}g1t(){return!this.f3.E1t()&&this._Ct.ACt}L1t(s){if(this.l6()){const i=this.Ypt();for(let t=0,e=i.length;t<e;++t)if(!i[t].qpt(s))return!1}return!0}*D1t(s){if(this.l6()){const i=this.Ypt();for(let t=0,e=i.length;t<e;++t)if(!(yield*i[t].Jpt(s)))return!1}return!0}N1t(t,e,s){if(0<e.length)if(s){const i=e.map(t=>t.cs(0));t.f0t().I$(),this.Qpt.F1t(i)}else this.Qpt.B1t(e);else s&&t.f0t().I$()}k1t(t,e,s,i){let r,n,h=0<t.length,o=null,a=this.f3,l=this.zut,c=a.Ix(),u=c.sdt(),f=1<u;if(this.N1t(c,e,f),h&&(s?c.v$(t):c.odt(t)),null!==i){if(i.$1t){const p=s?i.$1t.PD():i.$1t.hdt().Xut(),C=i.W1t.PD();C.c3t(p.GD()),C.p3t(),s||i.W1t.V1t()}else if(i.H1t){const m=i.H1t.PD();m.c3t(i.U1t),m.p3t()}i.X1t&&(o=c.adt(t))}const d=l.I$(this);if(s&&d.Z3t(t),this.L1t(d)){d.N3t(this);const S=this.Qpt.R1t();S&&([n,r]=this.Qpt.j1t()),this.y1t(d),S&&this.Qpt.Y1t(n)}return l.B$(),f&&c.f0t().B$(),null!==o&&c.L$(o),h&&c.L$(t),c.idt(),r}*q1t(t,e,s,i){let r,n,h=((this.t1t()||this.f3.E1t())&&(yield this),0<t.length),o=null,a=this.f3,l=this.zut,c=a.Ix(),u=c.sdt(),f=1<u;if(this.N1t(c,e,f),h&&(s?c.v$(t):c.odt(t)),null!==i){if(i.$1t){const p=s?i.$1t.PD():i.$1t.hdt().Xut(),C=i.W1t.PD();C.c3t(p.GD()),C.p3t(),s||i.W1t.V1t()}else if(i.H1t){const m=i.H1t.PD();m.c3t(i.U1t),m.p3t()}i.X1t&&(o=c.adt(t))}const d=l.I$(this);if(s&&d.Z3t(t),yield*this.D1t(d)){d.N3t(this);const S=this.Qpt.R1t();S&&([n,r]=this.Qpt.j1t()),yield*this.A1t(d),S&&this.Qpt.Y1t(n)}return l.B$(),f&&c.f0t().B$(),null!==o&&c.L$(o),h&&c.L$(t),c.idt(),r}z1t(t,e){const s=this.bx(),i=0<s.length,r=this.f3,n=this.zut,h=r.Ix(),o=h.sdt(),a=1<o,l=(a&&h.f0t().I$(),this.Qpt.F1t(t),i&&(e?h.v$(s):h.odt(s)),n.I$(this));this.L1t(l)&&(l.N3t(this),this.y1t(l)),n.B$(),a&&h.f0t().B$(),i&&h.L$(s),h.idt()}*J1t(t,e){(this.t1t()||this.f3.E1t())&&(yield this);const s=this.bx(),i=0<s.length,r=this.f3,n=this.zut,h=r.Ix(),o=h.sdt(),a=1<o,l=(a&&h.f0t().I$(),this.Qpt.F1t(t),i&&(e?h.v$(s):h.odt(s)),n.I$(this));(yield*this.D1t(l))&&(l.N3t(this),yield*this.A1t(l)),n.B$(),a&&h.f0t().B$(),i&&h.L$(s),h.idt()}Px(t,e,s,i,...r){let n,h,o=0<t.length,a=this.f3,l=this.zut,c=a.Ix(),u=c.sdt(),f=1<u;f&&c.f0t().I$(),0<r.length&&this.Qpt.F1t(r),o&&(e?c.v$(t):c.odt(t));const d=l.I$(this);if(d.Y3t(s,i),l.I3t(d),a.R$(!1),this.L1t(d)){d.N3t(this);const p=this.Qpt.R1t();p&&([h,n]=this.Qpt.j1t()),this.y1t(d),p&&this.Qpt.Y1t(h)}return a.R$(!0),l.B$(),l.A3t(),f&&c.f0t().B$(),o&&c.L$(t),c.idt(),n||d.q3t()}}}{let C33=self.Ve,EMPTY_SOL_MODIFIERS=[],hadUserScriptException=!1;C33.wpt=class EventScript extends C33.pn{constructor(t,e,s){super();const i=t.aL(),r=t.Ix(),n=(this.pY=t,this.g3t=r,this.f3=t.aL(),this.Zpt=e,i.K1t(s[1]));this.Z1t=n,this.gCt=s[2],this.pY.Bpt(this,this.gCt),this._Ct=i.Az()?{TCt:s[3][0],yCt:s[3][1]}:null}static mE(t,e,s){return C33.mn(C33.wpt,t,e,s)}Yft(){const t=this.Z1t,e=this.f3.Ix().m0t(this);this.Z1t=t.bind(null,this.f3.jL(),e)}l6(){return this.Zpt}p0t(){return this.Zpt}zY(){return this.pY}ZCt(){return this.gCt}QCt(){return this._Ct&&this._Ct.yCt}t1t(){return this.QCt()&&this._Ct.TCt}e1t(t){this._Ct.TCt=!!t}xpt(){return!1}y$(){return EMPTY_SOL_MODIFIERS}bx(){return this.Zpt?this.Zpt.bx():EMPTY_SOL_MODIFIERS}DM(t){t.N3t(this),this.g3t.ydt(this.Q1t())}async Q1t(){try{await this.Z1t()}catch(t){console.error(`Unhandled exception running script %c${this.zY().i3()}, event ${this.ZCt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),hadUserScriptException||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),hadUserScriptException=!0)}}*H0t(t){t.N3t(this),(this.t1t()||this.f3.E1t())&&(yield this),this.DM(t)}Upt(){return!this.t1t()&&!this.f3.E1t()}static tmt(){return hadUserScriptException}static emt(){hadUserScriptException=!0}}}{const C33=self.Ve,assert=self.assert;C33.tpt=class FunctionBlock extends C33.pn{constructor(t,e,s){super(),this.pY=t,this.f3=t.aL(),this.Zpt=e,this.smt=0,this.imt="",this.rmt=0,this.nmt=[],this.hmt=!0,this.omt="",this.Wut=null,this.amt=!1,this.lmt=[],this.cmt=!1,this.umt=!1,this.fmt=0,this.dmt=-1,this.pmt=new Map,this.Cmt=C33._pt.mE(t,e,s),this.Cmt.KCt(this)}mmt(t){this.smt=0,this.imt=t[0],this.rmt=t[1],this.nmt=t[2].map(t=>C33.Mpt.mE(this.pY,this,t)),this.hmt=t[3],this.umt=t[4],this.cmt=t[5]}Smt(t){this.smt=1,this.omt=t[1],this.Wut=this.f3.rU(t[2]),this.Cmt.bCt(this.Wut),this.imt=this.Wut.i3()+"."+this.omt,this.rmt=t[3],this.nmt=t[4].map(t=>C33.Mpt.mE(this.pY,this,t)),this.hmt=t[5],this.umt=t[6],this.cmt=t[7],this.Wut.gmt(this)}static Ipt(t,e,s){const i=C33.mn(C33.tpt,t,e,s),r=s[1];return i.mmt(r),i}static Apt(t,e,s){const i=C33.mn(C33.tpt,t,e,s),r=s[1];return i.Smt(r),i}qft(){if(this.Wut&&this.Wut.bU())for(const t of this.Wut.LCt())if(t._mt(this.omt)){this.amt=!0;break}}Yft(){for(const t of this.nmt)t.Yft();this.Cmt.Yft(!1)}e0t(){return this.smt}C0t(){return this.nmt}ept(){return this.nmt}Rx(){return this.nmt.length}Tmt(t){this.lmt.push(t)}ymt(){return this.lmt}B1t(s){const i=this.nmt;for(let t=0,e=i.length;t<e;++t)i[t].Uit(s[t].cs(0))}F1t(s){const i=this.nmt;for(let t=0,e=i.length;t<e;++t)i[t].Uit(s[t])}Emt(){return this.nmt.map(t=>t.ait())}l6(){return this.Zpt}p0t(){return this.Zpt}s0t(){return this.imt}Imt(){return this.omt}Amt(){return this.amt}Lx(){return this.rmt}IF(){return this.Wut}hu(){return this.hmt}Mx(){switch(this.rmt){case 0:return null;case 2:return"";default:return 0}}wx(){return this.Cmt}xx(){return this.cmt}R1t(){return this.umt}j1t(){const t=this.fmt++;this.dmt=t;let e,s=new Promise(t=>e=t);return this.pmt.set(t,{resolve:e,Mmt:0}),[t,s]}Y1t(t){const e=this.pmt.get(t);0===e.Mmt&&(e.resolve(),this.pmt.delete(t)),this.dmt=-1}Rmt(){const t=this.pmt.get(this.dmt);return t.Mmt++,this.dmt}wmt(t){this.dmt=t;const e=this.pmt.get(t);e.Mmt--}bmt(t,e){const s=new Map,i=[];for(const r of this.Wut.PD().GD()){const n=r.IF();if(n._mt(this.omt)){const h=s.get(n);Array.isArray(h)?h.push(r):s.set(n,[r])}else i.push(r)}if(0<i.length&&this.Cmt.k1t(t,e,this.cmt,{H1t:this.Wut,U1t:i}),0<s.size)for(const[o,a]of s){const l=o.Omt(this.omt).wx(),c=[...new Set([...t,...l.y$()])];l.k1t(c,e,this.cmt,{H1t:o,U1t:a})}}*Gmt(t,e){const s=new Map,i=[];for(const r of this.Wut.PD().GD()){const n=r.IF();if(n._mt(this.omt)){const h=s.get(n);Array.isArray(h)?h.push(r):s.set(n,[r])}else i.push(r)}if(0<i.length&&(yield*this.Cmt.q1t(t,e,this.cmt,{H1t:this.Wut,U1t:i})),0<s.size)for(const[o,a]of s){const l=o.Omt(this.omt).wx(),c=[...new Set([...t,...l.y$()])];yield*l.q1t(c,e,this.cmt,{H1t:o,U1t:a})}}}}{const C33=self.Ve,EMPTY_SOL_MODIFIERS=[];C33.Mpt=class EventVariable extends C33.pn{constructor(t,e,s){super();const i=t.Ix();this.pY=t,this.g3t=i,this.f3=t.aL(),this.Zpt=e,this.vft=i.f0t(),this.Tn=s[1],this.y3=s[2],this.Pmt=s[3],this.NT=!!s[4],this.vmt=!!s[5],this.xmt=e instanceof C33.tpt,this.rH=s[6],this.Lmt=this.f3.S0t(s[8]),this.Dmt=t=>this.Uit(t),this.Nmt=()=>this.ait(),this.Fmt=!this.Zpt||this.NT||this.vmt,this.Trt=this.Pmt,this.Bmt=-1,this.kmt()&&(this.Trt=this.Trt?1:0),!this.$mt()||this.gy()||this.qdt()||(this.Bmt=i.n0t(this)),i.i0t(this)}static mE(t,e,s){return C33.mn(C33.Mpt,t,e,s)}Yft(){if(this.$mt()&&!this.gy()&&!this.qdt()&&!this.Wmt()){const t=this.g3t.Qdt(this);t&&t.Tmt(this)}}i3(){return this.Tn}S0t(){return this.Lmt}l6(){return this.Zpt}p0t(){return this.l6()}pU(){return!this.l6()}$mt(){return!this.pU()}Wmt(){return this.xmt}gy(){return this.NT}qdt(){return this.vmt}mi(){return 0===this.y3}Ri(){return 1===this.y3}kmt(){return 2===this.y3}xpt(){return!1}NU(){return this.rH}h0t(){return this.Pmt}y$(){return EMPTY_SOL_MODIFIERS}DM(t){!this.$mt()||this.gy()||this.qdt()||this.Uit(this.h0t())}Upt(){return!0}*H0t(t){this.DM(t)}Uit(t){this.mi()?"number"!=typeof t&&(t=parseFloat(t)):this.Ri()?"string"!=typeof t&&(t=t.toString()):this.kmt()&&(t=t?1:0),this.Fmt?this.Trt=t:this.vft.rft()[this.Bmt]=t}ait(){return this.Fmt?this.Trt:this.vft.rft()[this.Bmt]}Vmt(){let t=this.ait();return t=this.kmt()?!!t:t}b0t(){this.Trt=this.Pmt}g0t(){return{configurable:!1,enumerable:!0,get:this.Nmt,set:this.Dmt}}}}{const C33=self.Ve,assert=self.assert,EMPTY_SOL_MODIFIERS=[];C33.Rpt=class EventInclude extends C33.pn{constructor(t,e,s){super();const i=t.Ix();this.pY=t,this.g3t=i,this.f3=t.aL(),this.Zpt=e,this.Hmt=null,this.Umt=s[1],this.Sf=!0}static mE(t,e,s){return C33.mn(C33.Rpt,t,e,s)}Yft(){this.Hmt=this.g3t.Eq(this.Umt),this.pY.Lpt(this);let t=this.l6();for(;t;)t instanceof C33._pt&&t.P0t()&&t.PCt(this),t=t.l6();this.r1t(),this.f3.Az()&&this.pY.Zdt().children.push(this.Hmt.Zdt())}l6(){return this.Zpt}y$(){return EMPTY_SOL_MODIFIERS}Npt(){return this.Hmt}DM(t){const e=!!this.l6(),s=this.f3.wU();e&&this.g3t.odt(s),this.Hmt.DM(),e&&this.g3t.L$(s)}*H0t(t){const e=!!this.l6(),s=this.f3.wU();e&&this.g3t.odt(s),yield*this.Hmt.H0t(),e&&this.g3t.L$(s)}Upt(){return!1}Fpt(){return this.Sf}r1t(){let t=this.l6();for(;t;){if(t instanceof C33._pt&&t.P0t()&&!t.jdt())return void(this.Sf=!1);t=t.l6()}this.Sf=!0}}}{let WrapIndex2=function(t,e){return e<=t?t%e:(t<0&&(t<=-e&&(t%=e),t<0)&&(t+=e),t)};WrapIndex=WrapIndex2;const C33=self.Ve,assert=self.assert;C33.Xmt=class ExpNode extends C33.pn{constructor(t){super(),this.J_=t,this.f3=t.aL()}Yft(){}static jmt(t,e){const s=e[0],i=[BehaviorExpressionNode,ObjectExpressionNode,InstVarExpressionNode,EventVarExpNode,SystemExpressionExpNode,CallFunctionExpressionExpNode];return C33.mn(i[s],t,e)}};class SystemExpressionExpNode extends C33.Xmt{constructor(t,e){super(t),this.Ymt=this.f3.qmt(),this.Z1t=this.f3.K1t(e[1]),this.Z1t!==C33.Xq.Uq.Frt.random&&this.Z1t!==C33.Xq.Uq.Frt.zmt||this.J_.Jmt()}Kmt(){return this.Ymt.Zmt(this.Z1t,this.Ymt)}}class CallFunctionExpressionExpNode extends C33.Xmt{constructor(t,e){super(t),this.Qmt=null,this.imt=e[1],this.J_.Jmt()}Yft(){const t=this.f3.Ix(),e=(this.Qmt=t.Ax(this.imt),this.imt=null,this.J_.wx()),s=this.Qmt.wx();this.t2t=[...new Set([...e.bx(),...s.bx()])],this.t2t=t.r0t(this.t2t)}Kmt(){const t=this.Qmt;if(t.hu()){const e=t.wx();return C33._pt.prototype.Px.bind(e,this.t2t,t.xx(),t.Lx(),t.Mx())}{const s=t.Mx();return()=>s}}}class ObjectExpressionNode extends C33.Xmt{constructor(t,e){super(t),this.Wut=this.f3.rU(e[1]),this.Z1t=this.f3.K1t(e[2]),this.e2t=!!e[3],this.zut=this.f3.Ix().Fx(),this.J_.s2t(this.Wut)}Kmt(){return this.Wut._D().Zmt(this.Z1t,this.Wut.mD().rB())}i2t(...t){const e=this.Wut,s=e.PD().i3t(),i=s.length;if(0===i)return this.e2t?"":0;const r=WrapIndex2(this.J_.r2t(),i);return this.zut.E$().X3t(e),this.Z1t.apply(s[r].rB(),t)}n2t(t,...e){const s=this.Wut,i=s.GD(),r=i.length;if(0===r)return this.e2t?"":0;const n=WrapIndex2(t,r);return this.zut.E$().X3t(s),this.Z1t.apply(i[n].rB(),e)}}class InstVarExpressionNode extends C33.Xmt{constructor(t,e){super(t),this.Wut=this.f3.rU(e[1]),this.h2t=e[3],this.e2t=!!e[2],this.J_.s2t(this.Wut)}o2t(){const t=this.Wut.PD().i3t(),e=t.length;if(0===e)return this.e2t?"":0;const s=WrapIndex2(this.J_.r2t(),e);return t[s].a2t(this.h2t)}l2t(){const t=this.Wut,e=t.PD().i3t(),s=e.length;if(0===s)return this.e2t?"":0;const i=WrapIndex2(this.J_.r2t(),s),r=e[i],n=r.IF().c2t(t.u2t());return r.a2t(this.h2t+n)}f2t(t){const e=this.Wut,s=e.GD(),i=s.length;if(0===i)return this.e2t?"":0;let r=WrapIndex2(t,i),n=s[r],h=0;return e.bU()&&(h=n.IF().c2t(e.u2t())),n.a2t(this.h2t+h)}}class BehaviorExpressionNode extends C33.Xmt{constructor(t,e){super(t),this.Wut=this.f3.rU(e[1]),this.d2t=this.Wut.prt(e[2]),this.p2t=this.Wut.Yet(e[2]),this.Z1t=this.f3.K1t(e[3]),this.e2t=!!e[4],this.zut=this.f3.Ix().Fx(),this.J_.s2t(this.Wut)}C2t(...t){const e=this.Wut,s=e.PD().i3t(),i=s.length;if(0===i)return this.e2t?"":0;let r=WrapIndex2(this.J_.r2t(),i),n=(this.zut.E$().X3t(e),s[r]),h=0;return e.bU()&&(h=n.IF().m2t(e.u2t())),this.Z1t.apply(n.drt()[this.p2t+h].rB(),t)}S2t(t,...e){const s=this.Wut,i=s.GD(),r=i.length;if(0===r)return this.e2t?"":0;let n=WrapIndex2(t,r),h=(this.zut.E$().X3t(s),i[n]),o=0;return s.bU()&&(o=h.IF().m2t(s.u2t())),this.Z1t.apply(h.drt()[this.p2t+o].rB(),e)}}class EventVarExpNode extends C33.Xmt{constructor(t,e){super(t),this.g2t=null,this._2t=e[1]}Yft(){this.g2t=this.f3.Ix()._0t(this._2t)}T2t(){return this.g2t}}}{let GetExpressionFunc2=function(t){const e=self.y2t[t];if(e)return e;throw new Error("invalid expression number")};GetExpressionFunc=GetExpressionFunc2;const C33=self.Ve,assert=self.assert;C33.E2t=class Parameter extends C33.pn{constructor(t,e,s){super(),this.J_=t,this.tm=s,this.y3=e,this.cs=null,this.I2t=!1,this.vmt=!1}static mE(t,e,s){const i=e[0],r=[ExpressionParameter,StringExpressionParameter,FileParameter,ComboParameter,ObjectParameter,LayerExpressionParameter,LayoutParameter,ExpressionParameter,ComboParameter,ComboParameter,InstVarParameter,EventVarParameter,FileParameter,VariadicParameter,StringExpressionParameter,TimelineParameter,BooleanParameter,FunctionParameter,EaseParameter,TilemapBrushParameter,TemplateExpressionParameter,FlowchartParameter];return C33.mn(r[i],t,i,s,e)}Yft(){}Jmt(){this.I2t=!0}s2t(t){this.I2t||!t||t._D().qL()||(this.I2t=!0)}A2t(){return this.I2t}F4(){return this.tm}aL(){return this.J_.aL()}wx(){return this.J_.wx()}qdt(){return this.vmt}M2t(){return 4===this.y3}};class ExpressionParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.R2t=0;const r=i[1];this.w2t=r[0],this.b2t=[],this.O2t=null;for(let t=1,e=r.length;t<e;++t)this.b2t.push(C33.Xmt.jmt(this,r[t]));this.b2t.length?this.cs=this.G2t:(this.cs=GetExpressionFunc2(this.w2t),this.vmt=!0)}P2t(t){if(t<0||t>=this.b2t.length)throw new RangeError("invalid numbered node");return this.b2t[t]}Yft(){for(const e of this.b2t)e.Yft();const t=GetExpressionFunc2(this.w2t);this.b2t.length?this.O2t=t(this):this.O2t=t}r2t(){return this.R2t}G2t(t){return this.R2t=t,this.O2t()}}class StringExpressionParameter extends ExpressionParameter{constructor(t,e,s,i){super(t,e,s,i),this.cs=this.v2t,14===e&&(this.wx().NCt(),this.J_ instanceof C33.OCt)&&this.wx().zCt()}v2t(t){this.R2t=t;const e=this.O2t();return"string"==typeof e?e:""}x2t(){return GetExpressionFunc2(this.w2t)()}}class LayerExpressionParameter extends ExpressionParameter{constructor(t,e,s,i){super(t,e,s,i),2<=t.L2t()?this.cs=this.sN:this.cs=this.V5,this.vmt=!1}V5(t){this.R2t=t;const e=this.O2t(),s=this.aL().B5();return s.V5(e)}sN(t){const e=this.V5(t);return e?e.sN():null}}class ComboParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.D2t=i[1],this.cs=this.N2t,this.vmt=!0}N2t(){return this.D2t}}class BooleanParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.F2t=i[1],this.cs=this.B2t,this.vmt=!0}B2t(){return this.F2t}}class ObjectParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.Wut=this.aL().rU(i[1]),2<=t.L2t()?this.cs=this.dD:this.cs=this.IF;const r=this.wx();r.bCt(this.Wut),this.J_ instanceof C33.OCt?r.zCt():r.l6()&&r.l6().zCt(),this.vmt=!0}IF(){return this.Wut}dD(){return this.Wut?this.Wut.dD():null}}class LayoutParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.tH=this.aL().T5().Bz(i[1]),2<=t.L2t()?this.cs=this.g5:this.cs=this.y5,this.vmt=!0}y5(){return this.tH}g5(){return this.tH?this.tH.g5():null}}class TimelineParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.VK=this.aL().XQ().zJ(i[1]),2<=t.L2t()?this.cs=this.aet:this.cs=this.vet,this.vmt=!0}vet(){return this.VK}aet(){return this.VK?this.VK.aet():null}}class FileParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.k2t=i[1],this.cs=this.$2t,this.vmt=!0}$2t(){return this.k2t}}class InstVarParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.W2t=i[1];const r=this.J_.IF();!(this.J_ instanceof C33.wCt&&this.J_.gy())&&r&&r.bU()?(this.cs=this.V2t,this.Jmt()):(this.cs=this.H2t,this.vmt=!0)}H2t(){return this.W2t}V2t(t){t=t||0;let e=this.J_.IF(),s=e.PD(),i=s.GD(),r=null;if(i.length)r=i[t%i.length].IF();else if(s.e3t()){const n=s.s3t();r=n[t%n.length].IF()}else{if(!(0<e.xD()))return 0;{const h=e.GD();r=h[t%h.length].IF()}}return this.W2t+r.c2t(e.u2t())}}class EventVarParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this._2t=i[1],this.g2t=null,2<=t.L2t()?this.cs=this.U2t:this.cs=this.X2t,this.vmt=!0}Yft(){this.g2t=this.aL().Ix()._0t(this._2t)}X2t(){return this.g2t}U2t(){return null}}class FunctionParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.j2t=i[1],this.Qmt=null,2<=t.L2t()?this.cs=this.Y2t:this.cs=this.q2t,this.vmt=!0}Yft(){this.Qmt=this.aL().Ix().Ax(this.j2t),this.j2t=null}q2t(){return this.Qmt}Y2t(){return null}}class VariadicParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.z2t=[],this.J2t=[],this.vmt=!0;for(let t=1,e=i.length;t<e;++t){const r=C33.E2t.mE(this.J_,i[t],0);this.z2t.push(r),this.J2t.push(0),r.qdt()||(this.vmt=!1)}this.cs=this.K2t}Yft(){for(const t of this.z2t)t.Yft()}K2t(){const s=this.z2t,i=this.J2t;for(let t=0,e=s.length;t<e;++t)i[t]=s[t].cs(0);return i}}class EaseParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.Z2t=i[1],this.cs=this.Hit,this.vmt=!0}Hit(){return this.Z2t}}class TilemapBrushParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.Q2t=i[1],this.cs=this.tSt,this.vmt=!0}tSt(){return this.Q2t}}class TemplateExpressionParameter extends ExpressionParameter{constructor(t,e,s,i){super(t,e,s,i),this.cs=this.BF,this.vmt=!1}BF(){return this.O2t()}}class FlowchartParameter extends C33.E2t{constructor(t,e,s,i){super(t,e,s),this.Plt=this.aL().zlt().Mlt(i[1]),this.cs=this.eSt,this.vmt=!0}eSt(){return this.Plt.i3()}}}{let EvalParams2=function(s,i){for(let t=0,e=s.length;t<e;++t)i[t]=s[t].cs(0)};EvalParams=EvalParams2;const C33=self.Ve,assert=self.assert,EMPTY_PARAMS_ARRAY=[],noop=function(){};C33.wCt=class Condition extends C33.pn{constructor(t,s,e){if(super(),this.Cmt=t,this.f3=t.aL(),this.tm=e,this.Z1t=this.f3.K1t(s[1]),this.sSt=0<s[3],this.iSt=2===s[3],this.rSt=!!s[4],this.nSt=!!s[5],this.NT=!!s[6],this.rH=s[7],this.hSt=this.Cmt.m3t(),this.Wut=null,this.d2t=null,this.p2t=-1,this.Ymt=null,this.DM=noop,this.H0t=noop,this.ss=[],this.oSt=[],this.aSt=!1,this.lSt=null,this.cSt=null,this._Ct=this.f3.Az()?{TCt:s[8][0],uSt:s[8][1]}:null,-1===s[0]?this.Ymt=this.f3.qmt():(this.Wut=this.f3.rU(s[0]),s[2]&&(this.d2t=this.Wut.prt(s[2]),this.p2t=this.Wut.Yet(s[2])),this.Cmt.l6()&&this.Cmt.l6().zCt()),10===s.length){let e=s[9];for(let t of e)this.ss.push(C33.E2t.mE(this,t,this.ss.length)),this.oSt.push(0)}0===this.ss.length&&(this.ss=EMPTY_PARAMS_ARRAY,this.oSt=EMPTY_PARAMS_ARRAY),this.Cmt.Ix().Zft(this)}static mE(t,e,s){return C33.mn(C33.wCt,t,e,s)}Yft(){for(const t of this.ss)t.Yft(),t.A2t()&&(this.aSt=!0);this.iSt?(this.DM=this.fSt,this.H0t=this.dSt):this.Ymt?(this.pSt(),this.H0t=this.CSt):this.Wut._D().qL()?(this.mSt(),this.H0t=this.SSt):this.NT?(this.DM=this.gSt,this.H0t=this._St):(this.DM=this.TSt,this.H0t=this.ySt)}pSt(){const t=this.Ymt,e=this.Ymt;this.ESt(t,e,this.ISt)}mSt(){const t=this.Wut._D(),e=this.Wut.mD().rB();this.ESt(t,e,this.ASt)}ESt(t,e,s){const i=this.Z1t,r=this.nSt,n=this.ss;if(0===n.length){const h=t.Zmt(i,e);r?this.DM=function(){return C33.xor(h(),r)}:this.DM=h}else if(1===n.length){const o=n[0];if(!r&&o.qdt())this.DM=t.MSt(i,e,o.cs(0));else{const a=t.Zmt(i,e);this.DM=function(){return C33.xor(a(o.cs(0)),r)}}}else if(2===n.length){const l=n[0],c=n[1];if(!r&&l.qdt()&&c.qdt())this.DM=t.RSt(i,e,l.cs(0),c.cs(0));else{const u=t.Zmt(i,e);this.DM=function(){return C33.xor(u(l.cs(0),c.cs(0)),r)}}}else if(3===n.length){const f=n[0],d=n[1],p=n[2];if(!r&&f.qdt()&&d.qdt()&&p.qdt())this.DM=t.wSt(i,e,f.cs(0),d.cs(0),p.cs(0));else{const C=t.Zmt(i,e);this.DM=function(){return C33.xor(C(f.cs(0),d.cs(0),p.cs(0)),r)}}}else this.DM=s}NU(){return this.rH}bpt(){return this.Z1t}IF(){return this.Wut}pB(){return this.d2t}bSt(){return this.d2t?this.d2t.uB():this.Wut?this.Wut._D():null}L2t(){const t=this.bSt();return t?t.OSt():1}wx(){return this.Cmt}aL(){return this.f3}F4(){return this.tm}d1t(){return this.F4()}ypt(){return this.sSt}Opt(){return this.iSt}GSt(){return this.nSt}wB(){return this.rSt}gy(){return this.NT}PSt(){return this._Ct.TCt}vSt(){return!!this.Ymt}a1t(){return this.vSt()||this.Wut._D().qL()}l1t(){for(const t of this.ss)if(t.M2t())return t.IF();return null}xSt(t){this._Ct.TCt=!!t,this.Cmt.jCt()}LSt(){return this._Ct.uSt}Upt(){return!this.PSt()&&!this.f3.E1t()&&!this.LSt()}DSt(){return this.lSt||(this.lSt=new Map),this.lSt}NSt(){return this.cSt||(this.cSt=new Map),this.cSt}ISt(){const t=this.oSt;return EvalParams2(this.ss,t),C33.xor(this.Z1t.apply(this.Ymt,t),this.nSt)}*CSt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const e=this.oSt;EvalParams2(this.ss,e);let t=this.Z1t.apply(this.Ymt,e);return C33.jo(t)&&(t=yield*t),C33.xor(t,this.nSt)}return this.DM()}ASt(){const t=this.oSt,e=(EvalParams2(this.ss,t),this.Wut.mD().rB());return C33.xor(this.Z1t.apply(e,t),this.nSt)}*SSt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){let t=this.oSt,e=(EvalParams2(this.ss,t),this.Wut.mD().rB()),s=this.Z1t.apply(e,t);return C33.jo(s)&&(s=yield*s),C33.xor(s,this.nSt)}return this.DM()}fSt(){return!0}*dSt(){return(this.PSt()||this.f3.E1t())&&(yield this),!0}FSt(){if(this.d2t){if(2<=this.d2t.uB().OSt())throw new Error("not yet implemented");return this.d2t}return 2<=this.Wut._D().OSt()?this.Wut.dD():this.Wut}gSt(){const t=this.oSt,e=(EvalParams2(this.ss,t),this.Z1t.apply(this.FSt(),t));return this.Wut.V1t(),e}*_St(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const e=this.oSt;EvalParams2(this.ss,e);let t=this.Z1t.apply(this.FSt(),e);return C33.jo(t)&&(t=yield*t),this.Wut.V1t(),t}return this.DM()}TSt(){const s=this.ss,i=this.oSt,t=this.Wut.PD();for(let t=0,e=s.length;t<e;++t){const r=s[t];r.A2t()||(i[t]=r.cs(0))}return t.Qut()?this.BSt(t):this.kSt(t)}*ySt(){return(this.PSt()||this.f3.E1t())&&(yield this),this.TSt()}$St(s){const i=this.ss,r=this.oSt;for(let t=0,e=i.length;t<e;++t){const n=i[t];n.A2t()&&(r[t]=n.cs(s))}}BSt(s){const t=this.Wut,i=t.bU(),r=t.u2t(),n=this.p2t,h=0<=n,o=t.GD(),a=this.aSt,l=this.oSt,c=this.Z1t,u=this.nSt,f=this.hSt&&!this.sSt;s.Zut();for(let e=0,t=o.length;e<t;++e){const d=o[e];a&&this.$St(e);let t;if(h){const p=i?d.IF().m2t(r):0;t=c.apply(d.drt()[n+p].rB(),l)}else t=c.apply(d.rB(),l);C33.xor(t,u)?s.r3t(d):f&&s.n3t(d)}return t.WSt(!0),s.h3t(!1),t.V1t(),s.t3t()}kSt(t){let e=this.Wut,s=e.bU(),i=e.u2t(),r=e.LF(),n=this.p2t,h=0<=n,o=this.aSt,a=this.oSt,l=this.Z1t,c=this.nSt,u=this.hSt&&!this.sSt,f=t.o3t(),d=t.a3t(),p=u&&!this.Cmt.o1t(this),C=p?d:f,m=0,S=!1;for(let e=0,t=C.length;e<t;++e){const _=C[e];o&&this.$St(e);let t;if(h){const T=s?_.IF().m2t(i):0;t=l.apply(_.drt()[n+T].rB(),a)}else t=l.apply(_.rB(),a);C33.xor(t,c)?(S=!0,p?(f.push(_),r&&_.VSt()):(C[m]=_,r&&_.HSt(m),++m)):p?(C[m]=_,r&&_.USt(m),++m):u&&(d.push(_),r)&&_.XSt()}C33.Wh(C,m),r&&e.jSt(p,m);const g=S;return p&&!S&&(S=this.YSt(f)),e.WSt(g||u),u?S:t.t3t()}YSt(s){const t=this.Wut,i=t.bU(),r=t.u2t(),n=this.aSt,h=this.p2t,o=0<=h,a=this.oSt,l=this.Z1t,c=this.nSt;for(let e=0,t=s.length;e<t;++e){const u=s[e];n&&this.$St(e);let t;if(o){const f=i?u.IF().m2t(r):0;t=l.apply(u.drt()[h+f].rB(),a)}else t=l.apply(u.rB(),a);if(C33.xor(t,c))return!0}return!1}qSt(t,e){return this.ss[t].cs(e)}Gpt(){const t=this.ss;if(t.length)return t[0].x2t();throw new Error("no parameters")}Qj(){if(!this.lSt||!this.lSt.size)return null;const e={};for(const[s,i]of this.lSt.entries()){let t=i;"collmemory"===s&&(t=[...i.entries()].map(t=>[t[0].NF(),t[1].NF(),t[2]])),e[s]=t}return{ex:e}}tY(t){if(this.lSt&&(this.lSt.clear(),this.lSt=null),t){const e=this.f3,s=t.ex;if(s){const i=this.DSt();i.clear();for(const[r,n]of Object.entries(s)){let t=n;"collmemory"===r&&(t=C33.mn(C33.ou,n.map(t=>[e.D5(t[0]),e.D5(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),i.set(r,t)}}}}}}{let EvalParams2=function(s,i){for(let t=0,e=s.length;t<e;++t)i[t]=s[t].cs(0)};EvalParams=EvalParams2;const C33=self.Ve,assert=self.assert,EMPTY_PARAMS_ARRAY=[],noop=function(){},noopGenerator=function*(){},FLAG_CANPICKANYOBJECTCLASS=1,FLAG_COPYPICKED=2,FLAG_CUSTOM_ACE=4,FLAG_IS_ASYNC=8,FLAG_CAN_BAIL_OUT=16;C33.OCt=class Action extends C33.pn{constructor(t,e,s){super();const i=(this.Cmt=t).aL(),r=(this.f3=i,this.tm=s,this.rH=4<=e.length?e[3]:-1,this.zSt=5<=e.length?255&e[4]:0,this.JSt=5<=e.length?e[4]>>8:0,this.Z1t=null,this.Wut=null,this.d2t=null,this.p2t=-1,this.Ymt=null,this.KSt="",this.ZSt=null,this.QSt=null,this.DM=noop,this.H0t=noop,this.ss=[],this.oSt=[],this.aSt=!1,this.lSt=null,this.cSt=null,-3===e[0]),n=r?e[2]:e[5];if(this._Ct=i.Az()||r?{TCt:n[0],uSt:n[1],index:n[2]}:null,-1===e[0])this.Ymt=i.qmt(),this.Z1t=i.K1t(e[1]);else if(-2===e[0])this.KSt=e[1];else if(r){const h=i.K1t(e[1]);this.Z1t=h,this.DM=this.tgt,this.H0t=this.egt,this.JSt|=FLAG_IS_ASYNC}else this.Wut=i.rU(e[0]),this.JSt&FLAG_CUSTOM_ACE?(this.KSt=e[1],this.ZSt=i.rU(e[2])):(e[2]&&(this.d2t=this.Wut.prt(e[2]),this.p2t=this.Wut.Yet(e[2])),this.Z1t=i.K1t(e[1]));if(7===e.length){const o=e[6];for(const a of o)this.ss.push(C33.E2t.mE(this,a,this.ss.length)),this.oSt.push(0)}0===this.ss.length&&(this.ss=EMPTY_PARAMS_ARRAY,this.oSt=EMPTY_PARAMS_ARRAY),this.sgt()&&(this.Cmt.NCt(),this.Cmt.zCt()),this.Cmt.Ix().Qft(this)}static mE(t,e,s){return C33.mn(C33.OCt,t,e,s)}Yft(){for(const t of this.ss)t.Yft(),t.A2t()&&(this.aSt=!0);if(this.Ymt)this.pSt(),this.H0t=this.CSt;else if(this.KSt)this.JSt&FLAG_CUSTOM_ACE?this.igt():this.rgt(),this.KSt="",this.ZSt=null;else if(this.DM===this.tgt){const e=this.Z1t,s=this.f3.Ix().m0t(this.Cmt);this.Z1t=e.bind(null,this.f3.jL(),s)}else this.d2t?this.R1t()?(this.DM=this.ngt,this.H0t=this.hgt):(this.DM=this.ogt,this.H0t=this.agt):this.Wut._D().qL()?(this.mSt(),this.H0t=this.SSt):this.gy()?(this.DM=this.lgt,this.H0t=this.cgt):this.R1t()?(this.DM=this.ugt,this.H0t=this.fgt):this.dgt()?(this.DM=this.pgt,this.H0t=this.Cgt):this.ss.length?this.ss.every(t=>t.A2t())?(this.DM=this.mgt,this.H0t=this.Sgt):this.aSt?(this.DM=this.ggt,this.H0t=this._gt):this.ss.every(t=>t.qdt())?(EvalParams2(this.ss,this.oSt),this.DM=this.Tgt,this.H0t=this.ygt):(this.DM=this.Egt,this.H0t=this.Igt):(this.DM=this.Tgt,this.H0t=this.ygt)}pSt(){const t=this.Ymt,e=this.Ymt;this.ESt(t,e,this.ISt)}mSt(){const t=this.Wut._D(),e=this.Wut.mD().rB();this.ESt(t,e,this.ASt)}rgt(){const t=this.Cmt.Ix(),s=t.Ax(this.KSt);if(s.hu()){const i=0!=(this.JSt&FLAG_COPYPICKED);this.QSt=s.wx();let e=[...new Set([...this.Cmt.bx(),...this.QSt.bx()])];e=t.r0t(e);const r=!s.xx()&&this.Agt()?{X1t:!0}:null;if(this.DM=C33._pt.prototype.k1t.bind(this.QSt,e,this.ss,i,r),this.f3.Az()){const n=this;this.H0t=function*(){(n.PSt()||n.f3.E1t())&&(yield n);const t=yield*n.QSt.q1t(e,n.ss,i,r);return t}}else this.H0t=noopGenerator}else this.DM=noop,this.H0t=noopGenerator}igt(){const n=this.Cmt.Ix(),h=n.I0t(this.ZSt,this.KSt);if(h.hu()){const o=0!=(this.JSt&FLAG_COPYPICKED);this.QSt=h.wx();let e=[...new Set([...this.Cmt.bx(),...this.QSt.bx(),this.Wut,h.IF()])],t=(e=n.r0t(e),!this.Wut.bU()&&!h.IF().bU()),s=!this.Wut.bU()&&h.IF().bU(),i=this.Wut.bU(),r=null;if(!h.xx()&&this.Agt()&&((r=r||{}).X1t=!0),!s&&o||((r=r||{}).$1t=this.Wut,r.W1t=h.IF()),t||s||i&&!h.Amt()?this.DM=C33._pt.prototype.k1t.bind(this.QSt,e,this.ss,o,r):i&&(this.DM=C33.tpt.prototype.bmt.bind(h,e,this.ss)),this.f3.Az()){const a=this;t||s||i&&!h.Amt()?this.H0t=function*(){(a.PSt()||a.f3.E1t())&&(yield a);const t=yield*a.QSt.q1t(e,a.ss,o,r);return t}:i&&(this.H0t=function*(){(a.PSt()||a.f3.E1t())&&(yield a);const t=yield*h.Gmt(e,a.ss);return t})}else this.H0t=noopGenerator}else this.DM=noop,this.H0t=noopGenerator}ESt(t,e,s){const i=this.Z1t,r=this.ss;if(0===r.length)this.DM=t.Zmt(i,e);else if(1===r.length){const n=r[0];if(n.qdt())this.DM=t.MSt(i,e,n.cs(0));else{const h=t.Zmt(i,e);this.DM=function(){return h(n.cs(0))}}}else if(2===r.length){const o=r[0],a=r[1];if(o.qdt()&&a.qdt())this.DM=t.RSt(i,e,o.cs(0),a.cs(0));else{const l=t.Zmt(i,e);this.DM=function(){return l(o.cs(0),a.cs(0))}}}else if(3===r.length){const c=r[0],u=r[1],f=r[2];if(c.qdt()&&u.qdt()&&f.qdt())this.DM=t.wSt(i,e,c.cs(0),u.cs(0),f.cs(0));else{const d=t.Zmt(i,e);this.DM=function(){return d(c.cs(0),u.cs(0),f.cs(0))}}}else this.DM=s}NU(){return this.rH}R1t(){return 0!=(this.JSt&FLAG_IS_ASYNC)}M1t(){return 0!=(this.JSt&FLAG_CAN_BAIL_OUT)}dgt(){return 1===this.zSt}gy(){return 2===this.zSt}sgt(){return 0!=(this.JSt&FLAG_CANPICKANYOBJECTCLASS)}kCt(){return this.R1t()||this.M1t()}IF(){return this.Wut}bSt(){return this.d2t?this.d2t.uB():this.Wut?this.Wut._D():null}L2t(){const t=this.bSt();return t?t.OSt():1}wx(){return this.Cmt}Agt(){let t=this.Cmt;do{if(t instanceof C33.tpt&&t.xx())return!0}while(t=t.p0t());return!1}aL(){return this.f3}F4(){return this.tm}d1t(){return this._Ct.index}PSt(){return this._Ct.TCt}xSt(t){this._Ct.TCt=!!t,this.Cmt.jCt()}LSt(){return this._Ct.uSt}Upt(){return!this.PSt()&&!this.f3.E1t()&&!this.LSt()}DSt(){return this.lSt||(this.lSt=new Map),this.lSt}NSt(){return this.cSt||(this.cSt=new Map),this.cSt}ISt(){const t=this.oSt;return EvalParams2(this.ss,t),this.Z1t.apply(this.Ymt,t)}*CSt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const t=this.oSt,e=(EvalParams2(this.ss,t),yield*this.Z1t.apply(this.Ymt,t));return e}return this.DM()}ASt(){const t=this.oSt;return EvalParams2(this.ss,t),this.Z1t.apply(this.Wut.mD().rB(),t)}*SSt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const t=this.oSt,e=(EvalParams2(this.ss,t),yield*this.Z1t.apply(this.Wut.mD().rB(),t));return e}return this.DM()}Tgt(){const s=this.oSt,i=this.Wut.PD().GD();for(let t=0,e=i.length;t<e;++t)this.Z1t.apply(i[t].rB(),s)}*ygt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const s=this.oSt,i=this.Wut.PD().GD();for(let t=0,e=i.length;t<e;++t)yield*this.Z1t.apply(i[t].rB(),s)}else this.Tgt()}Egt(){const s=this.oSt,i=(EvalParams2(this.ss,s),this.Wut.PD().GD());for(let t=0,e=i.length;t<e;++t)this.Z1t.apply(i[t].rB(),s)}*Igt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const s=this.oSt,i=(EvalParams2(this.ss,s),this.Wut.PD().GD());for(let t=0,e=i.length;t<e;++t)yield*this.Z1t.apply(i[t].rB(),s)}else this.Egt()}mgt(){const i=this.ss,r=this.oSt,e=this.Z1t,n=this.Wut.PD().GD();for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].cs(s);e.apply(h.rB(),r)}}*Sgt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const i=this.ss,r=this.oSt,e=this.Z1t,n=this.Wut.PD().GD();for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].cs(s);yield*e.apply(h.rB(),r)}}else this.mgt()}ggt(){const i=this.ss,r=this.oSt,e=this.Z1t,n=this.Wut.PD().GD();for(let t=0,e=i.length;t<e;++t){const s=i[t];s.A2t()||(r[t]=s.cs(0))}for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t){const o=i[t];o.A2t()&&(r[t]=o.cs(s))}e.apply(h.rB(),r)}}*_gt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const i=this.ss,r=this.oSt,e=this.Z1t,n=this.Wut.PD().GD();for(let t=0,e=i.length;t<e;++t){const s=i[t];s.A2t()||(r[t]=s.cs(0))}for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t){const o=i[t];o.A2t()&&(r[t]=o.cs(s))}yield*e.apply(h.rB(),r)}}else this.ggt()}pgt(){const i=this.ss,r=this.oSt,e=this.Z1t,t=this.Wut,s=t.Mgt(),n=t.PD().GD();s.Rgt(e);for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].cs(s);e.apply(h.rB(),r)}s.wgt(e)}*Cgt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const i=this.ss,r=this.oSt,e=this.Z1t,t=this.Wut,s=t.Mgt(),n=t.PD().GD();s.Rgt(e);for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].cs(s);yield*e.apply(h.rB(),r)}s.wgt(e)}else this.pgt()}lgt(){const t=this.oSt;return EvalParams2(this.ss,t),this.Z1t.apply(this.d2t||this.Wut,t)}*cgt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const e=this.oSt;EvalParams2(this.ss,e);let t=this.Z1t.apply(this.d2t||this.Wut,e);return t=C33.jo(t)?yield*t:t}return this.lgt()}ogt(){const t=this.Wut,e=t.bU(),i=t.u2t(),r=this.ss,n=this.aSt,h=this.oSt,o=this.Z1t,a=this.p2t,l=t.PD().GD();for(let t=0,e=r.length;t<e;++t){const s=r[t];s.A2t()||(h[t]=s.cs(0))}for(let s=0,t=l.length;s<t;++s){const c=l[s];if(n)for(let t=0,e=r.length;t<e;++t){const f=r[t];f.A2t()&&(h[t]=f.cs(s))}const u=e?c.IF().m2t(i):0;o.apply(c.drt()[a+u].rB(),h)}}*agt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const t=this.Wut,e=t.bU(),i=t.u2t(),r=this.ss,n=this.aSt,h=this.oSt,o=this.Z1t,a=this.p2t,l=t.PD().GD();for(let t=0,e=r.length;t<e;++t){const s=r[t];s.A2t()||(h[t]=s.cs(0))}for(let s=0,t=l.length;s<t;++s){const c=l[s];if(n)for(let t=0,e=r.length;t<e;++t){const f=r[t];f.A2t()&&(h[t]=f.cs(s))}const u=e?c.IF().m2t(i):0;yield*o.apply(c.drt()[a+u].rB(),h)}}else this.ogt()}ugt(){const i=this.ss,r=this.oSt,e=this.Z1t,n=this.Wut.PD().GD(),h=[];for(let s=0,t=n.length;s<t;++s){const o=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].cs(s);h.push(e.apply(o.rB(),r))}return Promise.all(h)}*fgt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const i=this.ss,r=this.oSt,e=this.Z1t,n=this.Wut.PD().GD(),h=[];for(let s=0,t=n.length;s<t;++s){const o=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].cs(s);h.push(yield*e.apply(o.rB(),r))}return Promise.all(h)}return this.ugt()}ngt(){const t=this.Wut,e=t.bU(),i=t.u2t(),r=this.ss,n=this.oSt,h=this.Z1t,o=this.p2t,a=t.PD().GD(),l=[];for(let s=0,t=a.length;s<t;++s){const c=a[s];for(let t=0,e=r.length;t<e;++t)n[t]=r[t].cs(s);const u=e?c.IF().m2t(i):0;l.push(h.apply(c.drt()[o+u].rB(),n))}return Promise.all(l)}*hgt(){if((this.PSt()||this.f3.E1t())&&(yield this),this.LSt()){const t=this.Wut,e=t.bU(),i=t.u2t(),r=this.ss,n=this.oSt,h=this.Z1t,o=this.p2t,a=t.PD().GD(),l=[];for(let s=0,t=a.length;s<t;++s){const c=a[s];for(let t=0,e=r.length;t<e;++t)n[t]=r[t].cs(s);const u=e?c.IF().m2t(i):0;l.push(yield*h.apply(c.drt()[o+u].rB(),n))}return Promise.all(l)}return this.ngt()}async tgt(){try{await this.Z1t()}catch(t){console.error(`Unhandled exception running script %c${this.Cmt.zY().i3()}, event ${this.Cmt.ZCt()}, action ${this.d1t()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),C33.wpt.tmt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),C33.wpt.emt())}}*egt(){return(this.PSt()||this.f3.E1t())&&(yield this),this.tgt()}Qj(){return this.lSt&&this.lSt.size?{ex:C33.Ho(this.lSt)}:null}tY(t){if(this.lSt&&(this.lSt.clear(),this.lSt=null),t){const e=t.ex;e&&(this.lSt=C33.Uo(e))}}}}{let GetInst2=function(t){return t instanceof self.yF?runtime.aN(t):t.xk()},GetWorldInfo2=function(t){return GetInst2(t).W5()},CompareX2=function(t,e){return C33.compare(GetWorldInfo2(this).b_(),t,e)},CompareY2=function(t,e){return C33.compare(GetWorldInfo2(this).P_(),t,e)},IsOnScreen2=function(){return GetWorldInfo2(this).Y7()},IsOutsideLayout2=function(){const t=GetWorldInfo2(this),e=t.y5(),s=t.H7();return s.Gl()<0||s.Pl()<0||s.bl()>e.dC()||s.Ol()>e.IC()},PickDistance2=function(s,i,r){const t=this.PD(),n=t.GD();if(!n.length)return!1;let h=n[0],o=h.W5(),a=h,l=C33.wn(o.b_(),o.P_(),i,r);for(let t=1,e=n.length;t<e;++t){h=n[t],o=h.W5();const c=C33.wn(o.b_(),o.P_(),i,r);(0===s&&c<l||1===s&&c>l)&&(l=c,a=h)}return t.C3t(a),!0},SetX2=function(t){const e=GetWorldInfo2(this);e.b_()!==t&&(e.O_(t),e.L7())},SetY2=function(t){const e=GetWorldInfo2(this);e.P_()!==t&&(e.v_(t),e.L7())},SetPos2=function(t,e){const s=GetWorldInfo2(this);s.bgt(t,e)||(s.D7(t,e),s.L7())},SetPosToObject2=function(t,e){if(t){const s=GetInst2(this),i=t.bD(s);if(i){const[r,n]=i.Ogt(e),h=s.W5();h.b_()===r&&h.P_()===n||(h.D7(r,n),h.L7())}}},MoveForward2=function(t){if(0!==t){const e=GetWorldInfo2(this);e.B7(e.Ggt()*t,e.Pgt()*t),e.L7()}},MoveAtAngle2=function(t,e){if(0!==e){const s=GetWorldInfo2(this);t=C33.An(t),s.B7(Math.cos(t)*e,Math.sin(t)*e),s.L7()}},GetX2=function(){return GetWorldInfo2(this).b_()},GetY2=function(){return GetWorldInfo2(this).P_()},GetDt2=function(){const t=GetInst2(this);return t.aL().jx(t)},CompareWidth2=function(t,e){return C33.compare(GetWorldInfo2(this).dC(),t,e)},CompareHeight2=function(t,e){return C33.compare(GetWorldInfo2(this).IC(),t,e)},SetWidth2=function(t){const e=GetWorldInfo2(this);e.dC()!==t&&(e.TC(t),e.L7())},SetHeight2=function(t){const e=GetWorldInfo2(this);e.IC()!==t&&(e.pC(t),e.L7())},SetSize2=function(t,e){const s=GetWorldInfo2(this);s.dC()===t&&s.IC()===e||(s.aw(t,e),s.L7())},GetWidth2=function(){return GetWorldInfo2(this).dC()},GetHeight2=function(){return GetWorldInfo2(this).IC()},GetBboxLeft2=function(){return GetWorldInfo2(this).H7().bl()},GetBboxTop2=function(){return GetWorldInfo2(this).H7().Ol()},GetBboxRight2=function(){return GetWorldInfo2(this).H7().Gl()},GetBboxBottom2=function(){return GetWorldInfo2(this).H7().Pl()},GetBboxMidX2=function(){const t=GetWorldInfo2(this).H7();return(t.bl()+t.Gl())/2},GetBboxMidY2=function(){const t=GetWorldInfo2(this).H7();return(t.Ol()+t.Pl())/2},IsAngleWithin2=function(t,e){return C33.On(GetWorldInfo2(this).GetAngle(),C33.An(e))<=C33.An(t)},IsAngleClockwiseFrom2=function(t){return C33.Pn(GetWorldInfo2(this).GetAngle(),C33.An(t))},IsBetweenAngles2=function(t,e){const s=C33.An(t),i=C33.An(e),r=GetWorldInfo2(this).GetAngle(),n=!C33.Pn(i,s);return n?!(!C33.Pn(r,s)&&C33.Pn(r,i)):C33.Pn(r,s)&&!C33.Pn(r,i)},SetAngle2=function(t){const e=GetWorldInfo2(this),s=C33.In(C33.An(t));isNaN(s)||e.GetAngle()===s||(e.zD(s),e.L7())},RotateClockwise2=function(t){if(!isNaN(t)&&0!==t){const e=GetWorldInfo2(this);e.zD(e.GetAngle()+C33.An(t)),e.L7()}},RotateCounterclockwise2=function(t){if(!isNaN(t)&&0!==t){const e=GetWorldInfo2(this);e.zD(e.GetAngle()-C33.An(t)),e.L7()}},RotateTowardAngle2=function(t,e){const s=GetWorldInfo2(this),i=s.GetAngle(),r=C33.Gn(i,C33.An(e),C33.An(t));isNaN(r)||i===r||(s.zD(r),s.L7())},RotateTowardPosition2=function(t,e,s){const i=GetWorldInfo2(this),r=i.GetAngle(),n=e-i.b_(),h=s-i.P_(),o=Math.atan2(h,n),a=C33.Gn(r,o,C33.An(t));isNaN(a)||r===a||(i.zD(a),i.L7())},SetTowardPosition2=function(t,e){const s=GetWorldInfo2(this),i=s.GetAngle(),r=t-s.b_(),n=e-s.P_(),h=Math.atan2(n,r);isNaN(h)||i===h||(s.zD(h),s.L7())},GetAngle2=function(){return C33.Mn(GetWorldInfo2(this).GetAngle())},CompareOpacity2=function(t,e){return C33.compare(C33.Xn(100*GetWorldInfo2(this).$O(),6),t,e)},IsVisible2=function(){return GetWorldInfo2(this).xN()},SetVisible2=function(t){const e=GetInst2(this),s=e.W5();t=2===t?!s.xN():0!==t,s.xN()!==t&&(s.PN(t),e.aL().q5())},SetOpacity2=function(t){const e=C33.En(t/100,0,1),s=GetInst2(this),i=s.W5();if(i.F6()){if(i.$nt().vgt()===e)return}else if(i.$O()===e)return;i.VO(e),s.aL().q5()},SetDefaultColor2=function(t){tempColor.ba(t);const e=GetInst2(this),s=e.W5();s.z7().Ta(tempColor)||(s.J7(tempColor),e.aL().q5())},GetColor2=function(){const t=GetWorldInfo2(this).z7();return C33.qn(t.ca(),t.ua(),t.fa(),t.Ca())},GetOpacity2=function(){return C33.Xn(100*GetWorldInfo2(this).$O(),6)},IsOnLayer2=function(t){return!!t&&GetWorldInfo2(this).V5()===t},PickTopBottom2=function(s){const t=this.PD(),i=t.GD();if(!i.length)return!1;let e=i[0],r=e;for(let t=1,e=i.length;t<e;++t){const n=i[t],h=n.W5(),o=r.W5(),a=h.V5().F4(),l=o.V5().F4();0===s?(l<a||a===l&&h.H5()>o.H5())&&(r=n):(a<l||a===l&&h.H5()<o.H5())&&(r=n)}return t.C3t(r),!0},CompareZElevation2=function(t,e,s){const i=GetWorldInfo2(this),r=0===t?i.x_():i.W7();return C33.compare(r,e,s)},MoveToTop2=function(){GetWorldInfo2(this).Z7()},MoveToBottom2=function(){GetWorldInfo2(this).t6()},MoveToLayer2=function(t){t&&GetWorldInfo2(this).s6(t)},ZMoveToObject2=function(t,e){const s=0===t;if(e){const i=GetInst2(this),r=e.xgt(i);r&&i.W5().r6(r,s)}},SetZElevation2=function(t){const e=GetInst2(this),s=e.W5();s.x_()!==t&&(s.L_(t),e.aL().q5())},LayerNumber2=function(){return GetWorldInfo2(this).V5().F4()},LayerName2=function(){return GetWorldInfo2(this).V5().i3()},ZIndex2=function(){return GetWorldInfo2(this).H5()},ZElevation2=function(){return GetWorldInfo2(this).x_()},TotalZElevation2=function(){return GetWorldInfo2(this).W7()},IsEffectEnabled2=function(t){const e=GetInst2(this),s=e.IF().HD().mrt(t);if(s){const i=s.F4(),r=e.W5().v7();return r.TB(i)}},SetEffectEnabled2=function(t,e){const s=GetInst2(this),i=s.IF().HD().mrt(e);if(i){const r=i.F4(),n=1===t,h=s.W5().v7();h.TB(r)!==n&&(h.yB(r,n),h.EB(),s.aL().q5())}},SetEffectParam2=function(t,e,s){const i=GetInst2(this),r=i.IF().HD().mrt(t);if(r){e=Math.floor(e);const n=r.CI().SI(e);if(n){"color"===n?(tempColor.ba(s),s=tempColor):"percent"===n&&(s/=100);const h=r.F4(),o=i.W5().v7(),a=o.AB(h,e,s);a&&o.TB(h)&&i.aL().q5()}}},CollMemory_Add2=function(t,e,s,i){const r=e.NF(),n=s.NF();r<n?t.Set(e,s,i):t.Set(s,e,i)},CollMemory_Remove2=function(t,e,s){const i=e.NF(),r=s.NF();i<r?t.uu(e,s):t.uu(s,e)},CollMemory_RemoveInstance2=function(t,e){t.fu(e)},CollMemory_Get2=function(t,e,s){const i=e.NF(),r=s.NF();return i<r?t.cs(e,s):t.cs(s,e)},DoOverlapCondition2=function(t,e,s,i){if(!e)return!1;const r=0!==s||0!==i,n=t.W5(),h=t.aL(),o=h.j4(),a=h.a0t(),l=a.wx().m3t(),c=a.IF(),u=a.GSt(),f=e.PD(),d=c!==e;rPickType=e,needsCollisionFinish=d&&!u;let p,C=0,m=0,S=rPickFromElseInstances=!1;f.Qut()?(tempRect.A(n.H7()),tempRect.offset(s,i),o.Lgt(n.V5(),e,tempRect,tempCandidates2),p=tempCandidates2):!l||h.Dgt()&&!f.a3t().length&&f.o3t().length?p=f.o3t():(p=f.a3t(),rPickFromElseInstances=!0),r&&(C=n.b_(),m=n.P_(),n.B7(s,i),n.L7());for(const g of p)if(o.GL(t,g)){if(S=!0,u)break;d&&rToPick.add(g)}return r&&(n.D7(C,m),n.L7()),C33.Vh(tempCandidates2),S},FinishCollisionConditionPicking2=function(t){const e=t.aL().Ox().m3t(),s=rPickType.PD(),i=s.o3t(),r=s.a3t();s.Qut()?(s.u3t(rToPick),e&&(C33.Vh(r),s.f3t(rToPick,rPickType.GD()))):e?rPickFromElseInstances?s.d3t(rToPick):(s.f3t(rToPick,i),s.u3t(rToPick)):s.u3t(rToPick),rPickType.V1t()},FinishCollisionCondition2=function(t,e){needsCollisionFinish&&(e&&FinishCollisionConditionPicking2(t),rToPick.clear(),rPickType=null,needsCollisionFinish=!1)},OnCollision2=function(g){if(this.f3.Ngt())return DebugOnCollision.call(this,g);if(g){let t=this.f3,e=t.j4(),i=t.Ix(),s=i.Fx(),r=i.a0t(),n=r.IF(),h=r.DSt(),o=r.NSt(),a=s.E$(),l=t.ptt(),c=l-1,u=a.Ox(),f=s.I$(u),d=h.get("collmemory"),p=(d||(d=C33.mn(C33.ou),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.q3().addEventListener("instancedestroy",t=>CollMemory_RemoveInstance2(d,t.CB))),n.PD()),C=g.PD(),m=p.GD(),S=null;for(let t=0;t<m.length;++t){const _=m[t];C.Qut()?(e.Lgt(_.W5().V5(),g,_.W5().H7(),tempCandidates1),S=tempCandidates1,e.Fgt(_,g,S)):S=C.GD();for(let t=0;t<S.length;++t){const T=S[t];if(e.GL(_,T)||e.Bgt(_,T)){let t=CollMemory_Get2(d,_,T),e=!1,s=-2;"number"==typeof t&&(e=!0,s=t);const y=!e||s<c;if(CollMemory_Add2(d,_,T,l),y){const E=u.y$(),I=(i.v$(E),n.PD()),A=g.PD();if(I.h3t(!1),A.h3t(!1),n===g){const M=I.o3t();C33.Vh(M),M.push(_),M.push(T),n.V1t()}else{const R=I.o3t(),w=A.o3t();C33.Vh(R),C33.Vh(w),R.push(_),w.push(T),n.V1t(),g.V1t()}u.x$(a,f),i.L$(E)}}else CollMemory_Remove2(d,_,T)}C33.Vh(tempCandidates1)}s.B$()}return!1},IsOverlapping2=function(t){return DoOverlapCondition2(GetInst2(this),t,0,0)},IsOverlappingOffset2=function(t,e,s){return DoOverlapCondition2(GetInst2(this),t,e,s)},HasParent2=function(){return GetWorldInfo2(this).E6()},HasChildren2=function(){return GetWorldInfo2(this).iY()},PickParent2=function(s,i){const t=this.PD(),r=t.GD();if(0===r.length)return!1;let e=s.PD(),n=e.GD();if(e.Qut()){const a=[...this.f3.kgt(s)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const h=new Set(n),o=new Set;for(let t=0,e=r.length;t<e;++t){const l=r[t];if(1===i)for(const c of l.f6())c.$gt(s)&&h.has(c)&&o.add(c);else{let t;if(0===i){if(null===(t=l.l6()))continue}else t=l.u6();t.$gt(s)&&h.has(t)&&o.add(t)}}return 0!==o.size&&(e.u3t(o),s.V1t(),!0)},PickChildren2=function(s,i){const t=this.PD(),r=t.GD();if(0===r.length)return!1;let e=s.PD(),n=e.GD();if(e.Qut()){const a=[...this.f3.kgt(s)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const h=new Set(n),o=new Set;for(let t=0,e=r.length;t<e;++t){const l=r[t];2===i&&!l.iY()&&l.$gt(s)&&h.has(l)&&o.add(l);for(const c of 0===i?l.children():l.S6())2===i&&c.iY()||c.$gt(s)&&h.has(c)&&o.add(c)}return 0!==o.size&&(e.u3t(o),s.V1t(),!0)},PickNthChild2=function(s,i,r){const t=this.PD(),n=t.GD();if(0===n.length)return!1;let e=s.PD(),h=e.GD();if(e.Qut()){const l=[...this.f3.kgt(s)];0<l.length&&(h=h.concat(l))}if(0===h.length)return!1;const o=new Set(h),a=[];for(let t=0,e=n.length;t<e;++t){const c=n[t];if(0===i){const u=c.m6(r);null!==u&&u.$gt(s)&&o.has(u)&&a.push(u)}else if(1===i)for(const f of c.children())if(f.$gt(s)){if(0===r){o.has(f)&&a.push(f);break}--r}}return 0!==a.length&&(e.c3t(a),s.V1t(),!0)},CompareChildCount2=function(t,e,s){const i=GetInst2(this);switch(t){case 0:default:return C33.compare(i.p6(),e,s);case 1:return C33.compare(i.Wgt(),e,s)}},AddChild2=function(t,e,s,i,r,n,h,o,a,l){const c=GetInst2(this),u=c.aL().c0t().IF();for(const f of t.Vgt(c,u)){if(!f._D().hD())return;c._6(f,{A6:e,R6:s,b6:i,G6:r,v6:n,N6:h,L6:o,B6:a,W6:l})}},RemoveChild2=function(t){const e=GetInst2(this),s=e.aL().c0t().IF();for(const i of t.Vgt(e,s))e.T6(i)},RemoveFromParent2=function(){const t=GetInst2(this);if(t.E6()){const e=t.l6();e.T6(t)}},ChildCount2=function(){return GetInst2(this).p6()},AllChildCount2=function(){return GetInst2(this).Wgt()},SetMeshSize2=function(t,e){t=Math.floor(t),e=Math.floor(e);const s=GetWorldInfo2(this);t<2||e<2||!isFinite(t)||!isFinite(e)?(s.j6(),s.L7()):s.U6(t,e)},SetMeshPoint2=function(t,e,s,i,r,n,h,o){const a=GetWorldInfo2(this),l=a.q6(t,e,{mode:0===s?"absolute":"relative",x:i,y:r,KN:n,u:h,v:o});l&&a.L7()},MeshColumns2=function(){const t=GetWorldInfo2(this);return t.J6()?t.K6().rT():0},MeshRows2=function(){const t=GetWorldInfo2(this);return t.J6()?t.K6().nT():0},SetElementVisible2=function(t){const e=GetWorldInfo2(this);t=2===t?!e.xN():0!==t,e.xN()!==t&&e.PN(t)},SetElementCSSStyle2=function(t,e){this instanceof self.yF?this.Y8(t,e):this.aB(t,e)},SetElementAttribute2=function(t,e){this instanceof self.yF?this.q8(t,""+e):this.Hgt(t,""+e)},RemoveElementAttribute2=function(t){this instanceof self.yF?this.z8(t):this.Ugt(t)},SetElementFocus2=function(){this instanceof self.yF?this.U8():this.nB()},SetElementBlur2=function(){this instanceof self.yF?this.X8():this.hB()},IsElementFocused2=function(){return this instanceof self.yF?this.j8():this.Xgt()},SetElementEnabled2=function(t){this instanceof self.yF?this._setEnabled(0!==t):this.jgt(0!==t)},IsElementEnabled2=function(){return this instanceof self.yF?this.hmt():this.Ygt()},CompareInstanceVar2=function(t,e,s){return C33.compare(GetInst2(this).Ont(t),e,s)},IsBoolInstanceVarSet2=function(t){return!!GetInst2(this).Ont(t)},PickInstVarHiLow2=function(s,i){const t=this.PD(),r=t.GD();if(!r.length)return!1;let n=this.bU(),h=null,o=0;for(let t=0,e=r.length;t<e;++t){const a=r[t],l=n?a.IF().c2t(this.u2t()):0,c=a.Ont(l+i);(null===h||0===s&&c<o||1===s&&c>o)&&(o=c,h=a)}return t.C3t(h),!0},PickByUID2=function(t){return(this.f3.a0t().GSt()?PickByUID_Inverted2:PickByUID_Normal2)(this,t)},PickByUID_Normal2=function(t,e){const s=t.aL().D5(e);if(s){const i=t.PD();if(i.Qut()||i.o3t().includes(s))if(t.bU()){if(s.IF().qgt(t))return i.C3t(s),t.V1t(),!0}else if(s.IF()===t)return i.C3t(s),t.V1t(),!0}return!1},PickByUID_Inverted2=function(t,r){const n=t.PD();if(n.Qut()){n.h3t(!1),n.Zut();const s=t.GD();for(let t=0,e=s.length;t<e;++t){const i=s[t];i.NF()===r?n.n3t(i):n.r3t(i)}return t.V1t(),!!n.o3t().length}{let s=n.o3t(),i=0;for(let t=0,e=s.length;t<e;++t){const h=s[t];(s[i]=h).NF()===r?n.n3t(h):++i}return C33.Wh(s,i),t.V1t(),!!s.length}},HasTags2=function(t){const e=new Set(C33.ho(t)),s=GetInst2(this).HF();return e.di(s)},Tags2=function(){return GetInst2(this).zgt()},TagsCount2=function(){return GetInst2(this).HF().size},TagAt2=function(t){return GetInst2(this).Jgt(t)},ChangeTags2=function(t,e){const s=C33.ho(e);if(0!==s.length){const i=GetInst2(this),r=new Set(i.HF());if(0===t)for(const n of s)r.add(n);else if(1===t)for(const h of s)r.delete(h);i.XF(r)}},Destroy2=function(){const t=GetInst2(this);t.aL().OF(t)},OnCreated2=function(){return!0},OnDestroyed2=function(){return!0},SetInstanceVar2=function(t,e){GetInst2(this).Gnt(t,e)},AddInstanceVar2=function(t,e){const s=GetInst2(this),i=s.Ont(t);"number"==typeof i&&"number"!=typeof e?e=parseFloat(e):"string"==typeof i&&"string"!=typeof e&&(e=e.toString()),s.Gnt(t,i+e)},SubInstanceVar2=function(t,e){const s=GetInst2(this),i=s.Ont(t);"number"==typeof i&&("number"!=typeof e&&(e=parseFloat(e)),s.Gnt(t,i-e))},SetBoolInstanceVar2=function(t,e){GetInst2(this).Gnt(t,e?1:0)},ToggleBoolInstanceVar2=function(t){const e=GetInst2(this);e.Gnt(t,0===e.Ont(t)?1:0)},LoadFromJsonString2=function(t){let e;try{e=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const s=GetInst2(this);s.aL().Kgt(),s.TJ("state"),s.H_(e,"state"),s.aL().Zgt("state",{Qgt:!0})},AsJSON2=function(){return JSON.stringify(GetInst2(this).V_("state"))},ObjectTypeName2=function(){return GetInst2(this).IF().i3()},Count2=function(){let t=GetInst2(this).aL(),e=t.o0t().j3t(),s=e.xD();for(const i of t.kgt(e))++s;return s},PickedCount2=function(){const t=GetInst2(this).aL();return t.o0t().j3t().PD().GD().length},GetIID2=function(){return GetInst2(this).qq()},GetUID2=function(){return GetInst2(this).NF()},OnInstanceSignal2=function(t){const e=GetInst2(this);return t.toLowerCase()===e.aL().Ix().Ddt(e)},InstanceSignal2=function(t){const e=GetInst2(this);e.aL().Ix().YF(e,t)},InstanceWaitForSignal2=function(t){return this.aL().Ix().ldt().t_t(this.PD().GD(),t),!0},TemplateName2=function(){return GetInst2(this).BF()},C33=(GetInst=GetInst2,GetWorldInfo=GetWorldInfo2,CompareX=CompareX2,CompareY=CompareY2,IsOnScreen=IsOnScreen2,IsOutsideLayout=IsOutsideLayout2,PickDistance=PickDistance2,SetX=SetX2,SetY=SetY2,SetPos=SetPos2,SetPosToObject=SetPosToObject2,MoveForward=MoveForward2,MoveAtAngle=MoveAtAngle2,GetX=GetX2,GetY=GetY2,GetDt=GetDt2,CompareWidth=CompareWidth2,CompareHeight=CompareHeight2,SetWidth=SetWidth2,SetHeight=SetHeight2,SetSize=SetSize2,GetWidth=GetWidth2,GetHeight=GetHeight2,GetBboxLeft=GetBboxLeft2,GetBboxTop=GetBboxTop2,GetBboxRight=GetBboxRight2,GetBboxBottom=GetBboxBottom2,GetBboxMidX=GetBboxMidX2,GetBboxMidY=GetBboxMidY2,IsAngleWithin=IsAngleWithin2,IsAngleClockwiseFrom=IsAngleClockwiseFrom2,IsBetweenAngles=IsBetweenAngles2,SetAngle=SetAngle2,RotateClockwise=RotateClockwise2,RotateCounterclockwise=RotateCounterclockwise2,RotateTowardAngle=RotateTowardAngle2,RotateTowardPosition=RotateTowardPosition2,SetTowardPosition=SetTowardPosition2,GetAngle=GetAngle2,CompareOpacity=CompareOpacity2,IsVisible=IsVisible2,SetVisible=SetVisible2,SetOpacity=SetOpacity2,SetDefaultColor=SetDefaultColor2,GetColor=GetColor2,GetOpacity=GetOpacity2,IsOnLayer=IsOnLayer2,PickTopBottom=PickTopBottom2,CompareZElevation=CompareZElevation2,MoveToTop=MoveToTop2,MoveToBottom=MoveToBottom2,MoveToLayer=MoveToLayer2,ZMoveToObject=ZMoveToObject2,SetZElevation=SetZElevation2,LayerNumber=LayerNumber2,LayerName=LayerName2,ZIndex=ZIndex2,ZElevation=ZElevation2,TotalZElevation=TotalZElevation2,IsEffectEnabled=IsEffectEnabled2,SetEffectEnabled=SetEffectEnabled2,SetEffectParam=SetEffectParam2,CollMemory_Add=CollMemory_Add2,CollMemory_Remove=CollMemory_Remove2,CollMemory_RemoveInstance=CollMemory_RemoveInstance2,CollMemory_Get=CollMemory_Get2,DoOverlapCondition=DoOverlapCondition2,FinishCollisionConditionPicking=FinishCollisionConditionPicking2,FinishCollisionCondition=FinishCollisionCondition2,OnCollision=OnCollision2,IsOverlapping=IsOverlapping2,IsOverlappingOffset=IsOverlappingOffset2,HasParent=HasParent2,HasChildren=HasChildren2,PickParent=PickParent2,PickChildren=PickChildren2,PickNthChild=PickNthChild2,CompareChildCount=CompareChildCount2,AddChild=AddChild2,RemoveChild=RemoveChild2,RemoveFromParent=RemoveFromParent2,ChildCount=ChildCount2,AllChildCount=AllChildCount2,SetMeshSize=SetMeshSize2,SetMeshPoint=SetMeshPoint2,MeshColumns=MeshColumns2,MeshRows=MeshRows2,SetElementVisible=SetElementVisible2,SetElementCSSStyle=SetElementCSSStyle2,SetElementAttribute=SetElementAttribute2,RemoveElementAttribute=RemoveElementAttribute2,SetElementFocus=SetElementFocus2,SetElementBlur=SetElementBlur2,IsElementFocused=IsElementFocused2,SetElementEnabled=SetElementEnabled2,IsElementEnabled=IsElementEnabled2,CompareInstanceVar=CompareInstanceVar2,IsBoolInstanceVarSet=IsBoolInstanceVarSet2,PickInstVarHiLow=PickInstVarHiLow2,PickByUID=PickByUID2,PickByUID_Normal=PickByUID_Normal2,PickByUID_Inverted=PickByUID_Inverted2,HasTags=HasTags2,Tags=Tags2,TagsCount=TagsCount2,TagAt=TagAt2,ChangeTags=ChangeTags2,Destroy=Destroy2,OnCreated=OnCreated2,OnDestroyed=OnDestroyed2,SetInstanceVar=SetInstanceVar2,AddInstanceVar=AddInstanceVar2,SubInstanceVar=SubInstanceVar2,SetBoolInstanceVar=SetBoolInstanceVar2,ToggleBoolInstanceVar=ToggleBoolInstanceVar2,LoadFromJsonString=LoadFromJsonString2,AsJSON=AsJSON2,ObjectTypeName=ObjectTypeName2,Count=Count2,PickedCount=PickedCount2,GetIID=GetIID2,GetUID=GetUID2,OnInstanceSignal=OnInstanceSignal2,InstanceSignal=InstanceSignal2,InstanceWaitForSignal=InstanceWaitForSignal2,TemplateName=TemplateName2,self.Ve),tempColor=new C33.qo,runtime=null,tempRect=(C33.e_t=function(t){runtime=t},C33.mn(C33.Rect)),tempCandidates1=[],tempCandidates2=[],needsCollisionFinish=!1,rPickType=null,rPickFromElseInstances=!1,rToPick=new Set;function*DebugOnCollision(g){if(g){let t=this.f3,e=t.j4(),i=t.Ix(),s=i.Fx(),r=i.a0t(),n=r.IF(),h=r.DSt(),o=r.NSt(),a=s.E$(),l=t.ptt(),c=l-1,u=a.Ox(),f=s.I$(u),d=h.get("collmemory"),p=(d||(d=C33.mn(C33.ou),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.q3().addEventListener("instancedestroy",t=>CollMemory_RemoveInstance2(d,t.CB))),n.PD()),C=g.PD(),m=p.GD(),S=null;for(let t=0;t<m.length;++t){const _=m[t];C.Qut()?(e.Lgt(_.W5().V5(),g,_.W5().H7(),tempCandidates1),S=tempCandidates1,e.Fgt(_,g,S)):S=C.GD();for(let t=0;t<S.length;++t){const T=S[t];if(e.GL(_,T)||e.Bgt(_,T)){let t=CollMemory_Get2(d,_,T),e=!1,s=-2;"number"==typeof t&&(e=!0,s=t);const y=!e||s<c;if(CollMemory_Add2(d,_,T,l),y){const E=u.y$(),I=(i.v$(E),n.PD()),A=g.PD();if(I.h3t(!1),A.h3t(!1),n===g){const M=I.o3t();C33.Vh(M),M.push(_),M.push(T),n.V1t()}else{const R=I.o3t(),w=A.o3t();C33.Vh(R),C33.Vh(w),R.push(_),w.push(T),n.V1t(),g.V1t()}yield*u.x1t(a,f),i.L$(E)}}else CollMemory_Remove2(d,_,T)}C33.Vh(tempCandidates1)}s.B$()}return!1}C33.s_t=function(t,e){const s=t[1],i=t[3],r=t[4],n=t[5],h=t[6],o=t[7],a=t[8],l=t[10],c=t[11],u=t[12],f=t[13],d=t[14],p=t[15],C=t[16],m=e.Hq,S=e.Nrt,g=e.Frt;i&&(m.i_t=CompareX2,m.r_t=CompareY2,m.n_t=IsOnScreen2,m.h_t=IsOutsideLayout2,m.o_t=PickDistance2,S.O_=SetX2,S.v_=SetY2,S.a_t=SetPos2,S.l_t=SetPosToObject2,S.c_t=MoveForward2,S.u_t=MoveAtAngle2,g.f_t=GetX2,g.d_t=GetY2,g.Xx=GetDt2),r&&(m.p_t=CompareWidth2,m.C_t=CompareHeight2,S.TC=SetWidth2,S.pC=SetHeight2,S.aw=SetSize2,g.m_t=GetWidth2,g.S_t=GetHeight2,g.g_t=GetBboxLeft2,g.__t=GetBboxTop2,g.T_t=GetBboxRight2,g.y_t=GetBboxBottom2,g.E_t=GetBboxMidX2,g.I_t=GetBboxMidY2),n&&(m.A_t=IsAngleWithin2,m.M_t=IsAngleClockwiseFrom2,m.R_t=IsBetweenAngles2,S.zD=SetAngle2,S.w_t=RotateClockwise2,S.b_t=RotateCounterclockwise2,S.O_t=RotateTowardAngle2,S.G_t=RotateTowardPosition2,S.P_t=SetTowardPosition2,g.v_t=GetAngle2),h&&(m.xN=IsVisible2,m.x_t=CompareOpacity2,S.PN=SetVisible2,S.VO=SetOpacity2,S.L_t=SetDefaultColor2,g.Opacity=GetOpacity2,g.D_t=GetColor2),o&&(m.N_t=IsOnLayer2,m.F_t=PickTopBottom2,m.B_t=CompareZElevation2,S.k_t=MoveToTop2,S.$_t=MoveToBottom2,S.W_t=MoveToLayer2,S.V_t=ZMoveToObject2,S.L_=SetZElevation2,g.H_t=LayerNumber2,g.U_t=LayerName2,g.X_t=ZIndex2,g.j_t=ZElevation2,g.Y_t=TotalZElevation2),a&&(m.q_t=IsEffectEnabled2,S.z_t=SetEffectEnabled2,S.J_t=SetEffectParam2),f&&(m.E6=HasParent2,m.iY=HasChildren2,m.K_t=PickParent2,m.Z_t=PickChildren2,m.Q_t=PickNthChild2,m.tTt=CompareChildCount2,S._6=AddChild2,S.T6=RemoveChild2,S.eTt=RemoveFromParent2,g.sTt=ChildCount2,g.iTt=AllChildCount2),d&&(S.rTt=SetMeshSize2,S.q6=SetMeshPoint2,g.nTt=MeshColumns2,g.hTt=MeshRows2),l&&(m.xN=IsVisible2,S.PN=SetElementVisible2,S.oTt=SetElementCSSStyle2,S.aTt=SetElementAttribute2,S.lTt=RemoveElementAttribute2),c&&(m.cTt=IsElementFocused2,S.uTt=SetElementFocus2,S.fTt=SetElementBlur2),u&&(m.hu=IsElementEnabled2,S.dTt=SetElementEnabled2),p&&(m.pTt=OnCollision2,m.CTt=IsOverlapping2,m.mTt=IsOverlappingOffset2,e.STt=FinishCollisionCondition2),s||(m.gTt=CompareInstanceVar2,m._Tt=IsBoolInstanceVarSet2,m.TTt=PickInstVarHiLow2,m.yTt=PickByUID2,m.pk=HasTags2,S.ETt=SetInstanceVar2,S.ITt=AddInstanceVar2,S.ATt=SubInstanceVar2,S.MTt=SetBoolInstanceVar2,S.RTt=ToggleBoolInstanceVar2,S.wTt=ChangeTags2,m.bTt=OnCreated2,m.OTt=OnDestroyed2,S.GTt=Destroy2,S.PTt||(S.PTt=LoadFromJsonString2),g.vTt||(g.vTt=AsJSON2),g.xTt=Count2,g.LTt=PickedCount2,g.DTt=GetIID2,g.NTt=GetUID2,g.FTt=ObjectTypeName2,g.BTt=Tags2,g.kTt=TagsCount2,g.$Tt=TagAt2,m.Pdt=OnInstanceSignal2,S.YF=InstanceSignal2,S.WTt=InstanceWaitForSignal2),C&&(g.VTt=TemplateName2)}}{const C33=self.Ve;C33.cdt=class ScheduledWait extends C33.pn{constructor(t){super(),this.g3t=t,this.y3="",this.Cv=-1,this.HTt="",this.UTt=!1,this.XTt=null,this.w3t=0,this.tCt=[],this.x3t=null,this.jTt=new Map,this.YTt=null,this.qTt=null,this.zTt=-1,this.nmt=null,this.JTt=null,this.KTt=!1}Sn(){this.y3="",this.Cv=-1,this.HTt="",this.XTt=null,this.qTt=null,this.nmt=null,this.JTt=null,this.zTt=-1,C33.Vh(this.tCt),this.x3t&&(this.x3t.clear(),this.x3t=null);for(const t of this.jTt.values())t.Sn();this.jTt.clear(),this.YTt=null}w_(){const t=this.g3t,e=t.aL().wU(),s=t.o0t(),i=(this.XTt=s.Ox(),this.w3t=s.k3t()+1,t.Qdt(this.XTt));i&&(this.qTt=i,this.nmt=i.Emt(),this.JTt=i.ymt().map(t=>t.ait()),i.R1t())&&(this.zTt=i.Rmt());for(const n of e){const h=n.PD();h.Qut()&&!this.XTt.JCt(n)||(this.tCt.push(n),this.jTt.set(n,C33.mn(C33.ZTt,h)))}const r=t.Gx();this.x3t=0<r.size?r:null}QTt(t){this.y3="timer",this.w_(),this.Cv=this.g3t.aL().zx()+t}tyt(t){this.y3="signal",this.w_(),this.HTt=t.toLowerCase()}t_t(t,e){this.y3="instance-signals",this.w_(),this.HTt=e.toLowerCase(),this.YTt=new Set(t)}eyt(t){this.y3="promise",this.w_(),t.then(()=>this.wdt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.wdt()})}syt(){return"timer"===this.y3}Mdt(){return"signal"===this.y3}xdt(){return"instance-signals"===this.y3}zdt(){return"promise"===this.y3}Rdt(){return this.HTt}iyt(){return this.UTt}wdt(){this.UTt=!0}Ldt(t){this.YTt.delete(t),0===this.YTt.size&&this.wdt()}ddt(){return this.syt()?this.Cv<=this.g3t.aL().zx():this.iyt()}ryt(t){t.L3t(this.XTt,this.w3t);for(const[s,i]of this.jTt.entries()){const r=s.PD();i.L3t(r)}this.x3t&&t.Z3t([...this.x3t]);const e=this.qTt;e&&(e.F1t(this.nmt),e.ymt().map((t,e)=>t.Uit(this.JTt[e])),e.R1t())&&e.wmt(this.zTt)}pdt(t){this.ryt(t),this.XTt.w1t(t),this.qTt&&this.qTt.R1t()&&this.qTt.Y1t(this.zTt),this.g3t.ndt(this.tCt),this.KTt=!0}async gdt(t){this.ryt(t);for(const e of this.XTt.b1t(t))await this.g3t.aL().V0t(e);this.qTt&&this.qTt.R1t()&&this.qTt.Y1t(this.zTt),this.g3t.ndt(this.tCt),this.KTt=!0}Cdt(){return this.KTt}qut(t){for(const e of this.jTt.values())e.qut(t);if("instance-signals"===this.y3){for(const s of t)this.YTt.delete(s);0===this.YTt.size&&this.wdt()}}Qj(){const t={},e={wt:this.y3,t:this.Cv,st:this.HTt,s:this.UTt,ev:this.XTt.NU(),sm:this.tCt.map(t=>t.NU()),dsm:this.x3t?[...this.x3t].map(t=>t.NU()):null,sols:t};this.XTt.p1t(this.w3t)&&(e.act=this.XTt.u0t(this.w3t).NU());for(const[s,i]of this.jTt)t[s.NU().toString()]=i.Qj();return"instance-signals"===this.y3&&(e.pi=[...this.YTt].map(t=>t.NF())),e}static Jdt(t,e){const s=t.aL(),i=t.T0t(e.ev);if(!i)return null;let r=0;if(e.hasOwnProperty("act")){const h=t.E0t(e.act);if(!h)return null;r=h.F4()}const n=C33.mn(C33.cdt,t);n.Cv=e.t,e.hasOwnProperty("wt")?n.y3=e.wt:n.y3=-1===n.Cv?"signal":"timer",n.HTt=e.st,n.UTt=e.s,n.XTt=i,n.w3t=r;for(const o of e.sm){const a=s.Fq(o);a&&n.tCt.push(a)}if(Array.isArray(e.dsm))for(const l of e.dsm){const c=s.Fq(l);c&&(n.x3t||(n.x3t=new Set),n.x3t.add(c))}for(const[u,f]of Object.entries(e.sols)){const d=parseInt(u,10),p=s.Fq(d);if(p){const C=C33.mn(C33.ZTt,null);C.tY(t,f),n.jTt.set(p,C)}}if("instance-signals"===n.y3){n.YTt=new Set;for(const m of e.pi){const S=s.D5(m);S&&n.YTt.add(S)}}return n}}}{const C33=self.Ve;C33.ZTt=class SolState extends C33.pn{constructor(t){super(),this.Wut=null,this.nyt=!0,this.RV=[],t&&(this.Wut=t.IF(),this.nyt=t.Qut(),C33.jh(this.RV,t.o3t()))}Sn(){this.Wut=null,C33.Vh(this.RV)}L3t(t){t.h3t(this.nyt),C33.jh(t.o3t(),this.RV)}qut(t){C33.Kh(this.RV,t)}Qj(){return{sa:this.nyt,insts:this.RV.map(t=>t.NF())}}tY(t,e){const s=t.aL();this.nyt=!!e.sa,C33.Vh(this.RV);for(const i of e.insts){const r=s.D5(i);r&&this.RV.push(r)}}}}{let GetNextParamMap2=function(t,e){let s=t.get(e);return s||(s=new Map,t.set(e,s)),s};GetNextParamMap=GetNextParamMap2;const C33=self.Ve;C33.hyt=class SDKPluginBase extends C33.pn{constructor(t){super(),this.f3=t.runtime,this.oyt=!!t.YL,this.ayt=!!t.lyt,this.cyt=!!t.QL,this.uyt=!!t.fyt,this.dyt=!!t.eD,this.pyt=!!t.Cyt,this.myt=!!t.oD,this.Syt=!!t.KL,this.gyt=!!t.iD,this._yt=t.Tyt,this.yyt=null,this.Eyt=new Map,this.Iyt=new Map,this.Ayt=new Map,this.Myt=new Map,this.Ryt=t.wyt,this.byt=null}Sn(){this.f3=null}aL(){return this.f3}Oyt(){}vdt(){return(2<=this.OSt()?this.byt:this).constructor}OSt(){return this._yt}Gyt(t=!1){let e=this.Ryt;return e=t&&"function"!=typeof e&&2<=this.OSt()?globalThis.$k:e}qL(){return this.oyt}JL(){return this.ayt}ZL(){return this.Syt}rD(){return this.gyt}tD(){return this.cyt}s_(){return this.uyt}sD(){return this.dyt}hD(){return this.pyt}aD(){return this.myt}Zmt(t,e){if(!e)throw new Error("missing 'this' binding");let s=this.Eyt.get(t);return s||(s=t.bind(e),this.Eyt.set(t,s)),s}MSt(t,e,s){if(!e)throw new Error("missing 'this' binding");let i=GetNextParamMap2(this.Iyt,t),r=i.get(s);return r||(r=t.bind(e,s),i.set(s,r)),r}RSt(t,e,s,i){if(!e)throw new Error("missing 'this' binding");let r=GetNextParamMap2(this.Ayt,t),n=GetNextParamMap2(r,s),h=n.get(i);return h||(h=t.bind(e,s,i),n.set(i,h)),h}wSt(t,e,s,i,r){if(!e)throw new Error("missing 'this' binding");let n=GetNextParamMap2(this.Myt,t),h=GetNextParamMap2(n,s),o=GetNextParamMap2(h,i),a=o.get(r);return a||(a=t.bind(e,s,i,r),o.set(r,a)),a}Pyt(t){if(!this.qL())throw new Error("must be single-global plugin");this.yyt=t}pD(){if(this.qL())return this.yyt;throw new Error("must be single-global plugin")}mD(){if(this.qL())return this.yyt.mD();throw new Error("must be single-global plugin")}vyt(){const t=this.OSt(),e=(C33.XL.xyt(this,t),this.Gyt(!0));if(e){if(this.byt=new e,!(this.byt instanceof self.HL))throw new TypeError("plugin class must derive from IPlugin")}else this.byt=new self.HL;C33.XL.Lyt(t)}uD(){return this.byt}}}{const C33=self.Ve;C33.Dyt=class SDKDOMPluginBase extends C33.hyt{constructor(t,e){super(t),this.Nyt=e,this.Fyt=0,this.Byt=new Map,this.kyt("elem-focused",t=>t.$yt()),this.kyt("elem-blurred",t=>{t&&t.Wyt()})}Sn(){super.Sn()}Vyt(t){const e=this.Fyt++;return this.Byt.set(e,t),e}Hyt(t){this.Byt.delete(t)}kyt(t,s){this.f3.l7(this.Nyt,t,t=>{const e=this.Byt.get(t.elementId);s(e,t)})}}}{const C33=self.Ve;C33.Uyt=class SDKTypeBase extends C33.pn{constructor(t){super(),this.Wut=t,this.f3=t.aL(),this.Xyt=t._D()}Sn(){this.Wut=null,this.f3=null,this.Xyt=null}IF(){return this.Wut}aL(){return this.f3}_D(){return this.Xyt}VB(){return this.Wut.VB()}Oyt(){}WSt(t){}Rgt(t){}wgt(t){}uq(t){}gq(){}Cq(){}kq(t){}jyt(){}Gyt(){return null}Yyt(t,e,s){const i=C33.mn(C33.Event,t,e);i.qyt=this,s&&Object.assign(i,s),this.IF().Iz(i)}}}{const C33=self.Ve;C33.zyt=class SDKInstanceBase extends C33.pn{constructor(t,e){super(),this.xs=t,this.Nyt=e,this.Jyt=null,this.f3=t.aL(),this.Wut=this.xs.IF(),this.Kyt=this.Wut.Mgt(),this.lJ=null,this.uJ=null,this.m7=!1,this._7=!1,this.Of=null,this.OR=!1}Sn(){this.OR=!0,this.Zyt(),this.Qyt(),this.lJ=null,this.uJ=null,this.Of&&(this.Of.Sn(),this.Of=null),this.xs=null,this.f3=null,this.Wut=null,this.Kyt=null}gn(){return this.OR}xk(){return this.xs}aL(){return this.f3}IF(){return this.Wut}_D(){return this.Kyt._D()}Mgt(){return this.Kyt}tEt(){return this.xs.N5()}n7(t){return this.f3.n7(t,this.xs,null)}eEt(t){return this.f3.eEt(t,this.xs,null)}o7(t){return this.f3.o7(t,this.xs,null)}sEt(t,e){return this.f3.sEt(t,this.xs,e)}iEt(t,e){return this.f3.iEt(t,this.xs,e)}rEt(t){return this.f3.rEt(t)}nEt(t,e){this.f3.l7(this.Nyt,t,e)}hEt(t){for(const[e,s]of t)this.nEt(e,s)}oEt(t,e){this.f3.m3(this.Nyt,t,e)}aEt(t,e){return this.f3.J5(this.Nyt,t,e)}lEt(t,e){if(!this.f3.tx())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Nyt,handler:t,data:e,responseId:null});this.oEt(t,e)}cEt(t){if(!t)throw new Error("cannot set empty component id");this.Jyt=t}uEt(){if(this.Jyt)return this.f3.A7(this.Jyt);throw new Error("wrapper extension component id not set")}R7(t,e){if(!this.Jyt)throw new Error("wrapper extension component id not set");this.f3.R7(this.Jyt,t,e)}fEt(t){for(const[e,s]of t)this.R7(e,s)}f$(t,e){if(!this.Jyt)throw new Error("wrapper extension component id not set");this.f3.f$(this.Jyt,t,e)}d$(t,e){if(this.Jyt)return this.f3.d$(this.Jyt,t,e);throw new Error("wrapper extension component id not set")}gK(){}dEt(){}pEt(){this.m7||(this.lJ||(this.lJ=()=>this.gK()),this.f3.q3().addEventListener("tick",this.lJ),this.m7=!0)}Zyt(){this.m7&&(this.f3.q3().removeEventListener("tick",this.lJ),this.m7=!1)}CEt(){return this.m7}mEt(){this._7||(this.uJ||(this.uJ=()=>this.dEt()),this.f3.q3().addEventListener("tick2",this.uJ),this._7=!0)}Qyt(){this._7&&(this.f3.q3().removeEventListener("tick2",this.uJ),this._7=!1)}SEt(){return this._7}gEt(){return[]}V_(){return null}H_(t){}Tnt(t){}Rnt(t,e){}Tht(t,e,s){if(0!==e){const i=this.Tnt(t);if("number"!=typeof i)throw new Error("expected number");this.Rnt(t,i+e,s)}}_Et(t,e,s,i){}TEt(t,...e){t.call(this,...e)}yEt(t,...e){return t.call(this,...e)}Gyt(){return null}Yyt(t,e,s){if(this.xs.EEt()){const i=this.tEt(),r=C33.mn(C33.Event,t,e);r.CB=i,s&&Object.assign(r,s),i.dispatchEvent(r)}}s_(){return!1}}}{const C33=self.Ve;C33.IEt=class SDKWorldInstanceBase extends C33.zyt{constructor(t,e){super(t,e),this.pet=t.W5(),this.AEt=null,this.MEt=null}Sn(){if(this.AEt){const t=this.f3.q3();t.removeEventListener("renderercontextlost",this.AEt),t.removeEventListener("renderercontextrestored",this.MEt),this.AEt=null,this.MEt=null}this.pet=null,super.Sn()}REt(){this.wEt()}bEt(){}OEt(){}wEt(){if(!this.AEt){this.AEt=()=>this.gV(),this.MEt=()=>this.GEt();const t=this.f3.q3();t.addEventListener("renderercontextlost",this.AEt),t.addEventListener("renderercontextrestored",this.MEt)}}gV(){this.bEt()}GEt(){this.OEt()}W5(){return this.pet}hst(){return!1}nst(){if(!this.hst())throw new Error("original size not known");const t=this.PEt();if(t)return t.dC()}ast(){if(!this.hst())throw new Error("original size not known");const t=this.PEt();if(t)return t.IC()}PEt(){return null}vEt(){const t=this.PEt();if(t){const e=t.Jy();if(e)return[e.dC(),e.IC()]}return[100,100]}xEt(){const t=this.PEt();return t?t.Ww():null}LEt(){const t=this.PEt();return t?t.DEt():null}NEt(){const t=this.PEt();return!!t&&t.FEt()}Ogt(t){const e=this.xs.W5();return[e.b_(),e.P_(),e.W7()]}jyt(t,e,s){}BEt(t,e){}Pj(){return!0}}}{const C33=self.Ve,tempRect=C33.mn(C33.Rect);C33.kEt=class SDKDOMInstanceBase extends C33.IEt{constructor(t,e){super(t,e),this.$Et=this._D().Vyt(this),this.WEt=!0,this.VEt=!1,this.HEt=!1,this.UEt=-.2,this.XEt=C33.mn(C33.Rect,0,0,-1,-1);const s=this.f3.g8();this.jEt=s.T8(),this.YEt=s.E8(),this.qEt=-1,this.zEt=-1,this.JEt=!1,this.pEt()}Sn(){this._D().Hyt(this.$Et),this.KEt("destroy"),this.$Et=-1,super.Sn()}iB(){if(this.f3.tx())throw new Error("not valid in worker mode");return this.ZEt("get-element")}KEt(t,e){(e=e||{}).elementId=this.$Et,this.oEt(t,e)}ZEt(t,e){return(e=e||{}).elementId=this.$Et,this.lEt(t,e)}QEt(t,e){return(e=e||{}).elementId=this.$Et,this.aEt(t,e)}tIt(t){t=t||{};const e=this.W5();t.elementId=this.$Et,t.isVisible=e.xN(),t.htmlIndex=e.V5().v8(),t.htmlZIndex=e.x8(),Object.assign(t,this.eIt()),this.WEt=!!t.isVisible,this.lEt("create",t),this.sIt(!0)}iIt(t){this.WEt!==(t=!!t)&&(this.WEt=t,this.KEt("set-visible",{isVisible:t}))}gK(){this.sIt(!1)}rIt(){const t=this.f3.g8().B8();return"Android"===C33._s.Ts&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}sIt(c){if(!this.xk().k8()){let t=this.W5(),e=t.V5(),s=t.H7(),[i,r]=e.pF(s.bl(),s.Ol()),[n,h]=e.pF(s.Gl(),s.Pl()),o=this.f3.g8(),a=o.W8(),l=o.V8();if(t.xN()&&e.xN())if(!this.rIt()&&(n<=0||h<=0||a<=i||l<=r))this.iIt(!1);else{tempRect.set(i,r,n,h);const u=o.T8(),f=o.E8(),d=e.v8(),p=t.x8();if(!c&&tempRect.equals(this.XEt)&&this.jEt===u&&this.YEt===f&&this.qEt===d&&this.zEt===p)this.iIt(!0);else{this.XEt.A(tempRect),this.jEt=u,this.YEt=f,this.qEt=d,this.zEt=p,this.iIt(!0);let t=null;this.HEt&&(t=e.H8()+this.UEt),this.KEt("update-position",{left:Math.round(this.XEt.bl()),top:Math.round(this.XEt.Ol()),width:Math.round(this.XEt.width()),height:Math.round(this.XEt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.iIt(!1)}}nB(){this.ZEt("focus",{focus:!0})}hB(){this.ZEt("focus",{focus:!1})}$yt(){this.VEt=!0}Wyt(){this.VEt=!1}Xgt(){return this.VEt}aB(t,e){this.KEt("set-css-style",{prop:C33.Xo(t),val:e})}Hgt(t,e){this.KEt("set-attribute",{name:t,val:e})}Ugt(t){this.KEt("remove-attribute",{name:t})}nIt(){this.JEt||(this.JEt=!0,Promise.resolve().then(()=>{this.JEt=!1,this.KEt("update-state",this.eIt())}))}eIt(){}hIt(){return this.$Et}}}{const C33=self.Ve,IBehavior=self.gB;C33.oIt=class SDKBehaviorBase extends C33.pn{constructor(t){super(),this.f3=t.runtime,this.aIt=C33.mn(C33.Cu),this.lIt=C33.mn(C33.Cu),this._yt=t.Tyt,this.Ryt=t.wyt,this.cIt=null}Sn(){this.lIt.Sn(),this.aIt.Sn(),this.f3=null}aL(){return this.f3}Oyt(){}OSt(){return this._yt}Gyt(t=!1){let e=this.Ryt;return e=t&&"function"!=typeof e&&2<=this.OSt()?globalThis.Z8:e}uIt(t){this.aIt._u(t)}XJ(){return this.aIt.Tu()}CU(t){this.lIt._u(t)}gU(t){this.lIt.uu(t)}GD(){return this.lIt.Tu()}vyt(){const t=this.OSt(),e=(C33.XL.xyt(this,t),this.Gyt(!0));if(e){if(this.cIt=new e,!(this.cIt instanceof IBehavior))throw new TypeError("behavior class must derive from IBehavior")}else this.cIt=new IBehavior;C33.XL.Lyt(t)}cB(){return this.cIt}}}{const C33=self.Ve;C33.fIt=class SDKBehaviorTypeBase extends C33.pn{constructor(t){super(),this.f3=t.aL(),this.d2t=t,this.Wut=t.IF(),this.dIt=t.uB(),this.dIt.uIt(this.Wut)}Sn(){this.f3=null,this.d2t=null,this.Wut=null,this.dIt=null}Oyt(){}pB(){return this.d2t}IF(){return this.Wut}aL(){return this.f3}uB(){return this.dIt}}}{const C33=self.Ve;C33.pIt=class SDKBehaviorInstanceBase extends C33.pn{constructor(t,e){super(),this.CIt=t,this.Nyt=e,this.xs=t.mB(),this.f3=t.aL(),this.d2t=t.pB(),this.Kyt=this.d2t.Mgt(),this.m7=!1,this._7=!1,this.c$=!1,this.Of=null}Sn(){this.Zyt(),this.Qyt(),this.mIt(),this.Of&&(this.Of.Sn(),this.Of=null),this.CIt=null,this.xs=null,this.f3=null,this.d2t=null,this.Kyt=null}uB(){return this.d2t.uB()}SIt(){return this.CIt}mB(){return this.xs}IF(){return this.xs.IF()}W5(){return this.xs.W5()}aL(){return this.f3}pB(){return this.d2t}Mgt(){return this.Kyt}tEt(){return this.CIt.tEt()}n7(t){return this.f3.n7(t,this.xs,this.d2t)}eEt(t){return this.f3.eEt(t,this.xs,this.d2t)}o7(t){return this.f3.o7(t,this.xs,this.d2t)}gIt(){}gK(){}dEt(){}_It(){}pEt(){this.m7||(this.f3.r$(this),this.m7=!0)}Zyt(){this.m7&&(this.f3.n$(this),this.m7=!1)}CEt(){return this.m7}mEt(){this._7||(this.f3.h$(this),this._7=!0)}Qyt(){this._7&&(this.f3.o$(this),this._7=!1)}SEt(){return this._7}TIt(){this.c$||(this.f3.a$(this),this.c$=!0)}mIt(){this.c$&&(this.f3.l$(this),this.c$=!1)}yIt(){return this.c$}gEt(){return[]}nEt(t,e){this.f3.l7(this.Nyt,t,e)}EIt(t,e){}V_(){return null}H_(t){}Tnt(t){}Rnt(t,e){}Tht(t,e){if(0!==e){const s=this.Tnt(t);if("number"!=typeof s)throw new Error("expected number");this.Rnt(t,s+e)}}_Et(t,e,s,i){}TEt(t,...e){t.call(this,...e)}yEt(t,...e){return t.call(this,...e)}Gyt(){return null}Yyt(t,e,s){if(this.CIt.EEt()){const i=this.tEt(),r=C33.mn(C33.Event,t,e);r.IIt=i,r.CB=i.CB,s&&Object.assign(r,s),i.dispatchEvent(r)}}}}{let ValidateInternalAPIToken2=function(t){if(t!==internalApiToken)throw new Error("invalid internal API token")},C33=(ValidateInternalAPIToken=ValidateInternalAPIToken2,self.Ve),internalApiToken=(C33.Xq={},C33.Oat={},C33.He()),initObjectStack=[],initObjectStack2=[],initPropertiesStack=[],originalPushInitObject=null,originalPopInitObject=null,originalGetInitObject=null,originalGetInitObject2=null,pluginsByCtor=new Map,behaviorsByCtor=new Map;C33.XL=class AddonManager extends C33.pn{constructor(t,e){super(),this.f3=t,this.AIt=[],this.Ymt=null,this.MIt=[],this.RIt=new Map,this.wIt=null,this.bIt=null,this.OIt=new Set(e)}GIt(t){const e=t[19],s=this.f3.K1t(t[0]);if(!s)throw new Error("missing plugin");C33.s_t(t,s);const i=2<=e?C33.hyt:s,r=C33.mn(i,{runtime:this.f3,YL:t[1],lyt:t[2],QL:t[5],eD:t[8],fyt:t[9],Cyt:t[13],oD:t[14],KL:t[17],iD:t[18],Tyt:e,wyt:2<=e?s:null});r.Oyt(),this.AIt.push(r),pluginsByCtor.set(s,r)}PIt(){this.Ymt=C33.mn(C33.Xq.Uq,{runtime:this.f3,YL:!0}),this.Ymt.Oyt()}vIt(t){const s=t[1],i=this.f3.K1t(t[0]);if(!i)throw new Error("missing behavior");this.RIt.set(i,()=>{const t=2<=s?C33.oIt:i,e=C33.mn(t,{runtime:this.f3,Tyt:s,wyt:2<=s?i:null});e.Oyt(),this.MIt.push(e),behaviorsByCtor.set(i,e),!this.wIt&&C33.Oat.xIt&&e instanceof C33.Oat.xIt?this.wIt=e:!this.bIt&&C33.Oat.jumpthru&&e instanceof C33.Oat.jumpthru&&(this.bIt=e),e.vyt()})}LIt(t){const e=this.RIt.get(t);e&&(e(),this.RIt.delete(t))}static xyt(t,e=1){if(C33.XL.xyt!==originalPushInitObject)throw new Error("invalid method");1===e&&initObjectStack.push(t),initObjectStack2.push(t)}static Lyt(t=1){if(C33.XL.Lyt!==originalPopInitObject)throw new Error("invalid method");1===t&&initObjectStack.pop(),initObjectStack2.pop()}static wF(){if(C33.XL.wF!==originalGetInitObject)throw new Error("invalid method");if(0===initObjectStack.length)throw new Error("no init object set");return initObjectStack.at(-1)}static UL(t){if(C33.XL.UL!==originalGetInitObject2)throw new Error("invalid method");if(ValidateInternalAPIToken2(t),0===initObjectStack2.length)throw new Error("no init object set");return initObjectStack2.at(-1)}static DIt(t){initPropertiesStack.push(t)}static NIt(){initPropertiesStack.pop()}static i7(){if(0===initPropertiesStack.length)throw new Error("no init properties set");return initPropertiesStack.at(-1)}FIt(){for(const t of this.AIt)t.vyt()}static cD(t){return pluginsByCtor.get(t)||null}static _B(t){return behaviorsByCtor.get(t)||null}qmt(){return this.Ymt}BIt(){return this.wIt}kIt(){return this.bIt}A7(t){return this.OIt.has(t)}},originalPushInitObject=C33.XL.xyt,originalPopInitObject=C33.XL.Lyt,originalGetInitObject=C33.XL.wF,originalGetInitObject2=C33.XL.UL}{const C33=self.Ve,allImageInfos=new Set;C33.$It=class ImageInfo extends C33.pn{constructor(){super(),this.WIt=0,this.oV="",this.aV=0,this.VIt=0,this.HIt=0,this.zC=0,this.JC=0,this.UIt=!1,this.XIt=!1,this.jIt=null,this.YIt="",this.IR=C33.mn(C33.Rect),this.qIt=C33.mn(C33.nc),this.zIt="",this.JIt=new self.hL(this),allImageInfos.add(this)}Sn(){this.RR(),this.jIt&&0===this.jIt.yV()&&this.jIt.Sn(),this.jIt=null,allImageInfos.delete(this),this.KIt()}static gV(){for(const t of allImageInfos)t.YIt="",t.IR.set(0,0,0,0),t.qIt.Oc(t.IR)}ZIt(t){this.oV=t[0],this.aV=t[1],this.VIt=t[2],this.HIt=t[3],this.zC=t[4],this.JC=t[5],this.UIt=t[6],this.XIt=!0}QIt(t,e){if(this.jIt)throw new Error("already loaded asset");this.oV=e;const s={};return C33.Io(e)&&(s.BW="remote"),this.oL(t,s),this.jIt.WW()}tAt(t,e){if(this.jIt)throw new Error("already loaded asset");this.oV="",this.aV=e.size,this.jIt=C33.mn(C33.kW,t.H4(),{blob:e,size:this.aV,BW:"local"})}eAt(t){if(t===this)throw new Error("cannot replace with self");this.WIt++,this.RR(),this.oV=t.oV,this.aV=t.aV,this.VIt=t.VIt,this.HIt=t.HIt,this.zC=t.zC,this.JC=t.JC,this.UIt=t.UIt,this.XIt=t.XIt,this.jIt=t.jIt,this.YIt=t.YIt,this.IR=t.IR,this.qIt=t.qIt,this.KIt()}$W(){return this.oV}du(){return this.aV}sAt(){return this.VIt}iAt(){return this.HIt}FEt(){return this.UIt}dC(){return this.zC}IC(){return this.JC}rAt(){return this.jIt.dC()}nAt(){return this.jIt.IC()}oL(t,e){if(this.jIt)throw new Error("already got asset");e=Object.assign({},e,{url:this.$W(),size:this.du()}),this.jIt=t.FW(e)}fV(){return this.jIt&&this.jIt.fV()}async m9(t,e){if(!this.jIt)throw new Error("no asset");if(this.YIt)throw new Error("already loaded texture");const s=this.WIt,i=(this.YIt="loading",await this.jIt.m9(t,e));if(this.WIt!==s)return null;if(!i)return this.YIt="",null;this.YIt="loaded",this.XIt||(this.zC=i.dC(),this.JC=i.IC(),this.XIt=!0);const r=this.UIt?this.JC:this.zC,n=this.UIt?this.zC:this.JC;return this.IR.set(this.VIt,this.HIt,this.VIt+r,this.HIt+n),this.IR.bt(i.dC(),i.IC()),this.qIt.Oc(this.IR),this.UIt&&this.qIt.Dc(),i}RR(){this.YIt&&(this.jIt&&this.jIt.RR(),this.YIt="",this.IR.set(0,0,0,0),this.qIt.Oc(this.IR))}Jy(){return this.jIt&&"loaded"===this.YIt?this.jIt.Jy():null}Ww(){return this.IR}DEt(){return this.qIt}Qk(){return this.JIt}hAt(){return this.jIt}async oAt(t){t=t||await this.jIt.EV();const e=C33.No(this.zC,this.JC),s=e.getContext("2d");return this.UIt?(s.rotate(Math.PI/-2),s.translate(-this.JC,0),s.drawImage(t,this.VIt,this.HIt,this.JC,this.zC,0,0,this.JC,this.zC)):s.drawImage(t,this.VIt,this.HIt,this.zC,this.JC,0,0,this.zC,this.JC),e}async aAt(t){if(!this.zIt){const e=await this.oAt(t),s=await C33.Fo(e);this.zIt=URL.createObjectURL(s)}return this.zIt}KIt(){this.zIt&&(URL.revokeObjectURL(this.zIt),this.zIt="")}}}{const C33=self.Ve;C33.lAt=class AnimationInfo extends C33.pn{constructor(t){super(),this.Tn=t[0],this.cAt=t[1],this.rSt=!!t[2],this.Jht=t[3],this.uAt=t[4],this.fAt=!!t[5],this.rH=t[6],this.dAt=t[7].map(t=>C33.mn(C33.pAt,t)),this.CAt=new self.MB(this)}static mAt(t,e){const s=C33.mn(C33.lAt,[e,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return s.dAt.push(C33.pAt.mAt(t)),s}Sn(){for(const t of this.dAt)t.Sn();C33.Vh(this.dAt)}SAt(t){for(const e of this.dAt)e.VB().oL(t)}gAt(e,s){return Promise.all(this.dAt.map(t=>t.VB().m9(e,s)))}_At(){for(const t of this.dAt)t.VB().RR()}i3(){return this.Tn}NU(){return this.rH}xB(){return this.dAt.length}DB(){return this.dAt}TAt(t){if((t=Math.floor(t))<0||t>=this.dAt.length)throw new RangeError("invalid frame");return this.dAt[t]}yAt(t,e){(e=Math.floor(e))<0?this.dAt.unshift(t):e>=this.dAt.length?this.dAt.push(t):this.dAt.splice(e,0,t)}EAt(t){if((t=Math.floor(t))<0||t>=this.dAt.length)throw new RangeError("invalid frame");this.dAt[t].Sn(),this.dAt.splice(t,1)}IAt(s){for(let t=0,e=this.dAt.length;t<e;++t)if(C33.Ar(this.dAt[t].lk(),s))return t;return-1}AAt(t){if("string"!=typeof t)return t;{const e=this.IAt(t);if(-1===e)throw new Error("cannot find animation frame with tag "+t);return e}}RB(){return this.cAt}wB(){return this.rSt}bB(){return this.Jht}GB(){return this.uAt}vB(){return this.fAt}MAt(){return this.CAt}}}{const C33=self.Ve,EMPTY_IMAGE_BLOB=(()=>{const s=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),i=new Uint8Array(s.length);for(let t=0,e=s.length;t<e;++t)i[t]=s.charCodeAt(t);return new Blob([i],{type:"image/png"})})();C33.pAt=class AnimationFrameInfo extends C33.pn{constructor(t){super(),this.RAt=C33.mn(C33.$It),this.RAt.ZIt(t),this.wAt=t[7],this.bAt=C33.mn(C33.rl,t[8],t[9]),this.OAt=t[10].map(t=>C33.mn(C33.GAt,this,t)),this.PAt=new Map;for(const s of this.OAt)this.PAt.set(s.i3().toLowerCase(),s);this.vAt=null;const e=t[11];6<=e.length&&(this.vAt=C33.mn(C33.Vc,e)),this.rm=t[12]||"",this.xAt=new self.WB(this)}static mAt(t){const e=C33.mn(C33.pAt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return e.RAt.tAt(t,EMPTY_IMAGE_BLOB),e}Sn(){this.vAt&&(this.vAt.Sn(),this.vAt=null),this.RAt.Sn(),this.RAt=null}VB(){return this.RAt}HB(){return this.wAt}XB(){return this.bAt.ll()}YB(){return this.bAt.ul()}rk(){return this.vAt}sk(t){return this.PAt.get(t.toLowerCase())||null}ek(t){return(t=Math.floor(t))<0||t>=this.OAt.length?null:this.OAt[t]}JB(){return this.OAt.length}lk(){return this.rm}NB(){return this.xAt}}}{const C33=self.Ve;C33.GAt=class ImagePoint extends C33.pn{constructor(t,e){super(),this.LAt=t,this.Tn=e[0],this.DAt=C33.mn(C33.rl,e[1],e[2])}Sn(){}i3(){return this.Tn}b_(){return this.DAt.ll()}P_(){return this.DAt.ul()}NAt(){return this.DAt}}}{const C33=self.Ve,C3Debugger=self.C3Debugger,IObjectClass=self.SD,assert=self.assert;C33._lt=class ObjectClass extends C33.pn{constructor(e,t,s){super();const i=e.K1t(s[1]),[r,n]=(this.f3=e,this.Xyt=C33.XL.cD(i),this.Kyt=null,this.FAt=i.Instance,this.tm=t,this.rH=s[11],this.Tn=s[0],this.Lmt=this.f3.S0t(s[14]),this.BAt=!!s[9],this.kAt=!!s[2],this.$At=!!s[10],this.WAt=s[3].map(t=>({sid:t[0],type:t[1],name:t[2],VAt:e.S0t(t[3])})),this.HAt=s[4],this.UAt=s[5],this.ayt=this.Xyt.JL(),this.XAt=C33.mn(C33.Event.q3),this.kH=null,e.j4().FL());if(this.jAt=C33.mn(C33.YAt,r,n),this.qAt=!0,this.zAt=null,this.JAt=null,this.KAt=-1,this.ZAt=null,this.QAt=null,this.tMt=null,this.eMt=null,this.sMt=null,this.iMt=!1,this.rMt=null,this.nMt=s[8].map(t=>C33.hMt.mE(this,t)),this.oMt=[],this.aMt=new Map,this.lMt=new Map,this.cMt=new Set,this.uMt=new Map,this.fMt=C33.mn(C33.$ut,this),this.dMt=null,this.pMt=0,this.CMt=!1,this.rMt=null,this.RAt=null,this.mMt=null,this.SMt=null,this.gMt=null,this._Mt=0,this.lSt=new Map,this.cSt=new Map,this.RV=[],this.TMt=new Map,this.yMt=!0,this.Xyt.sD()&&(this.kH=C33.mn(C33.$H,this,s[12])),s[6]&&(this.RAt=C33.mn(C33.$It),this.RAt.ZIt(s[6])),s[7]){this.mMt=s[7].map(t=>C33.mn(C33.lAt,t)),this.SMt=new Map,this.gMt=new Map;for(const a of this.mMt)this.SMt.set(a.i3().toLowerCase(),a),this.gMt.set(a.NU(),a)}this.kAt?(this.zAt=[],this.JAt=new Set,this.KAt=this.f3.EMt()):(this.ZAt=[],this.QAt=new Set,this.tMt=[],this.eMt=[],this.sMt=[]);const h=this.Xyt.OSt();if(h<2&&(this.Kyt=C33.mn(i.IMt,this,s[15]),!(this.Kyt instanceof C33.Uyt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.AMt=null,this.MMt=null,this.FY=C33.mn(C33.Event.q3),C33.XL.xyt(this,h);let o;if(o=2<=h?(o=i.IMt)||globalThis.Jk:this.Kyt.Gyt()){if(this.AMt=new o(h<2?this:null),h<2&&!(this.AMt instanceof IObjectClass))throw new TypeError("script interface class must derive from IObjectClass");if(2<=h&&!(this.AMt instanceof globalThis.Jk))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.AMt=new IObjectClass;if(C33.XL.Lyt(h),s[13]){const l=s[13];if(l){const c=l[0],u=l[1],f=l[2];this.Kyt.jyt(c,u,f)}}this.f3.RMt()&&!this.kAt&&!this.$At&&this.ayt||this.Oyt(),this.Xyt.qL()&&(this.Xyt.Pyt(this),this.wMt(s)),this.bMt=null}static mE(t,e,s){return C33.mn(C33._lt,t,e,s)}Sn(){if(this.XAt.Sn(),this.XAt=null,this.RAt&&(this.RAt.Sn(),this.RAt=null),this.mMt){for(const t of this.mMt)t.Sn();C33.Vh(this.mMt),this.SMt.clear(),this.gMt.clear()}this.bMt=null,this.fMt.Sn(),this.fMt=null,this.lSt.clear(),this.cSt.clear(),this.rMt=null,this.f3=null}OMt(s){for(let t=1,e=s.length;t<e;++t){const i=this.f3.rU(s[t]);this.zAt.push(i),this.JAt.add(i),i.ZAt.push(this),i.QAt.add(this)}}GMt(t){this.iMt=!0,this.rMt=t}LF(){return this.iMt}aq(){return this.rMt}PMt(){let t=0;if(!this.kAt)for(const e of this.ZAt)for(const s of e.vMt()){const i=s.i3().toLowerCase();this.aMt.set(i,s),this.lMt.set(i,t),this.oMt.push(s),++t}for(const r of this.vMt()){const n=r.i3().toLowerCase();this.aMt.set(n,r),this.lMt.set(n,t),this.oMt.push(r),++t}for(const h of this.oMt)this.cMt.add(h.uB().constructor);if(!this.kAt&&this.ZAt.length){let t=this.f3.xMt(),e=(C33.Uh(this.tMt,t,0),C33.Uh(this.eMt,t,0),C33.Uh(this.sMt,t,0),[]),s=0,i=0,r=0;for(const o of this.ZAt){const a=o.u2t(),l=(this.tMt[a]=s,s+=o.LMt(),this.eMt[a]=i,i+=o.DMt(),this.sMt[a]=r,r+=o.NMt(),o.HD());if(l&&this.kH)for(const c of l.UD())e.push(c.FMt(this.kH))}this.kH&&this.kH.BMt(e)}}wMt(t){const e=this.f3.kMt(),s=C33.mn(C33.Instance,{runtime:this.f3,EF:this,uid:e});s.$Mt(t[16],[]),this.f3.WMt(e,s),this.RV.push(s)}Mgt(){return this.Kyt}VMt(){return this.$At}q3(){return this.XAt}Oyt(){this.kAt||(this.Kyt?this.Kyt.Oyt():this.AMt.Kk())}HMt(){return 0<this._Mt}async uq(t){this.kAt||(this._Mt++,1===this._Mt&&(this.Kyt?await this.Kyt.uq(t):await this.AMt.t8(this.f3.g8().UMt())))}gq(){if(!this.kAt){if(this._Mt--,this._Mt<0)throw new Error("released textures too many times");0===this._Mt&&(this.Kyt?this.Kyt.gq():this.AMt.e8(this.f3.g8().UMt()))}}Cq(){if(this.kAt)throw new Error("not applicable to family");this.Kyt?this.Kyt.Cq():this.AMt.s8()}async kq(t){this.kAt||(this.Kyt?await this.Kyt.kq(t):await this.AMt.i8(this.f3.g8().UMt()))}aL(){return this.f3}_D(){return this.Xyt}XMt(){return this.FAt}i3(){return this.Tn}S0t(){return this.Lmt}F4(){return this.tm}NU(){return this.rH}bU(){return this.kAt}pU(){return this.BAt}JL(){return this.ayt}u2t(){return this.KAt}vMt(){return this.nMt}DMt(){return this.HAt}jMt(t){return t&&this.cMt.has(t)}LMt(){return this.WAt.length}YMt(){return this.WAt.map(t=>t.sid)}qMt(e){return this.WAt.findIndex(t=>t.sid===e)}Het(e){return this.WAt.findIndex(t=>t.name===e)}zMt(){return this.WAt.map(t=>t.name)}JMt(){return this.WAt.map(t=>t.VAt)}Xet(t){if((t=Math.floor(t))<0||t>=this.WAt.length)throw new RangeError("invalid instance variable index");return this.WAt[t].type}Uet(t){if((t=Math.floor(t))<0||t>=this.WAt.length)throw new RangeError("invalid instance variable index");return this.WAt[t].name}NMt(){return this.UAt}KMt(){return this.oMt}prt(t){return this.aMt.get(t.toLowerCase())||null}Yet(t){const e=this.lMt.get(t.toLowerCase());return void 0===e?-1:e}HD(){return this.kH}sD(){return this.Xyt.sD()}ZMt(){return this.kH&&this.kH.QMt()}hdt(){return this.fMt}PD(){return this.fMt.PD()}VB(){return this.RAt}oU(t){this.dMt=t}hU(){return this.dMt}aU(t){this.pMt=t}tRt(){return this.pMt}eRt(){return this.mMt}sRt(){return this.mMt.length}A0t(){return this.ZAt}qgt(t){return this.QAt.has(t)}LCt(){return this.zAt}OU(t){return this.JAt.has(t)}m2t(t){return this.eMt[t]}c2t(t){return this.tMt[t]}gmt(t){this.uMt.set(t.Imt().toLowerCase(),t)}_mt(t){return!!this.Omt(t)}Omt(t){const e=this.uMt.get(t.toLowerCase());return e&&e.hu()?e:null}iRt(){return this.mMt}rRt(t){if(this.mMt)return this.SMt.get(t.toLowerCase())||null;throw new Error("no animations")}nRt(t){if(this.mMt)return this.gMt.get(t)||null;throw new Error("no animations")}hRt(t){if(this.rRt(t))throw new Error(`animation name '${t}' already exists`);const e=C33.lAt.mAt(this.aL(),t);return this.mMt.push(e),this.SMt.set(e.i3().toLowerCase(),e),this.gMt.set(e.NU(),e),e}oRt(t){const e=this.rRt(t);if(!e)throw new Error(`animation name '${t}' does not exist`);if(1===this.mMt.length)throw new Error("cannot remove last animation");const s=this.mMt.indexOf(e);this.mMt.splice(s,1),this.SMt.delete(e.i3().toLowerCase()),this.gMt.delete(e.NU()),e.Sn()}aRt(){if(this.mMt)return this.mMt[0];throw new Error("no animations")}lRt(){return this.aRt().TAt(0)}cRt(){if(this.mMt){const t=this.lRt().VB();return[t.dC(),t.IC()]}return this.RAt?[this.RAt.dC(),this.RAt.IC()]:[100,100]}mD(){if(this.Xyt.qL())return this.RV[0];throw new Error("not a single-global plugin")}GD(){return this.RV}*instances(){yield*this.RV}*OD(){yield*this.RV,yield*this.f3.kgt(this)}xD(){return this.RV.length}CU(t){this.RV.push(t)}uRt(){this.yMt=!0}Kq(){if(this.yMt&&!this.kAt){let e=this.RV,s=0;for(let t=e.length;s<t;++s)e[s].fRt(s);const t=this.f3.dRt();for(const i of t)i.IF()===this&&i.fRt(s++);this.yMt=!1}}pRt(t){const e=this.RV;if(t<e.length)return e[t];t-=e.length;const s=this.f3.dRt();for(const i of s)if(i.IF()===this){if(0===t)return i;--t}return null}xgt(t){if(t&&t.LF()&&t.IF()!==this)for(const s of t.DF())if(s.IF()===this)return s;const e=this.PD().GD();return e.length?e[0]:null}bD(t){const e=this.PD().GD();return 0<e.length?e[t.qq()%e.length]:null}*Vgt(t,e){let s=this.PD().GD(),i=s.length,r=e.PD(),n=e.PD().GD(),h=n.length,o=t.qq(),a=(!e.bU()&&r.Qut()||(o=n.indexOf(t)),Math.ceil(i/h)),l=i%h,c=0,u=0;u=0==l||o<l?(c=o*a,a):(c=l*a+(o-l)*(a-1),a-1);for(let t=c,e=c+u;t<e;++t)yield s[t]}WSt(t){this.Kyt?.WSt(t)}V1t(){if(this.iMt&&!this.kAt){this.Kq();const t=this.PD(),e=t.o3t(),s=t.Qut(),i=this.f3.o0t(),r=i&&i.Ox()&&i.Ox().m3t();for(const n of this.rMt.zq())if(n!==this){n.Kq();const h=n.PD();if(h.h3t(s),!s){const o=h.o3t();C33.Vh(o);for(const a of e)o.push(n.pRt(a.qq()));if(r){const l=t.a3t(),c=h.a3t();C33.Vh(c);for(const u of l)c.push(n.pRt(u.qq()))}}}}}jSt(t,e){for(const s of this.aq().zq()){const i=s.PD();t?C33.Wh(i.a3t(),e):C33.Wh(i.o3t(),e)}}CRt(){return this.jAt}mRt(t){this.qAt=!!t}SRt(){if(this.qAt&&this.ayt){for(const t of this.RV)t.W5().gRt();for(const e of this.f3.dRt())e.IF()===this&&e.W5().gRt();this.qAt=!1}}_Rt(e,t,s){if(t){const i=this.TMt.get(t);i&&(i.delete(e),0===i.size)&&this.TMt.delete(t)}if(s){let t=this.TMt.get(s);t||(t=new Set,this.TMt.set(s,t)),t.add(e)}}TRt(){if(this.bU()){const t=new Set;for(const e of this.zAt)for(const s of e.TRt())t.add(s);return t.values()}return this.TMt.keys()}DSt(){return this.lSt||(this.lSt=new Map),this.lSt}NSt(){return this.cSt||(this.cSt=new Map),this.cSt}yRt(){return this.jMt(C33.Oat.xIt)}ERt(){return this.jMt(C33.Oat.jumpthru)}IRt(){return this.jMt(C33.Oat.NoSave)}fU(){return this.jMt(C33.Oat.Persist)}Qj(){const t={instances:this.RV.map(t=>t.V_())};return this.lSt&&this.lSt.size&&(t.ex=C33.Ho(this.lSt)),t}tY(t,i){this.lSt&&(this.lSt.clear(),this.lSt=null);const e=t.ex,r=(e&&(this.lSt=C33.Uo(e)),this.RV),n=t.instances;for(let t=0,e=Math.min(r.length,n.length);t<e;++t)r[t].H_(n[t]);for(let t=n.length,e=r.length;t<e;++t)this.f3.OF(r[t]);for(let s=r.length,t=n.length;s<t;++s){let t=n[s],e=null;if(!this.JL()||(e=this.f3.S5().ZY(t.w.l))){const h=this.f3.dU(this.dMt||this,e,!1,0,0,!0);h.H_(t),i&&i.add(h)}}this.bMt=n,this.uRt()}ARt(){return this.bMt}MRt(){this.bMt=null}RRt(){for(let t=0,e=this.RV;t<e;++t)this.RV[t].RRt()}dD(){return this.AMt}_x(){return this.FY}wRt(){return this.MMt}LD(t){this.MMt=t}Iz(t){const e=this.f3,s=e.Az()&&!e.Ix().kD();s&&C3Debugger.StartMeasuringScriptTime(),this.FY.dispatchEvent(t),s&&C3Debugger.AddScriptTime()}}}{const C33=self.Ve;C33.bRt=class Container extends C33.pn{constructor(t,e){super(),this.f3=t,this.ORt=e;for(const s of this.ORt)s.GMt(this)}Sn(){this.f3=null}aL(){return this.f3}oq(){return this.ORt}zq(){return this.ORt}Qq(){return this.ORt.some(t=>t.JL())}}}{let C33=self.Ve,C3Debugger=self.C3Debugger,IInstance=self.yF,originalAddonManager=C33.XL,EMPTY_ARRAY=[],nextPuid=0,savedDataMaps=new WeakMap,unsavedDataMaps=new WeakMap,FLAG_DESTROYED=1,FLAG_TILEMAP=2,FLAG_MUST_PREDRAW=4,FLAG_SOLID_ENABLED=8,FLAG_JUMPTHRU_ENABLED=16,FLAG_MUST_MITIGATE_Z_FIGHTING=32,FLAG_IS_DRAWING_WITH_EFFECTS=64;C33.Instance=class Instance extends C33.pn{constructor(t){if(C33.XL!==originalAddonManager)throw new Error("invalid addon manager");super(),this.f3=t.runtime,this.GRt=t.EF,this.pet=null,this.PRt=null,this.vRt=null,this.xRt=0,this.LRt=t.uid,this.DRt=nextPuid++,this.JSt=0,this.NRt=null;const e=C33.ho(t.tags),s=(0<e.length&&(this.NRt=new Set(e)),this.FRt=EMPTY_ARRAY,this.BRt=EMPTY_ARRAY,this.GRt.KMt()),i=(0<s.length&&(this.BRt=s.map((t,e)=>C33.mn(C33.kRt,{runtime:this.f3,fB:t,CB:this,index:e}))),this.$Rt=this.GRt.LF()?[]:null,this.WRt=-1,this.XAt=null,this._D());if(i.s_()&&(this.JSt|=FLAG_MUST_PREDRAW),i.JL())if(this.pet=C33.mn(C33.VRt,this,t.x7),t.HRt)this.pet.URt(t.HRt);else{this.pet.XRt();const[r,n]=this.GRt.cRt();this.pet.aw(r,n),this.IF().ZMt()&&this.pet.v7().jRt()}t.YRt?this.qRt(t.YRt):this.zRt()}Sn(){if(this.vRt&&(this.vRt.bF(),this.vRt=null),0<this.BRt.length){for(const s of this.BRt)s.Sn();C33.Vh(this.BRt)}this.PRt&&(this.PRt.Sn(),this.PRt=null);const t=savedDataMaps.get(this),e=(t&&(t.clear(),savedDataMaps.delete(this)),unsavedDataMaps.get(this));e&&(e.clear(),unsavedDataMaps.delete(this)),this.$Rt&&C33.Vh(this.$Rt),this.XAt&&(this.XAt.Sn(),this.XAt=null),this.NRt&&this.NRt.clear(),this.NRt=null,this.f3=null,this.GRt=null,0<this.FRt.length&&C33.Vh(this.FRt),this.pet&&(this.pet.Sn(),this.pet=null)}qRt(t){0<t.length&&(this.FRt=[],C33.jh(this.FRt,t))}zRt(){const e=this.GRt.LMt();if(0!==e){this.FRt=[];const s=[0,0,""];for(let t=0;t<e;++t)this.FRt.push(s[this.GRt.Xet(t)])}}$Mt(t,s){if(this.PRt)throw new Error("already got sdk instance");for(let t=0,e=this.BRt.length;t<e;++t){const i=this.BRt[t];i.$Mt(s?s[t]:null)}const e=this._D().OSt();if(e<2){if(this.PRt=C33.mn(this.GRt.XMt(),this,t),!(this.PRt instanceof C33.zyt))throw new Error("sdk type must derive from SDKInstanceBase");!this._D().JL()&&this.GRt.wRt()&&this.N5()}else{const r=this._D().Gyt();this.JRt(r.Instance,t)}}rB(){return this.PRt??this.vRt}W5(){return this.pet}aL(){return this.f3}Zx(){return this.WRt}kF(){const t=this.WRt;return-1===t?this.aL().Zx():t}Qx(t){((t=+t)<0||!isFinite(t))&&(t=0),this.WRt=t,this.IF().ZMt()&&this.f3.KRt(this,!0)}WF(){this.WRt=-1,this.IF().ZMt()&&this.f3.KRt(this,!1)}Vj(){return this.f3.ZRt(this)}q3(){return this.XAt||(this.XAt=C33.mn(C33.Event.q3)),this.XAt}ST(t){this.PRt?this.PRt.ST(t):this.vRt.c8(this.f3.g8().UMt())}Oyt(t){this.PRt.Oyt(t)}QRt(){this.JSt|=FLAG_TILEMAP}twt(){return 0!=(this.JSt&FLAG_TILEMAP)}ewt(){this.JSt|=FLAG_DESTROYED}k8(){return 0!=(this.JSt&FLAG_DESTROYED)}s_(){return 0!=(this.JSt&FLAG_MUST_PREDRAW)||this.PRt.s_()}swt(){this.JSt|=FLAG_MUST_MITIGATE_Z_FIGHTING}xj(){return 0!=(this.JSt&FLAG_MUST_MITIGATE_Z_FIGHTING)}iwt(){return 0!=(this.JSt&FLAG_SOLID_ENABLED)}rwt(t){t?this.JSt|=FLAG_SOLID_ENABLED:this.JSt&=~FLAG_SOLID_ENABLED}nwt(){return 0!=(this.JSt&FLAG_JUMPTHRU_ENABLED)}hwt(t){t?this.JSt|=FLAG_JUMPTHRU_ENABLED:this.JSt&=~FLAG_JUMPTHRU_ENABLED}owt(){return 0!=(this.JSt&FLAG_IS_DRAWING_WITH_EFFECTS)}awt(t){t?this.JSt|=FLAG_IS_DRAWING_WITH_EFFECTS:this.JSt&=~FLAG_IS_DRAWING_WITH_EFFECTS}lwt(t,e){t<<=16,e?this.JSt|=t:this.JSt&=~t}cwt(t){return 0!=(this.JSt&t<<16)}PEt(){return this.PRt.PEt()}vEt(){return this.PRt.vEt()}xEt(){return this.PRt.xEt()}LEt(){return this.PRt.LEt()}NEt(){return this.PRt.NEt()}Ogt(t){return this.PRt.Ogt(t)}IF(){return this.GRt}Pj(){return this.PRt.Pj()}$gt(t){return t.bU()?t.OU(this.IF()):this.IF()===t}uwt(r,t,e){const s=(t,e)=>{const s=e||t.IF(),i=r.get(s);i?i.add(t):r.set(s,new Set([t]))};if(s(this,t),this.LF())for(const i of this.DF())s(i);if(e)for(const n of this.S6())s(n)}fwt(){if(!this._D().hD())throw new Error("object does not support scene graph")}E6(){return null!==this.l6()}l6(){const t=this.W5();if(!t)return null;const e=t.l6();return e?e.xk():null}u6(){const t=this.W5();if(!t)return null;const e=t.u6();return e?e.xk():null}*f6(){const t=this.W5();if(t)for(const e of t.f6())yield e.xk()}dwt(t){if(t)for(const e of this.children())if(e===t)return!0;return!1}iY(){const t=this.W5();return!!t&&t.iY()}pwt(t){const e=this.W5();if(!e)return[];const s=t.i3();return e.az().map(t=>t.xk()).filter(t=>t.IF().i3()===s)}az(){const t=this.W5();return t?t.az().map(t=>t.xk()):[]}*children(){const t=this.W5();if(t)for(const e of t.children())yield e.xk()}*S6(){const t=this.W5();if(t)for(const e of t.S6())yield e.xk()}p6(){const t=this.W5();return t?t.p6():0}Cwt(){return[...this.f6()].length}Wgt(){const t=this.W5();return t?t.Wgt():0}m6(t){const e=this.W5();if(!e)return null;const s=e.m6(t);return s?s.xk():null}mwt(){const t=this.W5();if(!t)return NaN;const e=t.l6();return e?e.Swt(t):NaN}gwt(t){for(const e of this.W5().az())if(e.xk().NF()===t)return!0;return!1}_6(t,e){this.fwt(),t.fwt(),this.W5()._6(t.W5(),e||{})}T6(t){const e=this.W5();e&&e.T6(t.W5())}V6(){const t=this.W5();return!!t&&t.V6()}Dq(){const t=this.W5();if(t){const e=t._wt();if(e)for(const s of e){const i=this.f3.D5(s[2]);if(i){const r=s[3];this._6(i,{A6:!!(r>>0&1),R6:!!(r>>1&1),b6:!!(r>>2&1),G6:!!(r>>3&1),v6:!!(r>>4&1),W6:!!(r>>5&1),L6:!!(r>>6&1),N6:!!(r>>7&1),B6:!!(r>>8&1)})}}}}Nq(t,e){const s=t.get(this);if(s)for(const i of s.sceneGraphJson.children){const r=e.get(i.index);if(r){const n=i.flags;this._6(r,{A6:!!(n>>0&1),R6:!!(n>>1&1),b6:!!(n>>2&1),G6:!!(n>>3&1),v6:!!(n>>4&1),W6:!!(n>>5&1),L6:!!(n>>6&1),N6:!!(n>>7&1),B6:!!(n>>8&1)})}}}BF(){const t=this.f3.Twt();return t?t.ylt(this):""}LF(){return null!==this.$Rt}Jq(t){this.$Rt.push(t)}vF(){return this.$Rt}ywt(t){return!!this.Ewt(t)}Ewt(t){const e=this.DF();if(null===e||0===e.length)return!1;for(const s of e)if(s.IF()===t)return s;return null}DF(){return this.$Rt}jpt(){for(const t of this.DF())t.IF().PD().l3t(t)}VSt(){for(const t of this.DF())t.IF().PD().r3t(t)}HSt(t){for(const e of this.DF())e.IF().PD().o3t()[t]=e}XSt(){for(const t of this.DF())t.IF().PD().n3t(t)}USt(t){for(const e of this.DF())e.IF().PD().a3t()[t]=e}_D(){return this.GRt._D()}fRt(t){this.xRt=t}qq(){return this.GRt.Kq(),this.xRt}NF(){return this.LRt}Iwt(){return this.DRt}Awt(t){t?this.XF(new Set(t)):this.NRt=null}XF(t){if(0===t.size)this.NRt=null;else{this.NRt?this.NRt.clear():this.NRt=new Set;for(const e of t)this.NRt.add(e)}}HF(){return this.NRt??new Set}zgt(){return Array.from(this.HF()).join(" ")}Jgt(t){t=Math.floor(t);for(const e of this.HF()){if(0===t)return e;--t}return""}drt(){return this.BRt}Mwt(t){if(t)for(const e of this.BRt)if(e.uB()instanceof t)return e;return null}Gat(t){if(!t)return null;const e=this.Mwt(t);return e?e.rB():null}frt(s){const i=this.BRt;for(let t=0,e=i.length;t<e;++t)if(i[t].pB().NU()===s)return t;return-1}Rwt(){return this.FRt}zMt(){return this.GRt.zMt()}wwt(){return this.FRt.length}Ont(t){const e=this.FRt;if((t|=0)<0||t>=e.length)throw new RangeError("invalid instance variable");return e[t]}a2t(t){return this.FRt[t]}bwt(t){const e=this.FRt[t];return 0===this.GRt.Xet(t)?!!e:e}Gnt(t,e){const s=this.FRt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");const i=this.GRt.Xet(t);switch(i){case 0:s[t]=e?1:0;break;case 1:s[t]="number"==typeof e?e:parseFloat(e);break;case 2:s[t]="string"==typeof e?e:e.toString();break;default:throw new Error("unknown instance variable type")}}yht(t,e){if(0!==e){const s=this.FRt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");const i=s[t];if("number"!=typeof i)throw"boolean"==typeof i?new Error("can not set offset of boolean variable"):"string"==typeof i?new Error("can not set offset of string variable"):new Error("unknown instance variable type");s[t]+="number"==typeof e?e:parseFloat(e)}}DSt(){let t=savedDataMaps.get(this);return t||(t=new Map,savedDataMaps.set(this,t)),t}NSt(){let t=unsavedDataMaps.get(this);return t||(t=new Map,unsavedDataMaps.set(this,t)),t}Owt(t){const e=this.IF();if(e._x().Q3(t))return!0;for(const s of e.A0t())if(s._x().Q3(t))return!0;return!!this.f3._x().Q3(t)}BD(){const t=new Set,e=(t.add(this),this.W5());if(e&&e.iY())for(const s of this.S6())if(t.add(s),s.LF())for(const i of s.DF())t.add(i);if(this.LF())for(const r of this.DF())t.add(r);for(const n of t.values())n.Bq()}Gwt(){this.GRt.wRt()&&this.N5();for(const t of this.BRt)t.gIt()}Pwt(){this.Gwt()}Bq(){if(this.Gwt(),this.Owt("instancecreate")){const t=this.IF(),e=new C33.Event("instancecreate");e.CB=this.N5(),t.Iz(e);for(const s of t.A0t())s.Iz(e);this.f3.Iz(e)}this.f3.n7(this._D().vdt().Hq.bTt,this,null)}vwt(){this.f3.n7(this._D().vdt().Hq.OTt,this,null)}xwt(t){if(this.vRt){const e=new C33.Event("destroy");e.Lwt=t,this.Iz(e)}if(this.Owt("instancedestroy")){const s=this.IF(),i=new C33.Event("instancedestroy");i.CB=this.N5(),i.Lwt=t,s.Iz(i);for(const r of s.A0t())r.Iz(i);this.f3.Iz(i)}}Dwt(){return this.PRt?this.PRt.gEt():this.vRt.T7()}V_(t="full",e=null){const s={},i=("full"===t?s.uid=this.NF():s.c3=!0,this.HF());if(0<i.size&&(s.tags=Array.from(i)),"visual-state"!==t){const n=savedDataMaps.get(this);if(n&&n.size&&(s.ex=C33.Ho(n)),-1!==this.Zx()&&(s.mts=this.Zx()),0<this.GRt.LMt()){const h={},o=this.GRt.YMt();for(let t=0,e=this.FRt.length;t<e;++t)h[o[t].toString()]=this.FRt[t];s.ivs=h}if(this.BRt.length){const a={};for(const l of this.BRt){const c=l.V_(t);c&&(a[l.pB().NU().toString()]=c)}s.behs=a}}this.pet&&(s.w=this.pet.Qj(t,e));const r=this.PRt?this.PRt.V_():this.vRt.y7();return r&&(s.data=r),s}TJ(t="full",e){this.pet&&this.pet.TJ(t)}EJ(t,e="full",s=null){this.pet&&this.pet.EJ(t,e,s)}Nwt(t,e="full",s=null){this.pet&&this.pet.Nwt(t,e,s)}RRt(){this._D().JL()&&this.pet.RRt()}H_(e,t="full",s){if("full"===t)this.LRt=e.uid;else if(!e.c3)return;if(this.Awt(e.tags),"visual-state"!==t){let t=savedDataMaps.get(this);t&&(t.clear(),savedDataMaps.delete(this));const r=e.ex,n=(r&&(t=C33.Uo(r),savedDataMaps.set(this,t)),this.WRt=e.hasOwnProperty("mts")?e.mts:-1,e.ivs);if(n)for(const[h,o]of Object.entries(n)){const a=parseInt(h,10),l=this.GRt.qMt(a);if(!(l<0||l>=this.FRt.length)){let t=o;null===t&&(t=NaN),this.FRt[l]=t}}}if(this._D().JL()){const c=e.w;if(c){const u=c.l;if(this.pet.V5().NU()!==u){const f=this.pet.V5(),d=f.y5().ZY(u);d?(this.pet.j5(d),f.gU(this,!0),d.CU(this,!0),d.Y5(this),this.pet.L7()):"full"===t&&this.f3.OF(this)}this.pet.tY(c,t)}}if("visual-state"!==t){const p=e.behs;if(p)for(const[C,m]of Object.entries(p)){const S=parseInt(C,10),g=this.frt(S);g<0||g>=this.BRt.length||this.BRt[g].H_(m,t)}}const i=e.data;i&&(this.PRt?this.PRt.H_(i,t):this.vRt.E7(i))}N5(){return this.vRt||this.JRt()}EEt(){return!!this.vRt}JRt(t,e){const s=this.pet?t?self.r8:self.Q6:t?self.zF:self.yF,i=t||this.PRt.Gyt(),r=this.GRt.wRt(),n=r||i||s,h=this._D().OSt();if(C33.XL.xyt(this,h),C33.XL.DIt(e),this.vRt=new n,C33.XL.NIt(),C33.XL.Lyt(h),i&&!(this.vRt instanceof s))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${s.name}'`);if(r){const o=i||s;if(!(this.vRt instanceof o))throw new TypeError(`setInstanceClass(): class '${r.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.vRt}AF(t){if(0!==this.FRt.length){const s={},i=this.GRt.JMt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:C33.Instance.prototype.bwt.bind(this,t),set:C33.Instance.prototype.Gnt.bind(this,t)};const e=Object.create(Object.prototype,s);t.Fwt={value:e,writable:!1}}}MF(t){const e=this.BRt;if(0!==e.length){const s={};for(const r of e)s[r.pB().S0t()]={value:r.tEt(),writable:!1};const i=Object.create(Object.prototype,s);t.vpt={value:i,writable:!1}}}Iz(t){if(this.EEt()){const e=this.N5(),s=(t.CB=e,this.f3),i=s.Az()&&!s.Ix().kD();i&&C3Debugger.StartMeasuringScriptTime(),e.dispatchEvent(t),i&&C3Debugger.AddScriptTime()}}}}{const C33=self.Ve;C33.cz=class SceneGraphInfo extends C33.pn{constructor(t){super(),this.J_=t,this.Zpt=null,this.Bwt=[],this.kwt=t.dC(),this.$wt=t.IC(),this.Wwt=1,this.Vwt=1,this.Hwt=0,this.Uwt=1,this.Xwt=t.$O(),this.jwt=null,this.Ywt=null,this.qwt=NaN}Sn(){this.Zpt=null,this.jwt=null,this.Ywt=null,this.qwt=NaN,C33.Vh(this.Bwt)}zwt(t){this.Uwt=this.J_.$O(),this.Xwt=this.Uwt,this.Zpt=t,this.Hwt=t?t.GetAngle():0}l6(){return this.Zpt}iY(){return 0<this.Bwt.length}az(){return this.Bwt}Jwt(){this.iY()&&1!==this.Bwt.length&&(this.Ywt?this.Bwt.sort((t,e)=>{const s=this.Ywt.get(t.xk()),i=this.Ywt.get(e.xk());return C33.Si(s)&&C33.Si(i)?s-i:0}):this.Bwt.sort((t,e)=>{const s=t.$nt().Kwt(),i=e.$nt().Kwt();return C33.Si(s)&&C33.Si(i)?s-i:0}))}Kwt(){return this.qwt}Wnt(){return this.Wwt}Zwt(t){this.Wwt=t}Hnt(){return this.Vwt}Qwt(t){this.Vwt=t}Knt(){return this.Xwt}vgt(){return this.Uwt}tbt(t){this.Uwt=t}knt(){return 0===this.kwt?Number.EPSILON:this.kwt}Vnt(){return 0===this.$wt?Number.EPSILON:this.$wt}ebt(){if(this.J_.O6()){let t=this.Zpt,e=t.dC(),s=t.$nt().knt();if(0===e&&(e=Number.EPSILON),s===Number.EPSILON&&e===Number.EPSILON)return 1;if(s===Number.EPSILON&&e!==Number.EPSILON){const i=t.xk().rB();if(i.hst())return 1+e/i.nst()}return e/s}return 1}sbt(){if(this.J_.P6()){let t=this.Zpt,e=t.IC(),s=t.$nt().Vnt();if(0===e&&(e=Number.EPSILON),s===Number.EPSILON&&e===Number.EPSILON)return 1;if(s===Number.EPSILON&&e!==Number.EPSILON){const i=t.xk().rB();if(i.hst())return 1+e/i.ast()}return e/s}return 1}ibt(){return this.Hwt}rbt(){return{sw:this.kwt,sh:this.$wt,sx:this.Wwt,sy:this.Vwt,psa:this.Hwt,oo:this.Uwt,so:this.Xwt,pi:this.J_.xk().mwt()}}Qj(t,e=null){const s=this.rbt();return e&&e.selfOnly?Object.assign(s,{p:null,c:[]}):Object.assign(s,{p:this.nbt(t),c:this.hbt(t)})}obt(t){let e="";return t.M6()&&(e+="x"),t.w6()&&(e+="y"),t.O6()&&(e+="w"),t.P6()&&(e+="h"),t.x6()&&(e+="a"),t.D6()&&(e+="z"),t.V6()&&(e+="d"),t.F6()&&(e+="o"),t.k6()&&(e+="v"),e}nbt(t){return!this.Zpt||!this.Zpt.xk()||this.Zpt.xk().k8()?null:this.abt(this.Zpt,this.J_,t)}hbt(e){return this.Bwt.map(t=>this.abt(t,t,e)).filter(t=>t)}abt(t,e,s){const i=t.xk();if(i&&i.k8())return null;const r={};return r.uid=i.NF(),r.f=this.obt(e),r.offsets=e.lbt(),r.data=C33.cz.cbt(i),r.oci=i.IF().F4(),"state"===s?(r.inst=i.V_("full",{selfOnly:!0}),r.instIndex=NaN):(r.instIndex=i.IF().GD().indexOf(i),r.inst=null),r}tY(t){this.kwt=t.sw,this.$wt=t.sh,this.Wwt=t.sx,this.Vwt=t.sy,this.Hwt=t.psa,this.Uwt=t.oo,this.Xwt=t.so,this.qwt=C33.Si(t.pi)?t.pi:NaN}ubt(t,e){if(!t&&!e&&this.jwt)for(const s of this.jwt)s.k8()||s.E6()||s.aL().OF(s);this.jwt=t,this.Ywt=e}EJ(t,e){const s=this.J_,i=s.aL(),r=new Set;if(t.p&&!this.Zpt){const o=t.p.uid,a=i.D5(o);if(e?.Qgt,a){const l=a.W5();if(a.dwt(s.xk()))this.Zpt=l;else{a.gwt(s.xk().NF())?i.OF(s.xk()):a._6(s.xk(),this.fbt(t.p.f)),r.has(s)||(s.dbt(t.p.offsets),this.pbt(a,t.p,e)),r.add(s);const c=a.W5();c.$nt().Jwt()}}else if(C33.Si(t.p.oci)){const u=i.rU(t.p.oci),f=(i.qmt(),i.DD(u,s.V5(),0,0,!0));if(e?.Qgt,f){const d=this.Cbt(t.p,i),p=(f.H_(d),f.W5()),C=(p.V5().ND(f),f._6(s.xk(),this.fbt(t.p.f)),f.W5());C.$nt().Jwt()}}}const n=[];for(const m of t.c){const S=m.uid,g=i.D5(S);g&&n.push(g)}let h=0;for(const _ of t.c){const T=_.uid,y=i.D5(T);if(e?.Qgt,y){if(this.jwt){if(this.jwt.includes(y)){const M=y;if(M.IF()!==y.IF()){h++;continue}if(M.k8()){h++;continue}const R=t.c[h];if(!e?.Qgt&&this.mbt(M,n,s)){this.Sbt(h,R,s,r,e),h++;continue}if(M.E6()&&M.l6()!==s.xk()){const w=this.gbt(R,e);this._bt(w,R,r,e),h++;continue}this._bt(M.W5(),R,r,e,!0),h++;continue}if(this.jwt[h]){const b=this.jwt[h];if(b.IF()!==y.IF()){h++;continue}if(b.k8()){h++;continue}const O=t.c[h];if(!e?.Qgt&&this.mbt(b,n,s)){this.Sbt(h,O,s,r,e),h++;continue}if(b.E6()&&b.l6()!==s.xk()){const G=this.gbt(O,e);this._bt(G,O,r,e),h++;continue}this._bt(b.W5(),O,r,e,!0),h++;continue}}const E=y.IF(),I=this.Tbt(n,E),A=s.xk().pwt(E).length;if(I===A){const P=s.xk().m6(h);if(P){const v=P.W5();v&&(r.has(v)||(v.dbt(_.offsets),this.pbt(P,_,e)),r.add(v))}h++;continue}if(y.E6()&&y.l6()!==s.xk()){const x=this.gbt(_,e);this._bt(x,_,r,e),h++;continue}this._bt(y.W5(),_,r,e)}else if(this.jwt&&this.jwt[h]){const L=this.jwt[h],N=i.rU(this.ybt(_));if(L.IF()!==N){h++;continue}if(L.k8()){h++;continue}const D=t.c[h];if(!e?.Qgt&&this.mbt(L,n,s)){this.Sbt(h,D,s,r,e),h++;continue}if(L.E6()&&L.l6()!==s.xk()){const F=this.gbt(D,e);this._bt(F,D,r,e),h++;continue}this._bt(L.W5(),D,r,e)}else{const B=this.gbt(_,e);this._bt(B,_,r,e)}h++}}mbt(t,e,s){const i=t.IF(),r=this.Tbt(e,i),n=s.xk().pwt(i).length;return r===n}Sbt(t,e,s,i,r){const n=s.xk().m6(t,e);if(n){const h=n.W5();h&&(i.has(h)||(h.dbt(e.offsets),this.pbt(n,e,r)),i.add(h))}}fbt(t){const e={};return e.A6=t.includes("x"),e.R6=t.includes("y"),e.b6=t.includes("w"),e.G6=t.includes("h"),e.v6=t.includes("a"),e.L6=t.includes("z"),e.W6=t.includes("d"),e.N6=t.includes("o"),e.B6=t.includes("v"),e}ybt(t){return C33.Si(t.oci)?t.oci:t[1]}gbt(i,r){if(C33.Si(i.oci)){let t=this.J_,e=t.aL(),s;if(i.data)s=e.dU(i.data,t.V5(),!1,0,0,!1,!0);else{const n=e.rU(i.oci);s=e.DD(n,t.V5(),0,0,!0)}if(r?.Qgt,s){const h=this.Cbt(i,e),o=(s.H_(h),s.W5());return o.V5().ND(s,!0),o}}}_bt(t,e,s,i,r=!0){const n=this.J_,h=n._6(t,this.fbt(e.f));h&&r&&(s.has(t)||(t.dbt(e.offsets),this.pbt(t.xk(),e,i)),s.add(t)),this.Jwt()}pbt(t,e,s){let i=this.Cbt(e,this.J_.aL());i&&((i=JSON.parse(JSON.stringify(i))).w=null,t.H_(i))}Tbt(t,e){return t.filter(t=>t.IF().i3()===e.i3()).length}Cbt(t,e){if(C33.Si(t.instIndex)){const s=e.rU(t.oci),i=s.ARt();return i[t.instIndex]}return C33.Ri(t.inst)?JSON.parse(t.inst):t.inst||void 0}static cbt(t){let e=t.W5().V5().lU(t.NF());if(!e)return null;e=JSON.parse(JSON.stringify(e));const s=[];for(const i of[...t.az()]){const r=i.W5();s.push([r.y5().NU(),r.V5().F4(),i.NF(),C33.cz.lz(r),i.IF().LF()?1:0,r.H5(),C33.cz.cbt(i)])}return C33.Wi(e[0][14])?e[0][14][1]=s:(e[0][14]=[],e[0][14][0]=C33.cz.Ebt(),e[0][14][1]=s,e[0][14][2]=t.W5().H5()),e}static lz(t){let e=0;return(e|=Number(t.k6())<<8)|Number(t.F6())<<7|Number(t.D6())<<6|Number(t.V6())<<5|Number(t.x6())<<4|Number(t.P6())<<3|Number(t.O6())<<2|Number(t.w6())<<1|Number(t.M6())<<0}static Ebt(t){let e=0;return(e|=256)|128|64|32|16|8|4|2|1,511}}}{let C33=self.Ve,glMatrix=self._e,vec32=glMatrix.we,vec42=glMatrix.Oe,tempRect=C33.mn(C33.Rect),tempQuad=C33.mn(C33.nc),bboxChangeEvent=C33.mn(C33.Event,"bboxchange",!1),tempColor=C33.mn(C33.qo,0,0,0,0),tempCollisionPoly=C33.mn(C33.Vc),DEFAULT_COLOR=C33.mn(C33.qo,1,1,1,1),DEFAULT_RENDER_CELLS=C33.mn(C33.Rect,0,0,-1,-1),DEFAULT_COLLISION_CELLS=C33.mn(C33.Rect,0,0,-1,-1),VALID_SET_MESH_POINT_MODES=new Set(["absolute","relative"]),EMPTY_ARRAY=[],enableUpdateRendererStateGroup=!0,FLAG_IS_VISIBLE=1,FLAG_BBOX_CHANGED=2,FLAG_ENABLE_BBOX_CHANGED_EVENT=4,FLAG_COLLISION_ENABLED=8,FLAG_COLLISION_CELL_CHANGED=16,FLAG_SOLID_FILTER_INCLUSIVE=32,FLAG_HAS_ANY_ACTIVE_EFFECT=64,FLAG_IS_ROTATABLE=128,FLAG_DESTROYED=256,FLAG_DESTROY_WITH_PARENT=512,FLAG_TRANSFORM_WITH_PARENT_X=1024,FLAG_TRANSFORM_WITH_PARENT_Y=2048,FLAG_TRANSFORM_WITH_PARENT_W=4096,FLAG_TRANSFORM_WITH_PARENT_H=8192,FLAG_TRANSFORM_WITH_PARENT_A=16384,FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION=32768,FLAG_TRANSFORM_WITH_PARENT_OPACITY=1<<22,FLAG_TRANSFORM_WITH_PARENT_VISIBILITY=1<<23,MASK_ALL_SCENE_GRAPH_FLAGS=FLAG_DESTROY_WITH_PARENT|FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y|FLAG_TRANSFORM_WITH_PARENT_W|FLAG_TRANSFORM_WITH_PARENT_H|FLAG_TRANSFORM_WITH_PARENT_A|FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION|FLAG_TRANSFORM_WITH_PARENT_OPACITY|FLAG_TRANSFORM_WITH_PARENT_VISIBILITY,FLAG_MESH_CHANGED=65536,FLAG_PHYSICS_BODY_CHANGED=1<<17,FLAG_SIN_COS_ANGLE_CHANGED=1<<18,FLAG_USE_POINTS_SHADER_PROGRAM=1<<19,FLAG_DRAW_BACK_FACE_ONLY=1<<20,FLAG_DRAW_NON_BACK_FACES_ONLY=1<<21,FLAG_BLEND_MODE_BIT_OFFSET=26,FLAG_BLEND_MODE_MASK=31<<FLAG_BLEND_MODE_BIT_OFFSET,sceneGraphExportDataMap=new WeakMap,sceneGraphZIndexMap=new WeakMap;C33.VRt=class WorldInfo extends C33.pn{constructor(t,e){super(),this.xs=t,this.Wut=t.IF(),this.f3=t.aL(),this.Ibt=e,this.Wut._Rt(this,null,e),this.Abt=-1,this.Mbt=-1,this.JSt=FLAG_IS_VISIBLE|FLAG_BBOX_CHANGED|FLAG_COLLISION_ENABLED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED|FLAG_PHYSICS_BODY_CHANGED,this.Wut._D().tD()&&(this.JSt|=FLAG_IS_ROTATABLE),this.nl=NaN,this.hl=NaN,this.C_=NaN,this.Rbt=NaN,this.wbt=NaN,this.Gy=NaN,this.Zo=NaN,this.bbt=NaN,this.Obt=NaN,this.Gbt=NaN,this.Pbt=NaN,this.vbt=C33.mn(C33.Rect),this.xbt=C33.mn(C33.nc),this.Lbt=DEFAULT_COLLISION_CELLS,this.Dbt=DEFAULT_RENDER_CELLS,this.Nbt=null,this.Fbt=null,this.Bbt=null,this.p_=DEFAULT_COLOR,this.kbt=DEFAULT_COLOR,this.$bt=null,this.Wbt=null,this.xs.IF().ZMt()&&(this.Wbt=C33.mn(C33.Vbt,this.xs,this)),this.Hbt=null,this.jwt=null,this.Ywt=null,this.Ubt=-1,this.Xbt=null}ewt(){this.JSt|=FLAG_DESTROYED}Sn(){if(this.Wut._Rt(this,this.Ibt,null),this.$bt&&(this.f3.Kg().dS(this.$bt),this.$bt=null),this.Nbt=null,this.Fbt&&(this.Fbt.jbt.Sn(),this.Fbt=null),this.Bbt&&(this.Bbt.clear(),this.Bbt=null),this.j6(),this.Wbt&&this.Wbt.Sn(),this.E6()&&this.l6().T6(this),this.iY()){const t=[...this.az()];for(const e of t)this.T6(e)}this.Ybt(),this.qbt(),sceneGraphExportDataMap.delete(this),sceneGraphZIndexMap.delete(this),this.xs=null,this.Wut=null,this.f3=null,this.Ibt=null}URt(t){if(enableUpdateRendererStateGroup=!1,this.D7(t[0],t[1]),this.L_(t[2]),this.aw(t[3],t[4]),this.Gy=0,this.tD()?this.zD(t[6]):this.Zo=0,tempColor.qa(t[7]),this.zbt(tempColor),this.Qnt(t[8]),this.eht(t[9]),this.S_(t[10]),this.Wbt&&this.Wbt.Jbt(t[12]),t[14]&&sceneGraphExportDataMap.set(this,{Kbt:t[14][1],Zbt:t[14][2]}),t[15]){const e=t[15],i=(this.U6(e[0],e[1]),this.K6()),r=e[2];for(let s=0,t=r.length;s<t;++s){const n=r[s];for(let t=0,e=n.length;t<e;++t){const h=n[t],o=i.CT(t,s);o.O_(h[0]),o.v_(h[1]),o.L_(h[2]),o.N_(h[3]),o.B_(h[4])}}}if(t[16]){const s=t[16][0],a=t[16][1],l=!!a,c=!l,u=this.f3.Twt();l&&u&&u.Tlt(this.xk(),a),c&&u&&u.Tlt(this.xk(),s)}enableUpdateRendererStateGroup=!0,this.Qbt()}XRt(){this.nl=0,this.hl=0,this.C_=0,this.Rbt=0,this.wbt=0,this.Gy=0,this.Zo=0,this.bbt=0,this.Obt=1,this.Gbt=0,this.Pbt=0,this.Qbt()}aL(){return this.f3}IF(){return this.Wut}xk(){return this.xs}tOt(){return this.x6()?this.eOt(this.l6().sOt()-this.Hbt.ibt()):0}O_(t){if(t=+t,this.M6()){const e=this.Hbt,s=t-this.b_(),i=-this.tOt();0==i?this.nl+=s/e.ebt():(this.nl+=Math.cos(i)*s/e.ebt(),this.w6()&&(this.hl+=Math.sin(i)*s/e.sbt()))}else this.nl=t}Dnt(t,e=!1){t=+t,!e&&this.M6()?this.O_(this.b_()+t):this.nl+=t}b_(){if(this.M6()){let t=this.nl,e=this.Hbt,s=this.l6(),i=this.tOt();return 0===i?t*=e.ebt():(t=t*e.ebt()*Math.cos(i),this.w6()&&(t-=this.hl*e.sbt()*Math.sin(i))),s.b_()+t}return this.nl}v_(t){if(t=+t,this.w6()){const e=this.Hbt,s=t-this.P_(),i=-this.tOt();0==i?this.hl+=s/e.sbt():(this.M6()&&(this.nl-=Math.sin(i)*s/e.ebt()),this.hl+=Math.cos(i)*s/e.sbt())}else this.hl=t}Nnt(t,e=!1){t=+t,!e&&this.w6()?this.v_(this.P_()+t):this.hl+=t}P_(){if(this.w6()){let t=this.hl,e=this.Hbt,s=this.l6(),i=this.tOt();return 0===i?t*=e.sbt():(t=t*e.sbt()*Math.cos(i),this.M6()&&(t+=this.nl*e.ebt()*Math.sin(i))),s.P_()+t}return this.hl}D7(t,e){if(t=+t,e=+e,this.iOt()){const s=this.M6(),i=this.w6(),r=this.Hbt,n=t-this.b_(),h=e-this.P_(),o=-this.tOt();if(0==o)s?this.nl+=n/r.ebt():this.nl=t,i?this.hl+=h/r.sbt():this.hl=e;else{const a=Math.sin(o),l=Math.cos(o);s?this.nl+=i?(l*n-a*h)/r.ebt():l*n/r.ebt():this.nl=t,i?this.hl+=s?(a*n+l*h)/r.sbt():l*h/r.sbt():this.hl=e}}else this.nl=t,this.hl=e}rOt(){return[this.b_(),this.P_()]}B7(t,e){t=+t,e=+e,this.iOt()?this.D7(this.b_()+t,this.P_()+e):(this.nl+=t,this.hl+=e)}bgt(t,e){return this.b_()===t&&this.P_()===e}L_(t){if(t=+t,this.D6()&&(t-=this.l6().x_()),this.C_!==t){this.C_=t,this.nOt();const e=this.V5();0!==this.C_&&e.yU(),e.Y5(this)}}nOt(){if(this.Qbt(),this.iY()){const s=this.az();for(let t=0,e=s.length;t<e;t++){const i=s[t];i.D6()&&i.nOt()}}}sht(t){this.L_(this.x_()+t)}x_(){return this.D6()?this.l6().x_()+this.C_:this.C_}W7(){return this.V5().x_()+this.x_()}TC(t){if(t=+t,this.O6()){const e=this.dC();0===e?this.Rbt=Number.EPSILON:this.Rbt*=t/e}else this.Rbt=t;this.hOt()}XC(t,e){t=+t,!e&&this.O6()?this.TC(this.dC()+t):this.Rbt+=t,this.hOt()}dC(){if(this.O6()){const t=this.l6(),e=t.dC(),s=t.$nt().knt();return s===Number.EPSILON?(this.$nt().knt()+e)*this.Rbt:e*this.Rbt}return this.Rbt}pC(t){if(t=+t,this.P6()){const e=this.IC();0===e?this.wbt=Number.EPSILON:this.wbt*=t/e}else this.wbt=t;this.hOt()}Unt(t,e){t=+t,!e&&this.P6()?this.pC(this.IC()+t):this.wbt+=t,this.hOt()}IC(){if(this.P6()){const t=this.l6(),e=t.IC(),s=t.$nt().Vnt();return s===Number.EPSILON?(this.$nt().Vnt()+e)*this.wbt:e*this.wbt}return this.wbt}aw(t,e){if(t=+t,e=+e,this.O6()){const s=this.dC();0===s?this.Rbt=Number.EPSILON:this.Rbt*=t/s}else this.Rbt=t;if(this.P6()){const i=this.IC();0===i?this.wbt=Number.EPSILON:this.wbt*=e/i}else this.wbt=e;this.hOt()}du(){return[this.dC(),this.IC()]}vj(){return this.Gy}oOt(t){if(t<0)throw new RangeError("invalid depth");this.Gy=t}aOt(){if(this.E6()){const t=this.Hbt;return Math.min(t.ebt(),t.sbt())}return 1}tD(){return 0!=(this.JSt&FLAG_IS_ROTATABLE)}zD(t){t=+t,this.tD()&&(this.x6()&&(t-=this.l6().GetAngle()),t=C33.In(t),this.Zo!==t)&&(this.Zo=t,this.hOt())}Xnt(t){0!==(t=+t)&&this.tD()&&(this.Zo=C33.In(this.Zo+t),this.hOt())}hOt(){if(this.JSt|=FLAG_SIN_COS_ANGLE_CHANGED,this.iY()){const s=this.az();for(let t=0,e=s.length;t<e;t++)s[t].hOt()}}GetAngle(){return this.x6()&&this.tD()?this.eOt(C33.In(this.l6().sOt()+this.Zo)):this.Zo}sOt(){return this.x6()&&this.tD()?C33.In(this.l6().sOt()+this.Zo):this.Zo}eOt(t){return this.O6()&&this.u6().dC()<0&&(t=C33.In(C33.Dn(t,this.u6().GetAngle()+Math.PI))),t=this.P6()&&this.u6().IC()<0?C33.Dn(t,this.u6().GetAngle()):t}lOt(){const t=this.l6();return!!(this.O6()&&t.dC()<0)||!!(this.P6()&&t.IC()<0)}cOt(){const t=this.l6();return!!(this.O6()&&t.dC()<0&&this.P6()&&t.IC()<0)}uOt(){const t=this.JSt;if(0!=(t&FLAG_SIN_COS_ANGLE_CHANGED)){const e=this.GetAngle();this.bbt=Math.sin(e),this.Obt=Math.cos(e),this.JSt=t&~FLAG_SIN_COS_ANGLE_CHANGED}}Pgt(){return this.uOt(),this.bbt}Ggt(){return this.uOt(),this.Obt}Qnt(t){this.Gbt=+t}Znt(t){this.Gbt+=+t}XB(){return this.Gbt}eht(t){this.Pbt=+t}tht(t){this.Pbt+=+t}YB(){return this.Pbt}zbt(t){this.p_.equals(t)||(this.p_===DEFAULT_COLOR?(this.p_=C33.mn(C33.qo,t),this.kbt=C33.mn(C33.qo,t),this.kbt.Ra()):t.Ea(1,1,1,1)?(this.p_=DEFAULT_COLOR,this.kbt=DEFAULT_COLOR):(this.p_.set(t),this.kbt.set(t),this.kbt.Ra()),this.Qbt())}VO(t){if(t=C33.En(+t,0,1),this.F6()){if(this.$nt().vgt()===t)return;this.$nt().tbt(t),t=this.$O()}else if(this.p_.a===t)return;this.fOt(t)}dOt(){if(this.iY()){const s=this.az();for(let t=0,e=s.length;t<e;t++){const i=s[t];i.fOt(i.$O())}}}fOt(t){tempColor.la(this.p_),tempColor.a=t,this.zbt(tempColor),this.dOt()}qnt(t){this.F6()?this.VO(this.$nt().vgt()+t):this.VO(this.$O()+t)}$O(){return this.F6()?this.l6().$O()*this.$nt().vgt():this.p_.a}J7(t){this.p_.Ta(t)||(tempColor.la(t),tempColor.a=this.$O(),this.zbt(tempColor))}wnt(t,e,s){tempColor.ta(t,e,s),this.J7(tempColor)}pOt(t,e,s){0===t&&0===e&&0===s||(tempColor.la(this.p_),tempColor.r+=t,tempColor.g+=e,tempColor.b+=s,this.J7(tempColor))}z7(){return this.p_}VH(){return this.kbt}V6(){return 0!=(this.JSt&FLAG_DESTROY_WITH_PARENT)}COt(t){this.mOt(FLAG_DESTROY_WITH_PARENT,t)}M6(){return 0!=(this.JSt&FLAG_TRANSFORM_WITH_PARENT_X)}SOt(t){this.mOt(FLAG_TRANSFORM_WITH_PARENT_X,t)}w6(){return 0!=(this.JSt&FLAG_TRANSFORM_WITH_PARENT_Y)}iOt(){return 0!=(this.JSt&(FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y))}gOt(t){this.mOt(FLAG_TRANSFORM_WITH_PARENT_Y,t)}O6(){return 0!=(this.JSt&FLAG_TRANSFORM_WITH_PARENT_W)}_Ot(t){this.mOt(FLAG_TRANSFORM_WITH_PARENT_W,t)}P6(){return 0!=(this.JSt&FLAG_TRANSFORM_WITH_PARENT_H)}TOt(t){this.mOt(FLAG_TRANSFORM_WITH_PARENT_H,t)}x6(){return 0!=(this.JSt&FLAG_TRANSFORM_WITH_PARENT_A)}yOt(t){this.mOt(FLAG_TRANSFORM_WITH_PARENT_A,t)}D6(){return 0!=(this.JSt&FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION)}EOt(t){this.mOt(FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION,t)}F6(){return 0!=(this.JSt&FLAG_TRANSFORM_WITH_PARENT_OPACITY)}IOt(t){this.mOt(FLAG_TRANSFORM_WITH_PARENT_OPACITY,t)}k6(){return 0!=(this.JSt&FLAG_TRANSFORM_WITH_PARENT_VISIBILITY)}AOt(t){this.mOt(FLAG_TRANSFORM_WITH_PARENT_VISIBILITY,t)}MOt(){this.JSt&=~MASK_ALL_SCENE_GRAPH_FLAGS}_6(t,e){if(t===this)return!1;if(t.E6())return!1;if(this.ROt(t))return!1;if(this.wOt(t))return!1;const s=t.b_(),i=t.P_(),r=t.dC(),n=t.IC(),h=t.GetAngle(),o=t.x_(),a=t.$O();if(t.bOt(this),t.SOt(e.A6),t.gOt(e.R6),t._Ot(e.b6),t.TOt(e.G6),t.yOt(e.v6),t.EOt(e.L6),t.IOt(e.N6),t.AOt(e.B6),t.COt(e.W6),e.A6&&(t.nl=s-this.b_(),e.b6)){const l=this.dC()/this.Hbt.knt();0!=l&&(t.nl/=l)}if(e.R6&&(t.hl=i-this.P_(),e.G6)){const c=this.IC()/this.Hbt.Vnt();0!=c&&(t.hl/=c)}if(e.b6){const u=this.dC();0===u||u===Number.EPSILON?(t.Rbt=1,t.Hbt.Zwt(1)):(t.Rbt=r/this.dC(),t.Hbt.Zwt(t.Rbt))}if(e.G6){const f=this.IC();0===f||f===Number.EPSILON?(t.wbt=1,t.Hbt.Qwt(1)):(t.wbt=n/this.IC(),t.Hbt.Qwt(t.wbt))}return e.v6&&(t.Zo=h-this.GetAngle()),e.L6&&(t.C_=o-this.x_()),e.N6&&t.Hbt.tbt(a),e.B6&&t.PN(this.xN()),this.OOt(t),this.L7(),this.dOt(),!0}T6(t){if(t.l6()===this){const e=t.b_(),s=t.P_(),i=t.dC(),r=t.IC(),n=t.GetAngle(),h=t.x_(),o=t.$O();t.bOt(null),t.MOt(),t.D7(e,s),t.aw(i,r),t.zD(n),t.L_(h),t.VO(o),this.GOt(t),this.L7()}}POt(){return this.Ubt}vOt(){this.xOt();const t=[...this.children()];for(const s of t)this.T6(s);const e=this.l6();e&&e.T6(this),this.MOt()}xOt(){if(this.LOt(),!this.jwt){const e=[...this.children()];e.length&&(this.jwt=[],this.Ywt=new WeakMap);let t=0;for(const s of e){const i=s.xk();this.jwt.push(i),this.Ywt.set(i,t),t++}}const t=this.l6();t&&t.xOt()}LOt(){if(-1===this.Ubt){const t=[...this.f6()];this.Ubt=t.length;for(const s of t)s.LOt();const e=[...this.children()];for(const i of e)i.LOt()}}qbt(){this.jwt&&(this.jwt.length=0),this.jwt=null,this.Ywt=null;const t=this.l6();t&&t.qbt(),this.Ubt=-1}E6(){return null!==this.l6()}l6(){const t=this.Hbt;return null!==t?t.l6():null}u6(){let t=this;for(;t.E6();)t=t.l6();return t}*f6(){let t=this.l6();for(;t;)yield t,t=t.l6()}dwt(t){return this.az().includes(t)}iY(){const t=this.Hbt;return null!==t&&t.iY()}az(){const t=this.Hbt;return null!==t?t.az():EMPTY_ARRAY}children(){return this.az()}*S6(){for(const t of this.children())yield t,yield*t.S6()}p6(){return this.az().length}Wgt(){return[...this.S6()].length}m6(t){const e=this.az();return(t=Math.floor(+t))<0||t>=e.length?null:e[t]}Swt(e){if(e){const s=this.az();if(s)for(let t=0;t<s.length;t++)if(e===s[t])return t}return NaN}DOt(t){this.Hbt||(this.Hbt=C33.mn(C33.cz,this)),t&&this.Hbt.zwt(t)}$nt(){return this.Hbt}Ybt(){this.Hbt&&(this.Hbt.Sn(),this.Hbt=null)}bOt(t){t?(t.DOt(null),this.DOt(t)):(this.Hbt&&this.Hbt.zwt(null),this.iY()||this.Ybt())}wOt(t){if(!this.E6())return!1;const e=this.l6();return e===t||e.wOt(t)}ROt(t){if(this.dwt(t))return!0;for(const e of this.az())if(e.ROt(t))return!0;return!1}OOt(t){this.Hbt.az().push(t)}GOt(t){const e=this.Hbt.az(),s=e.indexOf(t);-1!==s&&e.splice(s,1),0!==e.length||this.E6()||this.Ybt(),t.iY()||t.Ybt()}_wt(){const t=sceneGraphExportDataMap.get(this);return t?t.Kbt:null}NOt(){const t=sceneGraphExportDataMap.get(this);return t?t.Zbt:NaN}sY(){const t=sceneGraphZIndexMap.get(this);return C33.Si(t)?t:NaN}FOt(t){sceneGraphZIndexMap.set(this,t)}BOt(){this.mOt(FLAG_USE_POINTS_SHADER_PROGRAM,!0),this.Qbt()}Qbt(){if(enableUpdateRendererStateGroup){const e=this.f3.Kg();this.$bt&&e.dS(this.$bt);let t;t=0!=(this.JSt&FLAG_USE_POINTS_SHADER_PROGRAM)?e.z2()||"<point>":e.j2()||"<default>",this.$bt=e.lS(t,this.rF(),this.kbt,this.x_())}}kj(){return this.$bt}WU(){return this.p_===DEFAULT_COLOR}S_(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.rF()!==t&&(this.JSt=this.JSt&~FLAG_BLEND_MODE_MASK|t<<FLAG_BLEND_MODE_BIT_OFFSET,this.Qbt())}rF(){return(this.JSt&FLAG_BLEND_MODE_MASK)>>FLAG_BLEND_MODE_BIT_OFFSET}j5(t,e){const s=e&&this.Ibt!==t;s&&this._U(),this.Wut._Rt(this,this.Ibt,t),this.Ibt=t,s&&this.kOt(),0!==this.x_()&&this.Ibt.yU()}V5(){return this.Ibt}y5(){return this.V5().y5()}IU(t){this.Abt=0|t}H5(){return this.Ibt.LX(),this.Abt}BX(t){this.Mbt=0|t}x8(){return this.Ibt.NX(),this.Mbt}IV(){return this.Abt}mOt(t,e){e?this.JSt|=t:this.JSt&=~t}xN(){return 0!=(this.JSt&FLAG_IS_VISIBLE)}PN(t){if(this.mOt(FLAG_IS_VISIBLE,t),this.iY())for(const e of this.az())e.k6()&&e.PN(t)}h6(){return 0!=(this.JSt&FLAG_COLLISION_ENABLED)}o6(t){t=!!t,this.h6()!==t&&(this.mOt(FLAG_COLLISION_ENABLED,t),t?this.L7():this.$Ot())}WOt(t,e){if(this.mOt(FLAG_SOLID_FILTER_INCLUSIVE,t),this.Bbt&&this.Bbt.clear(),e.trim()){this.Bbt||(this.Bbt=new Set);for(const s of e.split(" "))s&&this.Bbt.add(s.toLowerCase())}else this.Bbt=null}VOt(t){const e=0!=(this.JSt&FLAG_SOLID_FILTER_INCLUSIVE),s=this.Bbt;if(t&&s)for(const i of s)if(t.has(i))return e;return!e}L7(){if(this.JSt|=FLAG_BBOX_CHANGED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED,this.Wut.mRt(!0),this.f3.q5(),this.Ibt.tU()&&(this.HOt(this.vbt,this.xbt,!0),this.JSt&=~FLAG_BBOX_CHANGED,this.kOt()),0!=(this.JSt&FLAG_ENABLE_BBOX_CHANGED_EVENT)&&this.xs.q3().dispatchEvent(bboxChangeEvent),null!==this.Hbt){const s=this.Hbt.az();for(let t=0,e=s.length;t<e;++t)s[t].L7()}}HOt(t,e,s){const i=this.b_(),r=this.P_(),n=this.dC(),h=this.IC(),o=this.GetAngle();t.Tl(i-this.Gbt*n,r-this.Pbt*h,n,h),s&&this.J6()&&this.UOt(t),0===o?e.Oc(t):(t.offset(-i,-r),e.Pc(t,this.Pgt(),this.Ggt()),e.offset(i,r),e.vc(t)),t.normalize()}XOt(){const t=this.JSt;0!=(t&FLAG_BBOX_CHANGED)&&(this.HOt(this.vbt,this.xbt,!0),this.JSt=t&~FLAG_BBOX_CHANGED)}H7(){return this.XOt(),this.vbt}X7(){return this.XOt(),this.xbt}jOt(t){const e=this.b_(),s=this.P_(),i=Math.round(e)-e,r=Math.round(s)-s;return 0==i&&0==r?t:(tempQuad.A(t),tempQuad.offset(i,r),tempQuad)}YOt(t){this.vbt.A(t),this.xbt.Oc(this.vbt),this.JSt&=~FLAG_BBOX_CHANGED,this.gRt(),this.kOt()}qOt(t){this.mOt(FLAG_ENABLE_BBOX_CHANGED_EVENT,t)}zOt(){return 0!=(this.JSt&FLAG_ENABLE_BBOX_CHANGED_EVENT)}wj(t,e,s){return e&&0!==this.vj()?this.Gj(this.V5().Oj()):0===this.x_()||s?t.Zl(this.H7()):this.JOt()}JOt(){const t=this.V5(),e=this.W7();return!(e>=t.nX())&&(t.iX(e,tempRect),tempRect.Zl(this.H7()))}Gj(t){const e=this.H7(),s=e.bl(),i=e.Gl(),r=e.Ol(),n=e.Pl(),h=this.W7(),o=h+this.vj();return t.Rm(s,r,h,i,n,o)}Y7(){const t=this.V5();if(t.gX())return this.Gj(t.Oj());{const e=t.y5();return this.wj(t.aF(),e.Rj(),e.EN())}}Nj(t){this.mOt(FLAG_DRAW_BACK_FACE_ONLY,t)}Dj(t){this.mOt(FLAG_DRAW_NON_BACK_FACES_ONLY,t)}KOt(){return 0!=(this.JSt&FLAG_DRAW_BACK_FACE_ONLY)}ZOt(){return 0!=(this.JSt&FLAG_DRAW_NON_BACK_FACES_ONLY)}QOt(t){this.Nbt=t,this.tGt(),this.J6()&&(this.Xbt.eGt=null)}sGt(){return this.Nbt}iGt(){return null!==this.Nbt||this.J6()}rGt(){return this.nGt(this.dC(),this.IC(),this.GetAngle(),this.Pgt(),this.Ggt())}hGt(t,e,s){let i=0,r=1;return 0!==s&&(i=Math.sin(s),r=Math.cos(s)),this.nGt(t,e,s,i,r)}nGt(r,n,t,h,o){let e=this.Fbt;null===e&&(e={jbt:C33.mn(C33.Vc),width:NaN,height:NaN,angle:NaN},this.Fbt=e);const a=e.jbt;if(e.width!==r||e.height!==n||e.angle!==t){const l=this.Nbt;if(this.J6()){let t=this.XB(),e=this.YB(),s=this.K6(),i=this.Xbt.eGt;i||(l?(tempCollisionPoly.A(l),tempCollisionPoly.offset(t,e)):tempCollisionPoly.Jc(),i=s._T(tempCollisionPoly),this.Xbt.eGt=i),s.TT(i,a),a.offset(-t,-e),a.tu(r,n,h,o)}else l?(a.A(l),a.tu(r,n,h,o)):a.Qc(this.X7(),-this.b_(),-this.P_());e.width=r,e.height=n,e.angle=t}return a}tGt(){this.oGt(!0);const t=this.Fbt;null!==t&&(t.width=NaN)}U6(t,e){if(t=Math.floor(t),e=Math.floor(e),!this.xk()._D().aD())throw new Error("object does not support mesh");this.j6(),this.Xbt={aGt:C33.mn(C33.fm.Y_,t,e),lGt:C33.mn(C33.fm.Y_,t,e),eGt:null}}J6(){return null!==this.Xbt}K6(){if(this.J6())return this.Xbt.aGt;throw new Error("no mesh")}cGt(){if(this.J6())return this.Xbt.lGt;throw new Error("no mesh")}uGt(t){this.mOt(FLAG_MESH_CHANGED,t)}fGt(){return 0!=(this.JSt&FLAG_MESH_CHANGED)}oGt(t){this.mOt(FLAG_PHYSICS_BODY_CHANGED,t)}dGt(){return 0!=(this.JSt&FLAG_PHYSICS_BODY_CHANGED)}UOt(t){const e=this.Xbt.aGt,s=Math.min(e.lT(),0),i=Math.min(e.cT(),0),r=Math.max(e.uT(),1),n=Math.max(e.fT(),1),h=t.width(),o=t.height();t.offsetLeft(s*h),t.offsetTop(i*o),t.Bl((r-1)*h),t.kl((n-1)*o),this.Gy=e.dT()}j6(){this.Xbt&&(this.Xbt.aGt.Sn(),this.Xbt.lGt.Sn(),this.Xbt=null,this.tGt())}q6(t,e,s){t=Math.floor(t),e=Math.floor(e);const i=s.mode||"absolute";if(!VALID_SET_MESH_POINT_MODES.has(i))throw new Error("invalid mode");let r="relative"===i,n=s.x,h=s.y,o=s.KN,a="number"==typeof s.u?s.u:r?0:-1,l="number"==typeof s.v?s.v:r?0:-1;if(!this.J6())return!1;const c=this.K6(),u=c.CT(t,e);if(null===u)return!1;let f=!1;return"number"==typeof o&&u.x_()!==o&&(u.L_(o),f=!0),r&&(n+=t/(c.rT()-1),h+=e/(c.nT()-1)),a=-1!==a||r?(r&&(a+=t/(c.rT()-1)),C33.En(a,0,1)):u.D_(),l=-1!==l||r?(r&&(l+=e/(c.nT()-1)),C33.En(l,0,1)):u.F_(),u.b_()===n&&u.P_()===h&&u.D_()===a&&u.F_()===l?f:(u.O_(n),u.v_(h),u.N_(a),u.B_(l),this.tGt(),!0)}twt(){return this.xs.twt()}a6(t,e){return!!this.H7().tc(t,e)&&!!this.X7().tc(t,e)&&(this.twt()?this.xs.rB().BEt(t,e):!this.iGt()||this.rGt().tc(t-this.b_(),e-this.P_()))}pGt(){return 0!=(this.JSt&FLAG_COLLISION_CELL_CHANGED)}gRt(){if(this.pGt()&&this.h6()&&0==(this.JSt&FLAG_DESTROYED)){const t=this.H7(),e=this.Wut.CRt(),s=this.Lbt;if(tempRect.set(e.$V(t.bl()),e.WV(t.Ol()),e.$V(t.Gl()),e.WV(t.Pl())),!s.equals(tempRect)){const i=this.xs;s===DEFAULT_COLLISION_CELLS?(e.VV(i,null,tempRect),this.Lbt=C33.mn(C33.Rect,tempRect)):(e.VV(i,s,tempRect),s.A(tempRect)),this.JSt&=~FLAG_COLLISION_CELL_CHANGED}}}CGt(){this.JSt|=FLAG_COLLISION_CELL_CHANGED}$Ot(){const t=this.Lbt;t!==DEFAULT_COLLISION_CELLS&&(this.Wut.CRt().VV(this.xs,t,null),this.Lbt=DEFAULT_COLLISION_CELLS)}kOt(){const t=this.V5();if(t.tU()&&0==(this.JSt&FLAG_DESTROYED)){const e=t.HU(),s=this.H7(),i=this.Dbt;if(tempRect.set(e.$V(s.bl()),e.WV(s.Ol()),e.$V(s.Gl()),e.WV(s.Pl())),!i.equals(tempRect)){const r=this.xs;i===DEFAULT_RENDER_CELLS?(e.VV(r,null,tempRect),this.Dbt=C33.mn(C33.Rect,tempRect)):(e.VV(r,i,tempRect),i.A(tempRect)),t.UU()}}}_U(){const t=this.Dbt;t!==DEFAULT_RENDER_CELLS&&(this.V5().HU().VV(this.xs,t,null),this.Dbt=DEFAULT_RENDER_CELLS)}DX(){return this.Dbt}Z7(){const t=this.xs,e=this.Ibt,s=e.X5();s.length&&s.at(-1)===t||(e.gU(t,!1),e.CU(t,!1),this.f3.q5())}t6(){const t=this.xs,e=this.Ibt,s=e.X5();s.length&&s[0]===t||(e.gU(t,!1),e.SU(t,!1),this.f3.q5())}s6(t){const e=this.xs,s=this.Ibt;if(s.y5()!==t.y5())throw new Error("layer from different layout");t!==s&&(s.gU(e,!0),this.j5(t),t.CU(e,!0),this.f3.q5())}r6(t,e){let s=this.xs,i=!1,r=this.Ibt;if(t.NF()!==s.NF()){const n=t.W5();if(!n)throw new Error("expected world instance");const h=n.V5(),o=(r.F4()!==h.F4()&&(r.gU(s,!0),this.j5(h),h.CU(s,!0),i=!0),h.$X(s,t,!!e));(i||o)&&this.f3.q5()}}v7(){return this.Wbt}mGt(t){this.mOt(FLAG_HAS_ANY_ACTIVE_EFFECT,t)}YX(){return 0!=(this.JSt&FLAG_HAS_ANY_ACTIVE_EFFECT)}Qj(t,e=null){const s={x:this.b_(),y:this.P_(),w:this.dC(),h:this.IC(),l:this.V5().NU(),zi:this.H5()},i=(0!==this.x_()&&(s.ze=this.x_()),0!==this.GetAngle()&&(s.a=this.sOt()),this.WU()||(s.c=this.p_.toJSON()),.5!==this.XB()&&(s.oX=this.XB()),.5!==this.YB()&&(s.oY=this.YB()),0!==this.rF()&&(s.bm=this.rF()),this.xN()||(s.v=this.xN()),this.h6()||(s.ce=this.h6()),this.zOt()&&(s.be=this.zOt()),this.Wbt&&(s.fx=this.Wbt.Qj()),0!=(this.JSt&FLAG_SOLID_FILTER_INCLUSIVE));return i&&(s.sfi=i),this.Bbt&&(s.sft=[...this.Bbt].join(" ")),this.Hbt&&"visual-state"!==t&&(s.sgi=this.Hbt.Qj(t,e),sceneGraphExportDataMap.has(this))&&(s.sgcd=sceneGraphExportDataMap.get(this).Kbt,s.sgzid=sceneGraphExportDataMap.get(this).Zbt),this.J6()&&(s.mesh=this.K6().V_()),s}lbt(){return{x:this.nl,y:this.hl,z:this.C_,w:this.Rbt,h:this.wbt,a:this.Zo,sgi:this.$nt()?this.$nt().rbt():null}}dbt(t){t&&(this.nl=t.x,this.hl=t.y,this.C_=t.z,this.Rbt=t.w,this.wbt=t.h,this.Zo=t.a,t.sgi&&this.$nt()&&this.$nt().tY(t.sgi),this.hOt(),this.L7())}RRt(){this.qbt(),this.vOt(),this.DOt(null),this.Hbt&&this.Hbt.ubt(this.jwt,this.Ywt)}TJ(t){"visual-state"!==t&&this.vOt()}EJ(t,e="full",s=null){t.hasOwnProperty("sgi")&&"visual-state"!==e&&0==(this.JSt&FLAG_DESTROYED)&&this.Hbt.EJ(t.sgi,s)}Nwt(t,e="full",s){t.hasOwnProperty("sgi")&&"visual-state"!==e&&0==(this.JSt&FLAG_DESTROYED)&&(this.Hbt.ubt(null,null),this.qbt(),this.L7())}tY(t,e){if(enableUpdateRendererStateGroup=!1,this.O_(t.x),this.v_(t.y),this.TC(t.w),this.pC(t.h),this.IU(t.zi),this.L_(t.hasOwnProperty("ze")?t.ze:0),this.zD(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?tempColor.qa(t.c):t.hasOwnProperty("o")?(tempColor.la(this.p_),tempColor.a=t.o):tempColor.Qo(1,1,1,1),this.zbt(tempColor),this.Qnt(t.hasOwnProperty("oX")?t.oX:.5),this.eht(t.hasOwnProperty("oY")?t.oY:.5),this.S_(t.hasOwnProperty("bm")?t.bm:0),this.PN(!t.hasOwnProperty("v")||t.v),this.o6(!t.hasOwnProperty("ce")||t.ce),this.qOt(!!t.hasOwnProperty("be")&&t.be),this.WOt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.Wbt&&t.hasOwnProperty("fx")&&this.Wbt.tY(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==e&&this.jwt)for(const s of this.jwt)s.k8()||this.f3.OF(s);if(t.hasOwnProperty("sgi")&&"visual-state"!==e){this.DOt(null);const i=this.Hbt,r=t.sgi;i.tY(r),i.ubt(this.jwt,this.Ywt),t.sgcd&&C33.Si(t.sgzid)&&sceneGraphExportDataMap.set(this,{Kbt:t.sgcd,Zbt:t.sgzid})}if(t.hasOwnProperty("mesh")){const n=t.mesh;this.U6(n.cols,n.rows),this.K6().H_(n)}else this.j6();this.L7(),enableUpdateRendererStateGroup=!0,this.Qbt(),"visual-state"!==e&&this.f3.SGt(this.xk(),t)}}}{const C33=self.Ve;C33.hMt=class BehaviorType extends C33.pn{constructor(t,e){super();const s=t.aL(),i=s.K1t(e[1]),r=(s.gGt().LIt(i),this.f3=s,this.Wut=t,this.dIt=C33.XL._B(i),this.Kyt=null,this._Gt=null,this.FAt=i.Instance,this.rH=e[2],this.Tn=e[0],this.Lmt=this.f3.S0t(e[3]),this.dIt.OSt());if(r<2&&(this.Kyt=C33.mn(i.IMt,this),!(this.Kyt instanceof C33.fIt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(C33.XL.xyt(this,r),2<=r){const n=i.IMt??globalThis.Q8;if(this._Gt=new n,!(this._Gt instanceof globalThis.Q8))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this._Gt=new globalThis.SB;C33.XL.Lyt(r),this.Oyt()}static mE(t,e){return C33.mn(C33.hMt,t,e)}Sn(){this.f3=null,this.dIt=null,this.Kyt&&(this.Kyt.Sn(),this.Kyt=null),this.FAt=null}Mgt(){return this.Kyt}Oyt(){this.Kyt?this.Kyt.Oyt():this._Gt&&this._Gt.Kk()}aL(){return this.f3}IF(){return this.Wut}uB(){return this.dIt}XMt(){return this.FAt}i3(){return this.Tn}NU(){return this.rH}dB(){return this._Gt}S0t(){return this.Lmt}}}{const C33=self.Ve,IBehaviorInstance=self.lB;C33.kRt=class BehaviorInstance extends C33.pn{constructor(t){super(),this.f3=t.runtime,this.d2t=t.fB,this.dIt=this.d2t.uB(),this.xs=t.CB,this.tm=t.index,this.PRt=null,this.vRt=null,this.dIt.CU(this.xs)}Sn(){this.vRt&&(this.vRt.bF(),this.vRt=null),this.dIt.gU(this.xs),this.PRt&&(this.PRt.Sn(),this.PRt=null),this.f3=null,this.d2t=null,this.dIt=null,this.xs=null}$Mt(t){if(this.PRt)throw new Error("already got sdk instance");const e=this.uB().OSt();if(e<2){if(this.PRt=C33.mn(this.d2t.XMt(),this,t),!(this.PRt instanceof C33.pIt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.uB().Gyt();this.vyt(s.Instance,t)}}rB(){return this.PRt??this.vRt}mB(){return this.xs}aL(){return this.f3}pB(){return this.d2t}uB(){return this.dIt}dnt(){return this.tm}gIt(){this.PRt?this.PRt.gIt():this.vRt.i$()}EIt(t,e){this.PRt&&this.PRt.EIt(t,e)}Dwt(){return this.PRt?this.PRt.gEt():this.vRt.T7()}V_(t="full"){return this.PRt?this.PRt.V_(t):this.vRt.y7(t)}H_(t,e="full"){if(this.PRt)return this.PRt.H_(t,e);this.vRt.E7(t,e)}static TGt(t,e,s){let i=globalThis.t$,r,n;r=e instanceof i?t.aN(e):e.SIt(),n=s instanceof i?t.aN(s):s.SIt();const h=r.mB(),o=n.mB(),a=h.IF().F4(),l=o.IF().F4();if(a!==l)return a-l;const c=h.Iwt(),u=o.Iwt();return c!==u?c-u:r.dnt()-n.dnt()}vyt(t,e){const s=IBehaviorInstance,i=t??this.PRt.Gyt(),r=i||s,n=this.uB().OSt();if(C33.XL.xyt(this,n),C33.XL.DIt(e),this.vRt=new r,C33.XL.NIt(),C33.XL.Lyt(n),!i||this.vRt instanceof s)return this.vRt;throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${s.name}'`)}tEt(){return this.vRt||this.vyt()}EEt(){return!!this.vRt}}}{const C33=self.Ve;C33.$H=class EffectList extends C33.pn{constructor(t,e){super(),this.J_=t,this.yGt=[],this.EGt=[],this.IGt=new Map,this.AGt=[],this.MGt=[],this.RGt=new Set,this.kg=!0;for(const s of e){const i=C33.mn(C33.wGt,this,s,this.yGt.length);this.yGt.push(i),this.IGt.set(i.i3().toLowerCase(),i),3<=s.length&&this.AGt.push(this.bGt(i,s[2]))}this.aL().OGt(this)}Sn(){this.aL().GGt(this);for(const t of this.MGt)t.Sn();C33.Vh(this.MGt),C33.Vh(this.yGt),C33.Vh(this.EGt),this.IGt.clear(),C33.Vh(this.AGt),this.J_=null}PGt(t){this.RGt.add(t)}vGt(t){this.RGt.delete(t)}xGt(t){t.F2()&&(this.MGt=this.yGt.map(t=>{const e=t.CI();return 0<e.GetCustomParametersByteSize()?C33.mn(C33.fm.WebGPUEffectCustomParamsBuffer,e):null}),this.LGt());for(const e of this.RGt)e.xGt(t)}BMt(t){if(t.length){this.yGt=t.concat(this.yGt);for(const e of t)this.IGt.set(e.i3().toLowerCase(),e);for(let t=0,e=this.yGt.length;t<e;++t)this.yGt[t].PU(t)}}bGt(t,e){t.DGt(e[0]);const s=e.slice(1);for(let t=0,e=s.length;t<e;++t){const i=s[t];if(Array.isArray(i)){const r=C33.mn(C33.qo);r.qa(i),s[t]=r}}return s}hT(){return this.J_}aL(){return this.J_.aL()}EB(){C33.Vh(this.EGt);let t=!0;for(const e of this.yGt)e.Fpt()&&(this.EGt.push(e),e.CI().i_()||(t=!1));this.kg=t}UD(){return this.yGt}QMt(){return 0<this.yGt.length}mrt(t){return this.IGt.get(t.toLowerCase())||null}NGt(t){if((t=Math.floor(+t))<0||t>=this.yGt.length)throw new RangeError("invalid effect type index");return this.yGt[t]}TB(t){return this.NGt(t).Fpt()}yB(t,e){this.NGt(t).DGt(e)}VU(){return this.EGt}YX(){return 0<this.EGt.length}i_(){return this.kg}Crt(t){return this.AGt[t]}UH(t){return(t<this.MGt.length?this.MGt:this.AGt)[t]}IB(t,e){if(t<0||t>=this.AGt.length)return null;const s=this.AGt[t];return e<0||e>=s.length?null:s[e]}AB(t,e,s){if(t<0||t>=this.AGt.length)return!1;const i=this.AGt[t];if(e<0||e>=i.length)return!1;const r=i[e];if(r instanceof C33.qo){if(r.Ta(s))return!1;r.la(s)}else{if(r===s)return!1;i[e]=s}return t<this.MGt.length&&this.MGt[t].SetParameterValue(e,s),!0}LGt(){const s=this.AGt,i=this.MGt;for(let t=0,e=Math.min(s.length,i.length);t<e;++t){const r=i[t],n=s[t];for(let t=0,e=n.length;t<e;++t)r.SetParameterValue(t,n[t])}}static FGt(t){return t&&t instanceof C33.qo?{t:"color",v:t.toJSON()}:t}static BGt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const e=t.t;if("color"!==e)throw new Error("invalid effect parameter type");{const s=C33.mn(C33.qo);return s.qa(t.v),s}}}static kGt(t){return t.map(C33.$H.FGt)}static $Gt(t){return t.map(C33.$H.BGt)}V_(){return this.yGt.map(t=>({name:t.i3(),active:t.Fpt(),params:C33.$H.kGt(this.AGt[t.F4()])}))}H_(t){for(const e of t){const s=this.mrt(e.name);s&&(s.DGt(e.active),this.AGt[s.F4()]=C33.$H.$Gt(e.params))}this.EB(),this.LGt()}}}{const C33=self.Ve;C33.wGt=class EffectType extends C33.pn{constructor(t,e,s){super(),this.kH=t,this.C3=e[0],this.Tn=e[1],this.tm=s,this.u_=null,this.Sf=!0}Sn(){this.kH=null,this.u_=null}FMt(t){const e=C33.mn(C33.wGt,t,[this.C3,this.Tn],-1);return e.u_=this.u_,e.Sf=this.Sf,e}xGt(t){const e=t.X2(this.C3);if(!e)throw new Error("failed to find shader program '"+this.C3+"'");this.u_=e}HD(){return this.kH}i3(){return this.Tn}PU(t){this.tm=t}F4(){return this.tm}hT(){return this.kH.hT()}aL(){return this.kH.aL()}DGt(t){this.Sf=!!t}Fpt(){return this.Sf}CI(){return this.u_}WGt(){const s=[];for(let t=0,e=this.u_.mI();t<e;++t){const i=this.u_.SI(t);if("float"===i||"percent"===i)s.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");s.push(C33.mn(C33.qo,1,1,1,1))}}return s}}}{const C33=self.Ve;C33.Vbt=class InstanceEffectList extends C33.pn{constructor(t,e){super(),this.xs=t,this.VGt=e,this.kH=t.IF().HD(),this.HGt=!0,this.jH=!0,this.UGt=!1,this.XGt=!1,this.jGt=!1,this.YGt=!1,this.x4=C33.mn(C33.fm.OP,t.aL().g8().WH(),{gP:(t,e)=>{const s=e.M4(),i=s.W5();t.g_(i.VH()),t.wS(i.W7()),s.ST(t),t.wS(0)},_P:t=>{const e=t.xEt(),[s,i]=t.vEt();return{g4:e,_4:s,T4:i}},TP:t=>this.UH(t)}),this.qGt=[],this.EGt=[],this.kg=!0,this.AGt=[],this.MGt=[],this.xGt(t.aL().Kg());for(let t=0,e=this.kH.UD().length;t<e;++t)this.qGt.push(!0);this.EB(),this.kH.PGt(this)}Sn(){this.kH.vGt(this);for(const t of this.MGt)t&&t.Sn();C33.Vh(this.MGt),this.x4.Sn(),this.x4=null,C33.Vh(this.qGt),C33.Vh(this.EGt),C33.Vh(this.AGt),this.xs=null,this.kH=null}xGt(t){t.F2()&&(this.MGt=this.kH.UD().map(t=>{const e=t.CI();return 0<e.GetCustomParametersByteSize()?C33.mn(C33.fm.WebGPUEffectCustomParamsBuffer,e):null}))}Jbt(t){let e=0;for(const s of t)this.AGt.push(this.bGt(e,s)),++e;this.LGt(),this.EB()}bGt(t,e){this.qGt[t]=e[0];const s=e.slice(1);for(let t=0,e=s.length;t<e;++t){const i=s[t];if(Array.isArray(i)){const r=C33.mn(C33.qo);r.qa(i),s[t]=r}}return s}jRt(){for(const t of this.kH.UD())this.AGt.push(t.WGt());this.LGt()}hT(){return this.J_}HD(){return this.kH}N4(){return this.$U(),this.x4}aL(){return this.xs.aL()}EB(){C33.Vh(this.EGt);let t=this.VGt,s=this.kH.UD(),i=this.EGt,r=this.qGt,n=!0;for(let t=0,e=s.length;t<e;++t)if(r[t]){const h=s[t];i.push(h),h.CI().i_()||(n=!1)}this.kg=n,t.mGt(!!i.length),this.HGt=!0}$U(){const t=this.xs,e=this.VGt,s=e.WU(),i=t._D().rD(),r=0!==e.GetAngle()||0!==e.V5().GetAngle()||e.dC()<0||e.IC()<0,n=t.NEt(),h=t.s_();(this.HGt||s!==this.jH||i!==this.UGt||r!==this.XGt||n!==this.jGt||h!==this.YGt||this.x4.Iv())&&(this.x4.Av(this.EGt.map(t=>t.CI()),{EP:this.EGt.map(t=>t.F4()),IP:!s||h,MP:i,RP:n,wP:r}),this.HGt=!1,this.jH=s,this.UGt=i,this.XGt=r,this.jGt=n,this.YGt=h)}VU(){return this.EGt}Crt(t){return this.AGt[t]}UH(t){return(t<this.MGt.length?this.MGt:this.AGt)[t]}IB(t,e){if(t<0||t>=this.AGt.length)return null;const s=this.AGt[t];return e<0||e>=s.length?null:s[e]}AB(t,e,s){if(t<0||t>=this.AGt.length)return!1;const i=this.AGt[t];if(e<0||e>=i.length)return!1;const r=i[e];if(r instanceof C33.qo){if(r.Ta(s))return!1;r.la(s)}else{if(r===s)return!1;i[e]=s}return t<this.MGt.length&&this.MGt[t].SetParameterValue(e,s),!0}LGt(){const s=this.AGt,i=this.MGt;for(let t=0,e=i.length;t<e;++t){const r=i[t],n=s[t];for(let t=0,e=n.length;t<e;++t)r.SetParameterValue(t,n[t])}}i_(){return this.kg}zGt(){return this.EGt.some(t=>t.CI().h_())}TB(t){return this.qGt[t]}yB(t,e){this.qGt[t]=!!e}UD(){return this.kH.UD()}Qj(){return this.kH.UD().map(t=>({name:t.i3(),active:this.qGt[t.F4()],params:C33.$H.kGt(this.AGt[t.F4()])}))}tY(t){for(const e of t){const s=this.kH.mrt(e.name);s&&(this.qGt[s.F4()]=e.active,this.AGt[s.F4()]=C33.$H.$Gt(e.params))}this.EB(),this.LGt()}}}{let C33=self.Ve,tempCandidates=[],tileCollRectCandidates=[],tempJumpthruRet=[],tempPolyA=C33.mn(C33.Vc),tempPolyB=C33.mn(C33.Vc),tempQuad=C33.mn(C33.nc),tempRect=C33.mn(C33.Rect),tempRect2=C33.mn(C33.Rect),tempPolyC=null,tempRect3=null,tempQuadB=null;C33.JGt=class CollisionEngine extends C33.pn{constructor(t){super(),this.f3=t,this.KGt=0,this.ZGt=0,this.QGt=[],this.tPt=0,this.ePt=0,this.sPt=0,this.iPt=0,this.rPt=new self.bL(this)}Sn(){this.f3=null}aL(){return this.f3}X4(){return this.rPt}nPt(){this.ePt=this.tPt,this.tPt=0,this.iPt=this.sPt,this.sPt=0}hPt(){return this.ePt}oPt(){return this.iPt}aPt(t,e){const s=t.W5(),i=e.W5();s&&i&&s.h6()&&i.h6()&&this.QGt.push([t,e])}Fgt(e,s,i){for(const[r,n]of this.QGt){let t=null;if(e===r)t=n;else{if(e!==n)continue;t=r}!t.$gt(s)||i.includes(t)||i.push(t)}}Bgt(t,e){if(this.QGt.length)for(const[s,i]of this.QGt)if(t===s&&e===i||t===i&&e===s)return!0;return!1}lPt(){C33.Vh(this.QGt)}GL(t,e){if(!t||!e||t===e)return!1;const s=t.W5(),i=e.W5();if(!s.h6()||!i.h6())return!1;this.tPt++;const r=s.V5(),n=i.V5(),h=r.GX(n);return h?this.cPt(s,i):this.uPt(s,i)}cPt(t,e){if(!t.H7().Zl(e.H7()))return!1;if(this.sPt++,!t.X7().Lc(e.X7()))return!1;if(t.twt()&&e.twt())return!1;if(t.twt())return this.fPt(t,e);if(e.twt())return this.fPt(e,t);if(!t.iGt()&&!e.iGt())return!0;const s=t.rGt(),i=e.rGt();return s.eu(i,e.b_()-t.b_(),e.P_()-t.P_())}uPt(s,i){const t=s.twt(),e=i.twt();if(t&&!e)return this.dPt(s,i);if(e&&!t)return this.dPt(i,s);if(e||t)return!1;{const r=s.V5(),n=i.V5(),h=(tempPolyA.A(s.rGt()),tempPolyB.A(i.rGt()),tempPolyA.Yc());for(let t=0,e=h.length;t<e;t+=2){const a=t+1,l=h[t],c=h[a],[u,f]=r.pF(l+s.b_(),c+s.P_());h[t]=u,h[a]=f}const o=tempPolyB.Yc();for(let t=0,e=o.length;t<e;t+=2){const d=t+1,p=o[t],C=o[d],[m,S]=n.pF(p+i.b_(),C+i.P_());o[t]=m,o[d]=S}return tempPolyA.Kc(),tempPolyB.Kc(),this.sPt++,tempPolyA.eu(tempPolyB,0,0)}}dPt(t,e){const s=t.V5(),i=e.V5(),r=(tempPolyC=tempPolyC||C33.mn(C33.Vc),tempRect3=tempRect3||C33.mn(C33.Rect),tempQuadB=tempQuadB||C33.mn(C33.nc),e.b_()),n=e.P_(),[h,o]=i.pF(r,n),[a,l]=s.cF(h,o),c=a-r,u=l-n;if(tempRect3.A(e.H7()),tempRect3.offset(c,u),!t.H7().Zl(tempRect3))return!1;if(tempQuadB.A(e.X7()),tempQuadB.offset(c,u),this.sPt++,!t.X7().Lc(tempQuadB))return!1;tempPolyC.A(e.rGt());const f=tempPolyC.Yc();for(let t=0,e=f.length;t<e;t+=2){const d=t+1;f[t]+=c,f[d]+=u}return tempPolyC.Kc(),this.fPt(t,e,a,l,tempPolyC,tempRect3,tempQuadB)}fPt(t,i,e,s,r,n,h){const o=void 0!==n?n:i.H7(),a=t.b_(),l=t.P_(),c=t.xk().rB(),u=void 0!==e?e:i.b_(),f=void 0!==s?s:i.P_(),d=i.iGt(),p=void 0!==h?h:i.X7(),C=tileCollRectCandidates;c.GetCollisionRectCandidates(o,C);for(let t=0,e=C.length;t<e;++t){const m=C[t],S=m.GetRect();if(this.tPt++,o.Ql(S,a,l)&&(tempQuad.Oc(S),tempQuad.offset(a,l),tempQuad.Lc(p)))if(d){let t=void 0!==r?r:i.rGt(),e=u,s=f;void 0!==r&&(e=i.b_(),s=i.P_());const g=m.GetPoly();if(g){if(this.sPt++,g.eu(t,e-(a+S.bl()),s-(l+S.Ol())))return C33.Vh(C),!0}else if(tempPolyA.Qc(tempQuad,0,0),tempPolyA.eu(t,e,s))return C33.Vh(C),!0}else{const _=m.GetPoly();if(!_)return C33.Vh(C),!0;if(tempPolyA.Qc(p,0,0),_.eu(tempPolyA,-(a+S.bl()),-(l+S.Ol())))return C33.Vh(C),!0}}return C33.Vh(C),!1}pPt(t,a,l){const c=t.PD(),e=this.f3.Ox();if(!e)throw new Error("cannot call outside event");const u=e.m3t(),s=new Map,f=t=>{let e=s.get(t);return void 0===e&&(e=t.WN(),s.set(t,e)),e};if(c.Qut()){l||(c.h3t(!1),C33.Vh(c.o3t())),u&&C33.Vh(c.a3t());for(const i of t.GD()){let r=i.W5(),n=r.V5(),t=!1;if(t=f(n)&&r.Y7()?a.some(([t,e])=>{const[s,i]=n.cF(t,e,r.W7());return r.a6(s,i)}):t){if(l)return!1;c.r3t(i)}else u&&c.n3t(i)}}else{let i,h=!1,o=(!u||e.o1t(this.f3.a0t())||this.f3.Dgt()&&!c.a3t().length&&c.o3t().length?i=c.o3t():(i=c.a3t(),h=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],r=t.W5(),n=r.V5(),e=!1;if(e=f(n)&&r.Y7()?a.some(([t,e])=>{const[s,i]=n.cF(t,e,r.W7());return r.a6(s,i)}):e){if(l)return!1;h?c.r3t(t):i[o++]=t}else h?i[o++]=t:u&&c.n3t(t)}l||(i.length=o)}return t.V1t(),s.clear(),!!l||c.t3t()}CPt(t,e){if(t)for(const s of e.TRt())if(!t.GX(s))return!1;return!0}Lgt(t,e,s,i){if(e.bU())for(const r of e.LCt())this.CPt(t,r)?(r.SRt(),r.CRt().HV(s,i)):C33.sn(i,r.GD());else this.CPt(t,e)?(e.SRt(),e.CRt().HV(s,i)):C33.sn(i,e.GD())}$L(t,e,s,i){for(const r of e)this.Lgt(t,r,s,i)}mPt(t,e,s){const i=this.f3.BIt();i&&this.$L(t,i.XJ(),e,s)}SPt(t,e,s){const i=this.f3.kIt();i&&this.$L(t,i.XJ(),e,s)}VOt(t,e){return t.iwt()&&(!e||e.W5().VOt(t.DSt().get("solidTags")))}xL(t){const e=t.W5();this.mPt(e.V5(),e.H7(),tempCandidates);for(const s of tempCandidates)if(this.VOt(s,t)&&this.GL(t,s))return C33.Vh(tempCandidates),s;return C33.Vh(tempCandidates),null}gPt(t,e){this.mPt(null,t,tempCandidates);for(const s of tempCandidates)if(this.VOt(s,e)&&this._Pt(t,s))return C33.Vh(tempCandidates),s;return C33.Vh(tempCandidates),null}TPt(t,e){let s=null;e&&(s=tempJumpthruRet,C33.Vh(s));const i=t.W5();this.SPt(i.V5(),i.H7(),tempCandidates);for(const r of tempCandidates)if(r.nwt()&&this.GL(t,r)){if(!e)return C33.Vh(tempCandidates),r;s.push(r)}return C33.Vh(tempCandidates),s}yPt(e,s,i,r,n){r=r||50;const h=e.W5(),o=h.b_(),a=h.P_();for(let t=0;t<r;++t)if(h.D7(o+s*t,a+i*t),h.L7(),!this.GL(e,n))return!0;return h.D7(o,a),h.L7(),!1}EPt(e,s,i,r,n,h){r=r||50;let o=e.W5(),a=o.b_(),l=o.P_(),c=null,u=null;for(let t=0;t<r;++t)if(o.D7(a+s*t,l+i*t),o.L7(),!this.GL(e,c))if(c=this.xL(e))u=c;else if(n&&(c=h?this.GL(e,h)?h:null:this.TPt(e))&&(u=c),!c)return u&&this.IPt(e,s,i,u,16,!0),!0;return o.D7(a,l),o.L7(),!1}APt(s,i,r,t){t=t||50;let n=s.W5(),h=n.b_(),o=n.P_(),a=null,l=null;for(let e=0;e<t;++e)for(let t=0;t<2;++t){const c=2*t-1;if(n.D7(h+i*e*c,o+r*e*c),n.L7(),!this.GL(s,a)){if(!(a=this.xL(s)))return l&&this.IPt(s,i*c,r*c,l,16,!0),!0;l=a}}return n.D7(h,o),n.L7(),!1}IPt(t,e,s,i,r,n){let h=2,o=!1,a=!1,l=t.W5(),c=l.b_(),u=l.P_();for(;h<=r;){const f=1/h;h*=2,l.B7(e*f*(o?1:-1),s*f*(o?1:-1)),l.L7(),this.GL(t,i)||n&&this.xL(t)?(o=!0,a=!0):(o=!1,a=!1,c=l.b_(),u=l.P_())}a&&(l.D7(c,u),l.L7())}MPt(s,t=100){let i=0,r=s.W5(),n=r.b_(),h=r.P_(),o=0,a=this.xL(s);if(!a)return!0;for(;i<=t;){let t=0,e=0;switch(o){case 0:t=0,e=-1,i++;break;case 1:t=1,e=-1;break;case 2:t=1,e=0;break;case 3:t=1,e=1;break;case 4:t=0,e=1;break;case 5:t=-1,e=1;break;case 6:t=-1,e=0;break;case 7:t=-1,e=-1}if(o=(o+1)%8,r.D7(Math.floor(n+t*i),Math.floor(h+e*i)),r.L7(),!this.GL(s,a)&&!(a=this.xL(s)))return!0}return r.D7(n,h),r.L7(),!1}RPt(t,e,s,i){const r=t.W5(),n=r.b_(),h=r.P_(),o=Math.max(10,C33.Rn(e,s,n,h)),a=C33.bn(e,s,n,h),l=i||this.xL(t);if(!l)return C33.In(a+Math.PI);let c=l,u=0,f=0,d=C33.An(5),p;for(p=1;p<36;++p){const A=a-p*d;if(r.D7(e+Math.cos(A)*o,s+Math.sin(A)*o),r.L7(),!this.GL(t,c)&&!(c=i?null:this.xL(t))){u=A;break}}for(36===p&&(u=C33.In(a+Math.PI)),c=l,p=1;p<36;++p){const M=a+p*d;if(r.D7(e+Math.cos(M)*o,s+Math.sin(M)*o),r.L7(),!this.GL(t,c)&&!(c=i?null:this.xL(t))){f=M;break}}if(36===p&&(f=C33.In(a+Math.PI)),r.D7(n,h),r.L7(),f===u)return f;let C=C33.On(f,u)/2,m;m=C33.Pn(f,u)?C33.In(u+C+Math.PI):C33.In(f+C);const S=Math.cos(a),g=Math.sin(a),_=Math.cos(m),T=Math.sin(m),y=S*_+g*T,E=S-2*y*_,I=g-2*y*T;return C33.bn(0,0,E,I)}wPt(t,e,s,i,r){if(!r)return!1;const n=r.W5();if(!n.h6())return!1;if(this.tPt++,tempRect.set(Math.min(t,s),Math.min(e,i),Math.max(t,s),Math.max(e,i)),!n.H7().Zl(tempRect))return!1;if(r.twt())return this.bPt(t,e,s,i,r,n);if(this.sPt++,!n.X7().xc(t,e,s,i))return!1;if(!n.iGt())return!0;const h=n.rGt();return h.xc(n.b_(),n.P_(),t,e,s,i)}bPt(s,i,r,n,t,e){const h=e.b_(),o=e.P_(),a=t.rB(),l=tileCollRectCandidates;tempRect2.set(s,i,r,n),tempRect2.normalize(),a.GetCollisionRectCandidates(tempRect2,l);for(let t=0,e=l.length;t<e;++t){const c=l[t],u=c.GetRect();if(this.tPt++,tempRect.Ql(u,h,o)&&(tempQuad.Oc(u),tempQuad.offset(h,o),tempQuad.xc(s,i,r,n))){const f=c.GetPoly();if(!f)return C33.Vh(l),!0;if(this.sPt++,f.xc(h+u.bl(),o+u.Ol(),s,i,r,n))return C33.Vh(l),!0}}return C33.Vh(l),!1}_Pt(t,e){if(!e)return!1;const s=e.W5();if(!s.h6())return!1;if(this.tPt++,!s.H7().Zl(t))return!1;if(e.twt())return this.OPt(t,e,s);if(this.sPt++,tempQuad.Oc(t),!s.X7().Lc(tempQuad))return!1;if(!s.iGt())return!0;const i=tempPolyA,r=(i.Oc(t,s.b_(),s.P_()),s.rGt());return i.eu(r,0,0)}OPt(s,t,e){const i=e.b_(),r=e.P_(),n=t.rB(),h=tileCollRectCandidates;n.GetCollisionRectCandidates(s,h);for(let t=0,e=h.length;t<e;++t){const o=h[t],a=o.GetRect();if(this.tPt++,s.Ql(a,i,r)){const l=o.GetPoly();if(!l)return C33.Vh(h),!0;if(this.sPt++,tempPolyA.Oc(s,0,0),l.eu(tempPolyA,-(i+a.bl()),-(r+a.Ol())))return C33.Vh(h),!0}}return C33.Vh(h),!1}GPt(t,e){if(t){const s=t.W5();s.h6()&&(this.tPt++,s.H7().Zl(e.rect))&&(t.twt()?this.PPt(t,s,e):(this.sPt++,s.iGt()?e.vPt(t,s.b_(),s.P_(),s.rGt()):e.xPt(t,s.X7())))}}PPt(s,i,r){const n=i.b_(),h=i.P_(),o=tileCollRectCandidates;s.rB().GetCollisionRectCandidates(r.rect,o);for(let t=0,e=o.length;t<e;t++){const a=o[t],l=a.GetRect();if(this.tPt++,r.rect.Ql(l,n,h)){const c=a.GetPoly();this.sPt++,c?r.vPt(s,n+l.bl(),h+l.Ol(),c):r.LPt(s,i.b_(),i.P_(),l)}}C33.Vh(o)}DL(t,e){if(t!==this.KGt||e!==this.ZGt){this.KGt=t,this.ZGt=e;const s=this.f3.wU();for(const i of s)if(i.JL()){for(const r of i.OD())r.W5().$Ot();i.CRt().DPt(t,e),i.mRt();for(const n of i.OD()){const h=n.W5();h.CGt(),h.gRt()}}}}FL(){return[this.KGt,this.ZGt]}NPt(t,e){this.KGt=t,this.ZGt=e}}}{const C33=self.Ve;C33.YAt=class SparseGrid extends C33.pn{constructor(t,e){super(),this.NV=t,this.FV=e,this.BV=C33.mn(C33.ou)}Sn(){this.BV.Sn(),this.BV=null}DPt(t,e){if(!this.BV.cu())throw new Error("grid not empty");this.NV=t,this.FV=e}kV(t,e,s){let i=this.BV.cs(t,e);return i||(s?(i=C33.mn(C33.FPt,this,t,e),this.BV.Set(t,e,i),i):null)}$V(t){const e=Math.floor(t/this.NV);return isFinite(e)?e:0}WV(t){const e=Math.floor(t/this.FV);return isFinite(e)?e:0}VV(i,r,n){if(r)for(let s=r.bl(),t=r.Gl();s<=t;++s)for(let t=r.Ol(),e=r.Pl();t<=e;++t)if(!n||!n.tc(s,t)){const h=this.kV(s,t,!1);h&&(h.Gf(i),h.cu())&&this.BV.uu(s,t)}if(n)for(let s=n.bl(),t=n.Gl();s<=t;++s)for(let t=n.Ol(),e=n.Pl();t<=e;++t)r&&r.tc(s,t)||this.kV(s,t,!0).vV(i)}HV(t,e){let s=this.$V(t.bl()),i=this.WV(t.Ol()),r=this.$V(t.Gl()),n=this.WV(t.Pl());if(isFinite(r)&&isFinite(n))for(;s<=r;++s)for(let t=i;t<=n;++t){const h=this.kV(s,t,!1);h&&h.LV(e)}}}}{const C33=self.Ve;C33.FPt=class GridCell extends C33.pn{constructor(t,e,s){super(),this.MV=t,this.nl=e,this.hl=s,this.RV=C33.mn(C33.Cu)}Sn(){this.RV.Sn(),this.RV=null,this.MV=null}cu(){return this.RV.cu()}vV(t){this.RV._u(t)}Gf(t){this.RV.uu(t)}LV(t){C33.sn(t,this.RV.Tu())}}}{const C33=self.Ve,PADDING=1e-6,NO_HIT=2;C33.BPt=class Ray{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new C33.Rect,this.kPt=NO_HIT,this.$Pt=null,this.WPt=0,this.VPt=0,this.HPt=0,this.UPt=0,this.XPt=0,this.Gt=0,this.jPt=1,this.YPt=0,this.qPt=1,this.zPt=0}JPt(){return this.kPt<1+PADDING}gf(){this.kPt=NO_HIT}Set(t,e,s,i){return this.x1=t,this.y1=e,this.x2=s,this.y2=i,this.dx=s-t,this.dy=i-e,this.rect.set(t,e,s,i),this.rect.normalize(),this.kPt=NO_HIT,this.$Pt=null,this.WPt=0,this.VPt=0,this.HPt=0,this.UPt=0,this.XPt=0,this.Gt=0,this.jPt=1,this.YPt=0,this.qPt=1,this.zPt=0,this}KPt(){if(!1!==this.JPt()){const t=this.dx*this.kPt,e=this.dy*this.kPt,s=Math.hypot(t,e),i=t/s,r=e/s,n=(this.Gt=s-PADDING,this.UPt=this.x1+i*this.Gt,this.XPt=this.y1+r*this.Gt,this.WPt=Math.atan2(this.HPt,this.VPt)+Math.PI/2,this.jPt=Math.cos(this.WPt),this.YPt=Math.sin(this.WPt),i*this.jPt+r*this.YPt);if(this.qPt=i-2*this.jPt*n,this.zPt=r-2*this.YPt*n,0<n){const h=Math.PI;this.WPt=C33.In(this.WPt+h),this.jPt=-this.jPt,this.YPt=-this.YPt}}}ZPt(t,e,s,i,r){const n=C33.Sh(this.x1,this.y1,this.x2,this.y2,e,s,i,r);0<=n&&n<this.kPt&&(this.kPt=n,this.$Pt=t.NF(),this.VPt=e-i,this.HPt=s-r)}LPt(t,e,s,i){const r=e+i.bl(),n=e+i.Gl(),h=s+i.Ol(),o=s+i.Pl();this.ZPt(t,r,h,n,h),this.ZPt(t,n,h,n,o),this.ZPt(t,n,o,r,o),this.ZPt(t,r,o,r,h)}xPt(t,e){const s=e.hh(),i=e.oh(),r=e.ah(),n=e.lh(),h=e.uh(),o=e.fh(),a=e.ph(),l=e.Ch();this.ZPt(t,s,i,r,n),this.ZPt(t,r,n,h,o),this.ZPt(t,h,o,a,l),this.ZPt(t,a,l,s,i)}vPt(s,i,r,t){const n=t.Yc();for(let t=0,e=n.length;t<e;t+=2){const h=(t+2)%e,o=n[t]+i,a=n[t+1]+r,l=n[h]+i,c=n[1+h]+r;this.ZPt(s,o,a,l,c)}}}}{const C33=self.Ve,VALID_FULLSCREEN_MODES=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),VALID_FULLSCREEN_SCALING_QUALITIES=new Set(["high","low"]),glMatrix=self._e,mat42=glMatrix.Ie,vec32=glMatrix.we,tempProjection=mat42.create(),PERCENTTEXT_WIDTH=300,PERCENTTEXT_HEIGHT=200,PROGRESSBAR_WIDTH=120,PROGRESSBAR_HEIGHT=8,tempQuad=C33.mn(C33.nc),tempRect=C33.mn(C33.Rect),SPLASH_MIN_DISPLAY_TIME=3e3,SPLASH_AFTER_FADEOUT_WAIT_TIME=200,SPLASH_FADE_DURATION=300;C33.QPt=class CanvasManager extends C33.pn{constructor(t){super(),this.f3=t,this.tvt=[],this.evt=!1,this.svt=null,this.ivt=null,this.rvt=null,this.nvt="high-performance",this.hvt=!1,this.ovt=0,this.avt=0,this.lvt="",this.cvt=0,this.uvt=0,this.fvt=0,this.dvt=0,this.pvt=0,this.Cvt=0,this.Nm="normalized",this.mvt=0,this.Svt=1,this.gvt=1e4,this.d2=!0,this._vt=0,this.tv=0,this.sv=0,this.Tvt="letterbox-scale",this.yvt="letterbox-scale",this.Evt=0,this.Ivt=0,this.Avt=mat42.create(),this.Mvt="high",this.Rvt=this.Mvt,this.wvt=!1,this.bvt=[],this.Ovt=new Set,this.Gvt=self.C3_Shaders,this.Pvt=C33.mn(C33.fm.rP,{tP:()=>[this.lj(),this.cj()],eP:()=>this.vvt(),sP:t=>this.xvt(t),getTime:()=>this.aL().zx(),iP:()=>this.aL().q5()}),this.Lvt=0,this.Dvt=0,this.Nvt=NaN,this.Fvt=null,this.Bvt=new Map,this.kvt=NaN,this.$vt=new Map,this.Wvt="",this.Vvt=1,this.Hvt=C33.mn(C33.Rect),this.Uvt="",this.Xvt=null,this.jvt=null,this.Yvt=0,this.qvt=0,this.zvt=-1,this.Jvt=0,this.Kvt=t=>this.Jvt=t.progress,this.Zvt=null,this.Qvt={t4t:null,e4t:null,s4t:null},this.i4t=0,this.r4t=0,this.n4t=0,this.h4t="fade-in",this.o4t=null,this.a4t=new Promise(t=>this.o4t=t)}l4t(t){this.nvt=t}c4t(t){this.evt=!!t}u4t(t){this.Nm=t}f4t(){return this.Nm}d4t(t){this.mvt=t}p4t(t,e){this.Svt=t,this.gvt=e}C4t(t){this.hvt=!!t}async No(t){let e=t.canvas,s=(this.tvt.push({canvas:e,m4t:null}),this.f3.l7("runtime","window-resize",t=>this.S4t(t)),this.f3.l7("runtime","fullscreenchange",t=>this.g4t(t)),this.f3.l7("runtime","fullscreenerror",t=>this._4t(t)),e.addEventListener("webglcontextlost",t=>this.T4t(t)),e.addEventListener("webglcontextrestored",t=>this.y4t(t)),this.wvt=!!t.isFullscreen,this.lvt=t.cssDisplayMode,navigator.gpu&&this.evt),i=!1;if(s)try{await this.E4t(!0)}catch(t){this.I4t("WebGPU",t),this.ivt=null}if(!this.Kg())try{await this.A4t(!0)}catch(t){this.I4t("WebGL",t),this.svt=null}if(this.Kg()||(i=!0),!this.Kg()&&s)try{await this.E4t(!1)}catch(t){this.I4t("WebGPU",t),this.ivt=null}if(!this.Kg())try{await this.A4t(!1)}catch(t){this.I4t("WebGL",t),this.svt=null}const r=this.Kg();if(!r)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");r.Tg(i),this.ivt&&(this.ivt.M4t=()=>this.R4t(),this.ivt.w4t=()=>this.b4t()),"normalized"===this.Nm?r.v2():(r.L2(),r.G2(this.mvt)),this.aw(t.windowInnerWidth,t.windowInnerHeight,!0),await this.xGt()}I4t(t,e){e&&"string"==typeof e.message&&e.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,e)}async E4t(t){const e={Om:this.Svt,Gm:this.gvt},s={powerPreference:this.nvt,depth:this.f3.SX(),failIfMajorPerformanceCaveat:t,O4t:this.f3.gj(),G4t:this.f3.P4t(),Tb:this.f3.v4t()};this.ivt=C33.mn(C33.fm.WebGPURenderer,e),await this.ivt.mE(this.tvt[0].canvas,s)}async A4t(t){const e={alpha:!0,powerPreference:this.nvt,_b:"xbox-uwp-webview2"!==this.f3.OW(),depth:this.f3.SX(),Tb:this.f3.v4t(),failIfMajorPerformanceCaveat:t,Om:this.Svt,Gm:this.gvt};this.hvt&&(e.yb=1),this.svt=C33.mn(C33.fm.Ab,this.tvt[0].canvas,e),await this.svt._2()}async x4t(){if(this.Gvt){const t=[];for(const[e,s]of Object.entries(this.Gvt)){s.src=s.L4t;const i=C33.fm.WebGPUShaderProgram.NI();t.push(this.ivt.RO(Object.assign({dE:i,name:e},s)))}await Promise.all(t)}}async D4t(){if(this.Gvt){const e=[];for(const[s,i]of Object.entries(this.Gvt)){let t;if(i.N4t&&2<=this.svt.YT())i.src=i.N4t,t=C33.fm.uE.FI();else{if(!i.F4t)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.F4t,t=C33.fm.uE.NI()}e.push(this.svt.RO(Object.assign({dE:t,name:s},i)))}await Promise.all(e),this.svt.wO(),this.svt.Y2()}this.svt.WG()&&(this.Fvt=C33.mn(C33.fm.ab,this.svt))}async xGt(){this.ivt?await this.x4t():this.svt&&await this.D4t();const t=this.Kg();t.gg(this.d2),t.WG()&&(this.Nvt=0);for(const e of this.f3.B4t()){for(const s of e.UD())s.xGt(t);e.xGt(t),e.EB()}this.rvt=new self.k$(this.f3,t)}Sn(){this.f3=null,this.svt=null,this.tvt.length=0}tx(){return this.f3.tx()}S4t(t){const e=this.f3;if(!e.k4t()){const s=t.devicePixelRatio,i=(this.tx()&&(self.devicePixelRatio=s),e.$4t(s),this.wvt=!!t.isFullscreen,this.lvt=t.cssDisplayMode,this.aw(t.innerWidth,t.innerHeight),e.q5(),new C33.Event("window-resize")),r=(i.data=t,e.q3().nf(i),new C33.Event("resize"));r.W4t=this.W8(),r.V4t=this.V8(),r.H4t=this.U4t(),r.X4t=this.j4t(),e.Iz(r),e.Az()&&(e.J0t()||self.C3Debugger.IsDebuggerPaused())&&e.xv()}}g4t(t){this.wvt=!!t.isFullscreen,this.aw(t.innerWidth,t.innerHeight,!0),this.f3.q5()}_4t(t){this.wvt=!!t.isFullscreen,this.aw(t.innerWidth,t.innerHeight,!0),this.f3.q5()}aw(t,e,s=!1){if(t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid size");if(this.ovt!==t||this.avt!==e||s){this.ovt=t,this.avt=e;const i=this.Y4t();"letterbox-scale"===i?this.q4t(t,e):"letterbox-integer-scale"===i?this.z4t(t,e):"off"===i?this.J4t(t,e):this.K4t(t,e),this.Z4t(i);for(const{canvas:h}of this.tvt)h.width=this.fvt,h.height=this.dvt;this.f3.m3("canvas","update-size",{marginLeft:this.pvt,marginTop:this.Cvt,styleWidth:this.cvt,styleHeight:this.uvt,displayScale:this.H8()});const r=this.Kg();r.aw(this.fvt,this.dvt,!0);for(const o of this.bvt)r.DG(o);C33.Vh(this.bvt),this.Q4t();const n=this.f3.T5();n.Yz(),n.qz()}}Q4t(){this.Kg().N2(this.Avt,this.lj()/this.cj())}uj(){return this.Avt}q4t(t,e){const s=this.f3.kU(),i=this.f3.nx(),r=this.f3.ox(),n=i/r,h=t/e;if(n<h){const o=e*n;this.cvt=Math.round(o),this.uvt=e,this.pvt=Math.floor((t-this.cvt)/2),this.Cvt=0}else{const a=t/n;this.cvt=t,this.uvt=Math.round(a),this.pvt=0,this.Cvt=Math.floor((e-this.uvt)/2)}this.fvt=Math.round(this.cvt*s),this.dvt=Math.round(this.uvt*s),this.f3.txt(i,r)}z4t(t,e){let s=this.f3.kU(),i=(1!==s&&(t+=1,e+=1),this.f3.nx()),r=this.f3.ox(),n=i/r,h=t/e,o;if(n<h){const a=e*n;o=a*s/i}else{const l=t/n;o=l*s/r}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.fvt=Math.round(i*o),this.dvt=Math.round(r*o),this.cvt=this.fvt/s,this.uvt=this.dvt/s,this.pvt=Math.max(Math.floor((t-this.cvt)/2),0),this.Cvt=Math.max(Math.floor((e-this.uvt)/2),0),this.f3.txt(i,r)}K4t(t,e){const s=this.f3.kU(),i=(this.cvt=t,this.uvt=e,this.fvt=Math.round(this.cvt*s),this.dvt=Math.round(this.uvt*s),this.pvt=0,this.Cvt=0,this.H8());this.f3.txt(this.cvt/i,this.uvt/i)}J4t(t,e){const s=this.f3.kU();this.cvt=this.f3.hX(),this.uvt=this.f3.aX(),this.fvt=Math.round(this.cvt*s),this.dvt=Math.round(this.uvt*s),this.sxt()?(this.pvt=Math.floor((t-this.cvt)/2),this.Cvt=Math.floor((e-this.uvt)/2)):(this.pvt=0,this.Cvt=0),this.f3.txt(this.f3.hX(),this.f3.aX())}Z4t(s){if("high"===this.Mvt)this.tv=this.fvt,this.sv=this.dvt,this.Rvt="high";else{let t,e;if(e="off"===this.Y4t()?(t=this.f3.hX(),this.f3.aX()):(t=this.f3.nx(),this.f3.ox()),this.fvt<t||this.dvt<e)this.tv=this.fvt,this.sv=this.dvt,this.Rvt="high";else if(this.tv=t,this.sv=e,this.Rvt="low","scale-inner"===s){const i=t/e,r=this.ovt/this.avt;r<i?this.tv=this.sv*r:i<r&&(this.sv=this.tv/r)}else if("scale-outer"===s){const n=t/e,h=this.ovt/this.avt;n<h?this.tv=this.sv*h:h<n&&(this.sv=this.tv/h)}}}aL(){return this.f3}ixt(){return this.tvt[0].canvas}WH(){return this.Pvt}sxt(){return this.wvt}rxt(){return this.lvt}nxt(t){if(!VALID_FULLSCREEN_MODES.has(t))throw new Error("invalid fullscreen mode");this.Tvt=t;const e=this.f3.T5();e.Yz(),e.qz()}B8(){return this.Tvt}hxt(t){if(!VALID_FULLSCREEN_MODES.has(t))throw new Error("invalid fullscreen mode");this.yvt=t;const e=this.f3.T5();e.Yz(),e.qz()}oxt(){return this.yvt}Y4t(){return this.sxt()?this.oxt():this.B8()}axt(t){if(!VALID_FULLSCREEN_SCALING_QUALITIES.has(t))throw new Error("invalid fullscreen scaling quality");this.Mvt=t,this.f3.T5().Yz()}lxt(){return this.Mvt}_j(){return this.Rvt}static cxt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}T8(){return this.ovt}E8(){return this.avt}lj(){return this.tv}cj(){return this.sv}gg(t){this.d2=!!t}uxt(t){this._vt=t}_V(){return this._vt}fxt(){return this.Kg().kw()}T4t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.bvt=[],this.Ovt.clear(),this.Pvt.__(),this.svt.__(),this.f3.Tq()}R4t(){console.log("[Construct] WebGPU device lost"),this.bvt=[],this.Ovt.clear(),this.Pvt.__(),this.f3.Tq()}async y4t(t){await this.svt.T_(),await this.xGt(),await this.f3.dxt(),console.log("[Construct] WebGL context restored")}async b4t(){await this.xGt(),await this.f3.dxt(),console.log("[Construct] WebGPU device restored")}pxt(){return this.svt}Cxt(){return this.ivt}Kg(){return this.ivt||this.svt}UMt(){return this.rvt}TF(){return"low"===this.Rvt?1/this.f3.kU():this.H8()}H8(){const t=this.Y4t();if("off"===t||"crop"===t)return 1;const e=this.f3.nx(),s=this.f3.ox(),i=e/s,r=this.fvt/this.dvt;return"scale-inner"!==t&&i<r||"scale-inner"===t&&r<i?this.uvt/s:this.cvt/e}Hj(){return"low"===this._j()?1:this.H8()}Wj(){return"low"===this._j()?1:this.f3.kU()}mxt(t,e){this.Evt=t,this.Ivt=e}A9(e,s,i,t=!0){s=s||this.tv,i=i||this.sv;const r=s/2+this.Evt,n=i/2+this.Ivt;if(t){let t=this.uj();s===this.tv&&i===this.sv||(e.N2(tempProjection,s/i),t=tempProjection),e.OO(t)}const h=e.V2(r,n,e.E2(i),r,n,0,i);e.DO(h)}Sxt(t,e=!0){const s=this.W8(),i=this.V8(),r=s/2,n=i/2,h=(e&&t.OO(this.uj()),t.V2(r,n,t.E2(i),r,n,0,i));t.DO(h)}U4t(){return this.fvt}j4t(){return this.dvt}W8(){return this.cvt}V8(){return this.uvt}uF(){return this.pvt}fF(){return this.Cvt}sq(){return this.tvt.length}gxt(){return"undefined"!=typeof OffscreenCanvas&&this.ixt()instanceof OffscreenCanvas&&("Chromium"!==C33._s.Ms||124<=C33._s.As)}async Mq(s,i=!1){if(s<1)throw new Error("invalid HTML layer count");if(this.tvt.length!==s){let t={count:s,immediate:i,marginLeft:this.pvt,marginTop:this.Cvt,styleWidth:this.cvt,styleHeight:this.uvt},e;if(e=this.tx()?await this.f3.J5("canvas","set-html-layer-count",t):self.c3_runtimeInterface._OnSetHTMLLayerCount(t),s<this.tvt.length)this.tvt.length=s;else for(const r of e.addedCanvases){r.width=this.fvt,r.height=this.dvt;const n=this.gxt()?"bitmaprenderer":"2d",h=r.getContext(n);if(!h)throw new Error(`failed to acquire '${n}' canvas context`);this.tvt.push({canvas:r,m4t:h})}this.f3.q5()}}Tz(t){if(!(t>=this.tvt.length)){const e=this.ixt(),s=this.tvt[t].m4t;this.gxt()?s.transferFromImageBitmap(e.transferToImageBitmap()):(s.globalCompositeOperation="copy",s.drawImage(e,0,0))}}Tj(e){e.depth=this.f3.SX();let t=this.bvt,s=t.findIndex(t=>t.nE(e)),i;return-1!==s?(i=t[s],t.splice(s,1)):i=this.Kg().GG(e),this.Ovt.add(i),i}HH(t){if(!this.Ovt.has(t))throw new Error("render target not in use");this.Ovt.delete(t),this.bvt.push(t)}vvt(){const t={bT:this.f3.ux()};return"low"===this._j()&&(t.width=this.lj(),t.height=this.cj()),this.Tj(t)}xvt(t){this.HH(t)}*_xt(){for(const t of this.f3.T5().Uz())for(const e of t.rN()){const s=this.Bvt.get(e);s&&(yield s)}}Cj(t){if(!this.Kg().WG())return null;let e=this.Bvt.get(t);return e||(e={x7:t,name:t.i3(),Txt:C33.mn(C33.fm.ab,this.svt),yxt:0,Ext:0,Ixt:0},this.Bvt.set(t,e)),e.Txt}Axt(){const t=this.Kg();if(t.WG()&&0===this.Dvt){this.Dvt=t.mg(),this.kvt=NaN;for(const e of this._xt())e.yxt=NaN}}Mxt(){this.svt&&this.svt.WG()&&this.Rxt(),this.ivt&&this.ivt.WG()&&this.wxt()}Rxt(){if(isNaN(this.kvt)&&(this.kvt=this.Fvt.mb(this.Lvt,this.Dvt),!isNaN(this.kvt))){if(this.f3.Az())for(const t of this._xt())if(t.yxt=t.Txt.mb(this.Lvt,this.Dvt),isNaN(t.yxt))return;if(this.Fvt.Sb(this.Dvt),this.Nvt=Math.min(this.kvt,1),this.f3.Az()){const s=new Map;for(const r of this._xt())r.Txt.Sb(this.Dvt),r.Ext=Math.min(r.yxt,1),s.set(r.x7,r.Ext);for(const n of this._xt()){const h=n.x7,o=s.get(h)||0,a=o-h.wN().reduce((t,e)=>t+(s.get(e)||0),0);n.Ixt=C33.En(a,0,1)}const e=this.f3.S5(),i=this.Nvt-e.DU().reduce((t,e)=>t+(s.get(e)||0),0);self.C3Debugger.UpdateGPUProfile(C33.En(i,0,1),this.Nvt,[...this._xt()])}this.Lvt=this.Dvt,this.Dvt=0}}bxt(){return this.Fvt}wxt(){if(0!==this.Dvt){for(let t=this.Lvt;t<this.Dvt;++t){const s=this.$vt.get(t);if(s&&!s.Kw())return}let t=this.f3.S5(),h=C33.Yo(t.JY()+1,0),e=0;for(let t=this.Lvt;t<this.Dvt;++t){const o=this.$vt.get(t);if(o){let s=o.Zw(),i=BigInt(0),r=BigInt(0),n=BigInt(0);for(let t=0,e=Math.min(h.length,s.length/2);t<e;++t){const c=s[2*t],u=s[2*t+1],f=(c!==n&&(i===n||c<i)&&(i=c),u>r&&(r=u),u-c),d=Number(f)/1e9;h[t]+=d}const a=r-i,l=Number(a)/1e9;e+=l}}if(this.Nvt=C33.En(e,0,1),this.f3.Az()){const i=t.rN(),r=new Map;for(let t=0,e=Math.min(i.length,h.length-1);t<e;++t){const m=h[t+1];r.set(i[t],m)}const n=[],p=new Map;for(const[S,g]of r){const _=[...S.ON()].reduce((t,e)=>t+(r.get(e)||0),0);p.set(S,_),n.push({name:S.i3(),Ixt:C33.En(g,0,1),Ext:C33.En(_,0,1)})}const C=this.Nvt-t.DU().reduce((t,e)=>t+(p.get(e)||0),0);self.C3Debugger.UpdateGPUProfile(C33.En(C,0,1),this.Nvt,n)}for(let t=this.Lvt;t<this.Dvt;++t)this.$vt.delete(t);this.Lvt=this.Dvt,this.Dvt=0}}Oxt(t){this.$vt.set(this.ivt.mg(),t)}h5(){return this.Nvt}Gxt(t,e,s,i,r,n){return this.Wvt=t,this.Vvt=e,this.Hvt.Tl(s,i,r,n),this.Xvt||(this.Xvt=new Promise(t=>{this.jvt=t})),this.Xvt}Pxt(){if(this.Wvt){let t=this.ixt(),e=this.Hvt,s=C33.En(Math.floor(e.bl()),0,t.width),i=C33.En(Math.floor(e.Ol()),0,t.height),r=e.width(),n=(r=0===r?t.width-s:C33.En(Math.floor(r),0,t.width-s),e.height());if(n=0===n?t.height-i:C33.En(Math.floor(n),0,t.height-i),(0!==s||0!==i||r!==t.width||n!==t.height)&&0<r&&0<n){const h=C33.No(r,n),o=h.getContext("2d");o.drawImage(t,s,i,r,n,0,0,r,n),t=h}C33.Fo(t,this.Wvt,this.Vvt).then(t=>{this.Uvt&&URL.revokeObjectURL(this.Uvt),this.Uvt=URL.createObjectURL(t),this.Xvt=null,this.jvt(this.Uvt)}),this.Wvt="",this.Vvt=1}}vxt(){return this.Uvt}xxt(t){t?this.Yvt++:this.Yvt--}Lxt(){return 0<this.Yvt}Dxt(t){const e=this.Kg();if(2===t)this.Zvt=C33.mn(C33.fm.bg,this.Kg()),this.Zvt.LR("Arial"),this.Zvt.DR(16),this.Zvt.JR("center"),this.Zvt.ZR("center"),this.Zvt.aw(PERCENTTEXT_WIDTH,PERCENTTEXT_HEIGHT);else if(0===t){const s=this.f3.Nxt();s&&s.m9(e).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.Fxt("splash-images/splash-logo.svg").then(t=>{"done"===this.h4t?e.Uy(t):this.Qvt.t4t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.Bxt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.h4t?e.Uy(t):this.Qvt.e4t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.Bxt("splash-images/splash-website-512.png").then(t=>{"done"===this.h4t?e.Uy(t):this.Qvt.s4t=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async Fxt(t){t=new URL(t,this.f3.kxt()).toString();const e=await C33.Oo(t),s=await this.f3.$xt(e,2048,2048);return this.Kg().OG(s,{vT:"high"})}async Bxt(t){t=new URL(t,this.f3.kxt()).toString();const e=await C33.Oo(t);return this.Kg().OG(e,{vT:"high"})}Wxt(){this.f3.m3("runtime","hide-cordova-splash")}Vxt(){this.qvt=Date.now(),this.f3.q3().addEventListener("loadingprogress",this.Kvt),this.zvt=requestAnimationFrame(()=>this.Hxt());const t=this.f3.Uxt();3!==t&&this.Wxt()}async Xxt(){const t=this.Kg(),e=(this.Jvt=1,this.f3.Uxt());4===e&&await this.a4t,this.o4t=null,this.a4t=null,-1!==this.zvt&&(cancelAnimationFrame(this.zvt),this.zvt=-1),this.f3.q3().removeEventListener("loadingprogress",this.Kvt),this.Kvt=null,this.Zvt&&(this.Zvt.Sn(),this.Zvt=null),this.f3.jxt(),t.gG(),this.Qvt.t4t&&(t.Uy(this.Qvt.t4t),this.Qvt.t4t=null),this.Qvt.e4t&&(t.Uy(this.Qvt.e4t),this.Qvt.e4t=null),this.Qvt.s4t&&(t.Uy(this.Qvt.s4t),this.Qvt.s4t=null),t.SG(0,0,0,0),t.pg(),this.h4t="done",this.Lvt=t.mg(),3===e&&this.Wxt()}Hxt(){if(-1!==this.zvt){const t=this.Kg(),e=(t.gG(),this.zvt=-1,this.f3.H4().jW()),s=this.f3.Uxt();if(3!==s&&(this.Sxt(t),t.SG(0,0,0,0),t.HO(),t.Y2(),t.XO(null)),0===s)this.Yxt(e);else if(1===s)this.qxt(e,PROGRESSBAR_WIDTH,0);else if(2===s)this.zxt(e);else if(3===s)C33.Bh();else{if(4!==s)throw new Error("invalid loader style");this.Jxt(e)}t.pg(),this.zvt=requestAnimationFrame(()=>this.Hxt())}}zxt(t){t?this.Zvt.zR(1,0,0):this.Zvt.zR(.6,.6,.6),this.Zvt.S3(Math.round(100*this.Jvt)+"%");const e=this.cvt/2,s=this.uvt/2,i=PERCENTTEXT_WIDTH/2,r=PERCENTTEXT_HEIGHT/2,n=(tempQuad.Cc(e-i,s-r,e+i,s+r),this.Kg());n.XO(this.Zvt.Jy()),n.BS(tempQuad,this.Zvt.Ww())}qxt(t,e,s){const i=this.Kg(),r=PROGRESSBAR_HEIGHT,n=(i.Q2(),t?i.WO(1,0,0,1):i.WO(.118,.565,1,1),this.cvt/2),h=this.uvt/2,o=e/2,a=r/2;tempRect.Tl(n-o,h-a+s,Math.floor(e*this.Jvt),r),i.Rect(tempRect),tempRect.Tl(n-o,h-a+s,e,r),tempRect.offset(-.5,-.5),tempRect.Wl(.5,.5),i.WO(0,0,0,1),i.HS(tempRect),tempRect.Wl(1,1),i.WO(1,1,1,1),i.HS(tempRect)}Yxt(t){const e=this.Kg(),s=this.f3.Nxt();if(s){const i=s.Jy();if(i){const r=i.dC(),n=i.IC(),h=this.cvt/2,o=this.uvt/2,a=r/2,l=n/2;tempQuad.Cc(h-a,o-l,h+a,o+l),e.XO(i),e.nc(tempQuad),this.qxt(t,r,16+l)}else this.qxt(t,PROGRESSBAR_WIDTH,0)}else this.qxt(t,PROGRESSBAR_WIDTH,0)}Jxt(t){let e=this.Kg(),s=this.Qvt.t4t,i=this.Qvt.e4t,r=this.Qvt.s4t,n=Date.now(),h=(0===this.i4t&&(this.qvt=n),this.f3.Kxt()||this.f3.Zxt()&&!this.f3.Qxt()),o=h?0:SPLASH_AFTER_FADEOUT_WAIT_TIME,a=h?0:SPLASH_MIN_DISPLAY_TIME,l=1,c=("fade-in"===this.h4t?l=Math.min((n-this.qvt)/SPLASH_FADE_DURATION,1):"fade-out"===this.h4t&&(l=Math.max(1-(n-this.n4t)/SPLASH_FADE_DURATION,0)),e.Q2(),e.WO(.231*l,.251*l,.271*l,l),tempRect.set(0,0,this.cvt,this.uvt),e.Rect(tempRect),Math.ceil(this.cvt)),u=Math.ceil(this.uvt),f,d;256<this.uvt?(e.WO(.302*l,.334*l,.365*l,l),f=c,d=Math.max(.005*u,2),tempRect.Tl(0,.8*u-d/2,f,d),e.Rect(tempRect),t?e.WO(l,0,0,l):e.WO(.161*l,.953*l,.816*l,l),f=c*this.Jvt,tempRect.Tl(.5*c-f/2,.8*u-d/2,f,d),e.Rect(tempRect),e.WO(l,l,l,l),e.Y2(),i&&(f=1.5*C33.En(.22*u,105,.6*c),d=f/8,tempRect.Tl(.5*c-f/2,.2*u-d/2,f,d),e.XO(i),e.Rect(tempRect)),s&&(f=Math.min(.395*u,.95*c),d=f,tempRect.Tl(.5*c-f/2,.485*u-d/2,f,d),e.XO(s),e.Rect(tempRect)),r&&(f=1.5*C33.En(.22*u,105,.6*c),d=f/8,tempRect.Tl(.5*c-f/2,.868*u-d/2,f,d),e.XO(r),e.Rect(tempRect))):(e.WO(.302*l,.334*l,.365*l,l),f=c,d=Math.max(.005*u,2),tempRect.Tl(0,.85*u-d/2,f,d),e.Rect(tempRect),t?e.WO(l,0,0,l):e.WO(.161*l,.953*l,.816*l,l),f=c*this.Jvt,tempRect.Tl(.5*c-f/2,.85*u-d/2,f,d),e.Rect(tempRect),e.WO(l,l,l,l),e.Y2(),s&&(f=.55*u,d=f,tempRect.Tl(.5*c-f/2,.45*u-d/2,f,d),e.XO(s),e.Rect(tempRect))),this.i4t++,"fade-in"===this.h4t&&n-this.qvt>=SPLASH_FADE_DURATION&&2<=this.i4t&&(this.h4t="wait",this.r4t=n),"wait"===this.h4t&&n-this.r4t>=a&&1<=this.Jvt&&(this.h4t="fade-out",this.n4t=n),("fade-out"===this.h4t&&n-this.n4t>=SPLASH_FADE_DURATION+o||h&&1<=this.Jvt&&n-this.qvt<500)&&this.o4t()}}}{let C33=self.Ve,C3Debugger=self.C3Debugger,assert=self.assert,DEFAULT_RUNTIME_OPTS={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},ife=!0;C33.t5t=class C3Runtime extends C33.pn{constructor(t){t=Object.assign({},DEFAULT_RUNTIME_OPTS,t),super(),this.e5t=t.messagePort,this.s5t=t.runtimeBaseUrl,this.i5t=t.previewUrl,this.r5t=!!t.headless,this.n5t=!!t.hasDom,this.h5t=!!t.isInWorker,ife=t.ife,this.o5t=!!t.useAudio,this.a5t=t.exportType,this.Y9=!!t.isiOSCordova,this.l5t=!!t.isiOSWebView,this.c5t=!!t.isWindowsWebView2,this.u5t=!!t.isAnyWebView2Wrapper,this.f5t=!!t.isFBInstantAvailable,this.d5t=!("preview"!==this.a5t||!t.isDebug),this.p5t=this.d5t,this.C5t=this.d5t,this.m5t=0,this.S5t=[],this.g5t=[],this._5t=!1,this.T5t="",this.y5t="",this.E5t="",this.I5t="",this.A5t=0,this.M5t=0,this.uv=self.devicePixelRatio,this.R5t=0,this.w5t=0,this.b5t=0,this.O5t=0,this.G5t=0,this.P5t=!1,this.H1=!0,this.v5t=!1,this.x5t=!1,this.L5t=!1,this.D5t=null,this.hV=C33.mn(C33.H9,this,t),this.nY=C33.mn(C33.wz,this),this.g3t=C33.mn(C33.mft,this),this.N5t=C33.mn(C33.XL,this,t.wrapperComponentIds),this.F5t=C33.mn(C33.JGt,this),this.oQ=C33.mn(C33.zz,this),this.B5t=C33.mn(C33.flt,this),this.k5t=C33.mn(C33.plt,this),this.blt=C33.mn(C33.Elt,this),this.N1=C33.mn(C33.I1,{R1:t=>this.$5t(t),b1:t=>this.W5t(t)}),this.V5t=new Map,this.H5t=[],this.U5t=new Map,this.X5t=new Map,this.j5t=0,this.Y5t=[],this.q5t=new Set,this.z5t=[],this.J5t=[],this.K5t=new Map,this.Z5t=!1,this.Q5t=!1,this.tLt=0,this.eLt=0,this.sLt=new Map,this.iLt=new Set,this.rLt=new Set,this.nLt=[],this.hLt=[],this.oLt=null,this.aLt=!1,this.lLt="vsync",this.kT="trilinear",this.cLt=!1,this.uLt=!0,this.fLt=!1,this.dLt=!1,this.pLt=null,this.CLt={mLt:t=>{this.zvt=-1,this.SLt=-1,this.gK(t)},gLt:t=>{this.SLt=-1,this.gK(t,!1,"skip-render")},_Lt:()=>{this.zvt=-1,this.xv()}},this.zvt=-1,this.SLt=-1,this.TLt=0,this.yLt=0,this.ELt=!1,this.ILt=!1,this.ALt=!1,this.MLt=!0,this.RLt=!0,this.wLt=!1,this.bLt=0,this.OLt=new C33.y0(1),this.GLt=()=>Math.random(),this.PLt=0,this.vLt=0,this.xLt=0,this.LLt=0,this.DLt=0,this.WRt=1,this.NLt=1/30,this.FLt=0,this.BLt=C33.mn(C33.vf),this.kLt=C33.mn(C33.vf),this.$Lt=C33.mn(C33.vf),this.WLt=new Map,this.VLt=-1,this.HLt=0,this.ULt=0,this.XLt=-1,this.jLt=0,this.YLt=0,this.qLt=0,this.zLt=!1,this.JLt="",this.KLt="",this.E7=null,this.ZLt="",this.QLt=null,this.tDt=null,this.XAt=C33.mn(C33.Event.q3),this.eDt=new Map,this.sDt=new Map,this.iDt=0,this.rDt=!1,this.nDt=!1,this.hDt=!1,this.oDt=[],this.aDt={pretick:C33.mn(C33.Event,"pretick",!1),tick:C33.mn(C33.Event,"tick",!1),tick2:C33.mn(C33.Event,"tick2",!1),instancedestroy:C33.mn(C33.Event,"instancedestroy",!1),beforelayoutchange:C33.mn(C33.Event,"beforelayoutchange",!1),layoutchange:C33.mn(C33.Event,"layoutchange",!1)},this.aDt.instancedestroy.CB=null,this.FY=C33.mn(C33.Event.q3),this.lDt=null;const e=(t,e)=>C33.kRt.TGt(this,t,e);this.cDt=C33.mn(C33.Wf,e),this.uDt=C33.mn(C33.Wf,e),this.fDt=C33.mn(C33.Wf,e),this.dDt=C33.mn(C33.pDt,this,t.jobScheduler),t.canvas&&(this.oLt=C33.mn(C33.QPt,this)),this.e5t.onmessage=t=>this._OnMessageFromDOM(t.data),this.l7("runtime","visibilitychange",t=>this.CDt(t)),this.l7("runtime","wrapper-extension-message",t=>this.mDt(t)),this.l7("runtime","opus-decode",t=>this.yL(t.arrayBuffer)),this.l7("runtime","get-remote-preview-status-info",()=>this.SDt()),this.l7("runtime","js-invoke-function",t=>this.Uft(t)),this.l7("runtime","go-to-last-error-script",self.goToLastErrorScript),this.l7("runtime","offline-audio-render-completed",t=>this.gDt(t)),this.XAt.addEventListener("window-blur",t=>this._Dt(t)),this.XAt.addEventListener("window-focus",()=>this.TDt()),this.oQ.bJ(),this.k5t.bJ(),this.yDt=null,this.EDt=new WeakMap,this.IDt={keyboard:null,b5:null,O5:null,G5:null,P5:null},this.ADt=new WeakMap,this.MDt=[]}static mE(t){return C33.mn(C33.t5t,t)}Sn(){C33.Vh(this.H5t),this.U5t.clear(),this.X5t.clear(),this.nY.Sn(),this.nY=null,this.g3t.Sn(),this.g3t=null,this.N5t.Sn(),this.N5t=null,this.hV.Sn(),this.hV=null,this.F5t.Sn(),this.F5t=null,this.oQ.Sn(),this.oQ=null,this.B5t.Sn(),this.B5t=null,this.k5t.Sn(),this.k5t=null,this.blt.Sn(),this.blt=null,this.N1.Sn(),this.N1=null,this.oLt&&(this.oLt.Sn(),this.oLt=null),this.XAt.Sn(),this.XAt=null,this.RDt=null}["_OnMessageFromDOM"](t){const e=t.type;if("event"===e)this.wDt(t);else{if("result"!==e)throw new Error(`unknown message '${e}'`);this.bDt(t)}}wDt(t){if(this.hDt){const e=t.component,s=t.handler,i=t.data,r=t.dispatchOpts,n=!(!r||!r.dispatchRuntimeEvent),h=!(!r||!r.dispatchUserScriptEvent),o=t.responseId;if("runtime"===e){if(n){const l=new C33.Event(s);l.data=i,this.XAt.nf(l)}if(h){const c=new C33.Event(s,!0);for(const[u,f]of Object.entries(i))c[u]=f;this.Iz(c)}}const a=this.eDt.get(e);if(a){const d=a.get(s);if(d){let t=null;try{t=d(i)}catch(t){return console.error(`Exception in '${e}' handler '${s}':`,t),void(null!==o&&this.ODt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.ODt(o,!0,t)).catch(t=>{console.error(`Rejection from '${e}' handler '${s}':`,t),this.ODt(o,!1,""+t)}):this.ODt(o,!0,t))}else n||h||console.warn(`[Runtime] No DOM handler '${s}' for component '${e}'`)}else n||h||console.warn(`[Runtime] No DOM event handlers for component '${e}'`)}else this.oDt.push(t)}ODt(t,e,s){this.e5t.postMessage({type:"result",responseId:t,isOk:e,result:s})}bDt(t){const e=t.responseId,s=t.isOk,i=t.result,r=this.sDt.get(e);s?r.resolve(i):r.reject(i),this.sDt.delete(e)}l7(t,e,s){let i=this.eDt.get(t);if(i||(i=new Map,this.eDt.set(t,i)),i.has(e))throw new Error(`[Runtime] Component '${t}' already has handler '${e}'`);i.set(e,s)}m3(t,e,s,i){this.e5t.postMessage({type:"event",component:t,handler:e,data:s,responseId:null},i)}J5(t,e,s,i){const r=this.iDt++,n=new Promise((t,e)=>{this.sDt.set(r,{resolve:t,reject:e})});return this.e5t.postMessage({type:"event",component:t,handler:e,data:s,responseId:r},i),n}f$(t,e,s,i=-1){this.m3("runtime","send-wrapper-extension-message",{componentId:t,messageId:e,params:s,asyncId:i})}d$(t,e,s){const i=this.iDt++,r=new Promise((t,e)=>{this.sDt.set(i,{resolve:t,reject:e})});return this.f$(t,e,s,i),r}mDt(t){if(-1!==t.asyncId){const e=t.asyncId,s=this.sDt.get(e);s.resolve(t.params),this.sDt.delete(e)}else this.wDt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}R7(t,e,s){this.l7("wrapper-extension:"+t,e,s)}A7(t){return this.N5t.A7(t)}GDt(t){if(!this.Az())throw new Error("not in debug mode");this.m3("runtime","post-to-debugger",t)}async URt(t){C33.e_t(this),this.Az()?await C3Debugger.URt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[e]=await Promise.all([this.hV.bo("data.json"),this.PDt(),this.dDt.URt()]);if(await this.vDt(e),await this.xDt(t),this.Kxt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.pxt()){const s=this.pxt();console.info(`[C3 runtime] Hosted in ${this.tx()?"worker":"DOM"}, rendering with WebGL ${s.YT()} [${s.JG()}]`)}else this.Cxt()&&console.info(`[C3 runtime] Hosted in ${this.tx()?"worker":"DOM"}, rendering with WebGPU [${this.Cxt().GetAdapterInfoString()}]`);this.Kg().yg()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.hDt=!0;for(const i of this.oDt)this.wDt(i);C33.Vh(this.oDt),this.oLt&&this.oLt.Vxt();for(const r of t.runOnStartupFunctions)this.S5t.push(this.LDt(r));if(await Promise.all([this.hV.UW(),...this.S5t]),C33.Vh(this.S5t),!this.hV.jW())return this.oLt&&await this.oLt.Xxt(),await this.XAt.if(new C33.Event("beforeruntimestart")),await this.gG(),this.e5t.postMessage({type:"runtime-ready"}),this;this.oLt&&this.oLt.Wxt()}async LDt(t){try{await t(this.yDt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async vDt(t){const e=t.project,s=(this.T5t=e[0],this.y5t=e[16],this.E5t=e[31],this.I5t=e[38],e[39]||"loading-logo.png"),i=(this.cLt=!!e[9],this.A5t=this.b5t=e[10],this.M5t=this.O5t=e[11],this.F5t.NPt(this.A5t,this.M5t),this.R5t=this.A5t/2,this.w5t=this.M5t/2,this.lLt=e[37],this.aLt=!!e[40],this.kT=e[14],this.v5t=e[15],this.x5t=e[42],this.L5t=e[17],this.P5t=!!e[18],this.G5t=e[19],this.eLt=e[21],this.fLt=e[22],this.hV);if(i.TW(e[45]),i.KW(e[7],e[25]),i.EW(e[8]),i.IW(e[32]),i.MW(e[28]),i.qW(e[29]),0===this.G5t){let t="";(t="flat"===i.mL()?i.RW()+s:s)&&(this.D5t=i.FW({url:t}))}this.oLt&&(this.oLt.nxt(C33.QPt.cxt(e[12])),this.oLt.axt(e[23]?"high":"low"),this.oLt.gg(0!==e[24]),this.oLt.l4t(e[34]),this.oLt.uxt(e[41]),this.oLt.c4t(e[13]),this.oLt.u4t(e[30]),this.oLt.p4t(e[46],e[47]),this.oLt.d4t(e[26]),this.oLt.C4t(e[48]));const r=e[43],n=(r&&await this.DDt(r),this.NDt(),this.N5t.PIt(),this.nLt=self.FDt(),e[2]);for(const l of n[1])this.N5t.vIt(l);for(const c of n[0])this.N5t.GIt(c);this.nLt=self.FDt(),this.BDt(),this.N5t.FIt();for(const u of e[3]){const f=C33._lt.mE(this,this.H5t.length,u);this.H5t.push(f),this.U5t.set(f.i3().toLowerCase(),f),this.X5t.set(f.NU(),f)}for(const d of e[4]){const p=this.H5t[d[0]];p.OMt(d)}for(const C of e[27]){const m=C.map(t=>this.H5t[t]);this.Y5t.push(C33.mn(C33.bRt,this,m))}this.kDt();for(const S of this.H5t)S.PMt();for(const g of e[5])this.nY.mE(g);const h=e[1];if(h){const _=this.nY.Bz(h);_&&this.nY.Nz(_)}for(const T of e[35])this.B5t.mE(T);for(const y of e[33])this.oQ.mE(y);for(const E of e[44])this.k5t.mE(E);this.k5t.Slt()||(this.k5t.Sn(),this.k5t=null);for(const I of e[49])this.blt.mE(I);this.blt.Rlt()||(this.blt.Sn(),this.blt=null);for(const A of e[6])this.g3t.mE(A);this.g3t.Yft(),this.$Dt(),C33.Vh(this.nLt),this.WD();let o="any",a=e[20];1===a?o="portrait":2===a&&(o="landscape"),this.m3("runtime","set-target-orientation",{targetOrientation:o})}async DDt(t){const e=t.format;"image-sequence"===e?this.pLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===e?this.pLt=new self.C3ExportToGIF(this,t):"webm"===e?this.pLt=new self.C3ExportToWebMVideo(this,t):"mp4"===e&&(this.pLt=new self.C3ExportToMP4Video(this,t)),this.lLt="unlimited-frame",this.oLt.nxt("off"),this.uv=1,self.devicePixelRatio=1,await this.J5("runtime","set-exporting-to-video",{message:this.pLt.GetExportingMessageForPercent(0),duration:this.pLt.HB()})}Uxt(){return this.G5t}k4t(){return null!==this.pLt}WDt(){return this.pLt.HB()}VDt(){return this.pLt.GetFramerate()}HDt(){return this.pLt.URt({width:this.oLt.U4t(),height:this.oLt.j4t()})}UDt(){const t=this.TLt/this.VDt();return this.pLt.AddFrame(this.oLt.ixt(),t)}XDt(){this.pLt&&this.pLt._st()}gDt(t){this.pLt.OnOfflineAudioRenderCompleted(t)}jDt(){return this.pLt.pg()}Zxt(){return this.f5t}q1(){return this.H1}tL(t){this.S5t.push(t)}wq(t){this._5t=!!t}YDt(t){this._5t&&this.g5t.push(t)}xq(){return this.g5t}EMt(){return this.j5t++}xMt(){return this.j5t}OGt(t){this.q5t.add(t)}GGt(t){this.q5t.delete(t)}B4t(){return this.q5t}async xDt(t){this.oLt&&(await this.oLt.No(t),this.oLt.Dxt(this.G5t))}async PDt(){const r=this.hV;if(!r.iL("audio/webm; codecs=opus")){let t=null,e=r.yW(),s=e+"opus.wasm.js",i=e+"opus.wasm.wasm";try{t=this.qDt()&&r.wW()?await r.GW(i):await r.Go(i)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.zDt(t,"opus-decoder-wasm"),await this.JDt([s])}}async yL(t){const e=await this.KDt("OpusDecode",{arrayBuffer:t},[t]);return e}async gG(){this.ELt=!0,this.PLt=Date.now();let e=null,t=new Promise(t=>e=t);if(this.P5t){for(const r of this.H5t)r.bU()||r.VMt()||!r.JL()||r.Oyt();(async()=>{await this.hV.UW(),await t,this.H1=!1,this.ZDt()})()}else this.H1=!1;this.hV.XW(),this.Az()&&C3Debugger.RuntimeInit(ife);for(const n of this.nY.I5())n.Zq();this.k4t()&&await this.HDt();const s=this.nY.Fz(),i=(await s.cq(null,this.Kg()),await s.yq(!0),this.HLt=performance.now(),e(),this.P5t||this.ZDt(),await this.J5("runtime","before-start-ticking"));i.isSuspended&&!this.k4t()?(this.bLt++,this.wLt=!0):this.gK()}ZDt(){this.n7(C33.Xq.Uq.Hq.QDt,null,null),this.m3("runtime","register-sw")}K1t(t){t=Math.floor(t);const e=this.nLt;if(t<0||t>=e.length)throw new Error("invalid object reference");return e[t]}BDt(){for(const t of self.tNt){const e=C33.first(Object.keys(t));this.hLt.push(e)}}S0t(t){t=Math.floor(t);const e=this.hLt;if(t<0||t>=e.length)throw new Error("invalid prop reference");return e[t]}eNt(){return this.n5t}sNt(){return this.r5t}tx(){return this.h5t}kxt(){return this.s5t}iNt(){return this.i5t}Ix(){return this.g3t}Fx(){return this.g3t.Fx()}o0t(){return this.g3t.o0t()}Ox(){return this.g3t.Ox()}a0t(){return this.g3t.a0t()}Dgt(){return 0===this.o0t().F3t()}c0t(){return this.g3t.c0t()}gGt(){return this.N5t}qmt(){return this.N5t.qmt()}rU(t){if((t=Math.floor(t))<0||t>=this.H5t.length)throw new RangeError("invalid index");return this.H5t[t]}rNt(t){return this.U5t.get(t.toLowerCase())||null}Fq(t){return this.X5t.get(t)||null}Drt(t){const e=C33.XL.cD(t);return e?e.pD():null}wU(){return this.H5t}*nNt(){for(const t of this.H5t)t.bU()||(yield*t.instances())}q3(){return this.XAt}_x(){return this.FY}Iz(t){t.runtime=this.jL();const e=this.Az()&&!this.g3t.kD();e&&C3Debugger.StartMeasuringScriptTime(),this.FY.dispatchEvent(t),e&&C3Debugger.AddScriptTime()}$q(t){return t.runtime=this.jL(),this.FY.if(t)}nx(){return this.A5t}ox(){return this.M5t}hNt(t,e){if(this.A5t!==t||this.M5t!==e){this.A5t=t,this.M5t=e;const s=this.T5();s.Yz(),s.qz()}}hX(){return this.b5t}aX(){return this.O5t}txt(t,e){if(this.b5t!==t||this.O5t!==e){this.b5t=t,this.O5t=e;const s=this.T5();s.Yz(),s.qz()}}$4t(t){this.k4t()||(this.uv=t)}kU(){return this.uv}sj(){return this.R5t}ij(){return this.w5t}g8(){return this.oLt}lj(){return this.oLt?this.oLt.lj():this.b5t}cj(){return this.oLt?this.oLt.cj():this.O5t}TF(){return this.oLt?this.oLt.TF():1}H8(){return this.oLt?this.oLt.H8():1}Hj(){return this.oLt?this.oLt.Hj():1}Wj(){return this.oLt?this.oLt.Wj():1}uF(){return this.oLt?this.oLt.uF():0}fF(){return this.oLt?this.oLt.fF():0}oNt(){return this.oLt?this.oLt.W8():0}aNt(){return this.oLt?this.oLt.V8():0}B8(){return this.oLt?this.oLt.B8():"off"}Tj(t){return this.oLt?this.oLt.Tj(t):null}HH(t){this.oLt&&this.oLt.HH(t)}gj(){return this.v5t}P4t(){return this.x5t}v4t(){return this.L5t}h5(){return this.oLt?this.oLt.h5():NaN}Zy(){return"nearest"!==this.ux()}a5(){return this.lLt}l5(t){this.lLt!==t&&(this.lLt=t,-1!==this.zvt||-1!==this.SLt)&&(this.lNt(),this.cNt())}ux(){return this.kT}RMt(){return this.P5t}Nxt(){return this.D5t}jxt(){this.D5t&&(this.D5t.RR(),this.D5t.Sn(),this.D5t=null)}T5(){return this.nY}S5(){return this.nY.S5()}XQ(){return this.oQ}uNt(){return this.B5t}Twt(){return this.k5t}zlt(){return this.blt}H4(){return this.hV}FW(t){return this.hV.FW(t)}DD(t,e,s,i,r,n){if(n&&this.k5t){if(t instanceof C33._lt&&t.bU()){const o=t.LCt(),a=Math.floor(this.m5()*o.length);return this.DD(o[a],e,s,i,r,n)}const h=this.k5t.glt(t,n);if(h){const l=this.dU(h,e,!1,s,i,!1,r,void 0,r);return this.k5t.Tlt(l,n),l}}return this.dU(t,e,!1,s,i,!1,r,void 0,r)}dU(t,e,s,i,r,n,h,o,a){let l=null,c=null;if(t instanceof C33._lt){if((c=t).bU()){const _=c.LCt(),T=Math.floor(this.m5()*_.length);c=_[T]}l=c.hU()}else l=t,c=this.rU(l[1]);const u=c._D().JL();if(this.H1&&u&&!c.VMt())return null;const f=e;u||(e=null);let d;d=s&&!n&&l&&!this.sLt.has(l[2])?l[2]:this.eLt++;const p=l?l[0]:null,C=C33.mn(C33.Instance,{runtime:this,EF:c,x7:e,HRt:p,YRt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.sLt.set(d,C);let m=null,S=(u&&(m=C.W5(),void 0!==i&&void 0!==r&&(m.O_(i),m.v_(r)),c.mRt(!0)),e&&(a||e.CU(C,!0),e.y5().fq(c)),this.tLt++,!0);if(o){const y=o.IF();if(y.LF()&&c.LF()){const E=c.aq(),I=y.aq();E===I&&(S=!1)}}if(c.LF()&&!s&&!n&&S){const A=new Set;for(const M of c.aq().zq())if(M!==c){const R=this.fNt(M,m,A);if(R){const w=this.dU(R,f,!1,m?m.b_():i,m?m.P_():r,!0,!1,void 0,a);C.Jq(w)}else{const b=this.dU(M,f,!1,m?m.b_():i,m?m.P_():r,!0,!1,void 0,a);C.Jq(b)}}for(const O of C.DF()){O.Jq(C);for(const G of C.DF())O!==G&&O.Jq(G)}}if(u&&!s&&h&&this.dNt(C,p,m,e,i,r,a),c.LF()&&!s&&!n&&h)for(const P of C.DF()){const v=P.W5();if(v){const B=P._D(),x=P.IF().hU()[0];B.JL()?this.dNt(P,x,v,e,v.b_(),v.P_(),a):this.dNt(P,x,v,e,void 0,void 0,a)}}if(!n&&h){void 0===i&&(i=p[0]),void 0===r&&(r=p[1]);const L=m.u6(),k=i-m.b_()+L.b_(),$=r-m.P_()+L.P_();L.D7(k,$)}c.uRt();const N=l?C33.eo(l[5]):null,F=l?l[4].map(t=>C33.eo(t)):null,g=u&&p&&p[13];if(g&&C.QRt(),C.$Mt(N,F),g){const D=p[13];C.rB().jyt(D[2],D[0],D[1])}return this.J5t.push(C),this.Z5t=!0,this.Az()&&C3Debugger.InstanceCreated(C),C}Cbt(t){const e=t[0],s=t[1],i=t[2],r=t[6];if(r)return r;const n=this.nY.kz(e),h=n.V5(s);return h.lU(i)}fNt(t,e,s){const i=e?._wt()??[];for(const r of i){const n=this.Cbt(r),h=!!r[4],o=this.rU(n[1]);if(!s.has(n)&&(t===o&&h))return s.add(n),n}}dNt(a,t,e,l,c,u,f){const s=e.NOt(),i=e._wt();if(a.W5().FOt(s),i){void 0===c&&(c=t[0]),void 0===u&&(u=t[1]);const d=new Set,p=t[0],C=t[1];for(const m of i){let t=m[0],e=m[1],s=m[2],i=m[3],r=!!m[4],n=m[5],h=m[6],o;if(h)o=h;else{const T=this.nY.kz(t),y=T.V5(e);o=y.lU(s)}const S=this.rU(o[1]),g=a.ywt(S),_=d.has(S);if(g&&!_&&r){const E=a.Ewt(S),I=(E.W5().URt(o[0]),c+o[0][0]-p),A=u+o[0][1]-C;E.W5().D7(I,A),E.W5().FOt(n),a._6(E,{A6:!!(i>>0&1),R6:!!(i>>1&1),b6:!!(i>>2&1),G6:!!(i>>3&1),v6:!!(i>>4&1),W6:!!(i>>5&1),L6:!!(i>>6&1),N6:!!(i>>7&1),B6:!!(i>>8&1)}),d.add(S)}else{const M=c+o[0][0]-p,R=u+o[0][1]-C,w=this.dU(o,l,!1,M,R,!1,!0,a,f);w.W5().FOt(n),a._6(w,{A6:!!(i>>0&1),R6:!!(i>>1&1),b6:!!(i>>2&1),G6:!!(i>>3&1),v6:!!(i>>4&1),W6:!!(i>>5&1),L6:!!(i>>6&1),N6:!!(i>>7&1),B6:!!(i>>8&1)})}}}}OF(s){if(!this.iLt.has(s)){let t=s.IF(),e=this.K5t.get(t);if(e){if(e.has(s))return;e.add(s)}else(e=new Set).add(s),this.K5t.set(t,e);if(this.Az()&&C3Debugger.InstanceDestroyed(s),s.ewt(),this.Z5t=!0,s.LF())for(const i of s.DF())this.OF(i);for(const r of s.children())r.V6()&&this.OF(r);if(!this.nY.$D()&&!this.zLt){const n=this.Ix();n.FD(!0),s.vwt(),n.FD(!1)}s.xwt(this.nY.$D())}}WD(){this.Z5t&&(this.Q5t=!0,this.pNt(),this.CNt(),this.Q5t=!1,this.Z5t=!1,this.q5())}pNt(){for(const t of this.J5t){const e=t.IF();e.CU(t);for(const s of e.A0t())s.CU(t),s.uRt()}C33.Vh(this.J5t)}CNt(){this.XAt.W3(!0);for(const[t,e]of this.K5t.entries())this.mNt(t,e),e.clear();this.K5t.clear(),this.XAt.W3(!1)}mNt(t,e){for(const s of e){const i=this.aDt.instancedestroy,r=(i.CB=s,this.XAt.dispatchEvent(i),this.sLt.delete(s.NF()),this.WLt.delete(s),s.W5());r&&(r.$Ot(),r._U(),r.ewt()),this.iLt.add(s),this.tLt--}C33.Kh(t.GD(),e),t.uRt(),this.rLt.add(t);for(const n of t.A0t())C33.Kh(n.GD(),e),n.uRt(),this.rLt.add(n);if(t._D().JL()){const h=new Set([...e].map(t=>t.W5().V5()));for(const o of h)o.xX(e)}}dRt(){return this.J5t}*kgt(t){for(const e of this.dRt())t.bU()?e.IF().qgt(t)&&(yield e):e.IF()===t&&(yield e)}kMt(){return this.eLt++}WMt(t,e){this.sLt.set(t,e)}S$(t){this.RLt!==(t=!!t)&&(this.RLt=!!t,this.RLt)&&this.wLt&&(this.T$(!1),this.wLt=!1)}g$(){return this.RLt}Tq(){this.XAt.dispatchEvent(C33.mn(C33.Event,"renderercontextlost")),this.T$(!0);for(const e of this.H5t)!e.bU()&&e.HMt()&&e.gq();const t=this.S5();t&&t.Tq(),C33.$It.gV(),C33.kW.gV()}async dxt(){await this.S5().cq(null,this.Kg()),this.XAt.dispatchEvent(C33.mn(C33.Event,"renderercontextrestored")),this.T$(!1),this.q5()}CDt(t){if(this.RLt){const e=t.hidden;this.T$(e),(this.wLt=e)||this.q5()}}_Dt(t){!this.Kxt()||!this.fLt||C33._s.bs||t.data.parentHasFocus||(this.T$(!0),this.dLt=!0)}TDt(){this.dLt&&(this.T$(!1),this.dLt=!1)}cNt(){const t=this.CLt;"vsync"===this.lLt?-1===this.zvt&&(this.zvt=self.requestAnimationFrame(t.mLt)):"unlimited-tick"===this.lLt?(-1===this.SLt&&(this.SLt=C33.Co(t.gLt)),-1===this.zvt&&(this.zvt=self.requestAnimationFrame(t._Lt))):-1===this.SLt&&(this.SLt=C33.Co(t.mLt))}lNt(){-1!==this.zvt&&(self.cancelAnimationFrame(this.zvt),this.zvt=-1),-1!==this.SLt&&(C33.So(this.SLt),this.SLt=-1)}Ux(){return 0<this.bLt}T$(t){if(!this.k4t()){const e=this.Ux(),s=(this.bLt+=t?1:-1,this.bLt<0&&(this.bLt=0),this.Ux());if(!e&&s)console.log("[Construct] Suspending"),this.lNt(),this.XAt.dispatchEvent(C33.mn(C33.Event,"suspend")),this.n7(C33.Xq.Uq.Hq.SNt,null,null);else if(e&&!s){console.log("[Construct] Resuming");const i=performance.now();this.vLt=i,this.HLt=i,this.VLt=0,this.ULt=0,this.XLt=0,this.jLt=0,this.qLt=0,this.YLt=0,this.XAt.dispatchEvent(C33.mn(C33.Event,"resume")),this.n7(C33.Xq.Uq.Hq.gNt,null,null),this.J0t()||this.gK(i)}}}r$(t){this.cDt._u(t)}a$(t){this.uDt._u(t)}h$(t){this.fDt._u(t)}n$(t){this.cDt.Gf(t)}l$(t){this.uDt.Gf(t)}o$(t){this.fDt.Gf(t)}_Nt(){const t=globalThis.t$;this.cDt._0(!0);for(const e of this.cDt)e instanceof t?e.C7():e.gK();this.cDt._0(!1)}TNt(){const t=globalThis.t$;this.uDt._0(!0);for(const e of this.uDt)e instanceof t?e.u$():e._It();this.uDt._0(!1)}yNt(){const t=globalThis.t$;this.fDt._0(!0);for(const e of this.fDt)e instanceof t?e.g7():e.dEt();this.fDt._0(!1)}*ENt(){const e=globalThis.t$;this.cDt._0(!0);for(const s of this.cDt){let t;t=s instanceof e?s.C7():s.gK(),C33.jo(t)&&(yield*t)}this.cDt._0(!1)}*INt(){const e=globalThis.t$;this.uDt._0(!0);for(const s of this.uDt){let t;t=s instanceof e?s.u$():s._It(),C33.jo(t)&&(yield*t)}this.uDt._0(!1)}*ANt(){const e=globalThis.t$;this.fDt._0(!0);for(const s of this.fDt){let t;t=s instanceof e?s.g7():s.dEt(),C33.jo(t)&&(yield*t)}this.fDt._0(!1)}async gK(a,t,e){this.ALt=!0;const l="background-wake"===e,c="background-wake"!==e&&"skip-render"!==e,u=this.T5(),f=this.g8();if(this.ELt&&(!this.Ux()||t||l)){let t=performance.now(),e=(this.ILt=!0,this.MNt(a||0),this.XLt++,this.RNt(),this.wNt()),s=(this.Ngt()&&await e,this.XAt.rf(this.aDt.pretick)),i=(s instanceof Promise&&await s,this.bNt()),r=(this.Ngt()&&await i,this.ONt()&&await this.GNt(),u.M5()&&await this.PNt(),this.vNt()),n=(this.Ngt()&&await r,u.S5()),h=n.iq(),o=!1;if(-1!==h&&(n.rq(),f.sq()!==h)){const d=this.g8().Mq(h);this.tx()&&(o=!0,await d)}c&&this.xv(),o&&this.m3("canvas","cleanup-html-layers"),this.k4t()&&(await this.UDt(),this.zx()>=this.WDt())?this.jDt():(this.Ux()||l||this.cNt(),this.TLt++,this.yLt++,this.ILt=!1,this.YLt+=performance.now()-t)}}async wNt(){const t=this.g3t,e=this.Az();this.WD(),t.FD(!0),this.B0t(this.S5()),e&&C3Debugger.StartMeasuringTime(),this.Ngt()?await t.Sdt():t.fdt(),e&&C3Debugger.AddEventsTime(),this.k0t(),t.FD(!1),this.WD(),t.FD(!0)}async bNt(){const t=this.Az(),e=this.Ngt(),s=this.XAt,i=this.aDt,r=this.lDt;t&&C3Debugger.StartMeasuringTime(),e?await this.xNt(this.ENt()):this._Nt(),e?await this.xNt(this.INt()):this.TNt(),t&&C3Debugger.AddBehaviorTickTime(),t&&C3Debugger.StartMeasuringTime(),e?await this.LNt(i.tick):s.dispatchEvent(i.tick),t&&C3Debugger.AddPluginTickTime(),this.g3t.FD(!1),this.Iz(r.tick)}async vNt(){const t=this.g3t,e=this.XAt,s=this.aDt,i=this.Az(),r=this.Ngt();i&&C3Debugger.StartMeasuringTime(),r?await t.$0t(this.nY):t.F0t(this.nY),i&&C3Debugger.AddEventsTime(),this.F5t.lPt(),this.RNt(),this.MLt=!1,t.FD(!0),i&&C3Debugger.StartMeasuringTime(),r?await this.xNt(this.ANt()):this.yNt(),i&&C3Debugger.AddBehaviorTickTime(),i&&C3Debugger.StartMeasuringTime(),r?await this.LNt(s.tick2):e.dispatchEvent(s.tick2),i&&C3Debugger.AddPluginTickTime(),t.FD(!1),r&&await t.K0t()}RNt(){if(0!==this.iLt.size){const t=this.XAt;t.W3(!0);for(const e of this.rLt)e.hdt().qut(this.iLt);this.rLt.clear(),this.g3t._dt(this.iLt);for(const s of this.iLt)s.Sn();this.iLt.clear(),t.W3(!1)}}async PNt(){let t=this.T5(),e=0;for(;t.M5()&&e++<10;)await this.DNt(t.jz())}MNt(t){let e=0;if(this.k4t())e=1/this.VDt(),this.xLt=e,this.LLt=e;else if(0!==this.vLt){const s=Math.max(t-this.vLt,0);.5<(e=s/1e3)&&(e=0),this.xLt=e,this.LLt=C33.En(e,this.FLt,this.NLt)}this.vLt=t,this.DLt=this.LLt*this.WRt,this.BLt._u(this.DLt),this.kLt._u(e*this.WRt),this.$Lt._u(this.LLt);for(const[i,r]of this.WLt)r._u(this.LLt*i.Zx());this.oLt&&this.oLt.Mxt(),1e3<=t-this.HLt&&(this.HLt+=1e3,1e3<=t-this.HLt&&(this.HLt=t),this.ULt=this.VLt,this.VLt=0,this.jLt=this.XLt,this.XLt=0,this.qLt=Math.min(this.YLt/1e3,1),this.YLt=0,this.oLt&&this.oLt.Axt(),this.F5t.nPt(),this.Az())&&C3Debugger.Update1sPerfStats()}KRt(t,e){if(e){if(!this.WLt.has(t)){const s=C33.mn(C33.vf);s.Ff(this.BLt),this.WLt.set(t,s)}}else this.WLt.delete(t)}ZRt(t){const e=this.WLt.get(t);return e?e.cs():this.zx()}async DNt(t){const e=this.XAt,s=this.T5(),i=s.S5();await i.ez(),i._q(t,this.Kg()),i===t&&this.g3t.rz(),this.F5t.lPt(),this.RNt(),e.dispatchEvent(this.aDt.beforelayoutchange),C33.H3.lf(!0),await t.cq(i,this.Kg()),C33.H3.lf(!1),await t.yq(!1),e.dispatchEvent(this.aDt.layoutchange),this.q5(),this.MLt=!0,this.WD(),this.XDt()}q5(){this.uLt=!0}pxt(){return this.oLt?this.oLt.pxt():null}Cxt(){return this.oLt?this.oLt.Cxt():null}Kg(){return this.oLt?this.oLt.Kg():null}xv(){const s=this.oLt;if(s&&!s.fxt()){const i=this.Kg(),t=i.WG(),r=t&&i.Eg(),n=t&&i.F2();if(r&&i.wG(),this.uLt||this.k4t()){const h=this.nY.S5(),o=(this.VLt++,i.gG(),this.Az());o&&C3Debugger.StartMeasuringTime(),this.uLt=!1;let t=null,e=(r&&(t=s.bxt().pb(),i.$G(t)),null);n&&(e=i.StartFrameTiming(2*(1+h.JY())),i.StartMeasuringRenderPassTime(0,1)),this.SX()&&"low"===s._j()?i.PO(s.lj(),s.cj()):i.vO(),this.NNt(this.Kg(),h),t&&i.VG(t),n&&(i.StopMeasuringRenderPassTime(),this.oLt.Oxt(e)),i.pg(),o&&(C3Debugger.AddDrawCallsTime(),C3Debugger.UpdateInspectHighlight()),s&&s.Pxt()}else i.Sg()}}Cz(t){return"low"===this.g8()._j()||t.Eg()&&(this.gj()||this.SX())}NNt(e,s){e.Y2(),e.zO(),e.WO(1,1,1,1),e.PG(null),e.XO(null),e.TG(this.SX()),this.Cz(e)&&s.fz(e);const i=s.sq();for(let t=1;t<i;++t)s._z(e,t),e.F2()&&e.Restart();this.Cz(e)||s.fz(e),s.gz(e)}n7(t,e,s){if(!this.ELt)return!1;let i=!this.ILt&&!this.g3t.edt(),r=0;i&&(r=performance.now());const n=this.Az(),h=(n&&this.R$(!1),this.g3t.U0t(this.nY,t,e,s));if(i){const o=performance.now()-r;this.YLt+=o,n&&C3Debugger.AddTriggersTime(o)}return n&&this.R$(!0),h}eEt(t,e,s){if(!this.Ngt())return this.n7(t,e,s);if(this.J0t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.ILt||this.g3t.edt())return this.g3t.Y0t(this.nY,t,e,s);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async o7(t,e,s){if(!this.Ngt())return this.n7(t,e,s);if(!this.ELt)return!1;if(this.J0t())return this.g3t.q0t(t,e,s);if(!this.S5())return this.g3t.X0t(t,e,s);let i=performance.now(),r=this.g3t.Y0t(this.nY,t,e,s),n=r.next();for(;!n.done;)await this.V0t(n.value),n=r.next();return this.Ux()||this.g3t.edt()||(await this.g3t.K0t(),this.ALt&&!this.ILt&&this.cNt()),this.YLt+=performance.now()-i,n.value}sEt(t,e,s){const i=this.Az(),r=(i&&this.R$(!1),this.g3t.Z0t(this.nY,t,e,s));return i&&this.R$(!0),r}iEt(t,e,s){return this.g3t.Q0t(this.nY,t,e,s)}rEt(t){return this.OLt._u(t)}B0t(t){this.z5t.push(t)}k0t(){if(!this.z5t.length)throw new Error("layout stack empty");this.z5t.pop()}B5(){return this.z5t.length?this.z5t.at(-1):this.S5()}jx(t){return t&&-1!==t.Zx()?this.LLt*t.Zx():this.DLt}mK(){return this.DLt}SK(){return this.LLt}qx(){return this.xLt}Zx(){return this.WRt}Qx(t){(isNaN(t)||t<0)&&(t=0),this.WRt=t}f5(t){this.FLt=Math.max(t,0)}u5(){return this.FLt}C5(t){this.NLt=Math.max(t,0)}p5(){return this.NLt}t5(){return this.ULt}s5(){return this.jLt}r5(){return this.qLt}FNt(){return this.PLt}zx(){return this.BLt.cs()}BNt(){return this.kLt.cs()}Kx(){return this.$Lt.cs()}ptt(){return this.TLt}kNt(){return this.yLt}$Nt(){return this.tLt}J4(){return this.T5t}Z4(){return this.y5t}WNt(){return this.E5t}VNt(){return this.I5t}D5(t){if(this.zLt)throw new Error("cannot call while loading state - wait until afterload event");return this.sLt.get(t)||null}Yq(){this.sLt.clear();for(const t of this.H5t)if(!t.bU())for(const e of t.GD())this.sLt.set(e.NF(),e)}Kxt(){return"preview"===this.a5t}Az(){return this.d5t}OW(){return this.a5t}Qxt(){return"cordova"===this.a5t}HNt(){return"Android"===C33._s.Ts&&("cordova"===this.a5t||"playable-ad-single-file"===this.a5t||"playable-ad-zip"===this.a5t||"instant-games"===this.a5t)}qDt(){return this.Y9}UNt(){return this.l5t}XNt(){return this.c5t}jNt(){return this.u5t}j4(){return this.F5t}BIt(){return this.N5t.BIt()}kIt(){return this.N5t.kIt()}SX(){return this.aLt}YNt(){return this.Kg().M2(this.aX())}E2(t){return this.Kg().E2(t||this.aX())}qNt(){return this.MLt}zNt(t){this.cLt!==(t=!!t)&&(this.cLt=t,this.T5().qz(),this.q5())}mx(){return this.cLt}JNt(t){if(!this.V5t.has(t)){const s=()=>this.KNt(t);this.V5t.set(t,s),t.q3().addEventListener("animationframeimagechange",s)}const e=this.N1.O1(t);return e.Y1()||e.z1().then(()=>this.q5()),e}KNt(t){this.N1.L1(t)}$5t(t){const e=[];for(const s of t.eRt())for(const i of s.DB()){const r=i.VB();e.push({source:i,width:r.dC(),height:r.IC(),tag:i.lk()})}return{X1:e}}async W5t(t){const e=C33.mn(C33.y0),s=[],r=new Map;for(const h of t.eRt())for(const o of h.DB()){const a=o.VB().hAt();r.has(a)||(r.set(a,null),s.push(e._u(async()=>{const t=await a.EV();r.set(a,t)})))}await Promise.all(s);const i=[];for(const l of t.eRt())for(const c of l.DB())i.push(e._u(async()=>{const t=c.VB(),e=r.get(t.hAt()),s=await t.oAt(e),i=await createImageBitmap(s);return{K1:i}}));const n=await Promise.all(i);for(const u of r.values())u instanceof ImageBitmap&&u.close&&u.close();return{X1:n}}ZNt(t){this.JLt=t}QNt(t){this.KLt=t}PTt(t){this.E7=t}tFt(){return this.ZLt}ONt(){return!(!this.JLt&&!this.KLt&&null===this.E7)}async GNt(){if(this.JLt&&(this.WD(),await this.eFt(this.JLt),this.sFt()),this.KLt&&(await this.iFt(this.KLt),this.sFt(),this.Az())&&C3Debugger.StepIfPausedInDebugger(),null!==this.E7){this.WD();try{await this.rFt(this.E7),this.ZLt=this.E7,await this.o7(C33.Xq.Uq.Hq.nFt,null),this.ZLt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.o7(C33.Xq.Uq.Hq.hFt,null)}this.sFt()}}sFt(){this.JLt="",this.KLt="",this.E7=null}VL(){return this.QLt||(this.QLt=localforage.Ws({name:"c3-localstorage-"+this.WNt(),description:this.J4()})),this.QLt}oFt(){return this.tDt||(this.tDt=localforage.Ws({name:"c3-savegames-"+this.WNt(),description:this.J4()})),this.tDt}async eFt(t){const e=await this.aFt();try{await this.oFt().setItem(t,e),console.log("[Construct] Saved state to storage ("+e.length+" chars)"),this.ZLt=e,await this.o7(C33.Xq.Uq.Hq.lFt,null),this.ZLt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.o7(C33.Xq.Uq.Hq.cFt,null)}}async iFt(t){try{const e=await this.oFt().getItem(t);if(!e)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+e.length+" chars)"),await this.rFt(e),this.ZLt=e,await this.o7(C33.Xq.Uq.Hq.nFt,null),this.ZLt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.o7(C33.Xq.Uq.Hq.hFt,null)}}async aFt(){const t={c3save:!0,version:1,rt:{time:this.zx(),timeRaw:this.BNt(),walltime:this.Kx(),timescale:this.Zx(),tickcount:this.ptt(),next_uid:this.eLt,running_layout:this.S5().NU(),start_time_offset:Date.now()-this.PLt},types:{},layouts:{},events:this.g3t.Qj(),timelines:this.oQ.Qj(),user_script_data:null};for(const s of this.H5t)s.bU()||s.IRt()||(t.types[s.NU().toString()]=s.Qj());for(const i of this.nY.I5())t.layouts[i.NU().toString()]=i.Qj();const e=this.uFt("save");return e.saveData=null,await this.$q(e),t.user_script_data=e.saveData,JSON.stringify(t)}Lq(){return this.zLt}async rFt(t){const e=this.T5(),s=JSON.parse(t);if(s.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!s.c3save)throw new Error("not valid C3 save data");if(1<s.version)throw new Error("C3 save data from future version");this.Kgt(),this.XAt.dispatchEvent(C33.mn(C33.Event,"beforeload"));for(const a of this.nNt()){const l=a.IF();l.IRt()||a.TJ()}let i=s.rt,r=(this.BLt.Set(i.time),i.hasOwnProperty("timeRaw")&&this.kLt.Set(i.timeRaw),this.$Lt.Set(i.walltime),this.WRt=i.timescale,this.TLt=i.tickcount,this.PLt=Date.now()-i.start_time_offset,i.running_layout),n=!(this.zLt=!0);if(r!==this.S5().NU()){const c=e.kz(r);if(!c)return;await this.DNt(c),n=!0}for(const[u,f]of Object.entries(s.layouts)){const d=parseInt(u,10),p=e.kz(d);p&&p.tY(f)}const h=new Set;for(const[C,m]of Object.entries(s.types)){const S=parseInt(C,10),g=this.Fq(S);!g||g.bU()||g.IRt()||g.tY(m,h)}for(const _ of this.nY.I5())for(const T of _.nN())T.eY();if(this.WD(),this.Yq(),this.zLt=!1,n){for(const y of this.nNt())y.Dq();for(const[E,I]of Object.entries(s.types)){const A=parseInt(E,10),M=this.Fq(A);!M||M.bU()||M.IRt()||M.RRt(I)}}this.eLt=i.next_uid,this.g3t.tY(s.events);for(const R of this.H5t)if(!R.bU()&&R.LF())for(const w of R.GD()){const b=w.qq();for(const O of R.aq().zq())if(O!==R){const G=O.GD();if(b<0||b>=G.length)throw new Error("missing sibling instance");w.Jq(G[b])}}this.oQ.tY(s.timelines),e.Yz(),e.qz();for(const P of h)P.Pwt();this.Zgt(),this.XAt.dispatchEvent(C33.mn(C33.Event,"afterload")),this.Iz(this.uFt("afterload"));for(const[v,x]of Object.entries(s.types)){const L=parseInt(v,10),D=this.Fq(L);D&&D.MRt()}const o=this.uFt("load");o.saveData=s.user_script_data,await this.$q(o),this.q5()}fFt(t,e){return t.W5().POt()-e.W5().POt()}SGt(t,e){!t.W5()||this.ADt.has(t)||(this.ADt.set(t,e),this.MDt.push(t))}Kgt(){this.ADt=new WeakMap,C33.Vh(this.MDt)}Zgt(t="full",e=null){this.MDt.sort(this.fFt);for(const s of this.MDt)s.EJ(this.ADt.get(s),t,e);for(const i of this.MDt)i.Nwt(this.ADt.get(i),t,e);this.Kgt()}async JDt(t){const e=await Promise.all(t.map(async t=>{const e=this.Qxt()&&this.hV.wW();if(e||"playable-ad-single-file"===this.OW()){const s=await this.hV.Oo(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()}));this.dDt.dFt(e)}pFt(t,e){this.dDt.CFt(t,e)}zDt(t,e){this.dDt.mFt(t,e)}KDt(t,e,s,i){return this.dDt.KDt(t,e,s,null,null,i)}SFt(t,e,s,i){return this.dDt.SFt(t,e,s,i)}gFt(){return this.dDt._Ft()}x5(t,e){this.m3("runtime","invoke-download",{url:t,filename:e})}async $xt(t,e,s,i,r,n){if(i=i||e,r=r||s,this.tx()){const h=await this.J5("runtime","raster-svg-image",{blob:t,imageWidth:e,imageHeight:s,surfaceWidth:i,surfaceHeight:r,imageBitmapOpts:n});return h.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,e,s,i,r);return n?self.createImageBitmap(o,n):o}}async TFt(t){return this.tx()?this.J5("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}yFt(){this.rDt||(this.rDt=!0,this.m3("runtime","enable-device-orientation"))}EFt(){this.nDt||(this.nDt=!0,this.m3("runtime","enable-device-motion"))}m5(){return this.GLt()}IFt(t){this.GLt=t}SDt(){const t=this.Kg();return{fps:this.t5(),tps:this.s5(),cpu:this.r5(),gpu:this.h5(),layout:this.S5()?this.S5().i3():"",renderer:t.Eg()?t.JG():t.GetAdapterInfoString()}}J0t(){return!!this.Az()&&C3Debugger.J0t()}V0t(t){return this.Ngt()?C3Debugger.V0t(t):Promise.resolve()}E1t(){return!!this.Ngt()&&C3Debugger.BreakNext()}AFt(t){this.p5t=!!t,this.MFt()}RFt(){return this.p5t}Ngt(){return this.C5t}R$(t){t?this.m5t--:this.m5t++,this.MFt()}MFt(){this.C5t=this.Az()&&this.p5t&&0===this.m5t}$pt(){return this.Az()&&C3Debugger.$pt()}pj(){return this.Az()&&this.Kg().WG()&&C3Debugger.pj()}async xNt(t){if(t)for(const e of t)await this.V0t(e)}LNt(t){return this.xNt(this.XAt.hf(t))}Uft(t){return this.g3t.Uft(t.name,t.params)}Z5(t){if(this.tx())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}jL(){return this.yDt}uFt(t){const e=C33.mn(C33.Event,t,!1);return e.runtime=this.yDt,e}NDt(){this.yDt=new self.B4(this),this.lDt={tick:this.uFt("tick")}}kDt(){const t={};for(const e of this.H5t)t[e.S0t()]={value:e.dD(),enumerable:!0,writable:!1};this.yDt.Tx(t)}$Dt(){const t={};for(const e of this.Ix().M0t())t[e.S0t()]=e.g0t();this.yDt.yx(t)}w5(){return this.IDt}TD(t,e){this.EDt.set(t,e)}aN(t){return this.EDt.get(t)}kL(t){if(!(t instanceof self.SD))throw new TypeError("expected IObjectClass");const e=this.aN(t);if(e&&e instanceof C33._lt)return e;throw new Error("invalid IObjectClass")}wD(t){if(!(t instanceof self.yF))throw new TypeError("expected IInstance");const e=this.aN(t);if(e&&e instanceof C33.Instance)return e;throw new Error("invalid IInstance")}k5(t){if(!(t instanceof self.Q6))throw new TypeError("expected IWorldInstance");const e=this.aN(t);if(e&&e instanceof C33.Instance)return e;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=C33.t5t.mE,self.C3_InitRuntime=(t,e)=>t.URt(e)}{const C33=self.Ve;C33.pDt=class JobSchedulerRuntime extends C33.pn{constructor(t,e){super(),this.f3=t,this.wFt=new Map,this.bFt=0,this.OFt=e.inputPort,e.outputPort.onmessage=t=>this.GFt(t),this.PFt=e.maxNumWorkers,this.vFt=1,this.xFt=!1,this.LFt=!1}async URt(){}_Ft(){return this.PFt}dFt(t){this.OFt.postMessage({type:"_import_scripts",scripts:t})}CFt(t,e){this.OFt.postMessage({type:"_send_blob",blob:t,id:e})}mFt(t,e){this.OFt.postMessage({type:"_send_buffer",buffer:t,id:e},[t])}KDt(t,e,s,i,r,n){if(s=s||[],"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const h=this.bFt++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:h,params:e,transferables:s},a=new Promise((t,e)=>{this.wFt.set(h,{resolve:t,progress:i,reject:e,DFt:!1,maxWorkerNum:n})});return r&&r.bf(()=>this.NFt(h)),this.OFt.postMessage(o,s),this.FFt(),a}SFt(t,e,s,i){if(s=s||[],"number"==typeof i&&(i=Math.floor(i))<=0)throw new Error("invalid maxWorkerNum");const r=this.bFt++,n={type:t,isBroadcast:!0,maxWorkerNum:i,jobId:r,params:e,transferables:s};this.OFt.postMessage(n,s)}NFt(t){const e=this.wFt.get(t);e&&(e.DFt=!0,e.resolve=null,e.progress=null,e.reject=null,this.OFt.postMessage({type:"_cancel",jobId:t}))}GFt(t){const e=t.data,s=e.type,i=e.jobId;switch(s){case"result":this.BFt(i,e.result);break;case"progress":this.kFt(i,e.progress);break;case"error":this.$Ft(i,e.error);break;case"ready":this.WFt();break;default:throw new Error(`unknown message from worker '${s}'`)}}BFt(t,e){const s=this.wFt.get(t);if(!s)throw new Error("invalid job ID");s.DFt||s.resolve(e),this.wFt.delete(t)}kFt(t,e){const s=this.wFt.get(t);if(!s)throw new Error("invalid job ID");!s.DFt&&s.progress&&s.progress(e)}$Ft(t,e){const s=this.wFt.get(t);if(!s)throw new Error("invalid job ID");s.DFt||s.reject(e),this.wFt.delete(t)}WFt(){this.xFt&&(this.xFt=!1,this.vFt++,this.vFt<this.PFt?this.FFt():this.OFt.postMessage({type:"_no_more_workers"}))}VFt(){let t=0,e=[...this.wFt.values()].sort((t,e)=>{const s=t.maxWorkerNum||1/0,i=e.maxWorkerNum||1/0;return s-i});for(const s of e){const i=s.maxWorkerNum||1/0;t<i&&t++}return t}async FFt(){if(!(this.vFt>=this.PFt||this.xFt||this.LFt||this.VFt()<=this.vFt))try{this.xFt=!0;const t=await this.f3.J5("runtime","create-job-worker");t.outputPort.onmessage=t=>this.GFt(t)}catch(t){this.LFt=!0,this.xFt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.vFt} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.outline={F4t:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform lowp vec3 cl;\nuniform lowp float width;\nuniform lowp float diag;\nvoid main(void)\n{\nmediump vec4 front = texture2D(samplerFront, vTex);\nmediump float dx = pixelSize.x*width;\nmediump float dy = pixelSize.y*width;\nmediump float a0 = texture2D(samplerFront, vTex + vec2(-dx*diag, dy*diag)).a;\nmediump float a1 = texture2D(samplerFront, vTex + vec2(dx*diag, -dy*diag)).a;\nmediump float a2 = texture2D(samplerFront, vTex + vec2(-dx*diag, -dy*diag)).a;\nmediump float a3 = texture2D(samplerFront, vTex + vec2(dx*diag, dy*diag)).a;\nmediump float a4 = texture2D(samplerFront, vTex + vec2(-dx, 0.0)).a;\nmediump float a5 = texture2D(samplerFront, vTex + vec2(dx, 0.0)).a;\nmediump float a6 = texture2D(samplerFront, vTex + vec2(0.0, dy)).a;\nmediump float a7 = texture2D(samplerFront, vTex + vec2(0.0, -dy)).a;\nmediump float ina = max(max(max(max(max(max(max(a0,a1),a2),a3),a4),a5),a6),a7)-front.a;\nmediump float outa = ina + front.a*(1.0-ina);\nmediump vec3 outrgb = (vec3(cl.x, cl.y, cl.z)*ina + front.rgb*front.a*(1.0-ina));\ngl_FragColor = vec4(outrgb, outa);\n}",N4t:"",L4t:"",jg:!1,qg:!1,vg:0,Lg:0,Ng:!1,Bg:!1,$g:!0,Vg:!1,Ug:!1,parameters:[["width",0,"float"],["cl",0,"color"],["diag",0,"float"]]},self.C3_Shaders.crystalball={F4t:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nconst highmedp vec3 lightPosition = vec3(-0.5, 0.5, 1.0);\nconst highmedp vec3 ambientLightPosition = vec3(0.0, 0.0, 1.0);\nuniform highmedp float radius;\nuniform highmedp float refractiveIndex;\nvoid main(void)\n{\nhighmedp vec2 center = vec2(0.5, 0.5);\nhighmedp vec2 srcSize = srcEnd - srcStart;\nhighmedp vec2 layoutSize = layoutEnd - layoutStart;\nhighmedp float aspectRatio = layoutSize.y / layoutSize.x;\nhighmedp vec2 tex = (vTex - srcStart) / srcSize;\nhighmedp vec2 otherTex = vec2(tex.x, (tex.y * aspectRatio + 0.5 - 0.5 * aspectRatio));\nhighmedp float distanceFromCenter = distance(center, otherTex);\nlowp float checkForPresenceWithinSphere = step(distanceFromCenter, radius);\ndistanceFromCenter = distanceFromCenter / radius;\nhighmedp float normalizedDepth = radius * sqrt(1.0 - distanceFromCenter * distanceFromCenter);\nhighmedp vec3 sphereNormal = normalize(vec3(otherTex - center, normalizedDepth));\nhighmedp vec3 refractedVector = 2.0 * refract(vec3(0.0, 0.0, -1.0), sphereNormal, refractiveIndex);\nhighmedp vec2 sampleTex = vec2(-refractedVector.x, refractedVector.y);\nsampleTex = (sampleTex + 1.0) * 0.5;\nsampleTex = clamp(sampleTex, 0.0, 1.0);\nsampleTex = sampleTex * srcSize + srcStart;\nhighmedp vec4 front = texture2D(samplerFront, sampleTex);\nhighmedp vec3 finalSphereColor = front.rgb;\nhighmedp float lightingIntensity = 2.5 * (1.0 - pow(clamp(dot(ambientLightPosition, sphereNormal), 0.0, 1.0), 0.25));\nfinalSphereColor += lightingIntensity;\nlightingIntensity  = clamp(dot(normalize(lightPosition), sphereNormal), 0.0, 1.0);\nlightingIntensity  = pow(lightingIntensity, 15.0);\nfinalSphereColor += vec3(0.8, 0.8, 0.8) * lightingIntensity;\ngl_FragColor = vec4(finalSphereColor, front.a) * checkForPresenceWithinSphere;\n}",N4t:"",L4t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nradius : f32,\nrefractiveIndex : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\nconst center : vec2<f32> = vec2<f32>(0.5, 0.5);\nconst lightPosition : vec3<f32> = vec3<f32>(-0.5, 0.5, 1.0);\nconst ambientLightPosition : vec3<f32> = vec3<f32>(0.0, 0.0, 1.0);\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar layoutSize : vec2<f32> = c3Params.layoutEnd - c3Params.layoutStart;\nvar aspectRatio : f32 = layoutSize.y / layoutSize.x;\nvar tex : vec2<f32> = c3_srcToNorm(input.fragUV);\nvar otherTex : vec2<f32> = vec2<f32>(tex.x, (tex.y * aspectRatio + 0.5 - 0.5 * aspectRatio));\nvar distanceFromCenter : f32 = distance(center, otherTex);\nvar checkForPresenceWithinSphere : f32 = step(distanceFromCenter, shaderParams.radius);\ndistanceFromCenter = distanceFromCenter / shaderParams.radius;\nvar normalizedDepth : f32 = shaderParams.radius * sqrt(1.0 - distanceFromCenter * distanceFromCenter);\nvar sphereNormal : vec3<f32> = normalize(vec3<f32>(otherTex - center, normalizedDepth));\nvar refractedVector : vec3<f32> = 2.0 * refract(vec3<f32>(0.0, 0.0, -1.0), sphereNormal, shaderParams.refractiveIndex);\nvar sampleTex : vec2<f32> = -refractedVector.xy;\nsampleTex = (sampleTex + 1.0) * 0.5;\nsampleTex = c3_clamp2(sampleTex, 0.0, 1.0);\nsampleTex = c3_normToSrc(sampleTex);\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, sampleTex);\nvar finalSphereColor : vec3<f32> = front.rgb;\nvar lightingIntensity : f32 = 2.5 * (1.0 - pow(clamp(dot(ambientLightPosition, sphereNormal), 0.0, 1.0), 0.25));\nfinalSphereColor = finalSphereColor + lightingIntensity;\nlightingIntensity = clamp(dot(normalize(lightPosition), sphereNormal), 0.0, 1.0);\nlightingIntensity = pow(lightingIntensity, 15.0);\nfinalSphereColor = finalSphereColor + vec3<f32>(0.8) * lightingIntensity;\nvar output : FragmentOutput;\noutput.color = vec4<f32>(finalSphereColor, front.a) * checkForPresenceWithinSphere;\nreturn output;\n}",jg:!1,qg:!1,vg:0,Lg:0,Ng:!1,Bg:!1,$g:!1,Vg:!1,Ug:!1,parameters:[["radius",0,"percent"],["refractiveIndex",0,"percent"]]};{let ForEachOrdered_SortInstances2=function(t,e){const s=t[1],i=e[1];if("number"==typeof s&&"number"==typeof i)return s-i;{const r=""+s,n=""+i;return r<n?-1:n<r?1:0}},C33=(ForEachOrdered_SortInstances=ForEachOrdered_SortInstances2,self.Ve),cacheRegex=null,lastRegex="",lastFlags="",regexMatches=[],lastMatchesStr="",lastMatchesRegex="",lastMatchesFlags="",forEachStack=C33.mn(C33.Cft);C33.Xq.Uq=class SystemPlugin extends C33.hyt{constructor(t){super(t),this.cft=this.f3.Ix().A$(),this.zut=this.f3.Ix().Fx(),this.HFt=0,this.UFt=0,this.XFt=new Map}Sn(){super.Sn()}q5(){this.f3.q5()}n7(t){this.f3.n7(t,null,null)}jFt(t,e){return cacheRegex&&t===lastRegex&&e===lastFlags||(cacheRegex=new RegExp(t,e),lastRegex=t,lastFlags=e),cacheRegex.lastIndex=0,cacheRegex}YFt(t,e,s){if(t!==lastMatchesStr||e!==lastMatchesRegex||s!==lastMatchesFlags){const i=this.jFt(e,s);regexMatches=t.match(i),lastMatchesStr=t,lastMatchesRegex=e,lastMatchesFlags=s}return regexMatches}async qFt(t,e){if(e.length){this.HFt+=e.length;const s=[];for(const i of e)s.push(t.fq(i));await C33.fo(s,()=>{this.UFt++}),this.UFt++,this.UFt===this.HFt&&(this.UFt=0,this.HFt=0,this.f3.n7(C33.Xq.Uq.Hq.zFt,null,null))}}JFt(t,e){for(const s of e)0===s.xD()&&t.Sq(s)}KFt(){return forEachStack}ZFt(e){const s=this.f3.Ix(),t=s.Fx(),i=t.E$(),r=i.Ox(),n=r.y$(),h=i.z3t(),o=t.I$(r),a=s.A$(),l=a.I$();if(l.dft(e),h)for(let t=0;t<e&&!l.F$();++t)s.v$(n),l.D$(t),r.x$(i,o),s.L$(n);else for(let t=0;t<e&&!l.F$();++t)l.D$(t),r.x$(i,o);return t.B$(),a.B$(),!1}*QFt(e){const s=this.f3.Ix(),t=s.Fx(),i=t.E$(),r=i.Ox(),n=r.y$(),h=i.z3t(),o=t.I$(r),a=s.A$(),l=a.I$();if(l.dft(e),h)for(let t=0;t<e&&!l.F$();++t)s.v$(n),l.D$(t),yield*r.x1t(i,o),s.L$(n);else for(let t=0;t<e&&!l.F$();++t)l.D$(t),yield*r.x1t(i,o);return t.B$(),a.B$(),!1}t7t(){const e=this.f3.Ix(),t=e.Fx(),s=t.E$(),i=s.Ox(),r=i.y$(),n=s.z3t(),h=t.I$(i),o=e.A$(),a=o.I$();if(n)for(let t=0;!a.F$();++t)e.v$(r),a.D$(t),i.x$(s,h)||a.fk(),e.L$(r);else for(let t=0;!a.F$();++t)a.D$(t),i.x$(s,h)||a.fk();return t.B$(),o.B$(),!1}*e7t(){const e=this.f3.Ix(),t=e.Fx(),s=t.E$(),i=s.Ox(),r=i.y$(),n=s.z3t(),h=t.I$(i),o=e.A$(),a=o.I$();if(n)for(let t=0;!a.F$();++t){e.v$(r),a.D$(t);const l=yield*i.x1t(s,h);l||a.fk(),e.L$(r)}else for(let t=0;!a.F$();++t){a.D$(t);const c=yield*i.x1t(s,h);c||a.fk()}return t.B$(),o.B$(),!1}s7t(t,e,s){const i=this.f3.Ix(),r=i.Fx(),n=r.E$(),h=n.Ox(),o=h.y$(),a=n.z3t(),l=r.I$(h),c=i.A$(),u=c.I$();if(u.M$(t),u.dft(s),s<e)if(a)for(let t=e;t>=s&&!u.F$();--t)i.v$(o),u.D$(t),h.x$(n,l),i.L$(o);else for(let t=e;t>=s&&!u.F$();--t)u.D$(t),h.x$(n,l);else if(a)for(let t=e;t<=s&&!u.F$();++t)i.v$(o),u.D$(t),h.x$(n,l),i.L$(o);else for(let t=e;t<=s&&!u.F$();++t)u.D$(t),h.x$(n,l);return r.B$(),c.B$(),!1}*i7t(t,e,s){const i=this.f3.Ix(),r=i.Fx(),n=r.E$(),h=n.Ox(),o=h.y$(),a=n.z3t(),l=r.I$(h),c=i.A$(),u=c.I$();if(u.M$(t),u.dft(s),s<e)if(a)for(let t=e;t>=s&&!u.F$();--t)i.v$(o),u.D$(t),yield*h.x1t(n,l),i.L$(o);else for(let t=e;t>=s&&!u.F$();--t)u.D$(t),yield*h.x1t(n,l);else if(a)for(let t=e;t<=s&&!u.F$();++t)i.v$(o),u.D$(t),yield*h.x1t(n,l),i.L$(o);else for(let t=e;t<=s&&!u.F$();++t)u.D$(t),yield*h.x1t(n,l);return r.B$(),c.B$(),!1}r7t(s){const t=s.PD(),e=t.GD();if(0!==e.length){const i=this.f3.Ix(),r=i.Fx(),n=r.E$(),h=n.Ox(),o=h.y$(),a=n.z3t(),l=r.I$(h),c=i.A$(),u=c.I$(),f=s.LF(),d=forEachStack.I$();if(C33.jh(d,e),u.dft(d.length),a)for(let t=0,e=d.length;t<e&&!u.F$();++t){i.v$(o);const p=d[t];s.PD().l3t(p),f&&p.jpt(),u.D$(t),h.x$(n,l),i.L$(o)}else{t.h3t(!1);const C=t.o3t();C33.Vh(C),C.push(null);for(let t=0,e=d.length;t<e&&!u.F$();++t){const m=d[t];C[0]=m,f&&m.jpt(),u.D$(t),h.x$(n,l)}}r.B$(),c.B$(),C33.Vh(d),forEachStack.B$()}return!1}*n7t(s){const t=s.PD(),e=t.GD();if(0!==e.length){const i=this.f3.Ix(),r=i.Fx(),n=r.E$(),h=n.Ox(),o=h.y$(),a=n.z3t(),l=r.I$(h),c=i.A$(),u=c.I$(),f=s.LF(),d=forEachStack.I$();if(C33.jh(d,e),u.dft(d.length),a)for(let t=0,e=d.length;t<e&&!u.F$();++t){i.v$(o);const p=d[t];s.PD().l3t(p),f&&p.jpt(),u.D$(t),yield*h.x1t(n,l),i.L$(o)}else{t.h3t(!1);const C=t.o3t();C33.Vh(C),C.push(null);for(let t=0,e=d.length;t<e&&!u.F$();++t){const m=d[t];C[0]=m,f&&m.jpt(),u.D$(t),yield*h.x1t(n,l)}}r.B$(),c.B$(),C33.Vh(d),forEachStack.B$()}return!1}h7t(s,t){const e=s.PD(),i=e.GD();if(0!==i.length){const r=this.f3.Ix(),n=r.Fx(),h=r.a0t(),o=n.E$(),a=o.Ox(),l=a.y$(),c=o.z3t(),u=n.I$(a),f=r.A$(),d=f.I$(),p=s.LF(),C=forEachStack.I$();C33.Vh(C),d.dft(i.length);for(let t=0,e=i.length;t<e;++t)C.push([i[t],h.qSt(1,t)]);if(C.sort(ForEachOrdered_SortInstances2),1===t&&C.reverse(),c)for(let t=0,e=C.length;t<e&&!d.F$();++t){r.v$(l);const m=C[t][0];s.PD().l3t(m),p&&m.jpt(),d.D$(t),a.x$(o,u),r.L$(l)}else{e.h3t(!1);const S=e.o3t();C33.Vh(S),S.push(null);for(let t=0,e=C.length;t<e&&!d.F$();++t){const g=C[t][0];S[0]=g,p&&g.jpt(),d.D$(t),a.x$(o,u)}}n.B$(),f.B$(),C33.Vh(C),forEachStack.B$()}return!1}*o7t(s,t){const e=s.PD(),i=e.GD();if(0!==i.length){const r=this.f3.Ix(),n=r.Fx(),h=r.a0t(),o=n.E$(),a=o.Ox(),l=a.y$(),c=o.z3t(),u=n.I$(a),f=r.A$(),d=f.I$(),p=s.LF(),C=forEachStack.I$();C33.Vh(C),d.dft(i.length);for(let t=0,e=i.length;t<e;++t)C.push([i[t],h.qSt(1,t)]);if(C.sort(ForEachOrdered_SortInstances2),1===t&&C.reverse(),c)for(let t=0,e=C.length;t<e&&!d.F$();++t){r.v$(l);const m=C[t][0];s.PD().l3t(m),p&&m.jpt(),d.D$(t),yield*a.x1t(o,u),r.L$(l)}else{e.h3t(!1);const S=e.o3t();C33.Vh(S),S.push(null);for(let t=0,e=C.length;t<e&&!d.F$();++t){const g=C[t][0];S[0]=g,p&&g.jpt(),d.D$(t),yield*a.x1t(o,u)}}n.B$(),f.B$(),C33.Vh(C),forEachStack.B$()}return!1}a7t(t,e){let s=this.XFt.get(t);if(!s){if(!e)return null;s={l7t:null,c7t:new Map},this.XFt.set(t,s)}return s}u7t(t,e,s,i,r){e.wx().z1t(s,e.xx()),i&&t.L$(r)}*f7t(t,e,s,i,r){yield*e.wx().J1t(s,e.xx()),i&&t.L$(r)}}}{const C33=self.Ve;C33.Xq.Uq.IMt=class SystemType extends C33.pn{constructor(t){super(),this.Wut=t,this.f3=t.aL(),this.Xyt=t._D()}Oyt(){}Sn(){this.Wut=null,this.f3=null,this.Xyt=null}}}{const C33=self.Ve;C33.Xq.Uq.Instance=class SystemInstance extends C33.pn{constructor(t,e){super(),this.xs=t,this.Wut=this.xs.IF(),this.Kyt=this.Wut.Mgt(),this.f3=this.xs.aL()}Sn(){this.xs=null,this.Wut=null,this.Kyt=null,this.f3=null}}}{const C33=self.Ve,tmpPickArray=[];C33.Xq.Uq.Hq={d7t(){return!0},Vq(){return!0},sz(){return!0},SNt(){return!0},gNt(){return!0},Ux(){return this.f3.Ux()},GCt(){const t=this.f3.o0t();return!t.U3t()&&!t.V3t()},p7t(){let t=this.f3.a0t(),e=t.DSt(),s=e.get("TriggerOnce_lastTick");void 0===s&&(s=-1,e.set("TriggerOnce_lastTick",-1));const i=this.f3.ptt();return e.set("TriggerOnce_lastTick",i),this.f3.qNt()||s!==i-1},C7t(t){const e=this.f3.a0t(),s=e.DSt(),i=s.get("Every_lastTime")||0,r=this.f3.zx(),n=(s.has("Every_seconds")||s.set("Every_seconds",t),s.get("Every_seconds"));return i+n<=r?(s.set("Every_lastTime",i+n),r>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",r),s.set("Every_seconds",t),!0):(r<i-.1&&s.set("Every_lastTime",r),!1)},jdt(t){const e=this.f3.Ix().O0t(t);return e&&e.jdt()},Kxt(){return this.f3.Kxt()},bs(){return C33._s.bs},QDt(){return!0},m7t(){return!0},S7t(){return!0},lFt(){return!0},cFt(){return!0},nFt(){return!0},hFt(){return!0},g7t(t){return!!this.f3.D5(t)},_7t(t){switch(t){case 0:return"browser"===C33._s.Rs;case 1:return"iOS"===C33._s.Ts;case 2:return"Android"===C33._s.Ts;case 8:return"cordova"===C33._s.Rs;case 9:return"scirra-arcade"===this.f3.OW();case 10:return"nwjs"===C33._s.Rs;case 13:return"windows-uwp"===this.f3.OW();default:return!1}},T7t(t,e,s){const i=this.jFt(e,s);return i.test(t)},y7t(t,e,s){return C33.compare(t,e,s)},E7t(t,e,s){return e<=t&&t<=s},I7t(t,e,s){return C33.compare(t.ait(),e,s)},A7t(t){return!!t.ait()},M7t(t,e){const s=this.f3.zx();if(0!==t)return C33.compare(s,t,e);{const i=this.f3.a0t(),r=i.DSt();return!r.get("CompareTime_executed")&&e<=s?(r.set("CompareTime_executed",!0),!0):!1}},R7t(t){return isNaN(t)},A_t(t,e,s){return C33.On(C33.An(t),C33.An(s))<=C33.An(e)},M_t(t,e){return C33.Pn(C33.An(t),C33.An(e))},R_t(t,e,s){let i=C33.An(t),r=C33.An(e),n=C33.An(s),h=!C33.Pn(n,r);return h?!(!C33.Pn(i,r)&&C33.Pn(i,n)):C33.Pn(i,r)&&!C33.Pn(i,n)},w7t(t,e){return"number"==typeof t?0===e:1===e},b7t(t){return!!t},Adt(t){return t.toLowerCase()===this.f3.Ix().bdt()},O7t(t,s,i,r){if(!t)return!1;let e=this.KFt(),n=e.I$(),h=t.PD(),o=(C33.jh(n,h.GD()),h.Qut()&&C33.Vh(h.a3t()),this.f3.a0t()),a=0;for(let t=0,e=n.length;t<e;++t){const c=n[t];n[a]=c,s=o.qSt(1,t),r=o.qSt(3,t),C33.compare(s,i,r)?++a:h.n3t(c)}C33.Wh(n,a),h.c3t(n);const l=!!n.length;return C33.Vh(n),e.B$(),t.V1t(),l},G7t(t,e){if(!t)return!1;let s=this.KFt(),i=s.I$(),r=t.PD(),n=(C33.jh(i,r.GD()),r.Qut()&&C33.Vh(r.a3t()),this.f3.a0t()),h=0;for(let t=0,e=i.length;t<e;++t){const a=i[t];i[h]=a,n.qSt(1,t)?++h:r.n3t(a)}C33.Wh(i,h),r.c3t(i);const o=!!i.length;return C33.Vh(i),s.B$(),t.V1t(),o},P7t(t,s,i){if(!t)return!1;const e=t.PD(),r=e.GD();if(0===r.length)return!1;let n=this.f3.a0t(),h=null,o=0;for(let t=0,e=r.length;t<e;++t){const a=r[t];i=n.qSt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=a)}return e.C3t(h),t.V1t(),!0},v7t(t,e){if(!t)return!1;const s=t.PD(),i=s.GD();if((e=Math.floor(e))>=i.length)return!1;const r=i[e];return s.C3t(r),t.V1t(),!0},x7t(t){if(!t)return!1;const e=t.PD(),s=e.GD(),i=Math.floor(this.f3.m5()*s.length);if(i>=s.length)return!1;const r=s[i];return e.C3t(r),t.V1t(),!0},L7t(t){if(!t)return!1;if(!t.xD())return!1;const e=t.PD();return e.h3t(!0),t.V1t(),!0},D7t(t,s,i){if(!t)return!1;const r=t.PD(),e=r.GD(),n=this.f3.Ox(),h=n.m3t(),o=this.f3.a0t().GSt();r.Qut()?(C33.jh(tmpPickArray,e),r.Zut(),r.h3t(!1)):h?(C33.jh(tmpPickArray,r.a3t()),C33.Vh(r.a3t())):(C33.jh(tmpPickArray,r.o3t()),C33.Vh(r.o3t()));for(let t=0,e=tmpPickArray.length;t<e;++t){const a=tmpPickArray[t];C33.xor(a.W5().a6(s,i),o)?r.r3t(a):r.n3t(a)}return t.V1t(),C33.xor(!!r.o3t().length,o)},N7t(e){if(!e)return!1;let s=e.bU(),i=null,r=this.f3.dRt();for(let t=r.length-1;0<=t;--t){const n=r[t];if(s){if(n.IF().qgt(e)){i=n;break}}else if(n.IF()===e){i=n;break}}if(!i){const h=e.GD();h.length&&(i=h.at(-1))}if(!i)return!1;const t=e.PD();return t.C3t(i),e.V1t(),!0},F7t(t){return this.f3.Ngt()?this.QFt(t):this.ZFt(t)},B7t(){return this.f3.Ngt()?this.e7t():this.t7t()},k7t(t,e,s){return this.f3.Ngt()?this.i7t(t,e,s):this.s7t(t,e,s)},T0(t){return this.f3.Ngt()?this.n7t(t):this.r7t(t)},$7t(t,e,s){return this.f3.Ngt()?this.o7t(t,s):this.h7t(t,s)},W7t(t){return!!t&&t.xN()},V7t(t){return!!t&&t.WN()},H7t(t){return!!t&&t.BN()},U7t(t){return!!t&&!t.xD()},X7t(t,e,s){return!!t&&C33.compare(100*t.$O(),e,s)},j7t(t){const e=this.f3.S5();return!!e&&e.KY(t)},zFt(){return!0},Y7t(){return 0<this.HFt},q7t(t,e){const s=this.f3.Twt();return!!s&&!!e&&!!s.glt(t,e)}}}{let SortZOrderList2=function(t,e){const s=t[0],i=e[0],r=s-i;if(0!=r)return r;const n=t[1],h=e[1];return n-h},SortInstancesByValue2=function(t,e){return t[1]-e[1]};SortZOrderList=SortZOrderList2,SortInstancesByValue=SortInstancesByValue2;const C33=self.Ve,tempZOrderList=[],tempInstValues=[],tempRect=C33.mn(C33.Rect),tempColor=C33.mn(C33.qo),EMPTY_ITERABLE=[];C33.Xq.Uq.Nrt={z7t(t,e){t.Uit(e)},J7t(t,e){t.mi()&&"number"!=typeof e&&(e=parseFloat(e)),t.Uit(t.ait()+e)},K7t(t,e){t.mi()&&t.Uit(t.ait()-e)},Z7t(t,e){t.Uit(!!e)},Q7t(t){t.Uit(!t.ait())},t6t(t){t.Uit(t.h0t())},e6t(t){this.f3.Ix().w0t(t)},s6t(t,e,s,i,r,n){if(t&&e){const h=this.f3.DD(t,e,s,i,r,n);if(h){r&&e.ND(h);const o=this.f3.Ix(),a=(o.FD(!0),h.BD(),o.FD(!1),new Map);h.uwt(a,t,r);for(const[l,c]of a)l.PD().u3t(c)}}},i6t(t,e,s,i,r,n){if(t&&e){const h=this.f3.rNt(t);h&&C33.Xq.Uq.Nrt.s6t.call(this,h,e,s,i,r,n)}},RU(r,n,h,o,a,t,l,c,u,f,d){if(r){let e=this.f3.B5(),s=e;if(t){const p=this.f3.T5().Bz(t);if(!p)return;s=p}let i=null;if(!("number"!=typeof l||0<=l)||(i=s.V5(l))){let t=null;if(!("number"!=typeof c||0<=c)||(t=e.V5(c))){tempRect.set(n,h,o,a);const C=s.RU(r,tempRect,i,t,u,f,d);r.PD().c3t(C),r.V1t()}}}},r6t(){const t=this.cft;t.hft()&&t.rft().fk()},Ydt(t,e){const s=this.f3.Ix().O0t(t);s&&(0===e?s.Ydt(!1):1===e?s.Ydt(!0):s.Ydt(!s.jdt()))},n6t(t){this.f3.Qx(t)},h6t(t,e){if(e<0&&(e=0),t){const s=t.PD(),i=s.GD();for(const r of i)r.Qx(e)}},o6t(t){if(t){const e=t.PD(),s=e.GD();for(const i of s)i.WF()}},Nh(t){if(!(t<0))return this.f3.Ix().ldt().QTt(t),!0},Vx(t){return this.f3.Ix().ldt().tyt(t),!0},a6t(){const t=this.f3.Ix();return t.ldt().eyt(t.Idt()),!0},$x(t){this.f3.Ix().$x(t)},async Gxt(t,e,s,i,r,n){const h=this.f3.g8();h&&(this.q5(),await h.Gxt(0===t?"image/png":"image/jpeg",e/100,s,i,r,n),await this.f3.o7(C33.Xq.Uq.Hq.m7t,null))},l6t(t,e){if(!(t<=0||e<=0)){this.f3.txt(t,e),this.f3.B5().Xj();const s=this.f3.g8();s&&("off"!==s.Y4t()&&this.f3.hNt(t,e),s.aw(s.T8(),s.E8(),!0),this.f3.q5())}},c6t(t){const e=this.f3.g8();e&&"off"!==e.Y4t()&&(e.axt(0!==t?"high":"low"),e.aw(e.T8(),e.E8(),!0))},Rst(t){this.f3.ZNt(t)},u6t(t){this.f3.QNt(t)},f6t(t){this.f3.PTt(t)},d6t(t){},p6t(){for(const t of this.f3.T5().I5())t.uz()},C6t(t){this.f3.zNt(0!==t)},m6t(t,e){this.f3.C5(1/t),this.f3.f5(1/e)},S6t(t,e){this.f3.f5(t),this.f3.C5(e)},g6t(t){this.f3.l5(["vsync","unlimited-tick","unlimited-frame"][t])},_6t(t,s){if(t){const e=t.PD(),i=e.GD(),r=tempZOrderList,n=tempInstValues,h=this.f3.B5(),o=t.bU(),a=t.u2t();for(let t=0,e=i.length;t<e;++t){const l=i[t],c=l.W5();if(c){let t;t=o?l.Ont(s+l.IF().c2t(a)):l.Ont(s),r.push([c.V5().F4(),c.H5()]),n.push([l,t])}}if(r.length){r.sort(SortZOrderList2),n.sort(SortInstancesByValue2);let s=!1;for(let t=0,e=r.length;t<e;++t){const u=n[t][0],f=h.U5(r[t][0]),d=r[t][1],p=f.X5();p[d]!==u&&((p[d]=u).W5().j5(f,!0),f.Y5(u),s=!0)}s&&this.f3.q5(),C33.Vh(tempZOrderList),C33.Vh(tempInstValues)}}},DL(t,e){t=Math.floor(t),e=Math.floor(e),t<=0||e<=0||!Number.isFinite(t)||!Number.isFinite(e)||this.f3.j4().DL(t,e)},T6t(t){if(!this.f3.q1()){const e=this.f3.T5();e.M5()||e.R5(t)}},y6t(t){if(!this.f3.q1()){const e=this.f3.T5();if(!e.M5()){const s=e.Bz(t);s&&e.R5(s)}}},E6t(t){if(!this.f3.q1()){const e=this.f3.T5();if(!e.M5()){const s=e.I5(),i=s.indexOf(e.S5());if((!t||0!==i)&&(t||i!==s.length-1)){const r=s[i+(t?-1:1)];e.R5(r)}}}},I6t(){if(!this.f3.q1()){const t=this.f3.T5();t.M5()||(t.R5(t.S5()),this.f3.Ix().x0t())}},A6t(t,e){t&&t.PN(e)},M6t(t,e){t&&t.NN(e)},R6t(t,e){t&&t.kN(e)},w6t(t,e){t&&t.VO(e/100)},b6t(t,e){t&&t.VN(e)},O6t(t,e){t&&t.UN(e)},G6t(t,e){t&&t.zD(C33.An(+e))},P6t(t,e,s){t&&(t.hF(!0),t.JD(e),t.ZD(s))},v6t(t){t&&t.hF(!1)},x6t(t,e,s){t&&t.lX(e/100,s/100)},L6t(t,e){t&&t.L_(+e)},D6t(t,e){if(t){tempColor.ba(e),tempColor.En();const s=t.nF();s.Ta(tempColor)||(s.la(tempColor),this.q5())}},N6t(t,e){t&&t.QN(e)},F6t(t,e){t&&t.S_(e)},B6t(t,e,s){if(t){const i=t.HD(),r=i.mrt(s);if(r){const n=1===e;r.Fpt()!==n&&(r.DGt(n),t.EB(),this.f3.q5())}}},k6t(t,e,s,i){if(t){const r=t.HD(),n=r.mrt(e);if(n){s=Math.floor(s);const h=n.CI().SI(s);if(h){"color"===h?(tempColor.ba(i),i=tempColor):"percent"===h&&(i/=100);const o=r.AB(n.F4(),s,i);o&&n.Fpt()&&this.f3.q5()}}}},$6t(t,e){t&&t.sF(e)},W6t(t){this.f3.B5().YD(+t)},V6t(t){this.f3.B5().zD(C33.An(+t))},H6t(t,e){const s=this.f3.B5(),i=s.HD(),r=i.mrt(e);if(r){const n=1===t;r.Fpt()!==n&&(r.DGt(n),s.EB(),this.f3.q5())}},U6t(t,e,s){const i=this.f3.B5(),r=i.HD(),n=r.mrt(t);if(n){e=Math.floor(e);const h=n.CI().SI(e);if(h){"color"===h?(tempColor.ba(s),s=tempColor):"percent"===h&&(s/=100);const o=r.AB(n.F4(),e,s);o&&n.Fpt()&&this.f3.q5()}}},X6t(t,e){const s=this.f3.B5();s.SN(t/100,e/100)},j6t(t){const e=this.f3.B5();0===t?e.TN():e.yN()},Y6t(t){const e=this.f3.B5();e.JD(t)},q6t(t){const e=this.f3.B5();e.ZD(t)},z6t(t,e){const s=this.f3.B5();s.JD(t),s.ZD(e)},J6t(t){if(t){const e=t.xgt();if(e){const s=e.W5();if(s){const i=this.f3.B5();i.JD(s.b_()),i.ZD(s.P_())}}}},lN(t,e,s){const i=this.f3.B5();try{i.lN(t,e,s)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},uN(t,e,s){if(t){const i=this.f3.B5();try{i.uN(t,e,s)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},dN(t){if(t){const e=this.f3.B5();e.dN(t)}},CN(){this.f3.B5().CN()},async K6t(t){const e=this.f3.S5();if(e&&t&&!this.f3.q1()){const s=t.bU()?t.LCt():[t];await this.qFt(e,s)}},async Z6t(t){await C33.Xq.Uq.Nrt.K6t.call(this,this.f3.rNt(t))},Q6t(t){const e=this.f3.S5();if(e&&t){const s=t.bU()?t.LCt():[t];this.JFt(e,s)}},tBt(t){C33.Xq.Uq.Nrt.Q6t.call(this,this.f3.rNt(t))},eBt(){const t=this.f3.S5();if(t){const e=t.lq();this.JFt(t,e)}},async sBt(t){const e=this.f3.S5();t&&e&&!this.f3.q1()&&await this.qFt(e,t.hq())},async iBt(t){const e=this.f3.S5(),s=this.f3.T5().Bz(t);s&&e&&!this.f3.q1()&&await this.qFt(e,s.hq())},kx(t){const e=this.zut.Nx();if(e)switch(e.Bx()){case 1:"number"==typeof t&&e.kx(t);break;case 2:"string"==typeof t&&e.kx(t);break;case 3:e.kx(t)}},rBt(t,e,s){const i=this.a7t(t.toLowerCase(),!0),r=i.c7t,n=e.toLowerCase(),h=(r.has(n)&&console.warn(`[Construct] Function map '${t}' string '${e}' already in map; overwriting entry`),C33.first(r.values())||i.l7t);if(h){const o=0!==h.Lx(),a=0!==s.Lx();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${e}' function return type not compatible with other functions in the map; entry ignored`)}r.set(n,s)},nBt(t,e){const s=this.a7t(t.toLowerCase(),!0),i=(s.l7t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),C33.first(s.c7t.values())||s.l7t);if(i){const r=0!==i.Lx(),n=0!==e.Lx();if(r!=n)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}s.l7t=e},hBt(t,e,s){const i=this.f3,r=i.Ngt()?EMPTY_ITERABLE:null,n=(s=Math.floor(s),this.a7t(t.toLowerCase(),!1));if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),r;let h=n.c7t.get(e.toLowerCase());if(!h){if(!n.l7t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; call ignored (consider setting a default)`),r;h=n.l7t,s=0}if(!h.hu())return r;if(0!==h.Lx())return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has a return type so cannot be called`),r;const o=i.Ix(),a=o.Ox(),l=a.bx(),c=0<l.length,u=(c&&(h.xx()?o.v$(l):o.odt(l)),[]),f=o.Qdt(a);if(f){const p=f.ept();for(let t=s,e=p.length;t<e;++t)u.push(p[t].ait())}const d=h.ept();for(let t=u.length,e=d.length;t<e;++t)u.push(d[t].h0t());return i.Ngt()?this.f7t(o,h,u,c,l):this.u7t(o,h,u,c,l)}}}{const C33=self.Ve;C33.Xq.Uq.Frt={oBt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return t="string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},N(t){return t.toString()},jt(t){return"string"==typeof t?t.length:0},random(t,e){return void 0===e?this.f3.m5()*t:this.f3.m5()*(e-t)+t},zmt(...t){const e=Math.floor(this.f3.m5()*t.length);return t[e]},aBt(t,...e){return"number"!=typeof t&&(t=0),e[t=C33.En(Math.floor(t),0,e.length-1)]},pi(){return Math.PI},lBt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},cBt(t,e){e=Math.max(Math.floor(e),0);const s=Math.pow(10,e);return Math.round((t+Number.EPSILON)*s)/s},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(C33.An(t))},cos(t){return Math.cos(C33.An(t))},tan(t){return Math.tan(C33.An(t))},asin(t){return C33.Mn(Math.asin(t))},acos(t){return C33.Mn(Math.acos(t))},atan(t){return C33.Mn(Math.atan(t))},exp(t){return Math.exp(t)},Zt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...s){let i=s[0];"number"!=typeof i&&(i=0);for(let e=1,t=s.length;e<t;++e){let t=s[e];"number"==typeof t&&i<t&&(i=t)}return i},min(...s){let i=s[0];"number"!=typeof i&&(i=0);for(let e=1,t=s.length;e<t;++e){let t=s[e];"number"==typeof t&&i>t&&(i=t)}return i},En(t,e,s){return C33.En(t,e,s)},Gt(t,e,s,i){return C33.Rn(t,e,s,i)},angle(t,e,s,i){return C33.Mn(C33.bn(t,e,s,i))},Nt(t,e,s){return C33.Nt(t,e,s)},Nn(t,e,s){return C33.Nn(t,e,s)},Bn(t,e,s,i){return C33.Bn(t,e,s,i)},kn(t,e,s,i,r){return C33.kn(t,e,s,i,r)},$n(t,e,s){return C33.$n(t,e,s)},uBt(t,e){return C33.Mn(C33.On(C33.An(t),C33.An(e)))},fBt(t,e,s){return C33.Mn(C33.vn(C33.An(t),C33.An(e),s))},dBt(t,e,s){return C33.Mn(C33.Gn(C33.An(t),C33.An(e),C33.An(s)))},pBt(t,e,s){return(t|=0)&~(1<<(e|=0))|(s=0!==s?1:0)<<e},CBt(t,e){return(t|=0)^1<<(e|=0)},mBt(t,e){return(t|=0)&1<<(e|=0)?1:0},SBt(){return"\n"},gBt(t){return"string"==typeof t?t.toUpperCase():""},_Bt(t){return"string"==typeof t?t.toLowerCase():""},left(t,e){return"string"==typeof t?t.substr(0,e):""},mid(t,e,s){return"string"!=typeof t?"":s<0?t.substr(e):t.substr(e,s)},right(t,e){return"string"==typeof t?t.substr(Math.max(t.length-e,0)):""},trim(t){return"string"==typeof t?t.trim():""},TBt(t,e,s){if("string"!=typeof t||"string"!=typeof s)return"";let i=t.split(s);return(e=Math.floor(e))<0||e>=i.length?"":i[e]},yBt(t,e){return"string"==typeof t&&"string"==typeof e&&t.length?t.split(e).length:0},find(t,e){return"string"==typeof t&&"string"==typeof e?t.search(new RegExp(C33.fi(e),"i")):-1},EBt(t,e){return"string"==typeof t&&"string"==typeof e?t.search(new RegExp(C33.fi(e),"")):-1},replace(t,e,s){return"string"==typeof t&&"string"==typeof e&&"string"==typeof s?t.replace(new RegExp(C33.fi(e),"gi"),s):"string"==typeof t?t:""},IBt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},ABt(t,e,s){const i=this.jFt(e,s);return t?t.search(i):-1},MBt(t,e,s,i){const r=this.jFt(e,s);return t?t.replace(r,i):""},RBt(t,e,s){const i=this.YFt(t.toString(),e,s);return i?i.length:0},wBt(t,e,s,i){i=Math.floor(i);const r=this.YFt(t.toString(),e,s);return!r||i<0||i>=r.length?"":r[i]},bBt(t,e){let s=t<0?"-":"",i=e-(t=t<0?-t:t).toString().length;return(s+="0".repeat(Math.max(i,0)))+t.toString()},OBt(t){return encodeURIComponent(t)},GBt(t){return decodeURIComponent(t)},Xx(){return this.f3.mK()},timescale(){return this.f3.Zx()},PBt(){return(Date.now()-this.f3.FNt())/1e3},vBt(){return Date.now()},time(){return this.f3.zx()},tickcount(){return this.f3.ptt()},xBt(){return this.f3.$Nt()},fps(){return this.f3.t5()},LBt(){return this.f3.r5()},DBt(){return this.f3.h5()},NBt(){return this.f3.g8().U4t()},FBt(){return this.f3.g8().j4t()},BBt(){return this.f3.nx()},kBt(){return this.f3.ox()},$Bt(){return this.f3.nx()},WBt(){return this.f3.ox()},VBt(){return this.f3.B5().KD()},HBt(){return this.f3.B5().QD()},UBt(){return this.f3.B5().i3()},XBt(){return this.f3.B5().qD()},jBt(){return C33.Mn(this.f3.B5().GetAngle())},YBt(){return this.f3.B5().dC()},qBt(){return this.f3.B5().IC()},zBt(){return 100*this.f3.B5().eX()},JBt(){return 100*this.f3.B5().sX()},KBt(t){const e=this.f3.B5().V5(t);return e?e.tX().bl():0},ZBt(t){const e=this.f3.B5().V5(t);return e?e.tX().Ol():0},QBt(t){const e=this.f3.B5().V5(t);return e?e.tX().Gl():0},tkt(t){const e=this.f3.B5().V5(t);return e?e.tX().Pl():0},ekt(t){const e=this.f3.B5().V5(t);return e?e.tX().width():0},skt(t){const e=this.f3.B5().V5(t);return e?e.tX().height():0},ikt(t){const e=this.f3.B5().V5(t);if(e){const s=e.tX();return(s.bl()+s.Gl())/2}return 0},rkt(t){const e=this.f3.B5().V5(t);if(e){const s=e.tX();return(s.Ol()+s.Pl())/2}return 0},nkt(t,e,s){const i=this.f3.B5().V5(t);return i?i.cF(e,s)[0]:0},hkt(t,e,s){const i=this.f3.B5().V5(t);return i?i.cF(e,s)[1]:0},okt(t,e,s){const i=this.f3.B5().V5(t);return i?i.pF(e,s)[0]:0},akt(t,e,s){const i=this.f3.B5().V5(t);return i?i.pF(e,s)[1]:0},lkt(t,e,s,i){const r=this.f3.B5(),n=r.V5(t),h=r.V5(e);if(!n||!h||n===h)return s;const[o,a]=n.pF(s,i);return h.cF(o,a)[0]},ckt(t,e,s,i){const r=this.f3.B5(),n=r.V5(t),h=r.V5(e);if(!n||!h||n===h)return i;const[o,a]=n.pF(s,i);return h.cF(o,a)[1]},ukt(t){const e=this.f3.B5().V5(t);return e?e.HN():0},fkt(t){const e=this.f3.B5().V5(t);return e?C33.Mn(e.jN()):0},dkt(t){const e=this.f3.B5().V5(t);return e?100*e.$O():0},pkt(t){const e=this.f3.B5().V5(t);return e?e.XN():0},Ckt(t){const e=this.f3.B5().V5(t);return e?e.KD():0},mkt(t){const e=this.f3.B5().V5(t);return e?e.QD():0},Skt(t){const e=this.f3.B5().V5(t);return e?100*e.qN():0},gkt(t){const e=this.f3.B5().V5(t);return e?100*e.JN():0},_kt(t){const e=this.f3.B5().V5(t);return e?e.x_():0},Tkt(t){const e=this.f3.B5().V5(t);return e?e.F4():-1},ykt(){const t=this.f3.g8();return t?t.vxt():""},Ekt(t){const e=this.cft;if(!e.hft())return 0;if(t){const s=e.aft(t);return s?s.F4():0}return e.rft().F4()},Ikt(){return this.f3.tFt()},Akt(t,e,...s){const i=this.a7t(t.toLowerCase(),!1);if(!i)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let r=i.c7t.get(e.toLowerCase());if(!r){if(!i.l7t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; returning 0 (consider setting a default)`),0;r=i.l7t}const n=r.Lx(),h=r.Mx();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has no return type so cannot be called from an expression; returning 0`),0;if(!r.hu())return h;const o=this.f3,a=o.Ix(),l=a.Ox(),c=l.bx(),u=0<c.length,f=(u&&(r.xx()?a.v$(c):a.odt(c)),r.ept());for(let t=s.length,e=f.length;t<e;++t)s.push(f[t].h0t());const d=r.wx(),p=d.Px(d.bx(),r.xx(),n,h,...s);return u&&a.L$(c),p},Mkt(){return this.f3.H4().YW()},Rkt(){return 0===this.HFt?1:this.UFt/this.HFt},renderer(){return this.f3.Cxt()?"webgpu":"webgl"},wkt(){return this.f3.Cxt()?this.f3.Cxt().GetAdapterInfoString():this.f3.pxt().JG()},bkt(){let t=this.f3.Kg().Mg();return Math.round(100*t/1048576)/100},Okt(t,e,s){return C33.Yn(t,e,s)},Gkt(t,e,s){return C33.zn(t/100,e/100,s/100)},Pkt(t,e,s,i){return C33.qn(t/100,e/100,s/100,i/100)},vkt(t,e,s){return C33.zn(t/255,e/255,s/255)},xkt(t,e,s,i){return C33.qn(t/255,e/255,s/255,i/255)},Lkt(){return this.f3.J4()},Dkt(){return this.f3.Z4()},Nkt(){return this.f3.Ox().zY().i3()},Fkt(){return this.f3.Ox().ZCt()}}}{const C33=self.Ve;C33.Xq._rt=class SpritePlugin extends C33.hyt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve,C3X=self.Qe,spawnPickStack=[],map=(C33.Xq._rt.IMt=class SpriteType extends C33.Uyt{constructor(t){super(t),this.mMt=t.eRt()}Sn(){C33.Vh(this.mMt),super.Sn()}Oyt(){for(const t of this.mMt)t.SAt(this.f3)}uq(e){const s={bT:this.f3.ux()};return Promise.all(this.mMt.map(t=>t.gAt(e,s)))}gq(){for(const t of this.mMt)t._At()}Cq(){this.Bkt()}Bkt(){for(const t of this.Wut.OD())t.rB().kkt()}WSt(t){C33.Xq._rt.STt(this,t)}Rgt(t){spawnPickStack.push({qyt:null,$kt:!1,instances:[]})}Wkt(t,e,s){const i=spawnPickStack.at(-1);i.qyt=t,i.$kt=s,i.instances.push(e)}wgt(t){const e=spawnPickStack.pop(),s=e.qyt,i=e.$kt;if(s){const r=new Map;for(const n of e.instances)n.uwt(r,s,i);for(const[h,o]of r)h.PD().u3t(o)}}Vkt(t){const e=this.IF().hRt(t),s=this.aL(),i=e.TAt(0);return i.VB().m9(s.Kg(),{bT:s.ux()}).then(()=>this.Bkt()),e}Hkt(t){for(const e of this.Wut.OD())e.rB().Ukt(t);this.IF().oRt(t)}Xkt(t,e){const s=this.Wut.rRt(t);if(!s)throw new Error(`cannot find animation name '${t}'`);let i=s.AAt(e);i<0&&(i+=s.xB()+1);const r=C33.pAt.mAt(this.aL()),n=(s.yAt(r,i),this.aL());r.VB().m9(n.Kg(),{bT:n.ux()}).then(()=>this.Bkt());for(const h of this.Wut.OD())h.rB().jkt();return r}Ykt(t,e){const s=this.Wut.rRt(t);if(!s)throw new Error(`cannot find animation name '${t}'`);if(1===s.xB())throw new Error(`cannot remove last frame from animation '${t}'`);let i=s.AAt(e);i<0&&(i+=s.xB()),s.EAt(i);for(const r of this.Wut.OD())r.rB().jkt()}Gyt(){return self.qkt}},new WeakMap);self.qkt=class ISpriteObjectType extends self.SD{constructor(t){super(t),map.set(this,t.Mgt())}zkt(t){C3X.wi(t);const e=map.get(this).IF().rRt(t);return e?e.MAt():null}Jkt(){return map.get(this).IF().iRt().map(t=>t.MAt())}Kkt(t){return C3X.wi(t),map.get(this).Vkt(t).MAt()}Zkt(t){C3X.wi(t),map.get(this).Hkt(t)}Qkt(t,e){if(C3X.wi(t),"number"!=typeof e&&"string"!=typeof e)throw new TypeError("invalid insert location");return map.get(this).Xkt(t,e).NB()}t8t(t,e){if(C3X.wi(t),"number"!=typeof e&&"string"!=typeof e)throw new TypeError("invalid insert location");map.get(this).Ykt(t,e)}}}{const C33=self.Ve,C3X=self.Qe,INITIALLY_VISIBLE=0,INITIAL_ANIMATION=1,INITIAL_FRAME=2,ENABLE_COLLISIONS=3,tempRect=C33.mn(C33.Rect),tempQuad=C33.mn(C33.nc),tempVec2=C33.mn(C33.rl),FLAG_PLAYING_FORWARDS=1,FLAG_ANIMATION_PLAYING=2,FLAG_ANIMATION_TRIGGER=4,map=(C33.Xq._rt.Instance=class SpriteInstance extends C33.IEt{constructor(t,e){super(t);let s=!0,i="",r=0,n=!0;e&&(s=!!e[INITIALLY_VISIBLE],i=e[INITIAL_ANIMATION],r=e[INITIAL_FRAME],n=e[ENABLE_COLLISIONS]),this.e8t=this.Wut.rRt(i)||this.Wut.eRt()[0],this.s8t=C33.En(r,0,this.e8t.xB()-1),this.i8t=this.e8t.TAt(this.s8t);const h=this.i8t.VB(),o=(this.r8t=h.Jy(),this.n8t=h.Ww(),this.h8t=h.DEt(),this.wEt(),t.lwt(FLAG_ANIMATION_PLAYING,!0),t.lwt(FLAG_PLAYING_FORWARDS,0<=this.e8t.RB()),this.o8t=Math.abs(this.e8t.RB()),this.a8t=this.e8t.GB(),this.l8t=C33.mn(C33.vf),this.c8t=0,this.u8t=0,this.f8t="",this.d8t=-1,this.p8t="",this.C8t=0,this.W5());this.m8t=o.X7(),o.PN(s),o.o6(n),o.Qnt(this.i8t.XB()),o.eht(this.i8t.YB()),o.QOt(this.i8t.rk()),o.L7(),1===this.Wut.sRt()&&1===this.Wut.eRt()[0].xB()||0===this.o8t||this.pEt()}Sn(){this.e8t=null,this.i8t=null,this.r8t=null,this.l8t=null,super.Sn()}PEt(){return this.i8t.VB()}hst(){return!0}gV(){this.r8t=null}GEt(){this.kkt()}ST(t){const e=this.r8t;if(null!==e){t.XO(e);const s=this.W5();s.J6()?this.S8t(s,t):this.g8t(s,t)}}g8t(t,e){let s=this.m8t;this.f3.mx()&&(s=t.jOt(s)),e.eG(s,this.h8t)}S8t(e,t){const s=e.cGt();if(e.fGt()){e.HOt(tempRect,tempQuad,!1);let t=tempQuad;this.f3.mx()&&(t=e.jOt(t)),s.mT(e.K6(),t,this.h8t),e.uGt(!1)}s.ST(t)}_8t(){return this.l8t.cs()}T8t(){return this.xs.cwt(FLAG_ANIMATION_PLAYING)}y8t(t){this.xs.lwt(FLAG_ANIMATION_PLAYING,t)}E8t(){return this.xs.cwt(FLAG_PLAYING_FORWARDS)}I8t(t){this.xs.lwt(FLAG_PLAYING_FORWARDS,t)}A8t(){return this.xs.cwt(FLAG_ANIMATION_TRIGGER)}M8t(t){this.xs.lwt(FLAG_ANIMATION_TRIGGER,t)}gK(){this.p8t&&this.R8t(),0<=this.d8t&&this.w8t();const t=this.o8t;if(this.T8t()&&0!==t){const e=this.f3.jx(this.xs),s=(this.l8t._u(e),this._8t()),i=this.i8t,r=i.HB()/t;if(!(s<this.c8t+r)){const n=this.e8t,h=this.a8t,o=n.xB(),a=n.bB(),l=n.wB(),c=n.vB(),u=(this.E8t()?this.s8t++:this.s8t--,this.c8t+=r,this.s8t>=o&&(c?(this.I8t(!1),this.s8t=o-2):!l&&(this.u8t++,this.u8t>=a)?this.b8t(!1):this.s8t=h),this.s8t<0&&(c?(this.s8t=1,this.I8t(!0),l||(this.u8t++,this.u8t>=a&&this.b8t(!0))):!l&&(this.u8t++,this.u8t>=a)?this.b8t(!0):this.s8t=h),this.s8t=C33.En(this.s8t,0,o-1),n.TAt(this.s8t));s>this.c8t+u.HB()/t&&(this.c8t=s),this.O8t(i,u)}}else this.Zyt()}b8t(t){this.s8t=t?0:this.e8t.xB()-1,this.y8t(!1),this.f8t=this.e8t.i3(),this.M8t(!0),this.Yyt("animationend",!1,{animationName:this.f8t}),this.n7(C33.Xq._rt.Hq.G8t),this.n7(C33.Xq._rt.Hq.P8t),this.M8t(!1),this.u8t=0}O8t(s,i,t){if(s!==i){const e=this.W5(),r=s.VB(),n=i.VB(),h=r.dC(),o=r.IC(),a=n.dC(),l=n.IC(),c=(t&&t.onFrameChange?t.onFrameChange(e,h,o,a,l):(h!==a&&e.TC(e.dC()*(a/h)),o!==l&&e.pC(e.IC()*(l/o))),e.Qnt(i.XB()),e.eht(i.YB()),e.QOt(i.rk()),e.L7(),this.i8t=i,this.r8t=n.Jy(),this.n8t=n.Ww(),this.h8t=n.DEt(),this.xk().drt());for(let t=0,e=c.length;t<e;++t)c[t].EIt(s,i);this.Yyt("framechange",!1,{animationName:this.e8t.i3(),v8t:this.s8t}),this.n7(C33.Xq._rt.Hq.x8t),this.f3.q5()}}L8t(t){this.y8t(!0),this.c8t=this._8t(),1===t&&0!==this.s8t&&(this.d8t=0,this.A8t()||this.w8t()),this.pEt()}D8t(t,e,s){this.p8t=t,this.C8t=e,this.pEt(),!s&&this.A8t()||this.R8t()}N8t(){return this.e8t}F8t(){return this.p8t||this.e8t.i3()}Ukt(t){C33.Ar(t,this.F8t())&&this.D8t(this.Wut.aRt().i3(),1,!0)}B8t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const e=this.Wut.rRt(this.F8t());if(!e)return;if(-1===(t=e.IAt(t)))return}isFinite(t)&&(this.d8t=t,this.A8t()||this.w8t())}jkt(){if(!this.p8t&&-1===this.d8t){const t=this.i8t,e=this.e8t.TAt(C33.En(this.s8t,0,this.e8t.xB()-1));t!==e&&this.O8t(t,e),1<this.e8t.xB()&&0<this.o8t&&this.pEt()}}k8t(){return this.s8t}$8t(){return this.i8t.lk()}W8t(t){this.o8t=Math.abs(t),this.I8t(0<=t),0<this.o8t&&this.pEt()}V8t(){return this.E8t()?this.o8t:-this.o8t}H8t(t){"string"==typeof t&&-1===(t=this.e8t.IAt(t))||(t=C33.En(Math.floor(t),0,this.e8t.xB()-1),this.a8t=t)}U8t(){return this.a8t}R8t(t){const e=this.i8t,s=this.Wut.rRt(this.p8t);if(this.p8t="",s&&(s!==this.e8t||!this.T8t())){this.e8t=s,this.I8t(0<=s.RB()),this.o8t=Math.abs(s.RB()),this.a8t=s.GB(),this.s8t=C33.En(this.s8t,0,this.e8t.xB()-1),1===this.C8t&&(this.s8t=0),this.y8t(!0),this.c8t=this._8t();const i=this.e8t.TAt(this.s8t);this.O8t(e,i,t)}}w8t(t){const e=this.i8t,s=this.s8t;if(this.s8t=C33.En(Math.floor(this.d8t),0,this.e8t.xB()-1),this.d8t=-1,t||s!==this.s8t){const i=this.e8t.TAt(this.s8t);this.O8t(e,i),this.c8t=this._8t()}}kkt(){const t=this.i8t.VB();this.r8t=t.Jy(),this.n8t=t.Ww(),this.h8t=t.DEt(),this.W5().uGt(!0)}Jy(){return this.r8t}Ww(){return this.n8t}DEt(){return this.h8t}JB(){return this.i8t.JB()}Ogt(t){let e=this.i8t,s=this.W5(),i=null;if("string"==typeof t)i=e.sk(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");i=e.ek(t-1)}let r=s.W7();if(!i)return[s.b_(),s.P_(),r];if(tempVec2.A(i.NAt()),s.J6()){const[n,h,o]=s.K6().IT(tempVec2.ll(),tempVec2.ul());tempVec2.set(n,h),r+=o}return tempVec2.offset(-e.XB(),-e.YB()),tempVec2.scale(s.dC(),s.IC()),tempVec2.rotate(s.GetAngle()),tempVec2.offset(s.b_(),s.P_()),[tempVec2.ll(),tempVec2.ul(),r]}X8t(){return this.W5().rGt().qc()}j8t(t){t=Math.floor(t);const e=this.W5(),s=e.rGt(),i=s.qc();if((t=t===i?0:t)<0||i<=t)return[0,0];const r=s.Yc();return[r[2*t+0]+e.b_(),r[2*t+1]+e.P_()]}gEt(){const e=C33.Xq._rt.Nrt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.e8t.i3(),Y8t:t=>this.TEt(e.q8t,t,0)},{name:t+".current-frame",value:this.s8t,Y8t:t=>this.TEt(e.z8t,t)},{name:t+".is-playing",value:this.T8t(),Y8t:t=>t?this.TEt(e.J8t,0):this.TEt(e.K8t)},{name:t+".speed",value:this.o8t,Y8t:t=>this.TEt(e.Z8t,t)},{name:t+".repeats",value:this.u8t,Y8t:t=>this.u8t=t}]}]}V_(){const t={a:this.e8t.NU()},e=(0!==this.c8t&&(t.fs=this.c8t),this._8t()),s=(0!==e&&(t.at=e),0!==this.s8t&&(t.f=this.s8t),0!==this.o8t&&(t.cas=this.o8t),1!==this.u8t&&(t.ar=this.u8t),0!==this.a8t&&(t.rt=this.a8t),this.T8t()||(t.ap=this.T8t()),this.E8t()||(t.af=this.E8t()),this.W5());return s.h6()&&(t.ce=s.h6()),t}H_(t){const e=this.IF().nRt(t.a),s=(e&&(this.e8t=e),this.c8t=t.hasOwnProperty("fs")?t.fs:0,this.l8t.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),i=(this.s8t=C33.En(s,0,this.e8t.xB()-1),this.o8t=t.hasOwnProperty("cas")?t.cas:0,this.u8t=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),r=(this.a8t=C33.En(i,0,this.e8t.xB()-1),this.y8t(!t.hasOwnProperty("ap")||!!t.ap),this.I8t(!t.hasOwnProperty("af")||!!t.af),this.e8t.TAt(this.s8t)),n=(this.i8t=r,this.kkt(),this.W5());n.Qnt(r.XB()),n.eht(r.YB()),n.QOt(r.rk()),n.o6(!!t.ce),this.T8t()&&this.pEt()}Tnt(t){const e=this.W5();switch(t){case ENABLE_COLLISIONS:return e.h6();case INITIAL_FRAME:return C33.En(this.s8t,0,this.e8t.xB()-1);case INITIAL_ANIMATION:return this.e8t.i3()}}Rnt(t,e,s){const i=this.W5();switch(t){case ENABLE_COLLISIONS:i.o6(!!e);break;case INITIAL_FRAME:{this.y8t(!1);const r=this.e8t.xB()-1,n=e=C33.En(e,0,r),h=this.e8t.TAt(this.s8t),o=this.e8t.TAt(n);this.O8t(h,o,s),this.s8t=C33.En(n,0,r);break}case INITIAL_ANIMATION:{this.p8t=e,this.R8t(s);const a=this.e8t.xB();1<a&&0<this.e8t.RB()?this.pEt():this.Zyt();break}}}Gyt(){return self.Q8t}},new WeakMap),ANIM_FROM_MODES=new Map([["current-frame",0],["beginning",1]]);self.Q8t=class ISpriteInstance extends self.Q6{constructor(){super(),map.set(this,self.yF.RF().rB())}zB(){return map.get(this).JB()}KB(t){return this.ZB(t)[0]}QB(t){return this.ZB(t)[1]}t$t(t){return this.ZB(t)[2]}ZB(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return map.get(this).Ogt(t)}ik(){return map.get(this).X8t()}nk(t){return C3X.Ii(t),map.get(this).j8t(t)[0]}ak(t){return C3X.Ii(t),map.get(this).j8t(t)[1]}hk(t){return C3X.Ii(t),map.get(this).j8t(t)}e$t(){map.get(this).y8t(!1)}s$t(t="current-frame"){C3X.wi(t);const e=ANIM_FROM_MODES.get(t);if(void 0===e)throw new Error("invalid mode");map.get(this).L8t(e)}i$t(t,e="beginning"){C3X.wi(t),C3X.wi(e);const s=ANIM_FROM_MODES.get(e);if(void 0===s)throw new Error("invalid mode");const i=map.get(this);if(!i.IF().rRt(t))throw new Error(`animation name "${t}" does not exist`);i.D8t(t,s)}zkt(t){C3X.wi(t);const e=map.get(this).IF().rRt(t);return e?e.MAt():null}get animation(){return map.get(this).N8t().MAt()}get animationName(){return map.get(this).F8t()}set v8t(t){C3X.Ii(t),map.get(this).B8t(t)}get v8t(){return map.get(this).k8t()}set r$t(t){C3X.wi(t),map.get(this).B8t(t)}get r$t(){return map.get(this).$8t()}set n$t(t){C3X.Ii(t),map.get(this).W8t(t)}get n$t(){return map.get(this).V8t()}set h$t(t){C3X.Ii(t),map.get(this).H8t(t)}get h$t(){return map.get(this).U8t()}get imageWidth(){return map.get(this).PEt().dC()}get imageHeight(){return map.get(this).PEt().IC()}o$t(){const t=map.get(this).PEt();return[t.dC(),t.IC()]}async a$t(t){C3X.nr(t,Blob);const e=map.get(this),s=e.aL(),i=e.PEt(),r=C33.mn(C33.$It);if(r.tAt(s,t),await r.m9(s.Kg(),{bT:s.ux()}),e.gn())r.Sn();else{i.eAt(r);const n=e.Mgt();n.Bkt(),n.IF().q3().dispatchEvent(new C33.Event("animationframeimagechange")),s.q5()}}l$t(t,e){C3X.wi(e),map.get(this).W5().WOt(!!t,e)}}}{const C33=self.Ve;C33.Xq._rt.Hq={c$t(t){return C33.Ar(this.F8t(),t)},u$t(t,e){return C33.compare(this.s8t,t,e)},f$t(t,e){if("string"!=typeof e)return!1;const s=this.i8t.lk();return C33.compare(s.toLowerCase(),t,e.toLowerCase())},d$t(t,e){return C33.compare(this.V8t(),t,e)},P8t(t){return C33.Ar(this.f8t,t)},G8t(){return!0},x8t(){return!0},p$t(){return this.W5().dC()<0},C$t(){return this.W5().IC()<0},m$t(){return!0},S$t(){return!0},h6(){return this.W5().h6()}}}{const C33=self.Ve;C33.Xq._rt.Nrt={g$t(t,e,s,i,r){if(t&&e){const[n,h]=this.Ogt(s),o=this.f3.DD(t,e,n,h,i,r);if(o){if(i&&e.ND(o),t._D().tD()){const l=o.W5();l.zD(this.W5().GetAngle()),l.L7()}const a=this.f3.Ix();a.FD(!0),o.BD(),a.FD(!1),t!==this.f3.c0t().IF()&&this.Kyt.Wkt(t,o,i)}}},K8t(){this.y8t(!1)},J8t(t){this.L8t(t)},q8t(t,e){this.D8t(t,e)},z8t(t){this.B8t(t)},Z8t(t){this.W8t(t)},_$t(t){this.H8t(t)},T$t(e,t){try{0===e?this.Mgt().Vkt(t):this.Mgt().Hkt(t)}catch(t){console.error(`[Construct] Error ${0===e?"adding":"removing"} animation: `,t)}},y$t(e,t,s){try{0===e?this.Mgt().Xkt(t,s):this.Mgt().Ykt(t,s)}catch(t){console.error(`[Construct] Error ${0===e?"adding":"removing"} animation frame: `,t)}},E$t(t){const e=this.W5(),s=e.dC(),i=Math.abs(s)*(0===t?-1:1);s!==i&&(e.TC(i),e.L7())},I$t(t){const e=this.W5(),s=e.IC(),i=Math.abs(s)*(0===t?-1:1);s!==i&&(e.pC(i),e.L7())},YD(t){const e=this.i8t,s=e.VB(),i=this.W5(),r=i.dC()<0?-1:1,n=i.IC()<0?-1:1,h=s.dC()*t*r,o=s.IC()*t*n;i.dC()===h&&i.IC()===o||(i.aw(h,o),i.L7())},async A$t(t,e,s){const i=this.i8t,r=i.VB(),n=this.W5(),h=this.f3,o=this.Kyt;if(r.$W()===t)0===e&&(n.aw(r.dC(),r.IC()),n.L7()),this.n7(C33.Xq._rt.Hq.m$t);else{const a=C33.mn(C33.$It);try{if(await a.QIt(h,t),!a.fV())throw new Error("image failed to load");if(this.gn())return void a.Sn();await a.m9(h.Kg(),{bT:h.ux()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.gn()||this.n7(C33.Xq._rt.Hq.S$t))}this.gn()?a.Sn():(r.eAt(a),o.Bkt(),o.IF().q3().dispatchEvent(new C33.Event("animationframeimagechange")),h.q5(),0===e&&(n.aw(r.dC(),r.IC()),n.L7()),await this.o7(C33.Xq._rt.Hq.m$t))}},M$t(t){this.W5().o6(t)},WOt(t,e){this.W5().WOt(0===t,e)},R$t(t){this.W5().S_(t),this.f3.q5()}}}{const C33=self.Ve;C33.Xq._rt.Frt={w$t(){return this.k8t()},b$t(){return this.$8t()},O$t(){return this.e8t.xB()},G$t(){return this.e8t.i3()},P$t(){return this.V8t()},v$t(){return this.e8t.RB()},x$t(t){return this.Ogt(t)[0]},L$t(t){return this.Ogt(t)[1]},D$t(t){return this.Ogt(t)[2]},N$t(){return this.JB()},F$t(){return this.PEt().dC()},B$t(){return this.PEt().IC()},k$t(t){return this.j8t(t)[0]},$$t(t){return this.j8t(t)[1]},W$t(){return this.X8t()}}}{const C33=self.Ve;C33.Xq.Text=class TextPlugin extends C33.hyt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Xq.Text.IMt=class TextType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}uq(t){}gq(){}}}{const C33=self.Ve,C3X=self.Qe,TEMP_COLOR_ARRAY=[0,0,0],TEXT=0,ENABLE_BBCODE=1,FONT=2,SIZE=3,LINE_HEIGHT=4,BOLD=5,ITALIC=6,COLOR=7,HORIZONTAL_ALIGNMENT=8,VERTICAL_ALIGNMENT=9,WRAPPING=10,TEXT_DIRECTION=11,ICON_SET=12,INITIALLY_VISIBLE=13,ORIGIN=14,READ_ALOUD=15,HORIZONTAL_ALIGNMENTS=["left","center","right"],VERTICAL_ALIGNMENTS=["top","center","bottom"],TEXT_DIRECTIONS=["ltr","rtl"],WORD_WRAP_MODES=["word","cjk","character"],tempRect=new C33.Rect,tempQuad=new C33.nc,tempColor=new C33.qo,tempVec2=C33.mn(C33.rl),BBCODE_TAG_TO_HTML=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),map=(C33.Xq.Text.Instance=class TextInstance extends C33.IEt{constructor(t,e){if(super(t),this.d3="",this.V$t=!0,this.H$t="Arial",this.U$t=12,this.X$t=0,this.HM=!1,this.UM=!1,this.p_=C33.mn(C33.qo),this.JM=0,this.KM=0,this.tR="word",this.eR=0,this.j$t="auto",this.Y$t=1,this.q$t=null,this.z$t="",this.J$t=!1,this.K$t=!1,this.Z$t=null,this.Q$t=-1,this.t9t=-1,this.e9t=0,this.s9t=C33.mn(C33.fm.bg,this.f3.Kg(),{timeout:5}),this.s9t.bR=()=>this.f3.q5(),this.i9t=()=>this.r9t(),this.n9t=!1,e){this.d3=e[TEXT],this.V$t=!!e[ENABLE_BBCODE],this.H$t=e[FONT],this.U$t=e[SIZE],this.X$t=e[LINE_HEIGHT],this.HM=!!e[BOLD],this.UM=!!e[ITALIC],this.JM=e[HORIZONTAL_ALIGNMENT],this.KM=e[VERTICAL_ALIGNMENT],this.tR=WORD_WRAP_MODES[e[WRAPPING]],this.eR=e[TEXT_DIRECTION],this.h9t(this.f3.Fq(e[ICON_SET]));const s=e[COLOR];this.p_.ta(s[0],s[1],s[2]),this.W5().PN(e[INITIALLY_VISIBLE]),this.K$t=!!e[READ_ALOUD]}this.o9t(),this.a9t()}Sn(){this.h9t(null),this.l9t(),this.Z$t&&(this.Z$t.Sn(),this.Z$t=null),this.s9t.Sn(),this.s9t=null,super.Sn()}o9t(){const t=this.s9t;t.S3(this.d3),t.vR(this.V$t),this.s9t.NM()&&this.q$t?this.s9t.uC(this.aL().JNt(this.q$t)):this.s9t.uC(null),t.xR("nearest"!==this.f3.ux()),t.LR(this.H$t),t.BR(this.X$t),t.$R(this.HM),t.VR(this.UM),t.g_(this.p_),t.JR(HORIZONTAL_ALIGNMENTS[this.JM]),t.ZR(VERTICAL_ALIGNMENTS[this.KM]),t.ew(this.tR),t.rw(TEXT_DIRECTIONS[this.eR])}c9t(){let t=this.W5(),e=(this.s9t.DR(this.U$t),this.s9t.FR(t.aOt()),t.V5()),s;"auto"===this.j$t?s=e.JX(t.W7()):"fixed"===this.j$t&&(s=this.Y$t),t.J6()&&s!==this.s9t.lw()&&t.uGt(!0),this.s9t.aw(t.dC(),t.IC(),s)}h9t(t){t&&(t.bU()||t._D().constructor!==C33.Xq._rt)||t!==this.q$t&&(this.q$t&&this.q$t.q3().removeEventListener("animationframeimagechange",this.i9t),this.q$t=t,this.q$t&&this.q$t.q3().addEventListener("animationframeimagechange",this.i9t),this.o9t(),this.J$t=!1,this.f3.q5())}r9t(){this.f3.KNt(this.q$t),this.f3.q5(),this.n9t=!0}a9t(){if(this.K$t){let t=this.d3;this.V$t&&(t=C33.kr.nC(t)),this.Z$t?this.Z$t.S3(t):this.Z$t=C33.mn(C33.u3,this.f3,t)}else this.Z$t&&(this.Z$t.Sn(),this.Z$t=null)}ST(t){const e=this.W5(),s=(this.c9t(),this.n9t&&(this.n9t=!1,this.s9t.NM())&&this.q$t&&this.s9t.uC(this.aL().JNt(this.q$t)),this.s9t.Jy());if(s){const i=e.V5();if(0===e.GetAngle()&&0===i.GetAngle()&&0===e.W7()&&!e.J6()&&i.mX()){const r=e.X7(),[n,h]=i.gF(r.hh(),r.oh()),[o,a]=i.gF(r.uh(),r.fh()),l=n-Math.round(n),c=h-Math.round(h),[u,f]=(tempRect.set(n,h,o,a),tempRect.offset(-l,-c),tempQuad.Oc(tempRect),t.nG(t.AG()));this.f3.g8().A9(t,u,f),t.XO(s),t.BS(tempQuad,this.s9t.Ww()),i.R9(t)}else t.XO(s),e.J6()?this.S8t(e,t):this.g8t(e,t)}}g8t(t,e){let s=t.X7();this.f3.mx()&&(s=this.u9t(s)),e.BS(s,this.s9t.Ww())}S8t(e,t){const s=e.cGt();if(e.fGt()){e.HOt(tempRect,tempQuad,!1);let t=tempQuad;this.f3.mx()&&(t=this.u9t(t)),s.mT(e.K6(),t,this.s9t.Ww()),e.uGt(!1)}s.ST(t)}u9t(t){const e=t.hh()-Math.round(t.hh()),s=t.oh()-Math.round(t.oh());return 0==e&&0==s?t:(tempQuad.A(t),tempQuad.offset(-e,-s),tempQuad)}vEt(){const t=this.s9t.Jy();return t?[t.dC(),t.IC()]:[100,100]}xEt(){return this.s9t.Ww()}NEt(){return!1}V_(){const t={t:this.d3,c:this.p_.toJSON(),fn:this.H$t,ps:this.U$t};return this.V$t&&(t.bbc=this.V$t),0!==this.JM&&(t.ha=this.JM),0!==this.KM&&(t.va=this.KM),"word"!==this.tR&&(t.wr=this.tR),0!==this.X$t&&(t.lho=this.X$t),this.HM&&(t.b=this.HM),this.UM&&(t.i=this.UM),-1!==this.t9t&&(t.tw={st:this.Q$t,en:this.t9t,l:this.e9t}),this.q$t&&(t.ioc=this.q$t.NU()),"fixed"===this.j$t&&(t.fs=this.Y$t),t}H_(t){if(this.l9t(),this.d3=t.t,this.p_.qa(t.c),this.H$t=t.fn,this.U$t=t.ps,this.V$t=!!t.hasOwnProperty("bbc")&&t.bbc,this.JM=t.hasOwnProperty("ha")?t.ha:0,this.KM=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const e=t.wr;this.tR="boolean"==typeof e?e?"word":"character":e}else this.tR="word";if(this.X$t=t.hasOwnProperty("lho")?t.lho:0,this.HM=!!t.hasOwnProperty("b")&&t.b,this.UM=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.Q$t=s.st,this.t9t=s.en,this.e9t=s.l}if(t.hasOwnProperty("ioc")){const i=this.aL().Fq(t.ioc);i&&this.h9t(i)}else this.h9t(null);t.hasOwnProperty("fs")?(this.j$t="fixed",this.Y$t=t.fs):this.j$t="auto",this.o9t(),this.a9t(),this.J$t=!1,-1!==this.t9t&&this.pEt()}Tnt(t){switch(t){case TEXT:return this.ow();case ENABLE_BBCODE:return this.V$t;case FONT:return this.f9t();case SIZE:return this.d9t();case LINE_HEIGHT:return this.p9t();case BOLD:return this.C9t();case ITALIC:return this.m9t();case COLOR:return TEMP_COLOR_ARRAY[0]=this.p_.ca(),TEMP_COLOR_ARRAY[1]=this.p_.ua(),TEMP_COLOR_ARRAY[2]=this.p_.fa(),TEMP_COLOR_ARRAY;case HORIZONTAL_ALIGNMENT:return this.S9t();case VERTICAL_ALIGNMENT:return this.g9t();case WRAPPING:return this._9t();case READ_ALOUD:return this.T9t()}}Rnt(t,e){switch(t){case TEXT:this.y9t(e);break;case ENABLE_BBCODE:this.V$t!==!!e&&(this.V$t=!!e,this.o9t());break;case FONT:this.E9t(e);break;case SIZE:this.I9t(e);break;case LINE_HEIGHT:this.A9t(e);break;case BOLD:this.M9t(e);break;case ITALIC:this.R9t(e);break;case COLOR:const s=this.p_,i=e;s.ca()===i[0]&&s.ua()===i[1]&&s.fa()===i[2]||(this.p_.ta(i[0],i[1],i[2]),this.o9t());break;case HORIZONTAL_ALIGNMENT:this.w9t(e);break;case VERTICAL_ALIGNMENT:this.b9t(e);break;case WRAPPING:this.O9t(e)}}_Et(t,e,s,i){0===e&&0===s&&0===i||t===COLOR&&(this.p_.ea(e,s,i),this.o9t())}y9t(t){this.d3!==t&&(this.d3=t,this.s9t.S3(t),this.a9t(),this.J$t=!1,this.f3.q5())}ow(){return this.d3}G9t(t,e){this.c9t(),this.y9t(t),this.Q$t=this.f3.Kx(),this.t9t=this.Q$t+e/this.xk().kF(),this.e9t=this.s9t.pw(),this.s9t.UR(0),this.pEt()}l9t(){this.Q$t=-1,this.t9t=-1,this.e9t=0,this.s9t.UR(-1),this.Zyt()}P9t(){-1!==this.t9t&&(this.l9t(),this.n7(C33.Xq.Text.Hq.v9t),this.f3.q5())}E9t(t){this.H$t!==t&&(this.H$t=t,this.s9t.LR(t),this.f3.q5())}f9t(){return this.H$t}M9t(t){this.HM!==(t=!!t)&&(this.HM=t,this.s9t.$R(t),this.f3.q5())}C9t(){return this.HM}R9t(t){this.UM!==(t=!!t)&&(this.UM=t,this.s9t.VR(t),this.f3.q5())}m9t(){return this.UM}I9t(t){this.U$t!==t&&(this.U$t=t,this.f3.q5())}d9t(){return this.U$t}x9t(t){this.p_.Ta(t)||(this.p_.la(t),this.s9t.g_(this.p_),this.f3.q5())}L9t(){return this.p_}A9t(t){this.X$t!==t&&(this.X$t=t,this.o9t(),this.f3.q5())}p9t(){return this.X$t}w9t(t){this.JM!==t&&(this.JM=t,this.o9t(),this.f3.q5())}S9t(){return this.JM}b9t(t){this.KM!==t&&(this.KM=t,this.o9t(),this.f3.q5())}g9t(){return this.KM}D9t(t){this.O9t(WORD_WRAP_MODES[t])}O9t(t){this.tR!==t&&(this.tR=t,this.o9t(),this.f3.q5())}_9t(){return this.tR}N9t(t){this.eR!==t&&(this.eR=t,this.o9t(),this.f3.q5())}F9t(){return this.eR}B9t(t){this.K$t=!!t,this.a9t()}T9t(){return this.K$t}k9t(t){this.j$t!==t&&(this.j$t=t,this.f3.q5())}$9t(){return this.j$t}W9t(t){this.Y$t!==t&&(this.Y$t=t,"fixed"===this.j$t)&&this.f3.q5()}V9t(){return this.Y$t}H9t(){return this.c9t(),this.s9t.cw()}U9t(){return this.c9t(),this.s9t.fw()}X9t(t,e){this.c9t();const s=this.W5(),i=(tempVec2.set(t-s.b_(),e-s.P_()),tempVec2.rotate(-s.GetAngle()),tempVec2.offset(s.dC()*s.XB(),s.IC()*s.YB()),tempVec2.bt(s.dC(),s.IC()),tempVec2.scale(this.s9t.dC(),this.s9t.IC()),this.s9t.mw(tempVec2.ll(),tempVec2.ul()));if(i){const r=i.u1("tag");if(r)return r.param}return""}j9t(t,e,s){const i=this.X9t(e,s);return i&&C33.Ar(t,i)}Y9t(t,e){this.c9t(),e=Math.floor(e);const s=this.s9t.gw(t,e);if(!s)return null;const i=this.W5(),r=this.s9t.qR(),n=s.h1(),h=s.a1()-(s.IC()-s.MC())*r,o=s.dC()*r/this.s9t.dC()*i.dC(),a=s.IC()*r/this.s9t.IC()*i.IC();return tempVec2.set(n,h),tempVec2.bt(this.s9t.dC(),this.s9t.IC()),tempVec2.scale(i.dC(),i.IC()),tempVec2.offset(-i.dC()*i.XB(),-i.IC()*i.YB()),tempVec2.rotate(i.GetAngle()),tempVec2.offset(i.b_(),i.P_()),{x:tempVec2.ll(),y:tempVec2.ul(),width:o,height:a}}q9t(t){return this.c9t(),this.s9t._w(t)}z9t(t){let e=BBCODE_TAG_TO_HTML.get(t);return null===e?"":`</${(e=e||"span")||"span"}>`}J9t(t,e){let s=BBCODE_TAG_TO_HTML.get(t);if(null===s)return"";switch(s=s||"span",t){case"color":return`<${s} style="color: ${e}">`;case"font":return`<${s} style="font-family: '${e}'">`;case"opacity":return`<${s} style="opacity: ${e}%">`;case"size":return`<${s} style="font-size: ${e}pt">`;case"background":return`<${s} style="background-color: ${e}">`;case"hide":return`<${s} style="visibility: hidden">`;case"class":return`<${s} class="${e}">`;case"tag":return`<${s} data-tag="${e}">`;default:return`<${s}>`}}async K9t(){if(!this.J$t){let t=new C33.kr(this.d3,{Wp:!0}).Zp(),e=new Map,r='<span class="c3-text"',s=[];s.push(`font-family: '${this.f9t()}';`),this.C9t()&&s.push("font-weight: bold;"),this.m9t()&&s.push("font-style: italic;"),"character"===this._9t()&&s.push("word-break: break-all;"),r+=` style="${s.join(" ")}">`;const n=this.q$t?this.aL().JNt(this.q$t):null;if(this.q$t){const o=C33.mn(C33.y0),a=[],l=new Map;for(const u of t)if(u.yC()){const f=u.g1(n);if(f){const d=f.hm(),p=d.VB().hAt();if(l.has(p))continue;l.set(p,null),a.push(o._u(async()=>{const t=await p.EV();l.set(p,t)}))}}await Promise.all(a);const c=[];for(const C of t)if(C.yC()){const m=C.g1(n);if(m){const S=m.hm(),g=S.VB().hAt();c.push(o._u(async()=>{const t=await S.VB().aAt(l.get(g));e.set(m,t)}))}}await Promise.all(c);for(const _ of l.values())_ instanceof ImageBitmap&&_.close&&_.close()}const h=new Map;for(const T of t){let i=T.d1(),t=[...h.keys()];t.reverse();for(const y of t)i.has(y)&&i.get(y)===h.get(y)||(h.delete(y),r+=this.z9t(y));for(const[E,I]of i)h.has(E)||(h.set(E,I),r+=this.J9t(E,I));if(T._C()&&(r+=C33.hp(C33.rp(T.FC().join("")),"\n","<br>")),T.yC()&&n){const A=T.g1(n);if(A){const M=e.get(A);if(M){let t=[],e="0.2em",s=i.get("iconoffsety");if(s){let t=s.trim();e=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+e),"nearest"===this.f3.ux()&&t.push("image-rendering: pixelated"),r+=`<img class="c3-text-icon" data-icon="${T.S1()}" width="${A.dC()}" height="${A.IC()}" style="${t.join(";")}" src="${M}">`}}}}const i=[...h.keys()];i.reverse();for(const R of i)r+=this.z9t(R);r+="</span>",this.z$t=r,this.J$t=!0}return this.z$t}gK(){const e=this.f3.Kx();if(e>=this.t9t)this.l9t(),this.n7(C33.Xq.Text.Hq.v9t),this.f3.q5();else{let t=C33.Fn(this.Q$t,this.t9t,e,0,this.e9t);(t=Math.floor(t))!==this.s9t.jR()&&(this.s9t.UR(t),this.f3.q5())}}gEt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.ow(),Y8t:t=>this.y9t(t)},{name:t+".properties.font.name",value:this.f9t(),Y8t:t=>this.E9t(t)},{name:t+".properties.size.name",value:this.d9t(),Y8t:t=>this.I9t(t)},{name:t+".properties.line-height.name",value:this.p9t(),Y8t:t=>this.A9t(t)},{name:t+".properties.bold.name",value:this.C9t(),Y8t:t=>this.M9t(t)},{name:t+".properties.italic.name",value:this.m9t(),Y8t:t=>this.R9t(t)}]}]}Gyt(){return self.Z9t}},new WeakMap),SCRIPT_HORIZONTAL_ALIGNMENTS=new Map([["left",0],["center",1],["right",2]]),SCRIPT_VERTICAL_ALIGNMENTS=new Map([["top",0],["center",1],["bottom",2]]),SCRIPT_TEXT_DIRECTIONS=["ltr","rtl"],VALID_RESOLUTION_MODES=new Set(["auto","fixed"]);self.Z9t=class ITextInstance extends self.Q6{constructor(){super(),map.set(this,self.yF.RF().rB())}get text(){return map.get(this).ow()}set text(t){C3X.wi(t);const e=map.get(this);e.l9t(),e.y9t(t)}Q9t(t,e){C3X.wi(t),C3X.Ii(e);const s=map.get(this);s.l9t(),s.G9t(t,e)}tWt(){map.get(this).P9t()}set O9(t){C3X.wi(t),map.get(this).E9t(t)}get O9(){return map.get(this).f9t()}set P9(t){map.get(this).M9t(t)}get P9(){return map.get(this).C9t()}set v9(t){map.get(this).R9t(t)}get v9(){return map.get(this).m9t()}set G9(t){C3X.Ii(t),map.get(this).I9t(t)}get G9(){return map.get(this).d9t()}set eWt(t){if(C3X.Vi(t),t.length<3)throw new Error("expected 3 elements");tempColor.ta(t[0],t[1],t[2]),map.get(this).x9t(tempColor)}get eWt(){const t=map.get(this).L9t();return[t.ca(),t.ua(),t.fa()]}set lineHeight(t){C3X.Ii(t),map.get(this).A9t(t)}get lineHeight(){return map.get(this).p9t()}set D9(t){C3X.wi(t);const e=SCRIPT_HORIZONTAL_ALIGNMENTS.get(t);if(void 0===e)throw new Error("invalid mode");map.get(this).w9t(e)}get D9(){return HORIZONTAL_ALIGNMENTS[map.get(this).S9t()]}set verticalAlign(t){C3X.wi(t);const e=SCRIPT_VERTICAL_ALIGNMENTS.get(t);if(void 0===e)throw new Error("invalid mode");map.get(this).b9t(e)}get verticalAlign(){return VERTICAL_ALIGNMENTS[map.get(this).g9t()]}set N9(t){if(!WORD_WRAP_MODES.includes(t))throw new Error("invalid mode");map.get(this).O9t(t)}get N9(){return map.get(this)._9t()}set F9(t){C3X.wi(t);const e=SCRIPT_TEXT_DIRECTIONS.indexOf(t);if(-1===e)throw new Error("invalid text direction");map.get(this).N9t(e)}get F9(){return SCRIPT_TEXT_DIRECTIONS[map.get(this).F9t()]}set sWt(t){map.get(this).B9t(!!t)}get sWt(){return map.get(this).T9t()}iWt(t){C3X.Ii(t);const e=map.get(this);e.k9t("fixed"),e.W9t(t)}rWt(){map.get(this).k9t("auto")}get W9(){return map.get(this).H9t()}get V9(){return map.get(this).U9t()}nWt(){const t=map.get(this);return[t.H9t(),t.U9t()]}hWt(t,e,s){return C3X.wi(t),C3X.Ii(e),C3X.Ii(s),map.get(this).j9t(t,e,s)}oWt(t,e){return C3X.Ii(t),C3X.Ii(e),map.get(this).X9t(t,e)}aWt(t,e=0){return C3X.wi(t),C3X.Ii(e),map.get(this).Y9t(t,e)}lWt(t){return C3X.wi(t),map.get(this).q9t(t)}cWt(t){const e=map.get(this),s=e.aL().kL(t);e.h9t(s)}uWt(){return map.get(this).K9t()}}}{const C33=self.Ve;C33.Xq.Text.Hq={fWt(t,e){return e?this.d3===t:C33.Ar(this.d3,t)},dWt(){return-1!==this.t9t},v9t(){return!0},pWt(t,e,s){return this.j9t(t,e,s)}}}{const C33=self.Ve,tempColor=C33.mn(C33.qo);C33.Xq.Text.Nrt={S3(t){this.l9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.y9t(t.toString())},CWt(t){this.l9t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.y9t(this.d3+t)},mWt(t,e){this.l9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.G9t(t.toString(),e)},SWt(t,e){let s=!1,i=!1;switch(e){case 1:s=!0;break;case 2:i=!0;break;case 3:s=!0,i=!0}t===this.H$t&&s===this.HM&&i===this.UM||(this.E9t(t),this.M9t(s),this.R9t(i))},DR(t){this.I9t(t)},gWt(t){tempColor.ba(t),tempColor.En(),this.x9t(tempColor)},_Wt(t,e){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},R$t(t){this.W5().S_(t),this.f3.q5()},TWt(){this.P9t()},BR(t){this.A9t(t)},yWt(t){this.w9t(t)},EWt(t){this.b9t(t)},IWt(t){this.D9t(t)},rw(t){this.N9t(t)},AWt(t){this.h9t(t)},MWt(){return this.K9t()},RWt(t){this.B9t(t)},wWt(t,e){this.k9t(["auto","fixed"][t]),this.W9t(e)}}}{const C33=self.Ve;C33.Xq.Text.Frt={Text(){return this.d3},bWt(){return this.V$t?C33.kr.nC(this.d3):this.d3},OWt(){return this.H$t},GWt(){return this.U$t},PWt(){return this.H9t()},vWt(){return this.U9t()},xWt(){return this.X$t},LWt(t,e){return this.X9t(t,e)},DWt(t){return this.q9t(t)},NWt(t,e){const s=this.Y9t(t,e);return s?s.x:0},FWt(t,e){const s=this.Y9t(t,e);return s?s.y:0},BWt(t,e){const s=this.Y9t(t,e);return s?s.width:0},kWt(t,e){const s=this.Y9t(t,e);return s?s.height:0},$Wt(){return this.z$t}}}{const C33=self.Ve;C33.Xq.Touch=class TouchPlugin extends C33.hyt{constructor(t){super(t)}Sn(){super.Sn()}}}{let GetTouchSdkInstance2=function(){return touchObjectType.mD().rB()};GetTouchSdkInstance=GetTouchSdkInstance2;const C33=self.Ve,C3X=self.Qe;C33.Xq.Touch.IMt=class TouchType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}Gyt(){return self.WWt}};let touchObjectType=null;self.WWt=class ITouchObjectType extends self.SD{constructor(t){super(t),(touchObjectType=t).aL().w5().O5=this}requestPermission(t){C3X.wi(t);const e=GetTouchSdkInstance2();if("orientation"===t)return e.VWt(0);if("motion"===t)return e.VWt(1);throw new Error("invalid type")}}}{const C33=self.Ve,DOM_COMPONENT_ID="touch";C33.Xq.Touch.Instance=class TouchInstance extends C33.zyt{constructor(t,e){super(t,DOM_COMPONENT_ID),this.HWt=new Map,this.UWt=!1,this.XWt=!1,this.jWt=0,this.YWt=0,this.qWt=0,this.zWt=0,this.JWt=0,this.KWt=0,this.ZWt=0,this.QWt=0,this.tVt=0,this.eVt=0,this.sVt=0,this.iVt=0,this.rVt=0,this.nVt=0,this.hVt=0,this.oVt=0,this.aVt=0,this.lVt=[],e&&(this.UWt=e[0]),this.nEt("permission-result",t=>this.cVt(t));const s=this.aL().q3();this.Of=new C33.Rf(C33.Tf.Mf(s,"pointerdown",t=>this.uVt(t.data)),C33.Tf.Mf(s,"pointermove",t=>this.fVt(t.data)),C33.Tf.Mf(s,"pointerup",t=>this.dVt(t.data,!1)),C33.Tf.Mf(s,"pointercancel",t=>this.dVt(t.data,!0)),C33.Tf.Mf(s,"deviceorientation",t=>this.pVt(t.data)),C33.Tf.Mf(s,"deviceorientationabsolute",t=>this.CVt(t.data)),C33.Tf.Mf(s,"devicemotion",t=>this.mVt(t.data)),C33.Tf.Mf(s,"tick2",t=>this.fJ()))}Sn(){this.HWt.clear(),super.Sn()}uVt(t){if("mouse"===t.pointerType){if(!this.UWt)return;this.XWt=!0}const e=t.pointerId;if(!this.HWt.has(e)){const s=t.pageX-this.f3.uF(),i=t.pageY-this.f3.fF(),r=performance.now(),n=this.HWt.size,h=(this.sVt=n,this.iVt=e,C33.mn(C33.Xq.Touch.SVt));h.URt(r,s,i,e,n),this.HWt.set(e,h),this.n7(C33.Xq.Touch.Hq.gVt),this.n7(C33.Xq.Touch.Hq._Vt),this.nVt=s,this.hVt=i,this.aVt=0,this.n7(C33.Xq.Touch.Hq.TVt)}}fVt(t){if("mouse"!==t.pointerType||this.XWt){const e=this.HWt.get(t.pointerId);if(e){const s=performance.now();if(!(s-e.mP()<2)){const i=t.pageX-this.f3.uF(),r=t.pageY-this.f3.fF();e.VV(s,i,r,t.width,t.height,t.pressure)}}}}dVt(t,e){if("mouse"===t.pointerType){if(!this.XWt)return;this.XWt=!1}const s=performance.now(),i=t.pointerId,r=this.HWt.get(i);if(r){if(this.sVt=r.yVt(),this.iVt=r.Fk(),!e){const n=t.pageX-this.f3.uF(),h=t.pageY-this.f3.fF();this.nVt=n,this.hVt=h,this.aVt=1,this.n7(C33.Xq.Touch.Hq.TVt)}if(this.n7(C33.Xq.Touch.Hq.EVt),this.n7(C33.Xq.Touch.Hq.IVt),!e){const o=r.AVt(s);"single-tap"===o?(this.n7(C33.Xq.Touch.Hq.MVt),this.nVt=r.b_(),this.hVt=r.P_(),this.n7(C33.Xq.Touch.Hq.RVt)):"double-tap"===o&&(this.n7(C33.Xq.Touch.Hq.wVt),this.nVt=r.b_(),this.hVt=r.P_(),this.n7(C33.Xq.Touch.Hq.bVt))}r.Sn(),this.HWt.delete(i)}}VWt(s){return this.lEt("request-permission",{type:s}),new Promise((t,e)=>{this.lVt.push({type:s,resolve:t,reject:e})})}cVt(t){const e=t.result,s=t.type,i=(this.rVt=s,this.lVt.filter(t=>t.type===s));for(const r of i)r.resolve(e?"granted":"denied");this.lVt=this.lVt.filter(t=>t.type!==s),e?(this.n7(C33.Xq.Touch.Hq.OVt),0===s?this.f3.yFt():this.f3.EFt()):this.n7(C33.Xq.Touch.Hq.GVt)}pVt(t){"number"==typeof t.webkitCompassHeading?this.jWt=t.webkitCompassHeading:t.absolute&&(this.jWt=t.alpha),this.YWt=t.alpha,this.qWt=t.beta,this.zWt=t.gamma}CVt(t){this.jWt=t.alpha}mVt(t){const e=t.acceleration,s=(e&&(this.JWt=e.x,this.KWt=e.y,this.ZWt=e.z),t.accelerationIncludingGravity);s&&(this.QWt=s.x,this.tVt=s.y,this.eVt=s.z)}fJ(){let t=performance.now(),e=0;for(const s of this.HWt.values())s.mP()<=t-50&&s.PVt(t),s.vVt(t)&&(this.sVt=s.yVt(),this.iVt=s.Fk(),this.oVt=e,this.n7(C33.Xq.Touch.Hq.xVt),this.nVt=s.b_(),this.hVt=s.P_(),this.n7(C33.Xq.Touch.Hq.LVt),this.oVt=0),++e}DVt(t){t=Math.floor(t);for(const e of this.HWt.values()){if(0===t)return e;--t}return null}NVt(t,e){return 0<=t&&0<=e&&t<this.f3.oNt()&&e<this.f3.aNt()}gEt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.HWt.values()].map(t=>({name:"$"+t.Fk(),value:t.b_()+", "+t.P_()}))}]}}}{const C33=self.Ve,tempArr=[];C33.Xq.Touch.Hq={_Vt(){return!0},IVt(){return!0},FVt(){return 0<this.HWt.size},TVt(t,e){return!!t&&e===this.aVt&&!!this.NVt(this.nVt,this.hVt)&&this.f3.j4().pPt(t,[[this.nVt,this.hVt]],!1)},BVt(t){if(!t)return!1;const e=this.f3.a0t(),s=e.GSt(),i=[...this.HWt.values()].filter(t=>this.NVt(t.b_(),t.P_())).map(t=>[t.b_(),t.P_()]);return C33.xor(this.f3.j4().pPt(t,i,s),s)},kVt(t,e,s){const i=this.DVt(t);return!!i&&C33.compare(i.RB(),e,s)},$Vt(){return!0},WVt(){return!0},VVt(t,e,s){this.f3.yFt();let i=0;return i=0===t?this.YWt:1===t?this.qWt:this.zWt,C33.compare(i,e,s)},HVt(t,e,s){this.f3.EFt();let i=0;return i=0===t?this.QWt:1===t?this.tVt:2===t?this.eVt:3===t?this.JWt:4===t?this.KWt:this.ZWt,C33.compare(i,e,s)},gVt(t){return(t=Math.floor(t))===this.sVt},EVt(t){return(t=Math.floor(t))===this.sVt},UVt(t){return t=Math.floor(t),this.HWt.size>=t+1},xVt(){return!0},MVt(){return!0},wVt(){return!0},LVt(t){return!!t&&!!this.NVt(this.nVt,this.hVt)&&this.f3.j4().pPt(t,[[this.nVt,this.hVt]],!1)},RVt(t){return!!t&&!!this.NVt(this.nVt,this.hVt)&&this.f3.j4().pPt(t,[[this.nVt,this.hVt]],!1)},bVt(t){return!!t&&!!this.NVt(this.nVt,this.hVt)&&this.f3.j4().pPt(t,[[this.nVt,this.hVt]],!1)},OVt(t){return this.rVt===t},GVt(t){return this.rVt===t}}}{const C33=self.Ve;C33.Xq.Touch.Nrt={XVt(t){this.VWt(t)}}}{const C33=self.Ve;C33.Xq.Touch.Frt={jVt(){return this.HWt.size},f_t(t){const e=this.DVt(this.oVt);return e?e.YVt(this.f3.B5(),t,!0):0},d_t(t){const e=this.DVt(this.oVt);return e?e.YVt(this.f3.B5(),t,!1):0},qVt(t,e){const s=this.DVt(t);return s?s.YVt(this.f3.B5(),e,!0):0},zVt(t,e){const s=this.DVt(t);return s?s.YVt(this.f3.B5(),e,!1):0},JVt(t,e){const s=this.HWt.get(t);return s?s.YVt(this.f3.B5(),e,!0):0},KVt(t,e){const s=this.HWt.get(t);return s?s.YVt(this.f3.B5(),e,!1):0},ZVt(){const t=this.DVt(0);return t?t.b_():0},QVt(){const t=this.DVt(0);return t?t.P_():0},tHt(t){const e=this.DVt(t);return e?e.b_():0},eHt(t){const e=this.DVt(t);return e?e.P_():0},sHt(t){const e=this.HWt.get(t);return e?e.b_():0},iHt(t){const e=this.HWt.get(t);return e?e.P_():0},rHt(t){const e=this.DVt(t);return e?e.RB():0},nHt(t){const e=this.HWt.get(t);return e?e.RB():0},hHt(t){const e=this.DVt(t);return e?C33.Mn(e.GetAngle()):0},oHt(t){const e=this.HWt.get(t);return e?C33.Mn(e.GetAngle()):0},aHt(){return this.f3.yFt(),this.jWt},lHt(){return this.f3.yFt(),this.YWt},cHt(){return this.f3.yFt(),this.qWt},uHt(){return this.f3.yFt(),this.zWt},fHt(){return this.f3.EFt(),this.QWt},dHt(){return this.f3.EFt(),this.tVt},pHt(){return this.f3.EFt(),this.eVt},CHt(){return this.f3.EFt(),this.JWt},mHt(){return this.f3.EFt(),this.KWt},SHt(){return this.f3.EFt(),this.ZWt},gHt(){return this.sVt},_Ht(){return this.iVt},THt(t){const e=this.HWt.get(t);return e?e.dC():0},yHt(t){const e=this.HWt.get(t);return e?e.IC():0},EHt(t){const e=this.HWt.get(t);return e?e.IHt():0}}}{let C33=self.Ve,GESTURE_HOLD_THRESHOLD=15,GESTURE_HOLD_TIMEOUT=500,GESTURE_TAP_TIMEOUT=333,GESTURE_DOUBLETAP_THRESHOLD=25,lastTapX=-1e3,lastTapY=-1e3,lastTapTime=-1e4;C33.Xq.Touch.SVt=class TouchInfo extends C33.pn{constructor(){super(),this.AHt=0,this.TA=0,this.PLt=0,this.Cv=0,this.MHt=0,this.RHt=0,this.wHt=0,this.nl=0,this.hl=0,this.bHt=0,this.OHt=0,this.zC=0,this.JC=0,this.GHt=0,this.PHt=!1,this.vHt=!1}Sn(){}URt(t,e,s,i,r){this.AHt=i,this.TA=r,this.Cv=t,this.MHt=t,this.PLt=t,this.RHt=e,this.wHt=s,this.nl=e,this.hl=s,this.bHt=e,this.OHt=s}VV(t,e,s,i,r,n){this.MHt=this.Cv,this.Cv=t,this.bHt=this.nl,this.OHt=this.hl,this.nl=e,this.hl=s,this.zC=i,this.JC=r,this.GHt=n,!this.vHt&&C33.Rn(this.RHt,this.wHt,this.nl,this.hl)>=GESTURE_HOLD_THRESHOLD&&(this.vHt=!0)}Fk(){return this.AHt}yVt(){return this.TA}mP(){return this.Cv}PVt(t){this.MHt=t}b_(){return this.nl}P_(){return this.hl}RB(){const t=C33.Rn(this.nl,this.hl,this.bHt,this.OHt),e=(this.Cv-this.MHt)/1e3;return 0<e?t/e:0}GetAngle(){return C33.bn(this.bHt,this.OHt,this.nl,this.hl)}dC(){return this.zC}IC(){return this.JC}IHt(){return this.GHt}vVt(t){return!this.PHt&&t-this.PLt>=GESTURE_HOLD_TIMEOUT&&!this.vHt&&C33.Rn(this.RHt,this.wHt,this.nl,this.hl)<GESTURE_HOLD_THRESHOLD&&(this.PHt=!0)}AVt(t){return!this.PHt&&t-this.PLt<=GESTURE_TAP_TIMEOUT&&!this.vHt&&C33.Rn(this.RHt,this.wHt,this.nl,this.hl)<GESTURE_HOLD_THRESHOLD?t-lastTapTime<=2*GESTURE_TAP_TIMEOUT&&C33.Rn(lastTapX,lastTapY,this.nl,this.hl)<GESTURE_DOUBLETAP_THRESHOLD?(lastTapX=-1e3,lastTapY=-1e3,lastTapTime=-1e4,"double-tap"):(lastTapX=this.nl,lastTapY=this.hl,lastTapTime=t,"single-tap"):""}YVt(t,e,s){if(void 0===e){const i=t.U5(0);return i.qj(this.nl,this.hl)[s?0:1]}{const r=t.V5(e);return r?r.cF(this.nl,this.hl)[s?0:1]:0}}}}{const C33=self.Ve;C33.Xq.xHt=class LocalStoragePlugin extends C33.hyt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Xq.xHt.IMt=class LocalStorageType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve,DOM_COMPONENT_ID="localstorage";C33.Xq.xHt.Instance=class LocalStorageInstance extends C33.zyt{constructor(t,e){super(t,DOM_COMPONENT_ID),this.LHt="",this.oA="",this.DHt=[],this.NHt="",this.FHt=!1,this.BHt=0,this.kHt=0,this.WL=this.f3.VL(),this.$Ht=new Map,this.WHt=!1,this.f3.tL(this.w_())}async w_(){const t=await Promise.race([this.aEt("init"),C33.Nh(3e3)]);t&&(this.FHt=t.isPersistent)}Sn(){super.Sn()}async VHt(t){this.NHt=this.HHt(t),await this.o7(C33.Xq.xHt.Hq.UHt)}HHt(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}gEt(){return this.WHt||this.XHt(),[{title:"plugins.localstorage.name",properties:[...this.$Ht.entries()].map(e=>({name:"$"+e[0],value:e[1],Y8t:t=>this.WL.setItem(e[0],t)}))}]}async XHt(){this.WHt=!0;try{const s=await this.WL.keys(),i=(s.sort((t,e)=>{const s=t.toLowerCase(),i=e.toLowerCase();return s<i?-1:i<s?1:0}),await Promise.all(s.map(t=>this.WL.getItem(t))));this.$Ht.clear();for(let t=0,e=s.length;t<e;++t)this.$Ht.set(s[t],i[t])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.WHt=!1}}}}{const C33=self.Ve;C33.Xq.xHt.Hq={jHt(t){return this.LHt===t},YHt(){return!0},qHt(t){return this.LHt===t},zHt(){return!0},JHt(t){return this.LHt===t},KHt(){return!0},ZHt(){return!0},QHt(){return!0},UHt(){return!0},tUt(t){return this.LHt===t},eUt(t){return this.LHt===t},sUt(t,e){return C33.compare(this.LHt,t,e)},iUt(t,e){return C33.compare(this.oA,t,e)},rUt(){return 0<this.kHt},nUt(){return 0<this.BHt},hUt(){return!0},oUt(){return!0},aUt(){return this.FHt}}}{let IsExpressionType2=function(t){return"string"==typeof t||"number"==typeof t};IsExpressionType=IsExpressionType2;const C33=self.Ve;C33.Xq.xHt.Nrt={async lUt(t,e){this.kHt++;try{const s=await this.WL.setItem(t,e);await this.rEt(async()=>{this.LHt=t,this.oA=s,await this.o7(C33.Xq.xHt.Hq.YHt),await this.o7(C33.Xq.xHt.Hq.jHt)})}catch(t){await this.VHt(t)}finally{this.kHt--,0===this.kHt&&await this.o7(C33.Xq.xHt.Hq.hUt)}},async cUt(t,e){if(e){const s=e.xgt(this.xs);if(s){const i=s.rB();if(i){const r=i.GetArrayBufferReadOnly();this.kHt++;try{await this.WL.setItem(t,r),await this.rEt(async()=>{this.LHt=t,this.oA="",await this.o7(C33.Xq.xHt.Hq.YHt),await this.o7(C33.Xq.xHt.Hq.jHt)})}catch(t){await this.VHt(t)}finally{this.kHt--,0===this.kHt&&await this.o7(C33.Xq.xHt.Hq.hUt)}}}}},async uUt(t){this.BHt++;try{const e=await this.WL.getItem(t);await this.rEt(async()=>{this.LHt=t,this.oA=IsExpressionType2(e)?e:"",await this.o7(C33.Xq.xHt.Hq.zHt),await this.o7(C33.Xq.xHt.Hq.qHt)})}catch(t){await this.VHt(t)}finally{this.BHt--,0===this.BHt&&await this.o7(C33.Xq.xHt.Hq.oUt)}},async fUt(e,t){if(t){const s=t.xgt(this.xs);if(s){const i=s.rB();this.BHt++;try{let t=await this.WL.getItem(e);t=t instanceof ArrayBuffer?t:new ArrayBuffer(0),await this.rEt(async()=>{this.oA="",this.LHt=e,i.SetArrayBufferTransfer(t),await this.o7(C33.Xq.xHt.Hq.zHt),await this.o7(C33.Xq.xHt.Hq.qHt)})}catch(t){await this.VHt(t)}finally{this.BHt--,0===this.BHt&&await this.o7(C33.Xq.xHt.Hq.oUt)}}}},async dUt(t){try{const e=await this.WL.getItem(t);await this.rEt(async()=>{this.LHt=t,null==e?(this.oA="",await this.o7(C33.Xq.xHt.Hq.eUt)):(this.oA=IsExpressionType2(e)?e:"",await this.o7(C33.Xq.xHt.Hq.tUt))})}catch(t){await this.VHt(t)}},async o3(t){try{await this.WL.removeItem(t),await this.rEt(async()=>{this.LHt=t,this.oA="",await this.o7(C33.Xq.xHt.Hq.KHt),await this.o7(C33.Xq.xHt.Hq.JHt)})}catch(t){await this.VHt(t)}},async pUt(){try{await this.WL.clear(),await this.rEt(async()=>{this.LHt="",this.oA="",C33.Vh(this.DHt),await this.o7(C33.Xq.xHt.Hq.ZHt)})}catch(t){await this.VHt(t)}},async CUt(){try{const t=await this.WL.keys();await this.rEt(async()=>{this.DHt=t,await this.o7(C33.Xq.xHt.Hq.QHt)})}catch(t){await this.VHt(t)}},async mUt(){const t=await this.aEt("request-persistent");t.isOk&&(this.FHt=t.isPersistent)}}}{const C33=self.Ve;C33.Xq.xHt.Frt={SUt(){return this.oA},Key(){return this.LHt},gUt(){return this.DHt.length},_Ut(t){return(t=Math.floor(t))<0||t>=this.DHt.length?"":this.DHt[t]},TUt(){return this.NHt}}}{const C33=self.Ve,DOM_COMPONENT_ID="button";C33.Xq.yUt=class ButtonPlugin extends C33.Dyt{constructor(t){super(t,DOM_COMPONENT_ID),this.kyt("click",(t,e)=>t.EUt(e))}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Xq.yUt.IMt=class ButtonType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve,C3X=self.Qe,TYPE=0,TEXT=1,TOOLTIP=2,INITIALLY_VISIBLE=3,ENABLE=4,AUTO_FONT_SIZE=5,CHECKED=6,ID=7,CLASS_NAME=8,DOM_COMPONENT_ID="button",map=(C33.Xq.yUt.Instance=class ButtonInstance extends C33.kEt{constructor(t,e){super(t,DOM_COMPONENT_ID),this.d3="OK",this.IUt=!1,this.AUt=!1,this.MUt="",this.C3="",this.RUt="",this.hmt=!0,this.HEt=!0,e&&(this.IUt=1===e[TYPE],this.d3=e[TEXT],this.MUt=e[TOOLTIP],this.W5().PN(e[INITIALLY_VISIBLE]),this.hmt=e[ENABLE],this.HEt=e[AUTO_FONT_SIZE],this.AUt=e[CHECKED],this.C3=e[ID],this.RUt=e[CLASS_NAME]),this.tIt({id:this.C3,className:this.RUt})}Sn(){super.Sn()}eIt(){return{text:this.d3,isCheckbox:this.IUt,isChecked:this.AUt,title:this.MUt,isVisible:this.W5().xN(),isEnabled:this.hmt}}async EUt(t){this.AUt=t.isChecked,this.Yyt("click",!0),await this.o7(C33.Xq.yUt.Hq.wUt)}y9t(t){this.d3!==t&&(this.d3=t,this.nIt())}bUt(){return this.d3}OUt(t){this.MUt!==t&&(this.MUt=t,this.nIt())}GUt(){return this.MUt}jgt(t){this.hmt!==(t=!!t)&&(this.hmt=t,this.nIt())}Ygt(){return this.hmt}PUt(t){this.IUt&&this.AUt!==(t=!!t)&&(this.AUt=t,this.nIt())}vUt(){return this.AUt}ST(t){}V_(){return{text:this.d3,checked:this.AUt,title:this.MUt,enabled:this.hmt}}H_(t){this.d3=t.text,this.AUt=t.checked,this.MUt=t.title,this.hmt=t.enabled,this.nIt()}Tnt(t){switch(t){case TEXT:return this.bUt();case TOOLTIP:return this.GUt();case ENABLE:return this.Ygt();case AUTO_FONT_SIZE:return this.HEt;case CHECKED:return this.vUt()}}Rnt(t,e){switch(t){case TEXT:this.y9t(e);break;case TOOLTIP:this.OUt(e);break;case ENABLE:this.jgt(!!e);break;case AUTO_FONT_SIZE:this.HEt=!!e;break;case CHECKED:this.PUt(!!e)}}gEt(){const t="plugins.button";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.bUt(),Y8t:t=>this.y9t(t)},{name:t+".properties.enabled.name",value:this.Ygt(),Y8t:t=>this.jgt(t)},{name:t+".properties.checked.name",value:this.vUt(),Y8t:t=>this.PUt(t)}]}]}Gyt(){return self.xUt}},new WeakMap);self.xUt=class IButtonInstance extends self.eB{constructor(){super(),map.set(this,self.yF.RF().rB())}set text(t){C3X.wi(t),map.get(this).y9t(t)}get text(){return map.get(this).bUt()}set LUt(t){C3X.wi(t),map.get(this).OUt(t)}get LUt(){return map.get(this).GUt()}set isEnabled(t){map.get(this).jgt(t)}get isEnabled(){return map.get(this).Ygt()}set isChecked(t){map.get(this).PUt(t)}get isChecked(){return map.get(this).vUt()}}}{const C33=self.Ve;C33.Xq.yUt.Hq={wUt(){return!0},DUt(){return this.AUt},fWt(t,e){return e?this.d3===t:C33.Ar(this.d3,t)}}}{const C33=self.Ve;C33.Xq.yUt.Nrt={S3(t){this.y9t(t)},NUt(t){this.OUt(t)},FUt(t){this.PUt(0!==t)},BUt(){this.IUt&&(this.AUt=!this.AUt,this.nIt())}}}{const C33=self.Ve;C33.Xq.yUt.Frt={Text(){return this.d3}}}{const C33=self.Ve;C33.Xq.kUt=class ParticlesPlugin extends C33.hyt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Xq.kUt.IMt=class ParticlesType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){this.VB().oL(this.f3)}uq(t){return this.VB().m9(t,{bT:this.f3.ux()})}gq(){this.VB().RR()}}}{let GetParticleEngine2=function(t){return map.get(t).$Ut()};GetParticleEngine=GetParticleEngine2;const C33=self.Ve,C3X=self.Qe,RATE=0,SPRAY_CONE=1,TYPE=2,SPAWNOBJECTCLASS=3,INITIALLY_VISIBLE=4,SPEED=5,SIZE=6,OPACITY=7,GROW_RATE=8,X_RANDOMISER=9,Y_RANDOMISER=10,INITIAL_SPEED_RANDOMISER=11,SIZE_RANDOMISER=12,GROW_RATE_RANDOMISER=13,ACCELERATION=14,GRAVITY=15,ANGLE_RANDOMISER=16,LIFE_SPEED_RANDOMISER=17,OPACITY_RANDOMISER=18,DESTROY_MODE=19,TIMEOUT=20,CONTINUOUS=0,ONE_SHOT=1,tempRect=C33.mn(C33.Rect),map=(C33.Xq.kUt.Instance=class ParticlesInstance extends C33.IEt{constructor(t,e){super(t),this.WUt=!0;const s=C33.mn(self.VUt);(this.UUt=s).HUt=()=>this.XUt(),this.jUt=null,this.YUt=(t,e,s,i,r,n)=>this.qUt(t,e,s,i,r,n),this.zUt=t=>this.JUt(t);let i=this.KUt=!0;e&&(s.ZUt(e[RATE]),s.QUt(C33.An(e[SPRAY_CONE])),s.tXt(e[TYPE]?"one-shot":"continuous-spray"),this.eXt(this.f3.Fq(e[SPAWNOBJECTCLASS])),i=e[INITIALLY_VISIBLE],s.sXt(e[SPEED]),s.iXt(e[SIZE]),s.rXt(e[OPACITY]/100),s.nXt(e[GROW_RATE]),s.hXt(e[X_RANDOMISER]),s.oXt(e[Y_RANDOMISER]),s.aXt(e[INITIAL_SPEED_RANDOMISER]),s.lXt(e[SIZE_RANDOMISER]),s.cXt(e[GROW_RATE_RANDOMISER]),s.uXt(e[ACCELERATION]),s.SetGravity(e[GRAVITY]),s.fXt(e[ANGLE_RANDOMISER]),s.dXt(e[LIFE_SPEED_RANDOMISER]),s.pXt(e[OPACITY_RANDOMISER]),s.CXt(e[DESTROY_MODE]),s.mXt(e[TIMEOUT])),this.SXt(),this.jUt&&(this.KUt=!1),"one-shot"===s.gXt()?s._Xt():s.TXt(!0);const r=this.W5();r.PN(i),r.qOt(!0),this.xs.q3().addEventListener("bboxchange",()=>{r.YOt(this.UUt.H7())}),this.aL().Kg().F2()&&r.BOt(),this.yJ=t=>this.EJ(t),this.aL().q3().addEventListener("afterload",this.yJ),this.pEt()}Sn(){this.aL().q3().removeEventListener("afterload",this.yJ),this.yJ=null,this.UUt.Sn(),this.UUt=null,this.YUt=null,this.zUt=null,super.Sn()}$Ut(){return this.UUt}yXt(t){this.UUt.ZUt(t),"one-shot"===this.UUt.gXt()&&this.WUt&&this.UUt.EXt(t)}eXt(t){(t=t===this.IF()?null:t)===this.jUt||(this.jUt=t,this.UUt.IXt=t?t=>this.AXt(t):null,this.jUt)||(this.KUt=!0)}SXt(){const t=this.UUt,e=this.W5();t.MXt(e.$O()),t.C6t(this.f3.mx()),t.RXt(e.b_()),t.wXt(e.P_()),t.bXt(e.GetAngle()),t.OXt(Math.abs(e.aOt()))}XUt(){this.f3.OF(this.xs)}ST(t){if(this.KUt){const e=this.Wut.VB(),s=e.Jy();if(s){const i=this.W5(),r=i.V5(),n=tempRect,h=(this.f3.g8().Lxt()?n.set(-1/0,-1/0,1/0,1/0):r.gX()?r.jj(i.W7(),n):r.iX(i.W7(),n),t.XO(s),r.rX(i.W7()));this.UUt.GXt(r.TF()*h),this.UUt.ST(t,e.DEt(),n,r.gX())}}}V_(){const t=this.UUt;return{r:t.PXt(),sc:t.vXt(),st:t.gXt(),isp:t.xXt(),isz:t.LXt(),io:t.DXt(),gr:t.NXt(),xr:t.FXt(),yr:t.BXt(),spr:t.kXt(),szr:t.$Xt(),grnd:t.WXt(),acc:t.VXt(),g:t.HXt(),lar:t.UXt(),lsr:t.XXt(),lor:t.jXt(),dm:t.YXt(),to:t.qXt(),s:t.zXt(),pcc:t.JXt(),ft:this.WUt,soc:this.jUt?this.jUt.NU():null,p:t.KXt().map(t=>t.toJSON())}}H_(t,e){const s=this.UUt;if(s.ZUt(t.r),s.QUt(t.sc),s.tXt(t.st),s.sXt(t.isp),s.iXt(t.isz),s.rXt(t.io),s.nXt(t.gr),s.hXt(t.xr),s.oXt(t.yr),s.aXt(t.spr),s.lXt(t.szr),s.cXt(t.grnd),s.uXt(t.acc),s.SetGravity(t.g),s.fXt(t.lar),s.dXt(t.lsr),s.pXt(t.lor),s.CXt(t.dm),s.mXt(t.to),s.TXt(t.s),s.ZXt(t.pcc),this.WUt=t.ft,t.hasOwnProperty("soc")){const n=this.aL().Fq(t.soc);n&&this.eXt(n)}const i=t.p,r=(s.EXt(i.length,!1),s.KXt());for(let t=0,e=r.length;t<e;++t)r[t].qa(i[t]);"state"===e&&this.jUt&&(s.QXt(),s.tjt(this))}EJ(){const t=this.UUt,s=(t.QXt(),t.tjt(this),t.KXt());for(let t=0,e=s.length;t<e;++t){const i=s[t],r=i.ejt();if(r){const n=r.W5();if(n){const h=n.xk();if(h){const o=i.sjt(),a=h.NF();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const l=this.aL(),c=l.D5(o);c&&l.OF(c)}}}}}}gK(){const t=this.f3.jx(this.xs);this.SXt(),this.WUt&&"one-shot"===this.UUt.gXt()&&this.UUt.ijt(),this.UUt.gK(t),this.UUt.zXt()&&this.f3.q5(),this.W5().L7(),this.WUt=!1}rjt(t){for(this.WUt&&"one-shot"===this.UUt.gXt()&&this.UUt.ijt();0<t;)this.UUt.gK(1/60),t-=1/60;this.UUt.zXt()&&this.f3.q5(),this.W5().L7(),this.WUt=!1}AXt(t,e){let s,i=(s=(s=(s="number"==typeof e?this.f3.D5(e):s)&&s.IF()!==this.jUt?null:s)||this.f3.DD(this.jUt,this.W5().V5(),t.b_(),t.P_())).W5();return i.aw(t.du(),t.du()),i.zD(t.GetAngle()),i.VO(t.$O()),i.J7(this.W5().z7()),i.L7(),i.r6(this.xk(),!0),s.Bq(),t.njt(this.YUt),t.hjt(this.zUt),s}qUt(t,e,s,i,r,n){if(!t.k8()){const h=t.W5();h.B7(e,s),h.aw(h.dC()+i,h.IC()+i),h.zD(h.GetAngle()+r),h.VO(h.$O()+n),h.L7()}}JUt(t){t.k8()||this.f3.OF(t)}Tnt(t){const e=this.UUt;switch(t){case RATE:return e.PXt();case SPRAY_CONE:return C33.Mn(e.vXt());case TYPE:return"one-shot"===e.gXt()?ONE_SHOT:CONTINUOUS;case SPEED:return e.xXt();case SIZE:return e.LXt();case OPACITY:return 100*e.DXt();case GROW_RATE:return e.NXt();case X_RANDOMISER:return e.FXt();case Y_RANDOMISER:return e.BXt();case INITIAL_SPEED_RANDOMISER:return e.kXt();case SIZE_RANDOMISER:return e.$Xt();case GROW_RATE_RANDOMISER:return e.WXt();case ACCELERATION:return e.VXt();case GRAVITY:return e.HXt();case ANGLE_RANDOMISER:return e.UXt();case LIFE_SPEED_RANDOMISER:return e.XXt();case OPACITY_RANDOMISER:return e.jXt();case DESTROY_MODE:return e.YXt();case TIMEOUT:return e.qXt()}}Rnt(t,e){const s=this.UUt;switch(t){case RATE:s.ZUt(e);break;case SPRAY_CONE:s.QUt(C33.An(e));break;case TYPE:s.tXt(e?"one-shot":"continuous-spray");break;case SPEED:s.sXt(e);break;case SIZE:s.iXt(e);break;case OPACITY:s.rXt(e/100);break;case GROW_RATE:s.nXt(e);break;case X_RANDOMISER:s.hXt(e);break;case Y_RANDOMISER:s.oXt(e);break;case INITIAL_SPEED_RANDOMISER:s.aXt(e);break;case SIZE_RANDOMISER:s.lXt(e);break;case GROW_RATE_RANDOMISER:s.cXt(e);break;case ACCELERATION:s.uXt(e);break;case GRAVITY:s.SetGravity(e);break;case ANGLE_RANDOMISER:s.fXt(e);break;case LIFE_SPEED_RANDOMISER:s.dXt(e);break;case OPACITY_RANDOMISER:s.pXt(e);break;case DESTROY_MODE:s.CXt(e);break;case TIMEOUT:s.mXt(e)}}gEt(){const t="plugins.particles",e=t+".properties",s=t+".debugger",i=this.UUt;return[{title:t+".name",properties:[{name:s+".particle-count",value:i.ojt()},{name:e+".type.name",value:[e+".type.items."+i.gXt()]},{name:s+".is-spraying",value:i.zXt(),Y8t:t=>i.TXt(t)},{name:e+".rate.name",value:i.PXt(),Y8t:t=>i.ZUt(t)},{name:e+".spray-cone.name",value:C33.Mn(i.vXt()),Y8t:t=>i.QUt(C33.An(t))},{name:e+".speed.name",value:i.xXt(),Y8t:t=>i.sXt(t)},{name:e+".size.name",value:i.LXt(),Y8t:t=>i.iXt(t)},{name:e+".opacity.name",value:i.DXt(),Y8t:t=>i.rXt(t)},{name:e+".grow-rate.name",value:i.NXt(),Y8t:t=>i.nXt(t)},{name:e+".x-randomiser.name",value:i.FXt(),Y8t:t=>i.hXt(t)},{name:e+".y-randomiser.name",value:i.BXt(),Y8t:t=>i.oXt(t)},{name:e+".initial-speed-randomiser.name",value:i.kXt(),Y8t:t=>i.aXt(t)},{name:e+".size-randomiser.name",value:i.$Xt(),Y8t:t=>i.lXt(t)},{name:e+".grow-rate-randomiser.name",value:i.WXt(),Y8t:t=>i.cXt(t)},{name:e+".acceleration.name",value:i.VXt(),Y8t:t=>i.uXt(t)},{name:e+".gravity.name",value:i.HXt(),Y8t:t=>i.SetGravity(t)},{name:e+".angle-randomiser.name",value:i.UXt(),Y8t:t=>i.fXt(t)},{name:e+".life-speed-randomiser.name",value:i.XXt(),Y8t:t=>i.dXt(t)},{name:e+".opacity-randomiser.name",value:i.jXt(),Y8t:t=>i.pXt(t)},{name:e+".timeout.name",value:i.qXt(),Y8t:t=>i.mXt(t)}]}]}Gyt(){return self.ajt}},new WeakMap);self.ajt=class IParticlesInstance extends self.Q6{constructor(){super(),map.set(this,self.yF.RF().rB())}set ljt(t){GetParticleEngine2(this).TXt(!!t)}get ljt(){return GetParticleEngine2(this).zXt()}set rate(t){C3X.Ii(t),map.get(this).yXt(t)}get rate(){return GetParticleEngine2(this).PXt()}set cjt(t){C3X.Ii(t),GetParticleEngine2(this).QUt(t)}get cjt(){return GetParticleEngine2(this).vXt()}set ujt(t){C3X.Ii(t),GetParticleEngine2(this).sXt(t)}get ujt(){return GetParticleEngine2(this).xXt()}set fjt(t){C3X.Ii(t),GetParticleEngine2(this).iXt(t)}get fjt(){return GetParticleEngine2(this).LXt()}set djt(t){C3X.Ii(t),GetParticleEngine2(this).rXt(t)}get djt(){return GetParticleEngine2(this).DXt()}set pjt(t){C3X.Ii(t),GetParticleEngine2(this).hXt(t)}get pjt(){return GetParticleEngine2(this).FXt()}set Cjt(t){C3X.Ii(t),GetParticleEngine2(this).oXt(t)}get Cjt(){return GetParticleEngine2(this).BXt()}set mjt(t){C3X.Ii(t),GetParticleEngine2(this).aXt(t)}get mjt(){return GetParticleEngine2(this).kXt()}set Sjt(t){C3X.Ii(t),GetParticleEngine2(this).lXt(t)}get Sjt(){return GetParticleEngine2(this).$Xt()}set gjt(t){C3X.Ii(t),GetParticleEngine2(this).nXt(t)}get gjt(){return GetParticleEngine2(this).NXt()}set _jt(t){C3X.Ii(t),GetParticleEngine2(this).cXt(t)}get _jt(){return GetParticleEngine2(this).WXt()}set acceleration(t){C3X.Ii(t),GetParticleEngine2(this).uXt(t)}get acceleration(){return GetParticleEngine2(this).VXt()}set Tjt(t){C3X.Ii(t),GetParticleEngine2(this).SetGravity(t)}get Tjt(){return GetParticleEngine2(this).HXt()}set yjt(t){C3X.Ii(t),GetParticleEngine2(this).fXt(t)}get yjt(){return GetParticleEngine2(this).UXt()}set Ejt(t){C3X.Ii(t),GetParticleEngine2(this).dXt(t)}get Ejt(){return GetParticleEngine2(this).XXt()}set Ijt(t){C3X.Ii(t),GetParticleEngine2(this).pXt(t)}get Ijt(){return GetParticleEngine2(this).jXt()}set timeout(t){C3X.Ii(t),GetParticleEngine2(this).mXt(t)}get timeout(){return GetParticleEngine2(this).qXt()}Ajt(t){C3X.Ii(t),map.get(this).rjt(t)}Mjt(t){const e=map.get(this);t?e.eXt(e.aL().kL(t)):e.eXt(null)}}}{const C33=self.Ve;C33.Xq.kUt.Hq={zXt(){return this.UUt.zXt()}}}{const C33=self.Ve;C33.Xq.kUt.Nrt={TXt(t){this.UUt.TXt(0!==t)},ZUt(t){this.yXt(t)},Rjt(t){this.eXt(t)},wjt(){this.eXt(null)},QUt(t){this.UUt.QUt(C33.An(t))},sXt(t){this.UUt.sXt(t)},iXt(t){this.UUt.iXt(t)},rXt(t){this.UUt.rXt(t/100)},nXt(t){this.UUt.nXt(t)},bjt(t){this.UUt.hXt(t)},Ojt(t){this.UUt.oXt(t)},Gjt(t){this.UUt.aXt(t)},Pjt(t){this.UUt.lXt(t)},vjt(t){this.UUt.cXt(t)},xjt(t){this.UUt.uXt(t)},SetGravity(t){this.UUt.SetGravity(t)},Ljt(t){this.UUt.fXt(t)},Djt(t){this.UUt.dXt(t)},Njt(t){this.UUt.pXt(t)},mXt(t){this.UUt.mXt(t)},Fjt(t){this.rjt(t)},R$t(t){this.W5().S_(t),this.f3.q5()}}}{const C33=self.Ve;C33.Xq.kUt.Frt={Bjt(){return this.UUt.ojt()},kjt(){return this.UUt.PXt()},$jt(){return C33.Mn(this.UUt.vXt())},Wjt(){return this.UUt.xXt()},Vjt(){return this.UUt.LXt()},Hjt(){return 100*this.UUt.DXt()},Ujt(){return this.UUt.NXt()},Xjt(){return this.UUt.FXt()},jjt(){return this.UUt.BXt()},Yjt(){return this.UUt.$Xt()},qjt(){return this.UUt.kXt()},zjt(){return this.UUt.WXt()},Jjt(){return this.UUt.VXt()},Kjt(){return this.UUt.HXt()},Zjt(){return this.UUt.UXt()},Qjt(){return this.UUt.XXt()},tYt(){return this.UUt.jXt()},eYt(){return this.UUt.qXt()}}}{const C33=self.Ve,inactiveParticles=[],MAX_RECYCLE_PARTICLES=1e3,VALID_SPRAY_TYPES=new Set(["continuous-spray","one-shot"]),DESTROY_MODES=["fade-to-invisible","timeout-expired","particle-stopped"],tempRect=C33.mn(C33.Rect);self.VUt=class ParticleEngine{constructor(){this.sYt=0,this.iYt=0,this.rYt="continuous-spray",this.nYt=!1,this.hYt=0,this.oYt=!1,this.aYt=0,this.lYt=0,this.cYt=0,this.uYt=0,this.fYt=0,this.dYt=1,this.pYt=0,this.CYt=0,this.mYt=0,this.SYt=0,this.gYt=0,this._Yt=0,this.TYt=0,this.yYt=0,this.EYt=0,this.IYt=0,this.AYt=0,this.MYt=0,this.RYt=0,this.Cf=0,this.wYt=0,this.bYt=1,this.HUt=null,this.IXt=null,this.OYt=[],this.vbt=new C33.Rect,this.p_=new C33.qo}Sn(){this._f(),C33.Vh(this.OYt),this.OYt=null,this.HUt=null,this.IXt=null,this.vbt=null,this.p_=null}_f(){const s=this.OYt;for(let t=0,e=s.length;t<e;++t)s[t].GTt();C33.sn(inactiveParticles,s),C33.Vh(s),inactiveParticles.length>MAX_RECYCLE_PARTICLES&&C33.Wh(inactiveParticles,MAX_RECYCLE_PARTICLES),this.nYt=!1}_Xt(){for(let t=0,e=this.sYt;t<e;++t)this.GYt();this.OYt.length&&(this.nYt=!0)}GYt(t=!0){let e=null;return inactiveParticles.length?(e=inactiveParticles.pop()).PYt(this):e=C33.mn(self.vYt,this),this.OYt.push(e),t?e.URt(this.IXt):e.URt(),e}ijt(){const s=this.OYt,i=this.IXt;for(let t=0,e=s.length;t<e;++t)s[t].URt(i)}QXt(){const s=this.OYt,i=this.IXt;for(let t=0,e=s.length;t<e;++t)s[t].xYt(i)}tjt(s){const i=this.OYt;for(let t=0,e=i.length;t<e;++t){const r=i[t],n=r.ejt();if(n){const h=n.W5();h.O_(r.b_()),h.v_(r.P_()),h.aw(r.du(),r.du()),h.VO(r.$O()),h.zD(r.GetAngle()),h.J7(s.W5().z7()),h.L7()}}}EXt(t,e=!0){const s=this.OYt;if(t<s.length){const i=s.length-t;for(let t=0;t<i;++t){const r=s.pop();r.GTt(),inactiveParticles.push(r)}inactiveParticles.length>MAX_RECYCLE_PARTICLES&&C33.Wh(inactiveParticles,MAX_RECYCLE_PARTICLES)}else if(t>s.length){const n=t-s.length;for(let t=0;t<n;++t)this.GYt(e)}}KXt(){return this.OYt}ojt(){return this.OYt.length}gK(t){this.LYt(t),this.DYt(t),this.NYt()}LYt(t){if("continuous-spray"===this.rYt&&this.nYt){this.wYt+=t*this.sYt;const e=Math.floor(this.wYt);this.wYt-=e;for(let t=0;t<e;++t)this.GYt()}}ZXt(t){this.wYt=t}JXt(){return this.wYt}DYt(s){let i=this.vbt,r=(i.set(this.aYt,this.lYt,this.aYt,this.lYt),this.OYt),n=0;for(let t=0,e=r.length;t<e;++t){const h=r[t];(r[n]=h).gK(s),h.Fpt()?(++n,i.ic(h.H7())):(h.GTt(),inactiveParticles.push(h))}C33.Wh(r,n),inactiveParticles.length>MAX_RECYCLE_PARTICLES&&C33.Wh(inactiveParticles,MAX_RECYCLE_PARTICLES)}NYt(){"one-shot"===this.rYt&&0===this.OYt.length&&this.nYt&&(this.HUt&&this.HUt(),this.nYt=!1)}ST(s,i,r,n){tempRect.set(i.hh(),i.oh(),i.uh(),i.fh()),s.hG(tempRect),this.p_.A(s.UO());const h=this.OYt;for(let t=0,e=h.length;t<e;++t){const o=h[t];r.Zl(o.H7())&&o.ST(s,i,n)}s.oG()}UO(){return this.p_}ZUt(t){this.sYt=+t}PXt(){return this.sYt}QUt(t){this.iYt=+t}vXt(){return this.iYt}tXt(t){if(!VALID_SPRAY_TYPES.has(t))throw new Error("invalid spray type");this.rYt=t}gXt(){return this.rYt}TXt(t){this.nYt=!!t}zXt(){return this.nYt}MXt(t){this.hYt=+t}FYt(){return this.hYt}C6t(t){this.oYt=!!t}BYt(){return this.oYt}RXt(t){this.aYt=+t}kYt(){return this.aYt}wXt(t){this.lYt=+t}$Yt(){return this.lYt}bXt(t){this.cYt=+t}WYt(){return this.cYt}sXt(t){this.uYt=+t}xXt(){return this.uYt}iXt(t){this.fYt=+t}LXt(){return this.fYt}OXt(t){this.dYt=+t}VYt(){return this.dYt}rXt(t){this.pYt=+t}DXt(){return this.pYt}nXt(t){this.CYt=+t}NXt(){return this.CYt}hXt(t){this.mYt=+t}FXt(){return this.mYt}oXt(t){this.SYt=+t}BXt(){return this.SYt}aXt(t){this.gYt=+t}kXt(){return this.gYt}lXt(t){this._Yt=+t}$Xt(){return this._Yt}cXt(t){this.TYt=+t}WXt(){return this.TYt}uXt(t){this.yYt=+t}VXt(){return this.yYt}SetGravity(t){this.EYt=+t}HXt(){return this.EYt}fXt(t){this.IYt=+t}UXt(){return this.IYt}dXt(t){this.AYt=+t}XXt(){return this.AYt}pXt(t){this.MYt=+t}jXt(){return this.MYt}HYt(t){let e=DESTROY_MODES.indexOf(t);if(-1===e)throw new Error("invalid destroy mode");this.RYt=e}CXt(t){this.HYt(DESTROY_MODES[t])}UYt(){return DESTROY_MODES[this.RYt]}YXt(){return this.RYt}mXt(t){this.Cf=+t}qXt(){return this.Cf}GXt(t){this.bYt=+t}XYt(){return this.bYt}H7(){return this.vbt}}}{let randomOffset2=function(t){return Math.random()*t-t/2},C33=(randomOffset=randomOffset2,self.Ve),ParticleEngine=self.VUt,tmpQuad=new C33.nc,tmpColor=new C33.qo,DPR=self.devicePixelRatio||1,didChangeColor=!1;self.vYt=class Particle{constructor(t){this.jYt=t,this.Sf=!1,this.nl=0,this.hl=0,this.cAt=0,this.TH=0,this.YYt=1,this.qYt=0,this.zYt=0,this.aV=0,this.JYt=0,this.KYt=0,this.ZYt=0,this.Uc=new C33.Rect,this.QYt=null,this.tqt=NaN,this.eqt=null,this.sqt=null}PYt(t){this.jYt=t}URt(t){const e=this.jYt;this.Sf=!0,this.nl=e.kYt()+randomOffset2(e.FXt()),this.hl=e.$Yt()+randomOffset2(e.BXt()),this.cAt=e.xXt()+randomOffset2(e.kXt()),this.TH=e.WYt()+randomOffset2(e.vXt()),this.YYt=e.DXt(),this.qYt=this.YYt,this.aV=(e.LXt()+randomOffset2(e.$Xt()))*e.VYt(),this.JYt=this.aV/2,this.zYt=e.NXt()+randomOffset2(e.WXt()),this.KYt=0,this.ZYt=0,this.iqt(),t?this.QYt||(this.QYt=t(this)):(this.QYt=null,this.eqt=null,this.sqt=null)}xYt(t){t?this.QYt&&!this.QYt.k8()||(this.QYt=t(this,this.tqt)):(this.QYt=null,this.eqt=null,this.sqt=null)}njt(t){this.eqt=t}hjt(t){this.sqt=t}GTt(){const t=this.sqt;t&&t(this.QYt),this.QYt=null,this.eqt=null,this.sqt=null}toJSON(){let t;return this.QYt&&this.QYt.W5()&&(t=this.QYt.W5().xk().NF()),[this.nl,this.hl,this.cAt,this.TH,this.YYt,this.zYt,this.aV,this.KYt,this.ZYt,t]}qa(t){this.nl=t[0],this.hl=t[1],this.cAt=t[2],this.TH=t[3],this.YYt=t[4],this.qYt=this.YYt,this.zYt=t[5],this.aV=t[6],this.KYt=t[7],this.ZYt=t[8],this.tqt=t[9],this.JYt=this.aV/2,this.iqt()}gK(t){let e=this.jYt,s=this.cAt*t,i=this.TH,r=Math.cos(i)*s,n=Math.sin(i)*s+this.KYt*t,h=(this.nl+=r,this.hl+=n,this.zYt*t),o=(this.aV+=h,this.JYt=this.aV/2,this.cAt+=e.VXt()*t,this.KYt+=e.HXt()*t,this.ZYt+=t,this.iqt(),e.UXt()),a=e.XXt(),l=e.jXt(),c=0;0!==o&&(c=randomOffset2(o*t),this.TH+=c),0!==a&&(this.cAt+=randomOffset2(a*t)),0!==l&&(this.YYt=C33.En(this.YYt+randomOffset2(l*t),0,1));const u=1<=this.aV&&(2===e.YXt()?0<this.cAt:this.ZYt<e.qXt()),f=this.eqt;if(f&&u){let t=e.FYt()*this.YYt;0===e.YXt()&&(t*=1-this.ZYt/e.qXt());const d=t-this.qYt;this.qYt=t,f(this.QYt,r,n,h,c,d)}this.Sf=u}Fpt(){return this.Sf}H7(){return this.Uc}iqt(){const t=this.nl,e=this.hl,s=this.JYt;this.Uc.set(t-s,e-s,t+s,e+s)}ST(r,n,h){if(!this.QYt){let s=this.jYt,i=s.FYt()*this.YYt;if(0===s.YXt()&&(i*=1-this.ZYt/s.qXt()),!(i<=0)){const o=this.aV,a=o*s.XYt()*DPR;if(!(a<1)){let t=this.nl,e=this.hl;s.BYt()&&(t=t+.5|0,e=e+.5|0),r.F2()?r.aG(t,e,o,i):h||a>r.jG()||a<r.XG()?(tmpColor.A(s.UO()),tmpColor.Ma(i),r.g_(tmpColor),didChangeColor=!0,tmpQuad.Oc(this.Uc),r.eG(tmpQuad,n)):(didChangeColor&&(r.g_(s.UO()),didChangeColor=!1),r.aG(t,e,a,i))}}}}ejt(){return this.QYt}sjt(){return this.tqt}b_(){return this.nl}P_(){return this.hl}du(){return this.aV}GetAngle(){return this.TH}$O(){return this.YYt}}}{const C33=self.Ve,actionPromises=[];C33.Xq.Audio=class AudioPlugin extends C33.hyt{constructor(t){super(t)}rqt(t){actionPromises.push(t)}static async nqt(){await Promise.all(actionPromises),C33.Vh(actionPromises)}Sn(){super.Sn()}}}{let GetAudioSdkInstance2=function(){return audioObjectType.mD().rB()},GetAudioDOMInterface2=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};GetAudioSdkInstance=GetAudioSdkInstance2,GetAudioDOMInterface=GetAudioDOMInterface2;const C33=self.Ve,C3X=self.Qe;C33.Xq.Audio.IMt=class AudioType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}Gyt(){return self.hqt}};let audioObjectType=null;self.hqt=class IAudioObjectType extends self.SD{constructor(t){super(t),audioObjectType=t}get oqt(){return GetAudioDOMInterface2().GetAudioContextExtern()}get aqt(){return GetAudioDOMInterface2().GetDestinationNodeExtern()}get isSilent(){return GetAudioSdkInstance2().lqt()}set isSilent(t){GetAudioSdkInstance2().cqt(t)}get masterVolume(){return GetAudioSdkInstance2().uqt()}set masterVolume(t){C3X.Ii(t),GetAudioSdkInstance2().fqt(t)}dqt(){GetAudioSdkInstance2().pqt()}}}{const C33=self.Ve,DOM_COMPONENT_ID="audio",LATENCY_HINTS=["interactive","balanced","playback"];C33.Xq.Audio.Instance=class AudioInstance extends C33.zyt{constructor(t,e){super(t,DOM_COMPONENT_ID),this.Cqt=0,this.mqt=[],this.Sqt=!0,this.gqt=0,this._qt=0,this.Tqt=!1,this.yqt=1,this.Eqt=1,this.Iqt=[this.f3.hX()/2,this.f3.aX()/2,600],this.Aqt=[0,0,-1],this.Mqt=[0,1,0],this.Rqt=600,this.wqt=1e4,this.bqt=1,this.Oqt=null,this.Gqt=-1,this.Pqt=1,this.vqt=!1,this.xqt=0,this.Lqt="suspended",this.Dqt=0,this.Nqt=new Map,this.Fqt=0,this.Bqt=0,this.kqt=new Map,this.$qt=new Map;let s="interactive";e&&(this.gqt=e[0],this._qt=e[1],this.Tqt=e[2],s=LATENCY_HINTS[e[3]],this.Sqt=e[4],this.yqt=e[5],this.Eqt=e[6],this.Iqt[2]=e[7],this.Rqt=e[8],this.wqt=e[9],this.bqt=e[10]),this.Wqt=[],this.Vqt=[],this.Hqt=[],this.hEt([["state",t=>this.Uqt(t)],["audiocontext-state",t=>this.Xqt(t)],["fxstate",t=>this.jqt(t)],["trigger",t=>this.Yqt(t)],["buffer-metadata",t=>this.qqt(t)]]);const i=this.aL().q3(),r=(this.Of=new C33.Rf(C33.Tf.Mf(i,"instancedestroy",t=>this.zqt(t.CB)),C33.Tf.Mf(i,"afterload",()=>this.EJ()),C33.Tf.Mf(i,"suspend",()=>this.Jqt()),C33.Tf.Mf(i,"resume",()=>this.Kqt())),"Safari"===C33._s.Es),n=this.f3.UNt(),h=this.f3.H4().wW(),o="playable-ad-single-file"===this.f3.OW(),a=r||n||h||o;this.f3.tL(this.aEt("create-audio-context",{preloadList:this.f3.H4().iV().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.gqt,latencyHint:s,panningModel:this.yqt,distanceModel:this.Eqt,refDistance:this.Rqt,maxDistance:this.wqt,rolloffFactor:this.bqt,listenerPos:this.Iqt,usePlayMusicAsSoundWorkaround:a}).then(t=>{this.xqt=t.sampleRate,this.Lqt=t.audioContextState,this.Dqt=t.outputLatency})),this.pEt()}Sn(){this.Oqt=null,super.Sn()}Zqt(t){return this.Sqt?t.split(" ").filter(t=>!!t):t?[t]:[]}Qqt(e,t){for(const s of t){let t=!1;for(const i of e)if(C33.Ar(i,s)){t=!0;break}if(!t)return!1}return!0}tzt(t,e){return this.Qqt(t,this.Zqt(e))}rqt(t){this._D().rqt(t)}zqt(t){this.Oqt===t&&(this.Oqt=null)}ezt(t){return Math.pow(10,t/20)}szt(t){const e=this.ezt(t);return isFinite(e)?Math.max(Math.min(e,1),0):0}izt(t){return Math.log(t)/Math.log(10)*20}rzt(t){return this.izt(Math.max(Math.min(t,1),0))}Jqt(){this.Tqt||this.oEt("set-suspended",{isSuspended:!0})}Kqt(){this.Tqt||this.oEt("set-suspended",{isSuspended:!1})}Uqt(t){const e=t.tickCount,s=(this.Dqt=t.outputLatency,this.Wqt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>e||-1===t.placeholder)));this.Wqt=t.audioInstances,this.Hqt=t.analysers,0<s.length&&C33.sn(this.Wqt,s)}qqt(t){this.kqt.set(t.originalUrl,{duration:t.duration})}Xqt(t){this.Lqt=t.audioContextState}jrt(){return this.f3.k4t()?"running":this.Lqt}jqt(t){this.Vqt=t.fxstate}nzt(t){const e=this.Zqt(t);for(const s of this.Wqt)if(this.Qqt(s.tags,e))return s;return null}hzt(t){const e=this.Zqt(t);return this.Wqt.some(t=>this.Qqt(t.tags,e)&&t.isPlaying)}ozt(t,e,s,i,r){if(this.hzt(e))return null;const n=this.kqt.get(t),h={tags:this.Zqt(e),duration:n?n.duration:0,volume:r,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:s,isLooping:i,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.Wqt.push(h),h}azt(t){const e=this.Zqt(t);for(const s of this.Wqt)this.Qqt(s.tags,e)&&(s.isPlaying=!1)}async Yqt(t){const e=t.type,s=(this.mqt=t.tags,t.aiid);if("ended"===e){for(const i of this.Wqt)if(i.aiid===s){i.isPlaying=!1;break}await this.o7(C33.Xq.Audio.Hq.lzt)}else"fade-ended"===e&&await this.o7(C33.Xq.Audio.Hq.czt)}uzt(t){return this.tzt(this.mqt,t)}gK(){const t={timeScale:this.f3.Zx(),gameTime:this.f3.BNt(),instPans:this.fzt(),tickCount:this.f3.kNt()};if(this.Oqt){const e=this.Oqt.W5();this.Iqt[0]=e.b_(),this.Iqt[1]=e.P_(),t.listenerPos=this.Iqt,t.listenerOrientation=[...this.Aqt,...this.Mqt]}this.oEt("tick",t)}dzt(t,e,s,i,r){if(0!==s){const n=Math.sin(s),h=Math.cos(s),o=(t-=i)*n,a=(e-=r)*n,l=t*h,c=e*h;t=l-a,e=c+o,t+=i,e+=r}return[t,e]}fzt(){return this.Wqt.filter(t=>-1!==t.uid).map(t=>this.f3.D5(t.uid)).filter(t=>t).map(t=>{const e=t.W5(),s=e.V5().GetAngle(),[i,r]=this.dzt(e.b_(),e.P_(),-s,this.Iqt[0],this.Iqt[1]);return{uid:t.NF(),x:i,y:r,z:e.W7(),angle:e.GetAngle()-s}})}pzt(t,e){for(const s of this.Hqt)if(s.index===e&&C33.Ar(s.tag,t))return s;return null}Czt(t){for(const e of this.Zqt(t)){const s=e.toLowerCase();this.Nqt.set(s,(this.Nqt.get(s)||0)+1)}}lqt(){return this.vqt}cqt(t){this.vqt!==(t=!!t)&&(this.vqt=t,this.oEt("set-silent",{isSilent:t}))}uqt(){return this.Pqt}fqt(t){this.Pqt!==t&&(this.Pqt=t,this.oEt("set-master-volume",{vol:t}))}pqt(){this.oEt("stop-all");for(const t of this.Wqt)t.isPlaying=!1}mzt(t){return!t.hasOwnProperty("placeholder")&&3!==this._qt&&!(t.isMusic&&1===this._qt||!t.isMusic&&2===this._qt)}V_(){return{isSilent:this.vqt,masterVolume:this.Pqt,listenerZ:this.Iqt[2],listenerForwardVec:this.Aqt,listenerUpVec:this.Mqt,listenerUid:this.Oqt?this.Oqt.NF():-1,remoteUrls:[...this.$qt.entries()],playing:this.Wqt.filter(t=>this.mzt(t)),effects:this.Vqt,analysers:this.Hqt}}H_(t){if(this.vqt=t.isSilent,this.Pqt=t.masterVolume,this.Iqt[2]=t.listenerZ,this.Oqt=null,this.Gqt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.Aqt=t.listenerForwardVec:this.Aqt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.Mqt=t.listenerUpVec:this.Mqt=[0,1,0],this.$qt.clear(),t.remoteUrls)for(const[e,s]of t.remoteUrls)this.$qt.set(e,s);this.Wqt=t.playing;for(const i of this.Wqt)i.hasOwnProperty("tag")&&!i.hasOwnProperty("tags")&&(i.tags=[i.tag].filter(t=>!!t));this.Vqt=t.effects,this.Hqt=t.analysers}EJ(){if(-1!==this.Gqt&&(this.Oqt=this.f3.D5(this.Gqt),this.Gqt=-1,this.Oqt)){const t=this.Oqt.W5();this.Iqt[0]=t.b_(),this.Iqt[1]=t.P_()}for(const e of this.Wqt){const s=this.f3.H4().sV(e.bufferOriginalUrl);s?(e.bufferUrl=s.url,e.bufferType=s.type):e.bufferUrl=null}for(const i of Object.values(this.Vqt))for(const r of i)if(r.hasOwnProperty("bufferOriginalUrl")){const n=this.f3.H4().sV(r.bufferOriginalUrl);n&&(r.bufferUrl=n.url,r.bufferType=n.type)}this.oEt("load-state",{saveLoadMode:this._qt,timeScale:this.f3.Zx(),gameTime:this.f3.BNt(),listenerPos:this.Iqt,listenerOrientation:[...this.Aqt,...this.Mqt],isSilent:this.vqt,masterVolume:this.Pqt,playing:this.Wqt.filter(t=>null!==t.bufferUrl),effects:this.Vqt})}gEt(){const t=[];for(const[s,i]of Object.entries(this.Vqt))t.push({name:"$"+s,value:i.map(t=>t.type).join(", ")});const e="plugins.audio.debugger";return[{title:e+".tag-effects",properties:t},{title:e+".currently-playing",properties:[{name:e+".currently-playing-count",value:this.Wqt.length},...this.Wqt.map((t,e)=>({name:"$#"+e,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const C33=self.Ve;C33.Xq.Audio.Hq={lzt(t){return this.uzt(t)},czt(t){return this.uzt(t)},Szt(){return this.Bqt===this.Fqt},gzt(){return!0},_zt(){return this.lqt()},Tzt(){for(const t of this.Wqt)if(t.isPlaying)return!0;return!1},yzt(t){return this.hzt(t)}}}{const C33=self.Ve,FILTER_TYPES=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];C33.Xq.Audio.Nrt={Play(t,e,s,i,r){const n=C33.Xq.Audio.Nrt.Ezt.call(this,t,e,s,i,r);return this.rqt(n),n},Yrt(t,e,s,i){C33.Xq.Audio.Nrt.Ezt.call(this,t,0,e,0,s,i)},async Ezt(t,e,s,i,r,n){if(!this.vqt){const h=t[1],o=this.f3.H4().sV(t[0]);if(o){const a=this.Cqt,l=(this.Cqt=0,this.ozt(t[0],r,h,0!==e,this.szt(s)));try{await this.aEt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.Zqt(r),isLooping:0!==e,vol:this.szt(s),stereoPan:C33.En(i/100,-1,1),pos:n||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.f3.kNt())}}}},async Izt(t,e,s,i,r,n,h,o,a,l,c){if(!this.vqt){const u=t[1],f=this.f3.H4().sV(t[0]);if(f){const d=this.Cqt,p=(this.Cqt=0,this.ozt(t[0],c,u,0!==e,this.szt(s)));try{await this.aEt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:u,tags:this.Zqt(c),isLooping:0!==e,vol:this.szt(s),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:i,y:r,z:n,angle:C33.An(h),innerAngle:C33.An(o),outerAngle:C33.An(a),outerGain:this.szt(l)}})}finally{p&&(p.placeholder=this.f3.kNt())}}}},async Azt(t,e,s,i,r,n,h,o){if(!this.vqt&&i){const a=i.xgt();if(a&&a.W5()){const l=a.W5(),c=l.V5().GetAngle(),[u,f]=this.dzt(l.b_(),l.P_(),-c,this.Iqt[0],this.Iqt[1]),d=t[1],p=this.f3.H4().sV(t[0]);if(p){const C=this.Cqt,m=(this.Cqt=0,this.ozt(t[0],o,d,0!==e,this.szt(s)));try{await this.aEt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.Zqt(o),isLooping:0!==e,vol:this.szt(s),pos:0,off:C,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:u,y:f,z:l.W7(),angle:l.GetAngle()-c,innerAngle:C33.An(r),outerAngle:C33.An(n),outerGain:this.szt(h),uid:a.NF()}})}finally{m&&(m.placeholder=this.f3.kNt())}}}}},async Mzt(t,e,s,i,r,n){if(!this.vqt){const h=1===t,o=this.f3.H4().sV(e)||this.$qt.get(e.toLowerCase());if(o){const a=this.Cqt,l=(this.Cqt=0,this.ozt(e,n,h,0!==s,this.szt(i)));try{await this.aEt("play",{originalUrl:e,url:o.url,type:o.type,isMusic:h,tags:this.Zqt(n),isLooping:0!==s,vol:this.szt(i),stereoPan:C33.En(r/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.f3.kNt())}}}},async Rzt(t,e,s,i,r,n,h,o,a,l,c,u){if(!this.vqt){const f=1===t,d=this.f3.H4().sV(e)||this.$qt.get(e.toLowerCase());if(d){const p=this.Cqt,C=(this.Cqt=0,this.ozt(e,u,f,0!==s,this.szt(i)));try{await this.aEt("play",{originalUrl:e,url:d.url,type:d.type,isMusic:f,tags:this.Zqt(u),isLooping:0!==s,vol:this.szt(i),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:r,y:n,z:h,angle:C33.An(o),innerAngle:C33.An(a),outerAngle:C33.An(l),outerGain:this.szt(c)}})}finally{C&&(C.placeholder=this.f3.kNt())}}}},async wzt(t,e,s,i,r,n,h,o,a){if(!this.vqt&&!this.vqt&&r){const l=r.xgt();if(l&&l.W5()){const c=l.W5(),u=c.V5().GetAngle(),[f,d]=this.dzt(c.b_(),c.P_(),-u,this.Iqt[0],this.Iqt[1]),p=1===t,C=this.f3.H4().sV(e)||this.$qt.get(e.toLowerCase());if(C){const m=this.Cqt,S=(this.Cqt=0,this.ozt(e,a,p,0!==s,this.szt(i)));try{await this.aEt("play",{originalUrl:e,url:C.url,type:C.type,isMusic:p,tags:this.Zqt(a),isLooping:0!==s,vol:this.szt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:c.W7(),angle:c.GetAngle()-u,innerAngle:C33.An(n),outerAngle:C33.An(h),outerGain:this.szt(o),uid:l.NF()}})}finally{S&&(S.placeholder=this.f3.kNt())}}}}},bzt(t,e){this.oEt("set-looping",{tags:this.Zqt(t),isLooping:0===e})},Ozt(t,e){this.oEt("set-muted",{tags:this.Zqt(t),isMuted:0===e})},Urt(t,e){this.oEt("set-volume",{tags:this.Zqt(t),vol:this.szt(e)})},Gzt(t,e,s,i){this.oEt("fade-volume",{tags:this.Zqt(t),vol:this.szt(e),duration:s,stopOnEnd:0===i})},Pzt(t,e){this.oEt("set-stereo-pan",{tags:this.Zqt(t),p:C33.En(e/100,-1,1)})},async vzt(t){const e=t[1],s=this.f3.H4().sV(t[0]);s&&(this.Fqt++,await this.aEt("preload",{originalUrl:t[0],url:s.url,type:s.type,isMusic:e}),this.Bqt++)},async xzt(t,e){const s=1===t,i=this.f3.H4().sV(e)||this.$qt.get(e.toLowerCase());i&&(this.Fqt++,await this.aEt("preload",{originalUrl:e,url:i.url,type:i.type,isMusic:s}),this.Bqt++)},Ek(t,e){this.oEt("set-playback-rate",{tags:this.Zqt(t),rate:Math.max(e,0)})},fk(t){this.azt(t),this.oEt("stop",{tags:this.Zqt(t)})},Lzt(){this.pqt()},Dzt(t,e){this.oEt("set-paused",{tags:this.Zqt(t),paused:0===e})},Nzt(t,e){this.oEt("seek",{tags:this.Zqt(t),pos:e})},Fzt(t){2===t&&(t=this.lqt()?1:0),this.cqt(0===t)},Bzt(t){const e=this.szt(t);this.fqt(e)},kzt(t,e,s,i,r,n,h){const o=FILTER_TYPES[e];this.Czt(t),this.oEt("add-effect",{type:"filter",tags:this.Zqt(t),params:[o,s,i,r,n,C33.En(h/100,0,1)]})},$zt(t,e,s,i){this.Czt(t),this.oEt("add-effect",{type:"delay",tags:this.Zqt(t),params:[e,this.szt(s),C33.En(i/100,0,1)]})},Wzt(t,e,s,i,r,n){this.Czt(t),this.oEt("add-effect",{type:"flanger",tags:this.Zqt(t),params:[e/1e3,s/1e3,i,r/100,C33.En(n/100,0,1)]})},Vzt(t,e,s,i,r,n,h){this.Czt(t),this.oEt("add-effect",{type:"phaser",tags:this.Zqt(t),params:[e,s,i,r,n,C33.En(h/100,0,1)]})},Hzt(t,e,s,i){const r=this.f3.H4().sV(e[0]);r&&(this.Czt(t),this.oEt("add-effect",{type:"convolution",tags:this.Zqt(t),bufferOriginalUrl:e[0],bufferUrl:r.url,bufferType:r.type,params:[0===s,C33.En(i/100,0,1)]}))},Uzt(t,e){this.Czt(t),this.oEt("add-effect",{type:"gain",tags:this.Zqt(t),params:[this.szt(e)]})},Xzt(t,e){this.Czt(t),this.oEt("add-effect",{type:"stereopan",tags:this.Zqt(t),params:[C33.En(e/100,-1,1)]})},jzt(t){this.Czt(t),this.oEt("add-effect",{type:"gain",tags:this.Zqt(t),params:[0]})},Yzt(t,e,s){this.Czt(t),this.oEt("add-effect",{type:"tremolo",tags:this.Zqt(t),params:[e,C33.En(s/100,0,1)]})},qzt(t,e,s){this.Czt(t),this.oEt("add-effect",{type:"ringmod",tags:this.Zqt(t),params:[e,C33.En(s/100,0,1)]})},zzt(t,e,s,i,r,n){this.Czt(t),this.oEt("add-effect",{type:"distortion",tags:this.Zqt(t),params:[this.ezt(e),this.ezt(s),i,this.ezt(r),C33.En(n/100,0,1)]})},Jzt(t,e,s,i,r,n){this.Czt(t),this.oEt("add-effect",{type:"compressor",tags:this.Zqt(t),params:[e,s,i,r/1e3,n/1e3]})},Kzt(t,e,s){this.Czt(t),this.oEt("add-effect",{type:"analyser",tags:this.Zqt(t),params:[e,s]})},Zzt(t){const e=this.Zqt(t);for(const s of e)this.Nqt.set(s.toLowerCase(),0);this.oEt("remove-effects",{tags:e}),this.Vqt={}},AB(t,e,s,i,r,n){this.oEt("set-effect-param",{tags:this.Zqt(t),index:Math.floor(e),param:s,value:i,ramp:r,time:n})},Qzt(t){if(t){const e=t.xgt();e&&e.W5()&&(this.Oqt=e)}},tJt(t){this.Iqt[2]=t},eJt(t,e,s,i,r,n){this.Aqt[0]=t,this.Aqt[1]=e,this.Aqt[2]=-s,this.Mqt[0]=i,this.Mqt[1]=r,this.Mqt[2]=-n},sJt(t){this.Cqt=Math.max(t,0)},iJt(t){const e=t[1],s=this.f3.H4().sV(t[0]);s&&this.oEt("unload",{url:s.url,type:s.type,isMusic:e})},rJt(t,e){const s=1===t,i=this.f3.H4().sV(e)||this.$qt.get(e.toLowerCase());i&&this.oEt("unload",{url:i.url,type:i.type,isMusic:s})},nJt(){this.oEt("unload-all")},hJt(t,e,s){this.$qt.set(s.toLowerCase(),{url:t,type:e})}}}{const C33=self.Ve;C33.Xq.Audio.Frt={oJt(t){const e=this.nzt(t);return e?e.duration:0},$rt(t){const e=this.nzt(t);return e?e.playbackTime:0},Xrt(t){const e=this.nzt(t);return e?e.playbackRate:0},Wrt(t){const e=this.nzt(t);return e?this.rzt(e.volume):0},aJt(){return this.rzt(this.uqt())},lJt(t){return this.Nqt.get(t.toLowerCase())||0},cJt(t,e){const s=this.pzt(t,Math.floor(e));return s?s.binCount:0},uJt(t,e,s){const i=this.pzt(t,Math.floor(e));return!i||(s=Math.floor(s))<0||s>=i.binCount?0:i.freqBins[s]},fJt(t,e){const s=this.pzt(t,Math.floor(e));return s?s.peak:0},dJt(t,e){const s=this.pzt(t,Math.floor(e));return s?s.rms:0},pJt(){return this.xqt},CJt(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},mJt(){return this.Dqt},SJt(t,e){return 0===(t=C33.En(+t,0,100)/100)?-1/0:t<.1?this.rzt(C33.Nt(0,this.szt(e),10*t)):C33.Nt(e,0,(t-.1)/.9)}}}{const C33=self.Ve;C33.Xq.gJt=class MousePlugin extends C33.hyt{constructor(t){super(t)}Sn(){super.Sn()}}}{let GetMouseSdkInstance2=function(){return mouseObjectType.mD().rB()};GetMouseSdkInstance=GetMouseSdkInstance2;const C33=self.Ve,C3X=self.Qe;C33.Xq.gJt.IMt=class MouseType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}Gyt(){return self._Jt}};let mouseObjectType=null;self._Jt=class IMouseObjectType extends self.SD{constructor(t){super(t),(mouseObjectType=t).aL().w5().b5=this}TJt(t){return GetMouseSdkInstance2().yJt(t)[0]}EJt(t){return GetMouseSdkInstance2().yJt(t)[1]}IJt(t){return GetMouseSdkInstance2().yJt(t)}AJt(t){return GetMouseSdkInstance2().MJt(t)}RJt(t){C3X.wi(t),GetMouseSdkInstance2().wJt(t)}bJt(t){const e=GetMouseSdkInstance2(),s=e.aL(),i=s.kL(t);e.OJt(i)}}}{let C33=self.Ve,DOM_COMPONENT_ID="mouse",lastSetCursor=null;C33.Xq.gJt.Instance=class MouseInstance extends C33.zyt{constructor(t,e){super(t,DOM_COMPONENT_ID),this.GJt=[!1,!1,!1,!1,!1],this.PJt=0,this.vJt=0,this.xJt=0,this.aVt=0,this.LJt=0,this.DJt=0,this.NJt=0,this.FJt=0,this.BJt=!1,this.kJt=0,this.$Jt=0,this.hEt([["pointer-lock-change",t=>this.WJt(t)],["pointer-lock-error",t=>this.VJt(t)]]);const s=this.aL().q3();this.Of=new C33.Rf(C33.Tf.Mf(s,"pointermove",t=>this.fVt(t.data)),C33.Tf.Mf(s,"pointerdown",t=>this.uVt(t.data)),C33.Tf.Mf(s,"pointerup",t=>this.dVt(t.data)),C33.Tf.Mf(s,"dblclick",t=>this.HJt(t.data)),C33.Tf.Mf(s,"wheel",t=>this.UJt(t.data)),C33.Tf.Mf(s,"window-blur",()=>this._Dt()))}Sn(){super.Sn()}uVt(t){"mouse"===t.pointerType&&(this.PJt=t.pageX-this.f3.uF(),this.vJt=t.pageY-this.f3.fF(),this.XJt(t.lastButtons,t.buttons))}fVt(t){this.kJt=t.movementX,this.$Jt=t.movementY,this.n7(C33.Xq.gJt.Hq.jJt),this.kJt=0,this.$Jt=0,"mouse"===t.pointerType&&(this.PJt=t.pageX-this.f3.uF(),this.vJt=t.pageY-this.f3.fF(),this.XJt(t.lastButtons,t.buttons))}dVt(t){"mouse"===t.pointerType&&this.XJt(t.lastButtons,t.buttons)}XJt(t,e){this.YJt(t,e,1,0),this.YJt(t,e,4,1),this.YJt(t,e,2,2),this.YJt(t,e,8,3),this.YJt(t,e,16,4)}YJt(t,e,s,i){!(t&s)&&e&s?this.qJt(i):t&s&&!(e&s)&&this.zJt(i)}qJt(t){this.GJt[t]=!0,this.n7(C33.Xq.gJt.Hq.JJt),this.xJt=t,this.aVt=0,this.n7(C33.Xq.gJt.Hq.KJt),this.n7(C33.Xq.gJt.Hq.ZJt)}zJt(t){this.GJt[t]&&(this.GJt[t]=!1,this.xJt=t,this.n7(C33.Xq.gJt.Hq.QJt))}HJt(t){this.xJt=t.button,this.aVt=1,this.n7(C33.Xq.gJt.Hq.KJt),this.n7(C33.Xq.gJt.Hq.ZJt)}UJt(t){this.LJt=t.deltaY<0?1:0,this.DJt=t.deltaX,this.NJt=t.deltaY,this.FJt=t.deltaZ,this.n7(C33.Xq.gJt.Hq.tKt)}_Dt(){for(let t=0,e=this.GJt.length;t<e;++t){if(!this.GJt[t])return;this.GJt[t]=!1,this.xJt=t,this.n7(C33.Xq.gJt.Hq.QJt)}}yJt(t){const e=this.f3.S5(),s=this.PJt,i=this.vJt;if(void 0===t){const r=e.U5(0);return r.qj(s,i)}{const n=e.V5(t);return n?n.cF(s,i):[0,0]}}MJt(t){return t=Math.floor(t),!!this.GJt[t]}eKt(){return 0<=this.PJt&&0<=this.vJt&&this.PJt<this.f3.oNt()&&this.vJt<this.f3.aNt()}wJt(t){lastSetCursor!==t&&(lastSetCursor=t,this.oEt("cursor",t))}async OJt(t){if(!C33._s.bs&&t){const e=t.xgt();if(e){const s=e.W5(),i=e.PEt();if(s&&i&&lastSetCursor!==i){const r=await(lastSetCursor=i).aAt(),n=`url(${r}) ${Math.round(s.XB()*i.dC())} ${Math.round(s.YB()*i.IC())}, auto`;this.oEt("cursor",n)}}}}WJt(t){this.sKt(t["has-pointer-lock"])}VJt(t){this.sKt(t["has-pointer-lock"]),this.n7(C33.Xq.gJt.Hq.iKt)}sKt(t){this.BJt!==t&&(this.BJt=t,this.BJt?this.n7(C33.Xq.gJt.Hq.rKt):this.n7(C33.Xq.gJt.Hq.nKt))}gEt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.PJt+","+this.vJt},{name:t+".debugger.left-button",value:this.GJt[0]},{name:t+".debugger.middle-button",value:this.GJt[1]},{name:t+".debugger.right-button",value:this.GJt[2]},{name:t+".debugger.button-4",value:this.GJt[3]},{name:t+".debugger.button-5",value:this.GJt[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.f3.S5().rN().map(t=>({name:"$"+t.i3(),value:t.cF(this.PJt,this.vJt).join(", ")}))}]}}}{const C33=self.Ve;C33.Xq.gJt.Hq={KJt(t,e){return this.xJt===t&&this.aVt===e},JJt(){return!0},hKt(t){return this.GJt[t]},QJt(t){return this.xJt===t},oKt(t){const e=this.f3.a0t(),s=e.GSt(),i=[];return this.eKt()&&i.push([this.PJt,this.vJt]),C33.xor(this.f3.j4().pPt(t,i,s),s)},ZJt(t,e,s){if(t!==this.xJt||e!==this.aVt)return!1;if(!this.eKt())return!1;const i=this.PJt,r=this.vJt;return this.f3.j4().pPt(s,[[i,r]],!1)},tKt(t){return 2===t||this.LJt===t},rKt(){return!0},nKt(){return!0},iKt(){return!0},aKt(){return this.BJt},jJt(){return!0}}}{const C33=self.Ve,CURSOR_STYLES=["auto","pointer","text","crosshair","move","help","wait","none"];C33.Xq.gJt.Nrt={lKt(t){this.wJt(CURSOR_STYLES[t])},cKt(t){this.OJt(t)},uKt(t){this.lEt("request-pointer-lock",{unadjustedMovement:t})},fKt(){this.oEt("release-pointer-lock")}}}{const C33=self.Ve;C33.Xq.gJt.Frt={f_t(t){return this.yJt(t)[0]},d_t(t){return this.yJt(t)[1]},ZVt(){return this.PJt},QVt(){return this.vJt},dKt(){return this.kJt},pKt(){return this.$Jt},CKt(){return this.DJt},mKt(){return this.NJt},SKt(){return this.FJt}}}{const C33=self.Ve;C33.Xq.Es=class BrowserPlugin extends C33.hyt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Xq.Es.IMt=class BrowserType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve,DOM_COMPONENT_ID="browser";C33.Xq.Es.Instance=class BrowserInstance extends C33.zyt{constructor(t,e){super(t,DOM_COMPONENT_ID),this.gKt="",this._Kt=!1,this.TKt="",this.yKt="",this.EKt=!1,this.IKt=0,this.AKt=0,this.MKt=0,this.RKt=0,this.wKt=!1,this.bKt=new Map,this.OKt=!1,this.GKt="",this.PKt=!1,this.hEt([["online-state",t=>this.vKt(t)],["backbutton",()=>this.xKt()],["sw-message",t=>this.LKt(t)],["hashchange",t=>this.DKt(t)],["install-available",()=>this.NKt()],["app-installed",t=>this.FKt(t)]]);const s=this.aL().q3();this.Of=new C33.Rf(C33.Tf.Mf(s,"afterfirstlayoutstart",()=>this.BKt()),C33.Tf.Mf(s,"window-resize",()=>this.S4t()),C33.Tf.Mf(s,"suspend",()=>this.Jqt()),C33.Tf.Mf(s,"resume",()=>this.Kqt())),this.f3.tL(this.aEt("get-initial-state",{exportType:this.f3.OW()}).then(t=>{this.gKt=t.location,this._Kt=t.isOnline,this.TKt=t.referrer,this.yKt=t.title,this.EKt=t.isCookieEnabled,this.IKt=t.screenWidth,this.AKt=t.screenHeight,this.MKt=t.windowOuterWidth,this.RKt=t.windowOuterHeight,this.wKt=t.isConstructArcade}))}Sn(){super.Sn()}BKt(){this.oEt("ready-for-sw-messages")}async vKt(t){const e=!!t.isOnline;this._Kt!==e&&(this._Kt=e,this._Kt?await this.o7(C33.Xq.Es.Hq.kKt):await this.o7(C33.Xq.Es.Hq.$Kt))}async S4t(){await this.o7(C33.Xq.Es.Hq.WKt)}Jqt(){this.n7(C33.Xq.Es.Hq.VKt)}Kqt(){this.n7(C33.Xq.Es.Hq.HKt)}async xKt(){await this.o7(C33.Xq.Es.Hq.UKt)}LKt(t){const e=t.type;"downloading-update"===e?this.n7(C33.Xq.Es.Hq.XKt):"update-ready"===e||"update-pending"===e?this.n7(C33.Xq.Es.Hq.jKt):"offline-ready"===e&&this.n7(C33.Xq.Es.Hq.YKt)}DKt(t){this.gKt=t.location,this.n7(C33.Xq.Es.Hq.qKt)}NKt(){this.OKt=!0,this.n7(C33.Xq.Es.Hq.zKt)}FKt(t){this.OKt=!1,this.n7(C33.Xq.Es.Hq.JKt)}KKt(){return this.PKt}ZKt(t){this.PKt!==(t=!!t)&&(this.PKt=t,this.oEt("set-warn-on-close",{enabled:t}))}gEt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this._Kt},{name:t+".is-fullscreen",value:this.f3.g8().sxt()}]}]}}}{const C33=self.Ve;C33.Xq.Es.Hq={QKt(){return this._Kt},kKt(){return!0},$Kt(){return!0},WKt(){return!0},tZt(){return this.EKt},eZt(){return this.f3.g8().sxt()},UKt(){return!0},sZt(t){const e=this.f3.g8().T8(),s=this.f3.g8().E8(),i=e<=s?0:1;return i===t},XKt(){return!0},jKt(){return!0},YKt(){return!0},qKt(){return!0},zKt(){return!0},iZt(){return this.OKt},rZt(t){switch(t){case 0:return"accepted"===this.GKt;case 1:return"dismissed"===this.GKt;case 2:return"error"===this.GKt;case 3:return!0;default:return!1}},JKt(){return!0},nZt(t){const e=this.f3.g8().rxt();switch(t){case 0:return"browser"===e;case 1:return"minimal-ui"===e;case 2:return"standalone"===e;case 3:return"fullscreen"===e;default:return!1}},hZt(){return this.KKt()},oZt(){return!this.f3.Ux()},VKt(){return!0},HKt(){return!0},aZt(){return!1},lZt(){return!1},cZt(){return!1},uZt(){return!1},fZt(){return!1},dZt(){return!0},pZt(){return!0}}}{const C3=self.Ve,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.Xq.Es.Nrt={CZt(t){this.oEt("alert",{message:t.toString()})},mZt(){this.wKt||(this.f3.Az()?self.C3Debugger.CloseWindow():this.oEt("close"))},SZt(){this.oEt("set-focus",{isFocus:!0})},gZt(){this.oEt("set-focus",{isFocus:!1})},_Zt(){this.wKt||this.oEt("navigate",{type:"back"})},TZt(){this.wKt||this.oEt("navigate",{type:"forward"})},yZt(){},EZt(){this.wKt||(this.f3.Az()?this.f3.GDt({type:"reload"}):this.oEt("navigate",{type:"reload"}))},IZt(t,e){this.lEt("navigate",{type:"url",url:t,target:e,exportType:this.f3.OW()})},AZt(t,e){this.lEt("navigate",{type:"new-window",url:t,tag:e,exportType:this.f3.OW()})},MZt(t,e){2<=t&&(t+=1),1===(t=6===t?2:t)&&(t=0);const s=C3.QPt.cxt(t);this.f3.g8().hxt(s),this.lEt("request-fullscreen",{navUI:e})},RZt(){this.lEt("exit-fullscreen")},wZt(t){const s=t.split(",");for(let t=0,e=s.length;t<e;++t)s[t]=parseInt(s[t],10);this.lEt("vibrate",{pattern:s})},async x5(t,e){if(t&&e){const s=await this.f3.H4().pL(t);this.f3.x5(s,e)}},bZt(t,e,s){if(s){const i=`data:${e},`+encodeURIComponent(t);this.f3.x5(i,s)}},OZt(t,e){e=e.toString(),0===t?console.log(e):1===t?console.warn(e):2===t&&console.error(e)},GZt(t){console.group(t)},PZt(){console.groupEnd()},vZt(jsStr){try{eval(jsStr)}catch(err){console.error("Error executing JavaScript: ",err)}},xZt(t){if(!((t=Math.floor(t))<0||t>=ORIENTATIONS.length)){const e=ORIENTATIONS[t];this.lEt("lock-orientation",{orientation:e})}},LZt(){this.lEt("unlock-orientation")},wL(t){this.f3.H4().wL(t)},async DZt(t,e,s,i){await this.aEt("set-document-css-style",{prop:C3.Xo(t),value:e,selector:s,"is-all":0!==i})},async NZt(t,e,s){const i=await this.aEt("get-document-css-style",{prop:t,selector:e});i.isOk&&this.bKt.set(s.toLowerCase(),i.result.trim())},FZt(t){this.oEt("set-hash",{hash:t})},BZt(t,e){this.oEt("set-window-size",{windowWidth:t,windowHeight:e})},kZt(t,e){this.oEt("set-window-position",{windowX:t,windowY:e})},async $Zt(){const t=await this.aEt("request-install");this.GKt=t.result,this.n7(C3.Xq.Es.Hq.rZt)},WZt(t){this.ZKt(t)}}}{const C3=self.Ve;C3.Xq.Es.Frt={URL(){return this.f3.tx()?this.gKt:location.toString()},VZt(){return(this.f3.tx()?new URL(this.gKt):location).protocol},HZt(){return(this.f3.tx()?new URL(this.gKt):location).hostname},UZt(){return(this.f3.tx()?new URL(this.gKt):location).port},XZt(){return(this.f3.tx()?new URL(this.gKt):location).pathname},jZt(){return(this.f3.tx()?new URL(this.gKt):location).hash},Cs(){return(this.f3.tx()?new URL(this.gKt):location).search},YZt(t){const e=(this.f3.tx()?new URL(this.gKt):location).search,s=RegExp("[?&]"+t+"=([^&]*)").exec(e);return s?decodeURIComponent(s[1].replace(/\+/g," ")):""},qZt(){return this.TKt},zZt(){return this.yKt},JZt(){return navigator.language},_s(){return navigator.platform},KZt(){return navigator.userAgent},ZZt(jsStr){let result=0;try{result=eval(jsStr)}catch(err){console.error("Error executing JavaScript: ",err)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.bKt.get(t)||""},QZt(){return navigator.appName},tQt(){return navigator.appVersion},eQt(){return navigator.product},sQt(){return navigator.vendor},iQt(){return 1},rQt(){return 1/0},nQt(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},hQt(){return self.devicePixelRatio},oQt(){return this.IKt},aQt(){return this.AKt},lQt(){return this.f3.g8().T8()},cQt(){return this.f3.g8().E8()},uQt(){return this.MKt},fQt(){return this.MKt},dQt(){return this.f3.g8().rxt()},pQt(){return this.GKt}}}{const C33=self.Ve;C33.Xq.Keyboard=class KeyboardPlugin extends C33.hyt{constructor(t){super(t)}Sn(){super.Sn()}}}{let GetKeyboardSdkInstance2=function(){return keyboardObjectType.mD().rB()};GetKeyboardSdkInstance=GetKeyboardSdkInstance2;const C33=self.Ve,C3X=self.Qe;C33.Xq.Keyboard.IMt=class KeyboardType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}Gyt(){return self.CQt}};let keyboardObjectType=null;self.CQt=class IKeyboardObjectType extends self.SD{constructor(t){super(t),(keyboardObjectType=t).aL().w5().keyboard=this}mQt(t){const e=GetKeyboardSdkInstance2();if("string"==typeof t)return e.SQt(t);if("number"==typeof t)return e.gQt(t);throw new TypeError("expected string or number")}}}{const C33=self.Ve;C33.Xq.Keyboard.Instance=class KeyboardInstance extends C33.zyt{constructor(t,e){super(t),this._Qt=new Set,this.TQt=new Set,this.yQt=0,this.EQt="",this.IQt="";const s=this.aL().q3();this.Of=new C33.Rf(C33.Tf.Mf(s,"keydown",t=>this.AQt(t.data)),C33.Tf.Mf(s,"keyup",t=>this.MQt(t.data)),C33.Tf.Mf(s,"window-blur",()=>this.RQt()),C33.Tf.Mf(s,"keyboard-blur",()=>this.RQt()))}Sn(){super.Sn()}AQt(t){const e=t.which,s=t.code||e.toString(),i=t.key;this._Qt.has(s)||(this._Qt.add(s),this.TQt.add(e),this.EQt=s,this.yQt=e,this.IQt=i,this.n7(C33.Xq.Keyboard.Hq.wQt),this.n7(C33.Xq.Keyboard.Hq.bQt),this.n7(C33.Xq.Keyboard.Hq.OQt),this.n7(C33.Xq.Keyboard.Hq.GQt))}MQt(t){const e=t.which,s=t.code||e.toString(),i=t.key;this._Qt.delete(s),this.TQt.delete(e),this.EQt=s,this.yQt=e,this.IQt=i,this.n7(C33.Xq.Keyboard.Hq.PQt),this.n7(C33.Xq.Keyboard.Hq.vQt),this.n7(C33.Xq.Keyboard.Hq.xQt),this.n7(C33.Xq.Keyboard.Hq.LQt)}RQt(){for(const t of this.TQt)this.TQt.delete(t),this.yQt=t,this.n7(C33.Xq.Keyboard.Hq.PQt),this.n7(C33.Xq.Keyboard.Hq.vQt),this.n7(C33.Xq.Keyboard.Hq.LQt);this._Qt.clear()}SQt(t){return this._Qt.has(t)}gQt(t){return this.TQt.has(t)}V_(){return{tk:this.yQt,tkk:this.IQt}}H_(t){this.yQt=t.tk,t.hasOwnProperty("tkk")&&(this.IQt=t.tkk)}gEt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.yQt},{name:t+".debugger.last-key-string",value:C33.Xq.Keyboard.Frt.DQt(this.yQt)},{name:t+".debugger.last-typed-key",value:this.IQt}]}]}}}{const C33=self.Ve,LEFTRIGHT_KEY_STRINGS=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];C33.Xq.Keyboard.Hq={SQt(t){return this.TQt.has(t)},bQt(t){return this.yQt===t},wQt(){return!0},PQt(){return!0},vQt(t){return this.yQt===t},gQt(t){return t=Math.floor(t),this.TQt.has(t)},GQt(t){return this.yQt===t},LQt(t){return this.yQt===t},OQt(t){const e=LEFTRIGHT_KEY_STRINGS[t];return this.EQt===e},xQt(t){const e=LEFTRIGHT_KEY_STRINGS[t];return this.EQt===e},NQt(t){const e=LEFTRIGHT_KEY_STRINGS[t];return this._Qt.has(e)}}}{const C33=self.Ve;C33.Xq.Keyboard.Nrt={}}{let StringFromCharCode2=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};StringFromCharCode=StringFromCharCode2;const C33=self.Ve;C33.Xq.Keyboard.Frt={FQt(){return this.yQt},DQt(t){return StringFromCharCode2(t)},BQt(){return this.IQt}}}{const C33=self.Ve;C33.Xq.kQt=class MobileAdvertPlugin extends C33.hyt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Xq.kQt.IMt=class MobileAdvertType extends C33.Uyt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{let Log2=function(t){console.log("[C3 advert]",t)};Log=Log2;const C33=self.Ve,BUSY="busy",SET="set",DOM_COMPONENT_ID="advert";C33.Xq.kQt.Instance=class MobileAdvertInstance extends C33.zyt{constructor(t,e){super(t,DOM_COMPONENT_ID),this.$Qt=!!e[0],this.WQt=null,this.VQt=null,this.HQt=null,this.UQt=null,this.XQt=null,this.jQt=null,this.YQt=null,this.qQt="not-determined",this.zQt=!0,this.JQt="",this.KQt=0,this.ZQt="",this.QQt=0;const s=this.f3.q3();this.Of=new C33.Rf(C33.Tf.Mf(s,"beforeruntimestart",()=>this.tte(e)),C33.Tf.Mf(s,"layoutchange",()=>this.ete()))}async tte(t){const e=t[1],s=t[2],i=t[5],r=t[6],n=t[7],h=t[8],o=t[3],a=t[4];if(this.f3.Qxt()){const l=this.f3.qDt()?s:e;l&&(await this.ste(o),this.ite(l,i,n,r,h,o,a))}else{const c={};c["data-ad-client"]="ca-"+i,c["data-ad-frequency-hint"]="30s",c.async="",("https://preview.construct.net"===self.origin||this.$Qt)&&(c["data-adbreak-test"]="on"),await this.aEt("AddScript",["https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",c]),await this.ste(o),this.ite("mock-id",i,n,r,h,o,a)}}ete(){this.WQt===SET&&this.o7(C33.Xq.kQt.Hq.rte)}async ste(t){try{t=["DISABLED","EEA","NOT_EEA"][t];const e=await this.aEt("StatusUpdate",[this.$Qt,t]),[s,i,r]=e.split("&&");this.YQt=s,this.qQt=i,this.zQt="false"!==r}catch(t){this.nte("status failed to update",t)}}async ite(t,e,s,i,r,n,h){if(null===this.WQt){this.WQt=BUSY,r=["eu","always","never"][r],n=["DISABLED","EEA","NOT_EEA"][n];try{const o=await this.aEt("Configure",[t.trim(),e.trim(),s.trim(),i,r,this.$Qt,n,h]),[a,l,c]=o.split("&&");this.zQt="false"!==c,this.WQt=SET,this.YQt=a,this.qQt=l,this.hte("configuration complete"),await this.o7(C33.Xq.kQt.Hq.rte)}catch(t){this.WQt=null,this.nte("configuration failed",t),await this.o7(C33.Xq.kQt.Hq.ote)}}}aEt(t,e=[]){return super.aEt(t,e)}nte(t,e){const s="string"==typeof e?e:e.message;this.hte(t,s)}hte(t,e="",s="",i=0,r=""){switch(Log2(`Event (${t} Error (${e}) Type (${s}) Amount (${i}))`),this.ate=e||"",r){case"rewarded":this.JQt=s||"",this.KQt=i||0;break;case"rewarded interstitial":this.ZQt=s||"",this.QQt=i||0;break;default:this.JQt="",this.KQt=0,this.ZQt="",this.QQt=0}}lte(){return!!self.cordova}cte(){return!self.cordova}}}{const C33=self.Ve,SHOWN="shown",LOADED="loaded",SET="set";C33.Xq.kQt.Hq={ute(){return!0},fte(){return!0},dte(){return!0},pte(){return!0},Cte(){return!0},mte(){return!0},Ste(){return!0},gte(){return!0},_te(){return!0},Tte(){return!0},yte(){return!0},Ete(){return!0},Ite(){return!0},Ate(){return!0},Mte(){return!0},Rte(){return!0},wte(){return!0},bte(){return!0},Ote(){return!0},Gte(){return!0},ote(){return!0},rte(){return!0},Pte(){return!0},vte(){return this.VQt===SHOWN},xte(){return this.UQt===SHOWN},Lte(){return this.XQt===SHOWN},Dte(){return this.HQt===SHOWN},Nte(){return this.jQt===SHOWN},Fte(){return this.zQt},Bte(){return this.VQt===LOADED},kte(){return this.UQt===LOADED},$te(){return this.XQt===LOADED},Wte(){return this.HQt===LOADED},Vte(){return this.jQt===LOADED},Hte(){return this.WQt===SET},Ute(){return!0}}}{const C33=self.Ve,BUSY="busy",SHOWN="shown",LOADED="loaded",SET="set",BANNER_SIZES=["portrait","landscape","standard","large","medium","full","leaderboard"],BANNER_POSITIONS=["bottom","top"];async function _HandleRewardedException(t,e,s,i){this.cte()&&e&&"closed with no reward"!==t?await s():await i()}async function _HandleInterstitialException(t,e,s){this.cte()&&t?await e():await s()}C33.Xq.kQt.Nrt={async Xte(t,e,s,i,r,n){if(0===r&&(this.VQt=null),null==this.VQt){this.VQt=BUSY;try{await this.aEt("CreateBannerAdvert",[t.trim(),BANNER_SIZES[e],this.$Qt,BANNER_POSITIONS[i],0===r,n]),this.VQt=LOADED,this.hte("banner created"),await this.o7(C33.Xq.kQt.Hq.ute),0==s&&C33.Xq.kQt.Nrt.jte.call(this)}catch(t){this.VQt=null,this.nte("failed to create banner",t),await this.o7(C33.Xq.kQt.Hq.mte)}}},async jte(){if(this.VQt==LOADED){this.VQt=BUSY;try{await this.aEt("ShowBannerAdvert"),this.VQt=SHOWN,this.hte("banner shown"),await this.o7(C33.Xq.kQt.Hq.yte)}catch(t){this.VQt=null,this.nte("failed to show banner",t)}}},async Yte(){if(this.VQt==SHOWN){this.VQt=BUSY;try{await this.aEt("HideBannerAdvert"),this.VQt=null,this.hte("banner hidden"),await this.o7(C33.Xq.kQt.Hq.Rte)}catch(t){this.VQt=null,this.nte("failed to hide banner",t)}}},async qte(t,e){if(null==this.HQt){this.HQt=BUSY;try{await this.aEt("CreateInterstitialAdvert",[t.trim(),this.$Qt]),this.HQt=LOADED,this.hte("interstitial created"),await this.o7(C33.Xq.kQt.Hq.pte),0==e&&C33.Xq.kQt.Nrt.zte.call(this,!0)}catch(t){this.HQt=null,this.nte("failed to create interstitial",t),await this.o7(C33.Xq.kQt.Hq._te)}}},async zte(e=!1){if(this.HQt==LOADED){this.HQt=SHOWN;try{await this.aEt("ShowInterstitialAdvert"),this.HQt=null,this.hte("interstitial completed"),await this.o7(C33.Xq.kQt.Hq.Ate)}catch(t){this.HQt=null,await _HandleInterstitialException.call(this,e,async()=>{this.nte("failed to create interstitial",t),await this.o7(C33.Xq.kQt.Hq._te)},async()=>{this.nte("interstitial cancelled",t),await this.o7(C33.Xq.kQt.Hq.Ote)})}}},async Jte(t,e){if(null==this.UQt&&null==this.XQt){this.UQt=BUSY;try{await this.aEt("CreateVideoAdvert",[t.trim(),this.$Qt]),this.UQt=LOADED,this.hte("video created"),await this.o7(C33.Xq.kQt.Hq.fte),0==e&&C33.Xq.kQt.Nrt.Kte.call(this)}catch(t){this.UQt=null,this.nte("failed to create video",t),await this.o7(C33.Xq.kQt.Hq.Ste)}}},async Kte(){if(this.UQt==LOADED){this.UQt=SHOWN;try{const t=await this.aEt("ShowVideoAdvert"),[e,s]=JSON.parse(t);this.UQt=null,this.hte("video completed",null,e,s),await this.o7(C33.Xq.kQt.Hq.Ete)}catch(t){this.UQt=null,this.nte("video cancelled",t),await this.o7(C33.Xq.kQt.Hq.wte)}}},async Zte(t,e){if(null==this.XQt&&null==this.UQt){this.XQt=BUSY;try{await this.aEt("CreateRewardedAdvert",[t.trim(),this.$Qt]),this.XQt=LOADED,this.hte("rewarded created"),await this.o7(C33.Xq.kQt.Hq.dte),0==e&&C33.Xq.kQt.Nrt.Qte.call(this,!0)}catch(t){this.XQt=null,this.nte("failed to create rewarded",t),await this.o7(C33.Xq.kQt.Hq.gte)}}},async Qte(e=!1){if(this.XQt==LOADED){this.XQt=SHOWN;try{const t=await this.aEt("ShowRewardedAdvert"),[s,i]=JSON.parse(t);this.XQt=null,this.hte("rewarded completed",null,s,i,"rewarded"),await this.o7(C33.Xq.kQt.Hq.Ite)}catch(t){this.XQt=null,await _HandleRewardedException.call(this,t,e,async()=>{this.nte("failed to create rewarded",t),await this.o7(C33.Xq.kQt.Hq.gte)},async()=>{this.nte("rewarded cancelled",t),await this.o7(C33.Xq.kQt.Hq.bte)})}}},async eee(t,e){if(null==this.jQt){this.jQt=BUSY;try{await this.aEt("CreateRewardedInterstitialAdvert",[t.trim(),this.$Qt]),this.jQt=LOADED,this.hte("rewarded interstitial created"),await this.o7(C33.Xq.kQt.Hq.Cte),0==e&&C33.Xq.kQt.Nrt.see.call(this,!0)}catch(t){this.jQt=null,this.nte("failed to create rewarded interstitial",t),await this.o7(C33.Xq.kQt.Hq.Tte)}}},async see(e=!1){if(this.jQt==LOADED){this.jQt=SHOWN;try{const t=await this.aEt("ShowRewardedInterstitialAdvert"),[s,i]=JSON.parse(t);this.jQt=null,this.hte("rewarded interstitial completed",null,s,i,"rewarded interstitial"),await this.o7(C33.Xq.kQt.Hq.Mte)}catch(t){this.jQt=null,await _HandleRewardedException.call(this,t,e,async()=>{this.nte("failed to create rewarded interstitial",t),await this.o7(C33.Xq.kQt.Hq.Tte)},async()=>{this.nte("rewarded interstitial cancelled",t),await this.o7(C33.Xq.kQt.Hq.Gte)})}}},iee(t,e,s,i,r,n){this.ite(t,e,s,i=[!0,!1][i],r,n)},async ree(){if(this.WQt===SET){this.WQt=BUSY;try{const t=this.qQt,e=await this.aEt("RequestConsent"),[s,i,,]=e.split("&&");this.WQt=SET,this.YQt=s,this.qQt=i,t!==this.qQt&&this.n7(C33.Xq.kQt.Hq.Ute),this.hte("configuration complete"),await this.o7(C33.Xq.kQt.Hq.rte)}catch(t){this.WQt=SET,this.nte("configuration failed",t),await this.o7(C33.Xq.kQt.Hq.ote)}}},async nee(t){},async hee(t){if(this.WQt===SET)try{const e=["G","PG","T","MA"][t];await this.aEt("SetMaxAdContentRating",[e])}catch(t){}},async oee(t){if(this.WQt===SET)try{await this.aEt("TagForChildDirectedTreatment",[t?1:0])}catch(t){}},async aee(t){if(this.WQt===SET)try{await this.aEt("TagForUnderAgeOfConsent",[t?1:0])}catch(t){}},async lee(){try{this.qQt=await this.aEt("RequestIDFA")}catch(t){console.warn("Error requesting IDFA: ",t),this.qQt="error"}this.n7(C33.Xq.kQt.Hq.Ute)}}}{const C33=self.Ve;C33.Xq.kQt.Frt={TUt(){return this.ate||""},cee(){return this.JQt||""},uee(){return this.KQt||0},fee(){return this.ZQt||""},dee(){return this.QQt||0},pee(){return this.YQt||"UNKNOWN"},Cee(){return this.qQt}}}{let SetObjectTypeCollisionsEnabled2=function(s,i,t){const r=s.DSt(),n=i.DSt();if(t){const e=r.get(PHYSICS_COLLISIONS_KEY),h=(e&&e.delete(i.NU()),n.get(PHYSICS_COLLISIONS_KEY));h&&h.delete(s.NU())}else{let t=r.get(PHYSICS_COLLISIONS_KEY),e=(t||(t=new Set,r.set(PHYSICS_COLLISIONS_KEY,t)),n.get(PHYSICS_COLLISIONS_KEY));e||(e=new Set,n.set(PHYSICS_COLLISIONS_KEY,e)),t.add(i.NU()),e.add(s.NU())}},C33=(SetObjectTypeCollisionsEnabled=SetObjectTypeCollisionsEnabled2,self.Ve),C3X=self.Qe,tempVec2a=null,tempVec2b=null,vec2RecycleCache=[],Box2D=null,physicsBehavior=null,PHYSICS_COLLISIONS_KEY="Physics_DisabledCollisions";C33.Oat.mee=class PhysicsBehavior extends C33.oIt{constructor(t){super(t),(physicsBehavior=this).See=null,this.gee=10,this._ee=.02,this.Tee=null,this.yee=-1,this.Eee=1,this.Iee=8,this.Aee=3,this.Mee=!0,this.f3.tL(this.Ree())}Gyt(){return self.wee}async Ree(){const t=await this.f3.H4().pL("box2d.wasm");await new Promise(e=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{Box2D=t,this.bee(),e()})})}bee(){const r=this.f3.j4(),t=(tempVec2a=C33.Oat.mee.NAt(0,0),tempVec2b=C33.Oat.mee.NAt(0,0),this.See=new Box2D.b2World(C33.Oat.mee.Oee(0,this.gee),!0),new Box2D.JSContactListener),e=(t.BeginContact=t=>{const e=Box2D.wrapPointer(t,Box2D.b2Contact),s=C33.Oat.mee.Instance.Gee(e.GetFixtureA().GetBody()),i=C33.Oat.mee.Instance.Gee(e.GetFixtureB().GetBody());r.aPt(s.mB(),i.mB())},t.EndContact=()=>{},t.PreSolve=()=>{},t.PostSolve=()=>{},this.See.SetContactListener(t),new Box2D.JSContactFilter);e.ShouldCollide=(t,e)=>{if(this.Mee)return!0;const s=Box2D.wrapPointer(t,Box2D.b2Fixture),i=Box2D.wrapPointer(e,Box2D.b2Fixture),r=C33.Oat.mee.Instance.Gee(s.GetBody()),n=C33.Oat.mee.Instance.Gee(i.GetBody()),h=r.mB().IF(),o=n.mB().IF(),a=h.NU(),l=o.NU(),c=h.DSt().get(PHYSICS_COLLISIONS_KEY);if(c&&c.has(l))return!1;const u=o.DSt().get(PHYSICS_COLLISIONS_KEY);return!u||!u.has(a)},this.See.SetContactFilter(e),this.Tee=new Box2D.b2WorldManifold}Sn(){super.Sn()}Pee(){return Box2D}vee(){return this.See}xee(){return this._ee}Lee(){return this.Eee}Dee(t){this.Eee=t}Nee(t){this.yee=t}Fee(){return this.yee}Bee(t){this.Iee=Math.max(t,1)}kee(){return this.Iee}$ee(t){this.Aee=Math.max(t,1)}Wee(){return this.Aee}Vee(t,e){this.Bee(t),this.$ee(e)}HXt(){return this.gee}SetGravity(t){t!==this.gee&&(this.See.SetGravity(C33.Oat.mee.Oee(0,t)),this.gee=t,this.Hee())}Hee(){for(const t of this.GD()){const e=C33.Oat.mee.Instance.Uee(t);if(e){const s=e.GetBody();s&&s.SetAwake(!0)}}}Xee(){this.Mee=!1}jee(t,e,s){if(s=!!s,t&&e){if(e.bU())for(const i of e.LCt())SetObjectTypeCollisionsEnabled2(t,i,s);else SetObjectTypeCollisionsEnabled2(t,e,s);this.Xee()}}GetWorldManifold(){return this.Tee}static Yee(){return PHYSICS_COLLISIONS_KEY}static NAt(t,e){if(vec2RecycleCache.length){const s=vec2RecycleCache.pop();return s.set_x(t),s.set_y(e),s}{const i=Box2D.b2Vec2;return new i(t,e)}}static qee(t){vec2RecycleCache.push(t)}static Oee(t,e){return tempVec2a.set_x(t),tempVec2a.set_y(e),tempVec2a}static zee(t,e){return tempVec2b.set_x(t),tempVec2b.set_y(e),tempVec2b}static Jee(e){let t=Box2D.b2PolygonShape,s=new t,i=Box2D._malloc(8*e.length),r=0;for(let t=0;t<e.length;++t)Box2D.HEAPF32[i+r>>2]=e[t].get_x(),Box2D.HEAPF32[i+(r+4)>>2]=e[t].get_y(),r+=8;const n=Box2D.wrapPointer(i,Box2D.b2Vec2);return s.Set(n,e.length),Box2D._free(i),s}};const STEPPING_MODES=["fixed","variable"];self.wee=class IPhysicsBehavior extends self.gB{constructor(){super()}set Kee(t){C3X.Ii(t),physicsBehavior.SetGravity(t)}get Kee(){return physicsBehavior.HXt()}set Zee(t){const e=STEPPING_MODES.indexOf(t);if(e<0)throw new Error("invalid stepping mode");physicsBehavior.Dee(STEPPING_MODES[e])}get Zee(){return STEPPING_MODES[physicsBehavior.Lee()]}set Qee(t){C3X.Ii(t),physicsBehavior.Bee(t)}get Qee(){return physicsBehavior.kee()}set tse(t){C3X.Ii(t),physicsBehavior.$ee(t)}get tse(){return physicsBehavior.Wee()}ese(t,e,s){const i=physicsBehavior.aL(),r=i.kL(t),n=i.kL(e);s=!!s,physicsBehavior.jee(r,n,s)}}}{const C33=self.Ve;C33.Oat.mee.IMt=class PhysicsType extends C33.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{let UnwrapIWorldInstance2=function(t,e){const s=map.get(t).aL();return s.k5(e)};UnwrapIWorldInstance=UnwrapIWorldInstance2;const C33=self.Ve,C3X=self.Qe,IBehaviorInstance=self.lB,assert=self.assert,IMMOVABLE=0,COLLISION_MASK=1,PREVENT_ROTATION=2,DENSITY=3,FRICTION=4,ELASTICITY=5,LINEAR_DAMPING=6,ANGULAR_DAMPING=7,BULLET=8,ENABLE=9,body2beh=new WeakMap,inst2beh=new WeakMap,tileConvexPolyCache=new WeakMap,TILE_FLIPPED_HORIZONTAL=-2147483648,TILE_FLIPPED_VERTICAL=1073741824,TILE_FLIPPED_DIAGONAL=536870912,TILE_FLAGS_MASK=3758096384,TILE_ID_MASK=536870911,GetTempVec2A=C33.Oat.mee.Oee,GetTempVec2B=C33.Oat.mee.zee,tempRect=C33.mn(C33.Rect),tempQuad=C33.mn(C33.nc),map=(C33.Oat.mee.Instance=class PhysicsInstance extends C33.pIt{constructor(t,e){super(t);const s=this.uB(),i=this.W5(),r=(this.sse=s.Pee(),this.See=s.vee(),this._ee=s.xee(),this.ise=!1,this.rse=0,this.nse=0,this.hse=!1,this.ose=1,this.ase=.5,this.lse=.2,this.cse=0,this.fse=.01,this.dse=!1,this.hmt=!0,this.pse=null,this.Cse=[],this.mse=[],this.Sse=[],this.gse=new Set,this._se=i.b_(),this.Tse=i.P_(),this.yse=i.GetAngle(),this.Ese=0,this.Ise=0,this.Ase=!1,e&&(this.ise=!!e[IMMOVABLE],this.rse=e[COLLISION_MASK],this.hse=!!e[PREVENT_ROTATION],this.ose=e[DENSITY],this.ase=e[FRICTION],this.lse=e[ELASTICITY],this.cse=e[LINEAR_DAMPING],this.fse=e[ANGULAR_DAMPING],this.dse=!!e[BULLET],this.hmt=!!e[ENABLE]),this.f3.q3());this.Of=new C33.Rf(C33.Tf.Mf(r,"instancedestroy",t=>this.zqt(t.CB)),C33.Tf.Mf(r,"beforeload",()=>this.TJ()),C33.Tf.Mf(r,"afterload",()=>this.EJ())),inst2beh.set(this.xs,this),this.hmt&&this.pEt()}gIt(){this.Mse()}Sn(){this.Rse(),C33.Vh(this.Sse),this.gse.clear(),this.pse&&(this.wse(),this.See.DestroyBody(this.pse),this.pse=null),super.Sn()}bse(t){if(this.pse){const e=this.pse.CreateFixture(t);return this.Cse.push(e),e}}wse(){if(this.pse){for(const t of this.Cse)this.pse.DestroyFixture(t);C33.Vh(this.Cse)}}Ose(){const t=this.W5();return t.J6()?(t.HOt(tempRect,tempQuad,!1),tempQuad):t.X7()}Gse(t){this.sse.destroy(t)}Mse(){if(this.hmt){const t=this.sse.b2FixtureDef,s=this.sse.b2BodyDef,i=this.W5(),e=i.iGt();if(this.nse=this.rse,e||this.xs.twt()||0!==this.nse||(this.nse=1),!this.pse){const o=new s;o.set_type(this.ise?0:2);let t=i.b_()*this._ee,e=i.P_()*this._ee;if(2===this.nse){const a=this.Ose();t=a.Nl()*this._ee,e=a.Fl()*this._ee}o.set_position(GetTempVec2B(t,e)),o.set_angle(i.GetAngle()),o.set_fixedRotation(this.hse),o.set_linearDamping(this.cse),o.set_angularDamping(this.fse),o.set_bullet(this.dse),this.pse=this.See.CreateBody(o),this.Gse(o),body2beh.set(this.pse,this)}this.wse();const r=new t,n=(r.set_density(this.ose),r.set_friction(this.ase),r.set_restitution(this.lse),Math.max(Math.abs(i.dC()),1)),h=Math.max(Math.abs(i.IC()),1);0===this.nse?this.xs.twt()?this.Pse(r):this.vse(r,n,h):1===this.nse?this.xse(r,i,n,h):this.Lse(r,n,h),this.Ese=i.dC(),this.Ise=i.IC(),i.oGt(!1),this.Gse(r)}}xse(t,e,s,i){let r=this.sse.b2PolygonShape,n=new r,h=s*this._ee,o=i*this._ee,a=e.XB(),l=e.YB();e.dC()<0&&(a=1-a),e.IC()<0&&(l=1-l);const c=(.5-a)*h,u=(.5-l)*o,f=C33.Oat.mee.NAt(c,u);n.SetAsBox(h/2,o/2,f,0),t.set_shape(n),this.bse(t),this.Gse(n),C33.Oat.mee.qee(f)}Lse(t,e,s){const i=this.sse.b2CircleShape,r=new i;r.set_m_radius(Math.min(e,s)*this._ee*.5),t.set_shape(r),this.bse(t),this.Gse(r)}vse(t,e,s){const i=this.W5(),r=i.dC()<0,n=i.IC()<0,h=this._ee,o=i.hGt(r?-e:e,n?-s:s,0),a=o.Yc(),l=a.length/2,c=[];for(let t=0;t<l;++t)c.push(C33.Oat.mee.NAt(a[2*t],a[2*t+1]));r!=n&&c.reverse();const u=C33.Oat.mee.Nse.Dse(c,e*s);for(const f of c)C33.Oat.mee.qee(f);if(u.length)for(const d of u){for(const C of d)C.set_x(C.get_x()*h),C.set_y(C.get_y()*h);const p=C33.Oat.mee.Jee(d);t.set_shape(p),this.bse(t),this.Gse(p);for(const m of d)C33.Oat.mee.qee(m)}else this.xse(t,i,e,s)}Pse(i){const r=this._ee,n=C33.Oat.mee.NAt,h=C33.Oat.mee.qee,s=[],o=(this.xs.rB().GetAllCollisionRects(s),[]);for(let t=0,e=s.length;t<e;++t){const a=s[t],l=a.GetRect(),c=a.GetPoly();if(c){let s=tileConvexPolyCache.get(c);if(!s){const u=c.Yc(),f=c.qc();for(let t=0;t<f;++t)o.push(n(u[2*t],u[2*t+1]));const d=a.GetTileId()&TILE_FLAGS_MASK;(d===TILE_FLIPPED_HORIZONTAL||d===TILE_FLIPPED_VERTICAL||d===TILE_FLIPPED_DIAGONAL||d&TILE_FLIPPED_HORIZONTAL&&d&TILE_FLIPPED_VERTICAL&&d&TILE_FLIPPED_DIAGONAL)&&o.reverse(),s=C33.Oat.mee.Nse.Dse(o,l.width()*l.height()),tileConvexPolyCache.set(c,s);for(const p of o)h(p);C33.Vh(o)}for(let t=0,e=s.length;t<e;++t){const C=s[t];for(let t=0,e=C.length;t<e;++t)o.push(n((l.bl()+C[t].get_x())*r,(l.Ol()+C[t].get_y())*r));const m=C33.Oat.mee.Jee(o);i.set_shape(m),this.bse(i),this.Gse(m);for(const S of o)h(S);C33.Vh(o)}}else{o.push(n(l.bl()*r,l.Ol()*r)),o.push(n(l.Gl()*r,l.Ol()*r)),o.push(n(l.Gl()*r,l.Pl()*r)),o.push(n(l.bl()*r,l.Pl()*r));const g=C33.Oat.mee.Jee(o);i.set_shape(g),this.bse(i),this.Gse(g)}for(const _ of o)h(_);C33.Vh(o)}}Fse(){this.pse&&(this.Rse(),body2beh.delete(this.pse),this.wse(),this.See.DestroyBody(this.pse),this.pse=null)}Rse(){for(const t of this.mse)this.See.DestroyJoint(t);C33.Vh(this.mse)}Bse(){for(const t of this.Sse)switch(t.type){case 0:this.kse(...t.params);break;case 1:this.$se(...t.params);break;case 2:this.Wse(...t.params);break;case 3:this.Vse(...t.params)}}Hse(t){const e=this.W5();if(-1===t)return[e.b_(),e.P_()];if(0===t&&this.pse){const s=this.pse.GetWorldCenter();return[s.get_x()/this._ee,s.get_y()/this._ee]}return this.xs.Ogt(t)}Use(t,e,s,i,r){if(this.hmt&&e&&e!==this.xs){const n=C33.Oat.mee.Instance.Uee(e);n&&n.Ygt()&&(this.Sse.push({type:0,params:[t,e.NF(),s,i,r]}),this.kse(t,e.NF(),s,i,r))}}kse(t,e,s,i,r){if(this.hmt){const n=this.f3.D5(e);if(n&&n!==this.xs){const h=C33.Oat.mee.Instance.Uee(n);if(h&&h.Ygt()){h.gse.add(this.xs),this.Xse(!1),h.Xse(!1);const[o,a]=this.Hse(t),[l,c]=n.Ogt(s),u=o-l,f=a-c,d=this.sse.b2DistanceJointDef,p=this._ee,C=new d;C.Initialize(this.pse,h.GetBody(),GetTempVec2A(o*p,a*p),GetTempVec2B(l*p,c*p)),C.set_length(Math.hypot(u,f)*p),C.set_dampingRatio(i),C.set_frequencyHz(r),this.mse.push(this.See.CreateJoint(C)),this.Gse(C)}}}}jse(t,e){if(this.hmt&&e&&e!==this.xs){const s=C33.Oat.mee.Instance.Uee(e);s&&s.Ygt()&&(this.Sse.push({type:1,params:[t,e.NF()]}),this.$se(t,e.NF()))}}$se(t,e){if(this.hmt){const s=this.f3.D5(e);if(s&&s!==this.xs){const i=C33.Oat.mee.Instance.Uee(s);if(i&&i.Ygt()){i.gse.add(this.xs),this.Xse(!1),i.Xse(!1);const[r,n]=this.Hse(t),h=this.sse.b2RevoluteJointDef,o=this._ee,a=new h;a.Initialize(this.pse,i.GetBody(),GetTempVec2A(r*o,n*o)),this.mse.push(this.See.CreateJoint(a)),this.Gse(a)}}}}Yse(t,e,s,i){if(this.hmt&&e&&e!==this.xs){const r=C33.Oat.mee.Instance.Uee(e);r&&r.Ygt()&&(s=C33.Mn(s),i=C33.Mn(i),this.Sse.push({type:2,params:[t,e.NF(),s,i]}),this.Wse(t,e.NF(),s,i))}}Wse(t,e,s,i){if(this.hmt){const r=this.f3.D5(e);if(r&&r!==this.xs){const n=C33.Oat.mee.Instance.Uee(r);if(n&&n.Ygt()){n.gse.add(this.xs),this.Xse(!1),n.Xse(!1);const[h,o]=this.Hse(t),a=this.sse.b2RevoluteJointDef,l=this._ee,c=new a;c.Initialize(this.pse,n.GetBody(),GetTempVec2A(h*l,o*l)),c.set_enableLimit(!0),c.set_lowerAngle(C33.An(s)),c.set_upperAngle(C33.An(i)),this.mse.push(this.See.CreateJoint(c)),this.Gse(c)}}}}qse(t,e,s,i,r,n,h,o,a){if(this.hmt&&e&&e!==this.xs){const l=C33.Oat.mee.Instance.Uee(e);l&&l.Ygt()&&(s=C33.Mn(s),o=C33.Mn(o),this.Sse.push({type:3,params:[t,e.NF(),s,i,r,n,h,o,a]}),this.Vse(t,e.NF(),s,i,r,n,h,o,a))}}Vse(t,e,s,i,r,n,h,o,a){if(this.hmt){const l=this.f3.D5(e);if(l&&l!==this.xs){const c=C33.Oat.mee.Instance.Uee(l);if(c&&c.Ygt()){c.gse.add(this.xs),this.Xse(!1),c.Xse(!1);const[u,f]=this.Hse(t),d=(s=C33.An(s),Math.cos(s)),p=Math.sin(s),C=this.sse.b2PrismaticJointDef,m=this._ee,S=new C;S.Initialize(this.pse,c.GetBody(),GetTempVec2A(u*m,f*m),GetTempVec2B(d,p)),S.set_enableLimit(!!i),S.set_lowerTranslation(r*m),S.set_upperTranslation(n*m),S.set_enableMotor(!!h),S.set_motorSpeed(C33.An(o)),S.set_maxMotorForce(a),this.mse.push(this.See.CreateJoint(S)),this.Gse(S)}}}}zse(){this.hmt&&(this.Rse(),C33.Vh(this.Sse),this.gse.clear())}Jse(){for(const t of this.gse){const e=C33.Oat.mee.Instance.Uee(t);if(!e||!e.Ygt())return;e.Kse(this.xs)}this.gse.clear()}zqt(t){this.Kse(t)}Kse(t){let s=t.NF(),i=0;for(let t=0,e=this.Sse.length;t<e;++t)this.Sse[i]=this.Sse[t],i<this.mse.length&&(this.mse[i]=this.mse[t]),this.Sse[t].params[1]===s?t<this.mse.length&&this.See.DestroyJoint(this.mse[t]):++i;C33.Wh(this.Sse,i),i<this.mse.length&&C33.Wh(this.mse,i),this.gse.delete(t)}GetBody(){return this.pse}static Gee(t){return body2beh.get(t)||null}static Uee(t){return inst2beh.get(t)||null}V_(){const t={e:this.hmt,im:this.ise,pr:this.hse,d:this.ose,fr:this.ase,re:this.lse,ld:this.cse,ad:this.fse,b:this.dse,mcj:this.Sse};if(this.hmt){const e=this.pse.GetLinearVelocity();t.vx=e.get_x(),t.vy=e.get_y(),t.om=this.pse.GetAngularVelocity()}return t}TJ(){this.Rse(),C33.Vh(this.Sse),this.gse.clear()}H_(t){this.Fse(),this.hmt=t.e,t.hasOwnProperty("im")&&(this.ise=!!t.im),this.hse=t.pr,this.ose=t.d,this.ase=t.fr,this.lse=t.re,this.cse=t.ld,this.fse=t.ad,this.dse=t.b,this.Sse=t.mcj;const e=this.W5();this._se=e.b_(),this.Tse=e.P_(),this.yse=e.GetAngle(),this.Ese=e.dC(),this.Ise=e.IC(),this.hmt&&(this.Mse(),this.pse.SetLinearVelocity(GetTempVec2A(t.vx,t.vy)),this.pse.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.pse.SetAwake(!0),this.Sse=t.mcj),this.hmt?this.pEt():this.Zyt()}EJ(){this.hmt&&this.Bse()}gK(){if(this.hmt){let t=this.f3,s=this.uB(),i=0;0===s.Lee()?i=t.Zx()/60:(i=t.jx(this.xs))>1/30&&(i=1/30);const r=t.kNt();if(r>s.Fee()&&0<t.Zx()){let t=this.f3.Az(),e=0;t&&(e=performance.now()),0!==i&&this.See.Step(i,s.kee(),s.Wee()),this.See.ClearForces(),t&&self.C3Debugger.AddPhysicsTime(performance.now()-e),s.Nee(r)}this.Xse(!0)}}Xse(t){let e=this.xs,s=e.W5(),i=this._ee,r=(s.dC()===this.Ese&&s.IC()===this.Ise&&!s.dGt()||this.Mse(),this.pse),n=s.b_(),h=s.P_(),o=n-this._se,a=h-this.Tse,l=.001<Math.abs(o)||.001<Math.abs(a),c=s.GetAngle()!==this.yse,u=n,f=h;if(2===this.nse){const S=this.Ose();u=S.Nl(),f=S.Fl()}l?(c?r.SetTransform(GetTempVec2A(u*i,f*i),s.GetAngle()):r.SetTransform(GetTempVec2A(u*i,f*i),r.GetAngle()),t&&(r.SetLinearVelocity(GetTempVec2A(o,a)),this.Ase=!0),r.SetAwake(!0)):t&&this.Ase&&(this.Ase=!1,r.SetLinearVelocity(GetTempVec2A(0,0)),r.SetTransform(GetTempVec2A(u*i,f*i),r.GetAngle())),!l&&c&&(r.SetTransform(r.GetPosition(),s.GetAngle()),r.SetAwake(!0));const d=r.GetPosition(),p=d.get_x()/i,C=d.get_y()/i,m=r.GetAngle();if((p!==s.b_()||C!==s.P_()||m!==s.GetAngle())&&(s.D7(p,C),s.zD(m),s.L7(),2===this.nse)){const g=this.Ose(),_=g.Nl()-s.b_(),T=g.Fl()-s.P_();0==_&&0==T||(s.B7(-_,-T),s.L7())}this._se=s.b_(),this.Tse=s.P_(),this.yse=s.GetAngle()}Tnt(t){switch(t){case PREVENT_ROTATION:return this.Zse();case DENSITY:return this.Qse();case FRICTION:return this.tie();case ELASTICITY:return this.eie();case LINEAR_DAMPING:return this.sie();case ANGULAR_DAMPING:return this.iie();case BULLET:return this.rie();case ENABLE:return this.Ygt()}}Rnt(t,e){switch(t){case PREVENT_ROTATION:this.nie(e);break;case DENSITY:this.hie(e);break;case FRICTION:this.oie(e);break;case ELASTICITY:this.aie(e);break;case LINEAR_DAMPING:this.lie(e);break;case ANGULAR_DAMPING:this.cie(e);break;case BULLET:this.uie(e);break;case ENABLE:this.jgt(e)}}jgt(t){t=!!t,this.hmt&&!t?(this.Jse(),this.Fse(),this.hmt=!1,this.Zyt()):!this.hmt&&t&&(this.hmt=!0,this.Mse(),this.pEt())}Ygt(){return this.hmt}gEt(){const t="behaviors.physics",e=[{name:t+".properties.enabled.name",value:this.Ygt(),Y8t:t=>this.jgt(t)},{name:t+".properties.immovable.name",value:this.fie(),Y8t:t=>this.die(t)},{name:t+".properties.density.name",value:this.Qse(),Y8t:t=>this.hie(t)},{name:t+".properties.friction.name",value:this.tie(),Y8t:t=>this.oie(t)},{name:t+".properties.elasticity.name",value:this.eie(),Y8t:t=>this.aie(t)},{name:t+".properties.linear-damping.name",value:this.sie(),Y8t:t=>this.lie(t)},{name:t+".properties.angular-damping.name",value:this.iie(),Y8t:t=>this.cie(t)}];return this.hmt&&(e.push({name:t+".debugger.is-sleeping",value:!this.pie()}),e.push({name:t+".debugger.velocity-x",value:this.Cie(),Y8t:t=>this.mie(t,this.Sie())}),e.push({name:t+".debugger.velocity-y",value:this.Sie(),Y8t:t=>this.mie(this.Cie(),t)}),e.push({name:t+".debugger.angular-velocity",value:C33.Mn(this.gie()),Y8t:t=>this._ie(C33.An(t))}),e.push({name:t+".debugger.mass",value:this.Tie()})),[{title:"$"+this.pB().i3(),properties:e}]}yie(t,e,s){const[i,r]=this.Hse(s);this.Eie(t,e,i,r)}Iie(t,e,s,i){const[r,n]=this.Hse(i),h=C33.bn(r,n,e,s);this.Eie(Math.cos(h)*t,Math.sin(h)*t,r,n)}Aie(t,e,s){const[i,r]=this.Hse(s);this.Eie(Math.cos(e)*t,Math.sin(e)*t,i,r)}Eie(t,e,s,i){if(this.hmt){const r=this._ee;this.pse.ApplyForce(GetTempVec2A(t,e),GetTempVec2B(s*r,i*r),!0)}}Mie(t,e,s){const[i,r]=this.Hse(s);this.Rie(t,e,i,r)}wie(t,e,s,i){const[r,n]=this.Hse(i),h=C33.bn(r,n,e,s);this.Rie(Math.cos(h)*t,Math.sin(h)*t,r,n)}bie(t,e,s){const[i,r]=this.Hse(s);this.Rie(Math.cos(e)*t,Math.sin(e)*t,i,r)}Rie(t,e,s,i){if(this.hmt){const r=this._ee,n=(this.pse.ApplyLinearImpulse(GetTempVec2A(t,e),GetTempVec2B(s*r,i*r),!0),this.W5());this._se=n.b_(),this.Tse=n.P_(),this.Ase=!1}}Oie(t){this.hmt&&this.pse.ApplyTorque(t,!0)}Gie(t,e){const s=C33.Pn(this.W5().GetAngle(),e)?-1:1;this.Oie(t*s)}Pie(t,e,s){const i=this.W5(),r=C33.bn(i.b_(),i.P_(),e,s),n=C33.Pn(i.GetAngle(),r)?-1:1;this.Oie(t*n)}_ie(t){this.hmt&&(this.pse.SetAngularVelocity(t),this.pse.SetAwake(!0))}gie(){return this.hmt?this.pse.GetAngularVelocity():0}mie(t,e){if(this.hmt){const s=this._ee,i=(this.pse.SetLinearVelocity(GetTempVec2A(t*s,e*s)),this.pse.SetAwake(!0),this.W5());this._se=i.b_(),this.Tse=i.P_(),this.Ase=!1}}vie(){if(!this.hmt)return[0,0];const t=this._ee,e=this.pse.GetLinearVelocity();return[e.get_x()/t,e.get_y()/t]}Cie(){return this.hmt?this.pse.GetLinearVelocity().get_x()/this._ee:0}Sie(){return this.hmt?this.pse.GetLinearVelocity().get_y()/this._ee:0}xie(t,e){if(this.hmt){const s=this._ee,i=(this.pse.SetTransform(GetTempVec2A(t*s,e*s),this.pse.GetAngle()),this.W5());i.D7(t,e),i.L7(),this._se=i.b_(),this.Tse=i.P_()}}hie(t){if(this.hmt&&this.ose!==t){this.ose=t;for(const e of this.Cse)e.SetDensity(t);this.pse.ResetMassData()}}Qse(){return this.hmt?this.ose:0}oie(t){if(this.hmt&&this.ase!==t){this.ase=t;for(const e of this.Cse)e.SetFriction(t);if(this.pse)for(let t=this.pse.GetContactList();this.sse.getPointer(t);t=t.get_next()){const s=t.get_contact();s&&s.ResetFriction()}}}tie(){return this.hmt?this.ase:0}aie(t){if(this.hmt&&this.lse!==t){this.lse=t;for(const e of this.Cse)e.SetRestitution(t)}}eie(){return this.hmt?this.lse:0}lie(t){this.hmt&&this.cse!==t&&(this.cse=t,this.pse.SetLinearDamping(t))}sie(){return this.hmt?this.cse:0}cie(t){this.hmt&&this.fse!==t&&(this.fse=t,this.pse.SetAngularDamping(t))}iie(){return this.hmt?this.fse:0}die(t){this.hmt&&this.ise!==(t=!!t)&&(this.ise=t,this.pse.SetType(this.ise?0:2),this.pse.SetAwake(!0))}fie(){return this.ise}nie(t){this.hmt&&this.hse!==(t=!!t)&&(this.hse=t,this.pse.SetFixedRotation(this.hse),this.pse.SetAngularVelocity(0),this.pse.SetAwake(!0))}Zse(){return this.hse}uie(t){this.hmt&&this.dse!==(t=!!t)&&(this.dse=t,this.pse.SetBullet(this.dse),this.pse.SetAwake(!0))}rie(){return this.dse}Lie(t){this.hmt&&this.pse.SetAwake(!!t)}pie(){return!!this.hmt&&this.pse.IsAwake()}Tie(){return this.hmt?this.pse.GetMass()/this._ee:0}Die(){return this.hmt?this.pse.GetWorldCenter().get_x()/this._ee:0}Nie(){return this.hmt?this.pse.GetWorldCenter().get_y()/this._ee:0}Fie(){if(!this.hmt)return[0,0];const t=this.pse.GetWorldCenter(),e=this._ee;return[t.get_x()/e,t.get_y()/e]}Bie(){if(!this.hmt)return 0;let e=0;for(let t=this.pse.GetContactList();this.sse.getPointer(t);t=t.get_next()){const s=t.get_contact();if(s){const i=s.GetManifold(),r=i.get_pointCount();e+=r}}return e}kie(s){if(s=Math.floor(s),this.hmt){let e=0;for(let t=this.pse.GetContactList();this.sse.getPointer(t);t=t.get_next()){const i=t.get_contact();if(i){const r=i.GetManifold(),n=r.get_pointCount();if(s>=e&&s<e+n){const h=s-e,o=this.uB().GetWorldManifold(),a=(i.GetWorldManifold(o),o.get_points(h));return[a.get_x()/this._ee,a.get_y()/this._ee]}e+=n}}}return[0,0]}Gyt(){return self.$ie}},new WeakMap);self.$ie=class IPhysicsBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.RF().rB())}get isEnabled(){return map.get(this).Ygt()}set isEnabled(t){map.get(this).jgt(t)}Wie(t,e,s=0){C3X.Ii(t),C3X.Ii(e),map.get(this).yie(t,e,s)}Vie(t,e,s,i=0){C3X.Ii(t),C3X.Ii(e),C3X.Ii(s),map.get(this).Iie(t,e,s,i)}Hie(t,e,s=0){C3X.Ii(t),C3X.Ii(e),map.get(this).Aie(t,e,s)}Uie(t,e,s=0){C3X.Ii(t),C3X.Ii(e),map.get(this).Mie(t,e,s)}Xie(t,e,s,i=0){C3X.Ii(t),C3X.Ii(e),C3X.Ii(s),map.get(this).wie(t,e,s,i)}jie(t,e,s=0){C3X.Ii(t),C3X.Ii(e),map.get(this).bie(t,e,s)}Yie(t){C3X.Ii(t),map.get(this).Oie(t)}qie(t,e){C3X.Ii(t),C3X.Ii(e),map.get(this).Gie(t,e)}zie(t,e,s){C3X.Ii(t),C3X.Ii(e),C3X.Ii(s),map.get(this).Pie(t,e,s)}set angularVelocity(t){C3X.Ii(t),map.get(this)._ie(t)}get angularVelocity(){return map.get(this).gie()}setVelocity(t,e){C3X.Ii(t),C3X.Ii(e),map.get(this).mie(t,e)}Jie(){return map.get(this).Cie()}Kie(){return map.get(this).Sie()}Zie(){return map.get(this).vie()}Qie(t,e){C3X.Ii(t),C3X.Ii(e),map.get(this).xie(t,e)}set tre(t){C3X.Ii(t),map.get(this).hie(t)}get tre(){return map.get(this).Qse()}set ere(t){C3X.Ii(t),map.get(this).oie(t)}get ere(){return map.get(this).tie()}set sre(t){C3X.Ii(t),map.get(this).aie(t)}get sre(){return map.get(this).eie()}set ire(t){C3X.Ii(t),map.get(this).lie(t)}get ire(){return map.get(this).sie()}set rre(t){C3X.Ii(t),map.get(this).cie(t)}get rre(){return map.get(this).iie()}set nre(t){map.get(this).die(t)}get nre(){return map.get(this).fie()}set hre(t){map.get(this).nie(t)}get hre(){return map.get(this).Zse()}set ore(t){map.get(this).uie(t)}get ore(){return map.get(this).rie()}get are(){return map.get(this).Tie()}lre(){return map.get(this).Die()}cre(){return map.get(this).Nie()}ure(){return map.get(this).Fie()}fre(){return map.get(this).Bie()}dre(t){return C3X.Ii(t),map.get(this).kie(t)[0]}pre(t){return C3X.Ii(t),map.get(this).kie(t)[1]}Cre(t){return C3X.Ii(t),map.get(this).kie(t)}set mre(t){map.get(this).Lie(!!t)}get mre(){return map.get(this).pie()}get Sre(){return!map.get(this).pie()}gre(t,e,s,i,r){C3X.Ii(i),C3X.Ii(r);const n=UnwrapIWorldInstance2(this,e);map.get(this).Use(t,n,s,i,r)}_re(t,e){const s=UnwrapIWorldInstance2(this,e);map.get(this).jse(t,s)}Tre(t,e,s,i){C3X.Ii(s),C3X.Ii(i);const r=UnwrapIWorldInstance2(this,e);map.get(this).Yse(t,r,s,i)}yre(t,e,s,i,r,n,h,o,a){const l=UnwrapIWorldInstance2(this,e);map.get(this).qse(t,l,s,i,r,n,h,o,a)}Ere(){map.get(this).zse()}}}{const C33=self.Ve;C33.Oat.mee.Hq={Ire(){return!this.pie()},Are(t,e,s){if(!this.hmt)return!1;let i=0;if(0===t)i=this.Cie();else if(1===t)i=this.Sie();else{const[r,n]=this.vie();i=Math.hypot(r,n)}return C33.compare(i,e,s)},Mre(t,e){if(!this.hmt)return!1;const s=C33.Mn(this.gie());return C33.compare(s,t,e)},Rre(t,e){if(!this.hmt)return!1;const s=this.Tie();return C33.compare(s,t,e)},hu(){return this.Ygt()}}}{const C33=self.Ve;C33.Oat.mee.Nrt={ApplyForce(t,e,s){this.yie(t,e,s)},wre(t,e,s,i){this.Iie(t,e,s,i)},bre(t,e,s){this.Aie(t,C33.An(e),s)},Ore(t,e,s){this.Mie(t,e,s)},Gre(t,e,s,i){this.wie(t,e,s,i)},Pre(t,e,s){this.bie(t,C33.An(e),s)},ApplyTorque(t){this.Oie(C33.An(t))},vre(t,e){this.Gie(C33.An(t),C33.An(e))},xre(t,e,s){this.Pie(C33.An(t),e,s)},SetAngularVelocity(t){this._ie(C33.An(t))},Lre(t,e,s,i,r){if(e){const n=e.xgt(this.xs);this.Use(t,n,s,i,r)}},Dre(t,e){if(e){const s=e.xgt(this.xs);this.jse(t,s)}},Nre(t,e,s,i){if(e){const r=e.xgt(this.xs);this.Yse(t,r,C33.An(s),C33.An(i))}},Fre(t,e,s,i,r,n,h,o,a){if(e){const l=e.xgt(this.xs);this.qse(t,l,C33.An(s),i,r,n,h,C33.An(o),a)}},Bre(){this.zse()},kre(t){this.uB().SetGravity(t)},Dee(t){this.uB().Dee(t)},Vee(t,e){this.uB().Vee(t,e)},$re(t,e){this.mie(t,e)},Wre(t,e){this.xie(t,e)},SetDensity(t){this.hie(t)},SetFriction(t){this.oie(t)},Vre(t){this.aie(t)},SetLinearDamping(t){this.lie(t)},SetAngularDamping(t){this.cie(t)},Hre(t){this.die(t)},Ure(t,e){this.uB().jee(this.IF(),t,0!==e)},Xre(t){this.nie(0!==t)},SetBullet(t){this.uie(0!==t)},SetAwake(t){this.Lie(!!t)},dTt(t){this.jgt(0!==t)}}}{const C33=self.Ve;C33.Oat.mee.Frt={jre(){return this.Cie()},Yre(){return this.Sie()},qre(){return C33.Mn(this.gie())},zre(){return this.Tie()},Jre(){return this.Die()},Kre(){return this.Nie()},Zre(){return this.Qse()},Qre(){return this.tie()},tne(){return this.eie()},ene(){return this.sie()},sne(){return this.iie()},ine(){return this.Bie()},rne(t){return this.kie(t)[0]},nne(t){return this.kie(t)[1]}}}{let CloneVec22=function(t){return GetVec2(t.get_x(),t.get_y())},SplitConvexPolysOver8Points2=function(t){const e=[];for(const s of t)s.length<=8?e.push(s):e.push.apply(e,SplitConvexPoly2(s));return e},SplitConvexPoly2=function(s){let i=[],r=(i.push(s.splice(0,8)),i[0][0]),n=i[0][7];for(;s.length;){let t=s.splice(0,Math.min(s.length,6)),e=t.at(-1);t.push(CloneVec22(r)),t.push(CloneVec22(n)),i.push(t),n=e}return i};CloneVec2=CloneVec22,SplitConvexPolysOver8Points=SplitConvexPolysOver8Points2,SplitConvexPoly=SplitConvexPoly2;const C33=self.Ve,b2Separator={},GetVec2=(C33.Oat.mee.Nse=b2Separator,C33.Oat.mee.NAt),FreeVec2=C33.Oat.mee.qee;b2Separator.hne=function(t,e,s,i,r,n){return t*i+s*n+r*e-e*s-i*r-n*t},b2Separator.one=function(t,e,s,i,r,n,h,o){const a=r-t,l=n-e,c=s-t,u=i-e,f=h-r,d=o-n,p=u*f-c*d,C=(f*l-d*a)/p,m=t+C*c,S=e+C*u,g=b2Separator.ane(s,i,t,e,m,S),_=b2Separator.ane(m,S,r,n,h,o);return g&&_?GetVec2(m,S):null},b2Separator.ane=function(t,e,s,i,r,n){const h=t<=s+.1&&r-.1<=t||s-.1<=t&&t<=r+.1,o=e<=i+.1&&n-.1<=e||i-.1<=e&&e<=n+.1;return h&&o&&b2Separator.lne(t,e,s,i,r,n)},b2Separator.lne=function(t,e,s,i,r,n){if(.1<Math.abs(r-s)){const h=(n-i)/(r-s),o=h*(t-s)+i,a=Math.abs(o-e);return a<.1}return Math.abs(t-s)<.1},b2Separator.cne=function(t,e,s,i){return Math.abs(s-t)<.1&&Math.abs(i-e)<.1},b2Separator.Dse=function(t,n){let h=b2Separator.une(t),o=[];for(let t=0,e=h.length;t<e;++t){let s=h[t],i=[],r=0;for(let t=0,e=s.length;t<e;++t){const a=s[t],l=s[(t+1)%e];r+=a.get_x()*l.get_y()-a.get_y()*l.get_x(),i.push(GetVec2(a.get_x(),a.get_y()))}if((r=Math.abs(r/2))>=.001*n)o.push(i);else for(let t=0,e=i.length;t<e;t++)FreeVec2(i[t])}return o=SplitConvexPolysOver8Points2(o)},b2Separator.une=function(t){let e=[],s=0,i,r=0,n,h,o,a=0,l,c,u,f,d,p,C,m,S,g,_=0,T=0,y=0,E=0,I=[],A=[],M=!1,R=[],w=[],b=!1;for(w.push(t);w.length;){for(i=(e=w[0]).length,M=!0,s=0;s<i;s++)if(c=(l=s)<i-1?s+1:s+1-i,u=s<i-2?s+2:s+2-i,f=e[l],d=e[c],p=e[u],b2Separator.hne(f.get_x(),f.get_y(),d.get_x(),d.get_y(),p.get_x(),p.get_y())<0){for(M=!1,a=1e9,r=0;r<i;r++)r!==l&&r!==c&&(_=r,T=r<i-1?r+1:0,C=e[_],m=e[T],S=b2Separator.one(f.get_x(),f.get_y(),d.get_x(),d.get_y(),C.get_x(),C.get_y(),m.get_x(),m.get_y()))&&((n=(h=d.get_x()-S.get_x())*h+(o=d.get_y()-S.get_y())*o)<a?(E=_,y=T,g=S,a=n):FreeVec2(S));if(1e9===a)return[];for(I=[],A=[],_=E,T=y,C=e[_],m=e[T],b=!1,b2Separator.cne(g.get_x(),g.get_y(),m.get_x(),m.get_y())||(I.push(g),b=!0),b2Separator.cne(g.get_x(),g.get_y(),C.get_x(),C.get_y())||(A.push(g),b=!0),b||FreeVec2(g),E=-1,y=l;;){if(y===T){if(E<0||E>=i)return[];b2Separator.ane(m.get_x(),m.get_y(),e[E].get_x(),e[E].get_y(),f.get_x(),f.get_y())||I.push(e[y]);break}I.push(e[y]),(E=y)-1<0?y=i-1:y--}for(I.reverse(),E=-1,y=c;;){if(y===_){if(E<0||E>=i)return[];y!==_||b2Separator.ane(C.get_x(),C.get_y(),e[E].get_x(),e[E].get_y(),d.get_x(),d.get_y())||A.push(e[y]);break}A.push(e[y]),(E=y)+1>i-1?y=0:y++}w.push(I,A),w.shift();break}M&&R.push(w.shift())}return R}}{const C33=self.Ve;C33.Oat.fne=class BulletBehavior extends C33.oIt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Oat.fne.IMt=class BulletType extends C33.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve,C3X=self.Qe,IBehaviorInstance=self.lB,SPEED=0,ACCELERATION=1,GRAVITY=2,BOUNCE_OFF_SOLIDS=3,SET_ANGLE=4,STEPPING=5,ENABLE=6,map=(C33.Oat.fne.Instance=class BulletInstance extends C33.pIt{constructor(t,e){super(t);const s=this.W5(),i=(this.cAt=0,this.dne=0,this.Jo=0,this.pne=!1,this.Cne=!1,this.mne=!1,this.hmt=!0,this.Sne=0,this.gne=0,this.bHt=s.b_(),this.OHt=s.P_(),this.yse=s.GetAngle(),this._ne=0,this.Tne=Math.min(Math.abs(s.dC()),Math.abs(s.IC())/2),this.yne=!1,e&&(this.cAt=e[SPEED],this.dne=e[ACCELERATION],this.Jo=e[GRAVITY],this.pne=!!e[BOUNCE_OFF_SOLIDS],this.Cne=!!e[SET_ANGLE],this.mne=!!e[STEPPING],this.hmt=!!e[ENABLE]),s.GetAngle());this.Sne=Math.cos(i)*this.cAt,this.gne=Math.sin(i)*this.cAt,this.hmt&&(this.pEt(),this.pne)&&this.TIt()}Sn(){super.Sn()}V_(){const t={dx:this.Sne,dy:this.gne,lx:this.bHt,ly:this.OHt,lka:this.yse,t:this._ne};return 0!==this.dne&&(t.acc=this.dne),0!==this.Jo&&(t.g=this.Jo),this.mne&&(t.st=this.mne),this.hmt||(t.e=this.hmt),this.pne&&(t.bos=this.pne),this.Cne&&(t.sa=this.Cne),t}H_(t){this.Sne=t.dx,this.gne=t.dy,this.bHt=t.lx,this.OHt=t.ly,this.yse=t.lka,this._ne=t.t,this.dne=t.hasOwnProperty("acc")?t.acc:0,this.Jo=t.hasOwnProperty("g")?t.g:0,this.mne=!!t.hasOwnProperty("st")&&t.st,this.pne=!!t.hasOwnProperty("bos")&&t.bos,this.Cne=!!t.hasOwnProperty("sa")&&t.sa,this.jgt(!t.hasOwnProperty("e")||t.e)}gK(){if(this.hmt){const r=this.f3.jx(this.xs),n=this.xs.W5();if(n.GetAngle()!==this.yse){const t=n.GetAngle();if(this.Cne){const e=C33.Rn(0,0,this.Sne,this.gne);this.Sne=Math.cos(t)*e,this.gne=Math.sin(t)*e}this.yse=t}let s=0,i=0;if(0!==this.dne){let t=C33.Rn(0,0,this.Sne,this.gne),e=0;e=0===this.Sne&&0===this.gne?n.GetAngle():C33.bn(0,0,this.Sne,this.gne),t+=this.dne*r,s=Math.cos(e)*this.dne,i=Math.sin(e)*this.dne,t<0&&(t=0,s=0,i=0),this.Sne=Math.cos(e)*t,this.gne=Math.sin(e)*t}if(0!==this.Jo&&(this.gne+=this.Jo*r,i+=this.Jo),this.bHt=n.b_(),this.OHt=n.P_(),0!==this.Sne||0!==this.gne){const h=this.Sne*r+.5*s*r*r,o=this.gne*r+.5*i*r*r,a=C33.Rn(0,0,h,o);if(this.Ene(h,o,a),this._ne+=a,this.Cne&&(0!=h||0!=o)){const l=C33.bn(0,0,h,o);n.zD(l),this.yse=n.GetAngle()}n.L7()}}}Ene(t,e,s){const i=this.W5();if(!this.mne||s<=this.Tne)i.B7(t,e),i.L7(),this.mne&&this.n7(C33.Oat.fne.Hq.Ine);else{this.yne=!1;const r=i.b_(),n=i.P_(),h=r+t,o=n+e,a=C33.bn(0,0,t,e),l=Math.cos(a)*this.Tne,c=Math.sin(a)*this.Tne,u=Math.floor(s/this.Tne);for(let t=1;t<=u;++t)if(i.D7(r+l*t,n+c*t),i.L7(),this.n7(C33.Oat.fne.Hq.Ine),this.xs.k8()||this.yne)return;i.D7(h,o),i.L7(),this.n7(C33.Oat.fne.Hq.Ine)}}_It(){if(this.hmt&&this.pne&&(0!==this.Sne||0!==this.gne)){const t=this.f3.jx(this.xs),e=this.xs.W5(),s=this.f3.j4(),i=s.xL(this.xs);if(i){s.aPt(this.xs,i);const r=C33.Rn(0,0,this.Sne,this.gne),n=s.RPt(this.xs,this.bHt,this.OHt);this.Sne=Math.cos(n)*r,this.gne=Math.sin(n)*r,e.B7(this.Sne*t,this.gne*t),e.L7(),this.Cne&&(e.zD(n),this.yse=e.GetAngle(),e.L7()),s.EPt(this.xs,this.Sne/r,this.gne/r,Math.max(2.5*r*t,30))||s.MPt(this.xs,100)}}}Tnt(t){switch(t){case SPEED:return this.Ane();case ACCELERATION:return this.Mne();case GRAVITY:return this.Rne();case SET_ANGLE:return this.Cne;case STEPPING:return this.mne;case ENABLE:return this.Ygt()}}Rnt(t,e){switch(t){case SPEED:this.wne(e);break;case ACCELERATION:this.dne=e;break;case GRAVITY:this.Jo=e;break;case SET_ANGLE:this.Cne=!!e;break;case STEPPING:this.mne=!!e;break;case ENABLE:this.jgt(!!e)}}wne(t){const e=C33.bn(0,0,this.Sne,this.gne);this.Sne=Math.cos(e)*t,this.gne=Math.sin(e)*t}Ane(){return C33.Xn(C33.Rn(0,0,this.Sne,this.gne),6)}bne(t){this.dne=t}Mne(){return this.dne}One(t){this.Jo=t}Rne(){return this.Jo}Gne(t){const e=C33.Rn(0,0,this.Sne,this.gne);this.Sne=Math.cos(t)*e,this.gne=Math.sin(t)*e}Pne(){return C33.bn(0,0,this.Sne,this.gne)}vne(t){this.pne!==(t=!!t)&&(this.pne=t,this.hmt)&&(this.pne?this.TIt():this.mIt())}xne(){return this.pne}Lne(t){this._ne=t}Dne(){return this._ne}jgt(t){this.hmt=!!t,this.hmt?(this.pEt(),this.pne&&this.TIt()):(this.Zyt(),this.mIt())}Ygt(){return this.hmt}gEt(){const t="behaviors.bullet";return[{title:"$"+this.pB().i3(),properties:[{name:t+".debugger.vector-x",value:this.Sne,Y8t:t=>this.Sne=t},{name:t+".debugger.vector-y",value:this.gne,Y8t:t=>this.gne=t},{name:t+".properties.speed.name",value:this.Ane(),Y8t:t=>this.wne(t)},{name:t+".debugger.angle-of-motion",value:C33.Mn(this.Pne())},{name:t+".properties.gravity.name",value:this.Rne(),Y8t:t=>this.One(t)},{name:t+".properties.acceleration.name",value:this.Mne(),Y8t:t=>this.bne(t)},{name:t+".debugger.distance-travelled",value:this.Dne()},{name:t+".properties.enabled.name",value:this.Ygt(),Y8t:t=>this.jgt(t)}]}]}Gyt(){return self.Nne}},new WeakMap);self.Nne=class IBulletBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.RF().rB())}get speed(){return map.get(this).Ane()}set speed(t){C3X.Ii(t),map.get(this).wne(t)}get acceleration(){return map.get(this).Mne()}set acceleration(t){C3X.Ii(t),map.get(this).bne(t)}get Tjt(){return map.get(this).Rne()}set Tjt(t){C3X.Ii(t),map.get(this).One(t)}get Fne(){return map.get(this).Pne()}set Fne(t){C3X.Ii(t),map.get(this).Gne(t)}get Bne(){return map.get(this).xne()}set Bne(t){map.get(this).vne(!!t)}get kne(){return map.get(this).Dne()}set kne(t){C3X.Ii(t),map.get(this).Lne(t)}get isEnabled(){return map.get(this).Ygt()}set isEnabled(t){map.get(this).jgt(t)}}}{const C33=self.Ve;C33.Oat.fne.Hq={$ne(t,e){const s=Math.hypot(this.Sne,this.gne);return C33.compare(s,t,e)},Wne(t,e){return C33.compare(this.Dne(),t,e)},Ine(){return!0},hu(){return this.Ygt()}}}{const C33=self.Ve;C33.Oat.fne.Nrt={Vne(t){this.wne(t)},uXt(t){this.bne(t)},SetGravity(t){this.One(t)},Hne(t){this.Gne(C33.An(t))},Ov(t){if(t){const e=t.xgt(this.xs);if(e){const s=this.xs.W5(),i=this.f3.j4(),r=this.f3.jx(this.xs),n=C33.Rn(0,0,this.Sne,this.gne),h=i.RPt(this.xs,this.bHt,this.OHt,e);this.Sne=Math.cos(h)*n,this.gne=Math.sin(h)*n,s.B7(this.Sne*r,this.gne*r),s.L7(),this.Cne&&(s.zD(h),this.yse=s.GetAngle(),s.L7()),0!==n&&(this.pne?i.EPt(this.xs,this.Sne/n,this.gne/n,Math.max(2.5*n*r,30))||i.MPt(this.xs,100):i.yPt(this.xs,this.Sne/n,this.gne/n,Math.max(2.5*n*r,30),e))}}},Une(t){this.vne(t)},Xne(t){this.Lne(t)},dTt(t){this.jgt(t)},jne(){this.yne=!0}}}{const C33=self.Ve;C33.Oat.fne.Frt={Yne(){return this.Ane()},qne(){return this.Mne()},zne(){return C33.Mn(this.Pne())},Jne(){return this.Dne()},Kjt(){return this.Rne()}}}{const C33=self.Ve;C33.Oat.xIt=class SolidBehavior extends C33.oIt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Oat.xIt.IMt=class SolidType extends C33.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve,C3X=self.Qe,IBehaviorInstance=self.lB,ENABLE=0,TAGS=1,EMPTY_SET=new Set,map=(C33.Oat.xIt.Instance=class SolidInstance extends C33.pIt{constructor(t,e){super(t),this.dTt(!0),e&&(this.dTt(e[ENABLE]),this.att(e[TAGS]))}Sn(){super.Sn()}dTt(t){this.xs.rwt(!!t)}hu(){return this.xs.iwt()}att(e){const s=this.xs.DSt();if(e.trim()){let t=s.get("solidTags");t||(t=new Set,s.set("solidTags",t)),t.clear();for(const i of e.split(" "))i&&t.add(i.toLowerCase())}else s.delete("solidTags")}Ak(){return this.xs.DSt().get("solidTags")||EMPTY_SET}Kne(){return[...this.Ak()].join(" ")}V_(){return{e:this.hu()}}H_(t){this.dTt(t.e)}Tnt(t){if(t===ENABLE)return this.hu()}Rnt(t,e){t===ENABLE&&this.dTt(e)}gEt(){return[{title:"$"+this.pB().i3(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.hu(),Y8t:t=>this.dTt(t)},{name:"behaviors.solid.properties.tags.name",value:this.Kne(),Y8t:t=>this.att(t)}]}]}Gyt(){return self.Zne}},new WeakMap);self.Zne=class ISolidBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.RF().rB())}set isEnabled(t){map.get(this).dTt(!!t)}get isEnabled(){return map.get(this).hu()}set tags(t){C3X.wi(t),map.get(this).att(t)}get tags(){return map.get(this).Kne()}}}{const C33=self.Ve;C33.Oat.xIt.Hq={hu(){return this.hu()}}}{const C33=self.Ve;C33.Oat.xIt.Nrt={dTt(t){this.dTt(t)},att(t){this.att(t)}}}{const C33=self.Ve;C33.Oat.xIt.Frt={}}{const C33=self.Ve;C33.Oat.Qne=class RadialProgressBehavior extends C33.oIt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Oat.Qne.IMt=class RadialProgressType extends C33.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve;C33.Oat.Qne.Instance=class RadialProgressInstance extends C33.pIt{constructor(t,e){super(t),this.the=!0,e&&([this.resolution,this.circular,this.innerRadiusX,this.innerRadiusY,this.outerRadiusX,this.outerRadiusY,this.value,this.maximum,this.inverted]=e),this.pEt()}Sn(){super.Sn()}V_(){let e={};return["resolution","circular","innerRadiusX","innerRadiusY","outerRadiusX","outerRadiusY","value","maximum","inverted"].forEach(t=>{e[t]=this[t]}),e}H_(e){Object.keys(e).forEach(t=>{this[t]=e[t]})}gK(){let t=this.f3.jx(this.xs),s=(this.f3.zx(),this.xs.W5()),i=!1,e=this.maximum,r=this.value,n=this.inverted,h=this.resolution,o=this.innerRadiusX,a=this.circular?o:this.innerRadiusY,l=this.outerRadiusX,c=this.circular?l:this.outerRadiusY;if(e<=0?(this.ehe||(this.ehe=s.GetAngle()),this.the=!0,s.zD(s.GetAngle()+C33.An(180*t)),r=.1,e=1,i=!0):this.ehe&&(s.zD(this.ehe),i=!0,this.ehe=null),i&&s.L7(),this.the){const u=!s.J6()||s.Xbt.aGt.q_!==h&&2<h,f=(u&&s.U6(h,2),o=Math.min(o,l),a=Math.min(a,c),r=Math.min(Math.max(0,r),e),C33.Mn(s.GetAngle())),d=360*r*(n?-1:1)/e+f,p=(d-f)/(h-1),C=s.dC(),m=s.IC();for(let e=0;e<h;e++){let t=C33.An(f+p*e);(i=s.q6(e,0,{x:.5+l*Math.cos(t)/C,y:.5+c*Math.sin(t)/m}))&&s.L7(),(i=s.q6(e,1,{x:.5+o*Math.cos(t)/C,y:.5+a*Math.sin(t)/m}))&&s.L7()}i&&s.L7(),this.the=!1}}gEt(){let t=this.V_(),s=[];return Object.keys(t).forEach(e=>{s.push({name:e[0].toUpperCase()+e.slice(1),value:this[e],Y8t:t=>this.she(e,t)})}),[{title:"RadialProgress",properties:s}]}she(t,e){this[t]!==e&&(this.the=!0,this[t]=e)}Tnt(t){return 0}Rnt(t,e){}}}self.Ve.Oat.Qne.Hq={},self.Ve.Oat.Qne.Nrt={ihe(t){this.she("resolution",t)},rhe(t){this.she("circular",t)},nhe(t){this.she("innerRadiusX",t)},hhe(t){this.she("innerRadiusY",t)},ohe(t){this.she("outerRadiusX",t)},ahe(t){this.she("outerRadiusY",t)},Uit(t){this.she("value",t)},lhe(t){this.she("maximum",t)},che(t){this.she("inverted",t)}},self.Ve.Oat.Qne.Frt={uhe(){return this.resolution},fhe(){return this.circular?1:0},dhe(){return this.innerRadiusX},phe(){return this.innerRadiusY},Che(){return this.outerRadiusX},mhe(){return this.outerRadiusY},She(){return this.value},GSt(){return this.inverted?1:0}};{const C33=self.Ve;C33.Oat.ghe=class MoveToBehavior extends C33.oIt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Oat.ghe.IMt=class MoveToType extends C33.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve,C3X=self.Qe,IBehaviorInstance=self.lB,PROP_MAX_SPEED=0,PROP_ACCELERATION=1,PROP_DECELERATION=2,PROP_ROTATE_SPEED=3,PROP_SET_ANGLE=4,PROP_STOP_ON_SOLIDS=5,PROP_ENABLED=6,map=(C33.Oat.ghe.Instance=class MoveToInstance extends C33.pIt{constructor(t,e){super(t),this._he=200,this.dne=600,this.The=600,this.yhe=0,this.Cne=!0,this.Ehe=!1,this.hmt=!0,this.cAt=0,this.Ihe=this.W5().GetAngle(),this.Ahe=[],e&&(this._he=e[PROP_MAX_SPEED],this.dne=e[PROP_ACCELERATION],this.The=e[PROP_DECELERATION],this.yhe=C33.An(e[PROP_ROTATE_SPEED]),this.Cne=e[PROP_SET_ANGLE],this.Ehe=e[PROP_STOP_ON_SOLIDS],this.hmt=e[PROP_ENABLED]),this.Mhe=null,this.Rhe=NaN,this.whe=NaN,this.bhe=[0,0],this.Ohe={nZ:this.bhe}}Sn(){this.Mhe&&(this.Mhe.Sn(),this.Mhe=null),this.Rhe=NaN,this.whe=NaN,this.bhe=null,this.Ohe=null,super.Sn()}V_(){return{ms:this._he,acc:this.dne,dec:this.The,rs:this.yhe,sa:this.Cne,sos:this.Ehe,s:this.cAt,ma:this.Ihe,wp:this.Ahe.map(t=>({x:t.x,y:t.y})),e:this.hmt}}H_(t){this._he=t.ms,this.dne=t.acc,this.The=t.dec,this.yhe=t.rs,this.Cne=t.sa,this.Ehe=t.sos,this.cAt=t.s,this.Ihe=t.ma,this.Ahe=t.wp.map(t=>({x:t.x,y:t.y})),this.jgt(t.e),this.hmt&&0<this.Ahe.length&&this.pEt()}Ghe(t,e,s,i){s&&C33.Vh(this.Ahe),this.Ahe.push({x:t,y:e,opts:i}),this.hmt&&this.pEt()}Phe(){return this.Ahe.length}vhe(t){return(t=Math.floor(t))<0||t>=this.Ahe.length?0:this.Ahe[t].x}xhe(t){return(t=Math.floor(t))<0||t>=this.Ahe.length?0:this.Ahe[t].y}Lhe(){return 0<this.Ahe.length}Dhe(){C33.Vh(this.Ahe),this.cAt=0,this.Zyt()}Nhe(){return 0<this.Ahe.length?this.Ahe[0].x:0}Fhe(){return 0<this.Ahe.length?this.Ahe[0].y:0}Bhe(){if(0<this.Ahe.length){const t=this.Ahe[0];if(t.opts)return t.opts.khe}return!1}$he(){if(0<this.Ahe.length){const t=this.Ahe[0];if(t.opts)return t.opts.khe&&t.opts.Whe}return!1}Vhe(){if(0<this.Ahe.length){const t=this.Ahe[0];if(t.opts)return t.opts.Hhe}return NaN}Uhe(){if(0<this.Ahe.length){const t=this.Ahe[0];if(t.opts)return t.opts.Xhe}return NaN}wne(t){this.Lhe()&&(this.cAt=Math.min(t,this._he))}Ane(){return this.cAt}jhe(t){this._he=Math.max(t,0),this.wne(this.cAt)}Yhe(){return this._he}qhe(){return this.hmt&&this.Lhe()&&this.Bhe()?!!this.$he():0!==this.yhe}gK(){if(this.hmt&&this.Lhe()){let t=this.f3.jx(this.xs),n=this.xs.W5(),e=n.b_(),s=n.P_(),i=n.GetAngle(),r=this.cAt,h=this._he,o=this.dne,a=this.The,l=this.Nhe(),c=this.Fhe(),u=C33.bn(e,s,l,c),f=!1;if(0<a&&1===this.Ahe.length){const C=.5*r*r/a*1.0001;if(f=C33.wn(e,s,l,c)<=C*C){const m=C33.Rn(e,s,l,c);r=Math.sqrt(2*a*m),h=r,this.cAt=r}}if(this.qhe()){const S=C33.On(this.Ihe,u);if(S>Number.EPSILON){const g=S/this.yhe,_=C33.Rn(n.b_(),n.P_(),l,c),T=_/(2*Math.sin(S)),y=T*S;h=Math.min(h,C33.En(y/g,0,this._he))}}let d=f?-a:o,p=Math.min(r*t+.5*d*t*t,h*t);if(f){if(0<a&&(this.cAt=Math.max(this.cAt-a*t,0),0===this.cAt))return void this.zhe(n,l,c)}else this.cAt=0===o?h:Math.min(this.cAt+o*t,h);if(C33.wn(n.b_(),n.P_(),l,c)<=p*p)this.zhe(n,l,c);else{if(this.qhe()?this.Ihe=C33.Gn(this.Ihe,u,this.yhe*t):this.Ihe=u,n.B7(Math.cos(this.Ihe)*p,Math.sin(this.Ihe)*p),this.Cne){const E=this.Bhe(),I=this.$he();if(E&&!I){let t=this.Uhe(),e=this.Vhe(),s=n.b_(),i=n.P_();self.isNaN(this.whe)&&(this.whe=0),self.isNaN(t)&&(t=0);let r;r=this.whe===t?(this.bhe[0]=this.Rhe,this.bhe[1]=e,this.Mhe.rZ(s,i,this.Ohe)):this.Mhe.pm(s,i),n.zD(this.Mhe.aZ(r[0],r[1]))}else n.zD(this.Ihe),this.Rhe=NaN,this.whe=NaN}n.L7(),this.Jhe(e,s,i)}}}zhe(t,e,s){t.D7(e,s),t.L7();const i=this.Ahe[0];i.opts&&i.opts.khe?(this.Rhe=i.opts.Hhe,this.whe=i.opts.Xhe):(this.Rhe=NaN,this.whe=NaN),this.Ahe.shift(),0===this.Ahe.length&&(this.Mhe&&(this.Mhe.Sn(),this.Mhe=null,this.Rhe=NaN,this.whe=NaN),this.cAt=0,this.Zyt()),this.Yyt("arrived"),this.n7(C33.Oat.ghe.Hq.Khe)}Jhe(t,e,s){const i=this.f3.j4();if(this.Ehe&&i.xL(this.xs)){this.Dhe();const r=this.xs.W5(),n=r.b_(),h=r.P_(),o=C33.bn(n,h,t,e),a=C33.Rn(n,h,t,e);i.EPt(this.xs,Math.cos(o),Math.sin(o),Math.max(a,1))||(r.D7(t,e),r.zD(s),r.L7()),this.Yyt("hitsolid"),this.n7(C33.Oat.ghe.Hq.Zhe)}}Qhe(){return this.Cne}toe(t){this.Cne=!!t}Gne(t){if(this.Ihe=t,this.hmt&&this.Cne&&!this.Lhe()){const e=this.W5();e.zD(this.Ihe),e.L7()}}Pne(){return this.Ihe}bne(t){this.dne=Math.max(t,0)}Mne(){return this.dne}eoe(t){this.The=Math.max(t,0)}soe(){return this.The}ioe(t){this.yhe=Math.max(t,0)}roe(){return this.yhe}noe(t){this.Ehe=!!t}hoe(){return this.Ehe}jgt(t){this.hmt!==(t=!!t)&&(this.hmt=t,this.hmt&&this.Lhe()?this.pEt():this.Zyt())}Ygt(){return this.hmt}Tnt(t){switch(t){case PROP_MAX_SPEED:return this.Yhe();case PROP_ACCELERATION:return this.Mne();case PROP_DECELERATION:return this.soe();case PROP_ROTATE_SPEED:return C33.Mn(this.roe());case PROP_SET_ANGLE:return this.Qhe();case PROP_STOP_ON_SOLIDS:return this.hoe();case PROP_ENABLED:return this.Ygt()}}Rnt(t,e){switch(t){case PROP_MAX_SPEED:this.jhe(e);break;case PROP_ACCELERATION:this.bne(e);break;case PROP_DECELERATION:this.eoe(e);break;case PROP_ROTATE_SPEED:this.ioe(C33.An(e));break;case PROP_SET_ANGLE:this.toe(e);break;case PROP_STOP_ON_SOLIDS:this.noe(e);break;case PROP_ENABLED:this.jgt(e)}}gEt(){const t="behaviors.moveto";return[{title:"$"+this.pB().i3(),properties:[{name:t+".debugger.speed",value:this.Ane(),Y8t:t=>this.wne(t)},{name:t+".debugger.angle-of-motion",value:C33.Mn(this.Pne()),Y8t:t=>this.Ihe=C33.An(t)},{name:t+".debugger.target-x",value:this.Nhe()},{name:t+".debugger.target-y",value:this.Fhe()},{name:t+".debugger.waypoint-count",value:this.Phe()},{name:t+".properties.max-speed.name",value:this.Yhe(),Y8t:t=>this.jhe(t)},{name:t+".properties.acceleration.name",value:this.Mne(),Y8t:t=>this.bne(t)},{name:t+".properties.deceleration.name",value:this.soe(),Y8t:t=>this.eoe(t)},{name:t+".properties.rotate-speed.name",value:C33.Mn(this.roe()),Y8t:t=>this.ioe(C33.An(t))},{name:t+".properties.enabled.name",value:this.Ygt(),Y8t:t=>this.jgt(t)}]}]}Gyt(){return self.ooe}},new WeakMap);self.ooe=class IMoveToBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.RF().rB())}aoe(t,e,s=!0){C3X.Ii(t),C3X.Ii(e),map.get(this).Ghe(t,e,!!s)}loe(){return map.get(this).Nhe()}coe(){return map.get(this).Fhe()}uoe(){const t=map.get(this);return[t.Nhe(),t.Fhe()]}foe(){return map.get(this).Phe()}doe(t){return C3X.Ii(t),map.get(this).vhe(t)}poe(t){return C3X.Ii(t),map.get(this).xhe(t)}Coe(t){C3X.Ii(t);const e=map.get(this);return[e.vhe(t),e.xhe(t)]}stop(){map.get(this).Dhe()}get moe(){return map.get(this).Lhe()}get speed(){return map.get(this).Ane()}set speed(t){C3X.Ii(t),map.get(this).wne(t)}get Soe(){return map.get(this).Yhe()}set Soe(t){C3X.Ii(t),map.get(this).jhe(t)}get acceleration(){return map.get(this).Mne()}set acceleration(t){C3X.Ii(t),map.get(this).bne(t)}get goe(){return map.get(this).soe()}set goe(t){C3X.Ii(t),map.get(this).eoe(t)}get Fne(){return map.get(this).Pne()}set Fne(t){C3X.Ii(t),map.get(this).Gne(t)}get _oe(){return map.get(this).roe()}set _oe(t){C3X.Ii(t),map.get(this).ioe(t)}get Toe(){return map.get(this).hoe()}set Toe(t){map.get(this).noe(t)}get isEnabled(){return map.get(this).Ygt()}set isEnabled(t){map.get(this).jgt(t)}}}{const C33=self.Ve;C33.Oat.ghe.Hq={yoe(){return this.Lhe()},$ne(t,e){return C33.compare(this.Ane(),t,e)},hu(){return this.Ygt()},Khe(){return!0},Zhe(){return!0}}}{const C33=self.Ve;C33.Oat.ghe.Nrt={Eoe(t,e,s){this.Ghe(t,e,0===s)},Ioe(t,e,s){if(t){const i=t.bD(this.xs);if(i&&i.W5()){const[r,n]=i.Ogt(e);this.Ghe(r,n,0===s)}}},Aoe(s){const t=this.xs.Gat(C33.Oat.Pathfinding);if(t){const i=t._GetPath();if(0!==i.length)for(let t=0,e=i.length;t<e;++t){const r=i[t];this.Ghe(r.x,r.y,0===t&&0===s)}}},Moe(t,e,s){const i=C33.mn(C33.$K,t,e);if(i.tZ()){i.sZ(this.xs.W5());let e=!0;for(const r of i.eZ())switch(r.gI()){case"line":{const n=r.b_(),h=r.P_();this.Ghe(n,h,e&&0===s),e=!1;break}case"cubic-bezier":for(let t=0;t<=r.qZ();t++){const o=t*r.zZ(),a=r.Map(o),l=a[0],c=a[1];this.Ghe(l,c,e&&0===s,{khe:!0,Whe:e,Hhe:r.ZZ(o),Xhe:r.F4()}),e=!1}}this.Mhe=i}else i.Sn()},Roe(t,e,s){const i=this.f3.XQ().zJ(t);i&&C33.Oat.ghe.Nrt.Moe.call(this,i,e,s)},fk(){this.Dhe()},woe(t){this.Gne(C33.An(t))},Vne(t){this.wne(t)},boe(t){this.jhe(t)},uXt(t){this.bne(t)},Ooe(t){this.eoe(t)},Goe(t){this.ioe(C33.An(t))},Poe(t){this.noe(t)},dTt(t){this.jgt(t)}}}{const C33=self.Ve;C33.Oat.ghe.Frt={Yne(){return this.Ane()},voe(){return this.Yhe()},qne(){return this.Mne()},xoe(){return this.soe()},Loe(){return C33.Mn(this.Pne())},Doe(){return C33.Mn(this.roe())},Noe(){return this.Nhe()},Foe(){return this.Fhe()},Boe(){return this.Phe()},koe(t){return this.vhe(t)},$oe(t){return this.xhe(t)}}}{const C33=self.Ve;C33.Oat.Woe=class FadeBehavior extends C33.oIt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Oat.Woe.IMt=class FadeType extends C33.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve,C3X=self.Qe,IBehaviorInstance=self.lB,FADE_IN_TIME=0,WAIT_TIME=1,FADE_OUT_TIME=2,DESTROY=3,ACTIVE_AT_START=4,map=(C33.Oat.Woe.Instance=class FadeInstance extends C33.pIt{constructor(t,e){super(t),this.Voe=0,this.Hoe=0,this.Uoe=0,this.Xoe=!0,this.joe=!0,this.Yoe=!1,this.qoe=0,this.zoe=C33.mn(C33.vf),this.Joe=this.xs.W5().$O()||1,e&&(this.Voe=e[FADE_IN_TIME],this.Hoe=e[WAIT_TIME],this.Uoe=e[FADE_OUT_TIME],this.Xoe=!!e[DESTROY],this.joe=!!e[ACTIVE_AT_START],this.qoe=this.joe?0:3),this.joe&&(0===this.Voe?(this.qoe=1,0===this.Hoe&&(this.qoe=2)):(this.xs.W5().VO(0),this.f3.q5())),this.pEt()}Sn(){super.Sn()}V_(){return{fit:this.Voe,wt:this.Hoe,fot:this.Uoe,d:this.Xoe,s:this.qoe,st:this.zoe.cs(),mo:this.Joe}}H_(t){this.Voe=t.fit,this.Hoe=t.wt,this.Uoe=t.fot,this.Xoe=t.d,this.qoe=t.s,this.zoe.Set(t.st),this.Joe=t.mo,3===this.qoe?this.Zyt():this.pEt()}gK(){const t=this.f3.jx(this.xs),e=(this.zoe._u(t),this.xs.W5());0===this.qoe&&(e.VO(this.zoe.cs()/this.Voe*this.Joe),this.f3.q5(),e.$O()>=this.Joe)&&(e.VO(this.Joe),this.qoe=1,this.zoe.gf(),this.Yyt("fadeinend"),this.n7(C33.Oat.Woe.Hq.Koe)),1===this.qoe&&this.zoe.cs()>=this.Hoe&&(this.qoe=2,this.zoe.gf(),this.Yyt("waitend"),this.n7(C33.Oat.Woe.Hq.Zoe)),2===this.qoe&&(0!==this.Uoe?(e.VO(this.Joe-this.zoe.cs()/this.Uoe*this.Joe),this.f3.q5(),e.$O()<=0&&(this.qoe=3,this.zoe.gf(),this.Yyt("fadeoutend"),this.n7(C33.Oat.Woe.Hq.Qoe),this.Xoe)&&this.f3.OF(this.xs)):(this.qoe=3,this.zoe.gf())),3===this.qoe&&this.Zyt()}tae(){this.joe||this.Yoe||(this.Joe=this.xs.W5().$O()||1,this.Yoe=!0),3===this.qoe&&this.gG()}eae(){this.gG()}gG(){this.qoe=0,this.zoe.gf(),0===this.Voe?(this.qoe=1,0===this.Hoe&&(this.qoe=2)):(this.xs.W5().VO(0),this.f3.q5()),this.pEt()}sae(t){this.Voe=Math.max(t,0)}iae(){return this.Voe}rae(t){this.Hoe=Math.max(t,0)}nae(){return this.Hoe}hae(t){this.Uoe=Math.max(t,0)}oae(){return this.Uoe}Tnt(t){switch(t){case FADE_IN_TIME:return this.iae();case WAIT_TIME:return this.nae();case FADE_OUT_TIME:return this.oae();case DESTROY:return this.Xoe}}Rnt(t,e){switch(t){case FADE_IN_TIME:this.sae(e);break;case WAIT_TIME:this.rae(e);break;case FADE_OUT_TIME:this.hae(e);break;case DESTROY:this.Xoe=!!e}}gEt(){const t="behaviors.fade";return[{title:"$"+this.pB().i3(),properties:[{name:t+".properties.fade-in-time.name",value:this.iae(),Y8t:t=>this.sae(t)},{name:t+".properties.wait-time.name",value:this.nae(),Y8t:t=>this.rae(t)},{name:t+".properties.fade-out-time.name",value:this.oae(),Y8t:t=>this.hae(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.qoe]]}]}]}Gyt(){return self.aae}},new WeakMap);self.aae=class IFadeBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.RF().rB())}lae(){map.get(this).tae()}cae(){map.get(this).eae()}set uae(t){C3X.Ii(t),map.get(this).sae(t)}get uae(){return map.get(this).iae()}set fae(t){C3X.Ii(t),map.get(this).rae(t)}get fae(){return map.get(this).nae()}set dae(t){C3X.Ii(t),map.get(this).hae(t)}get dae(){return map.get(this).oae()}}}{const C33=self.Ve;C33.Oat.Woe.Hq={Qoe(){return!0},Koe(){return!0},Zoe(){return!0}}}{const C33=self.Ve;C33.Oat.Woe.Nrt={pae(){this.tae()},Cae(){this.eae()},mae(t){this.sae(t)},Sae(t){this.rae(t)},gae(t){this.hae(t)}}}{const C33=self.Ve;C33.Oat.Woe.Frt={_ae(){return this.iae()},Tae(){return this.nae()},yae(){return this.oae()}}}{const C33=self.Ve;C33.Oat.Eae=class RotateBehavior extends C33.oIt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Oat.Eae.IMt=class RotateType extends C33.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve,C3X=self.Qe,IBehaviorInstance=self.lB,SPEED=0,ACCELERATION=1,ENABLE=2,map=(C33.Oat.Eae.Instance=class RotateInstance extends C33.pIt{constructor(t,e){super(t),this.cAt=0,this.yYt=0,this.hmt=!0,e&&(this.cAt=C33.An(e[SPEED]),this.yYt=C33.An(e[ACCELERATION]),this.hmt=e[ENABLE]),this.hmt&&this.pEt()}Sn(){super.Sn()}wne(t){this.cAt=t}Ane(){return this.cAt}bne(t){this.yYt=t}Mne(){return this.yYt}V_(){return{s:this.cAt,a:this.yYt,e:this.hmt}}H_(t){this.cAt=t.s,this.yYt=t.a,this.jgt(t.e)}gK(){if(this.hmt){const t=this.f3.jx(this.xs);if(0!==t&&(0!==this.yYt&&(this.cAt+=this.yYt*t),0!==this.cAt)){const e=this.xs.W5();e.zD(e.GetAngle()+this.cAt*t),e.L7()}}}Tnt(t){switch(t){case SPEED:return C33.Mn(this.Ane());case ACCELERATION:return C33.Mn(this.Mne());case ENABLE:return this.Ygt()}}Rnt(t,e){switch(t){case SPEED:this.wne(C33.An(e));break;case ACCELERATION:this.bne(C33.An(e));break;case ENABLE:this.jgt(e)}}jgt(t){this.hmt=!!t,this.hmt?this.pEt():this.Zyt()}Ygt(){return this.hmt}gEt(){const t="behaviors.rotate";return[{title:"$"+this.pB().i3(),properties:[{name:t+".properties.speed.name",value:C33.Mn(this.Ane()),Y8t:t=>this.wne(C33.An(t))},{name:t+".properties.acceleration.name",value:C33.Mn(this.Mne()),Y8t:t=>this.bne(C33.An(t))},{name:t+".properties.enabled.name",value:this.Ygt(),Y8t:t=>this.jgt(t)}]}]}Gyt(){return self.Iae}},new WeakMap);self.Iae=class IRotateBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.RF().rB())}set speed(t){C3X.Ii(t),map.get(this).wne(t)}get speed(){return map.get(this).Ane()}set acceleration(t){C3X.Ii(t),map.get(this).bne(t)}get acceleration(){return map.get(this).Mne()}get isEnabled(){return map.get(this).Ygt()}set isEnabled(t){map.get(this).jgt(t)}}}{const C33=self.Ve;C33.Oat.Eae.Hq={hu(){return this.Ygt()}}}{const C33=self.Ve;C33.Oat.Eae.Nrt={Vne(t){this.wne(C33.An(t))},uXt(t){this.bne(C33.An(t))},dTt(t){this.jgt(t)}}}{const C33=self.Ve;C33.Oat.Eae.Frt={Yne(){return C33.Mn(this.Ane())},qne(){return C33.Mn(this.Mne())}}}C3=self.Ve,C3.Oat.Aae=class Skymen_SpritefontDXBehavior extends C3.oIt{constructor(t){super(t)}Sn(){super.Sn()}},C3=self.Ve,C3.Oat.Aae.IMt=class Skymen_SpritefontDXType extends C3.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}};{function cos(t){return Math.cos(t*Math.PI/180)}function sin(t){return Math.sin(t*Math.PI/180)}function random(t){return Math.random()*t}function c3easing(t,e,s=1,i=1,r=!1){t=(t%(2*i)+2*i)%(2*i);let n=sdk_runtime.B5t.dlt.find(t=>t.Tn.toLowerCase()===e.toLowerCase());if(!n)return 0;let h=r&&i<t%(2*i)?i-t%i:t%i;return n.Yu(h,0,s,i)}function hslToRgb(t,e,s){var i,r,n,h;return null==t?[0,0,0]:(t=t/60,i=(e=(1-Math.abs(2*s-1))*e)*(1-Math.abs(t%2-1)),0===(t=Math.floor(t))?(r=e,n=i,h=0):1===t?(r=i,n=e,h=0):2===t?(r=0,n=e,h=i):3===t?(r=0,n=i,h=e):4===t?(r=i,n=0,h=e):5===t&&(r=e,n=0,h=i),r+=t=s-e/2,n+=t,h+=t,[Math.round(255*r),Math.round(255*n),Math.round(255*h)])}function colorToHex(i){if(i.startsWith("#"))return i;if(i.startsWith("hsl")){let[t,e,s]=i.split("(")[1].split(")")[0].split(",").map(t=>t.trim());i="rgb("+hslToRgb(t,e/100,s/100).join(",")+")"}if(i.startsWith("rgb")){let[t,e,s]=i.split("(")[1].split(")")[0].split(",").map(t=>1==(t=parseInt(t.trim()).toString(16)).length?"0"+t:t);return"#"+t+e+s}}function lerpColor(t,e,s){return lerpHexColor(colorToHex(t),colorToHex(e),s)}function lerpHexColor(t,e,s){var t=parseInt(t.replace(/#/g,""),16),i=t>>16,r=t>>8&255,t=255&t,e=parseInt(e.replace(/#/g,""),16);return"#"+((1<<24)+(i+s*((e>>16)-i)<<16)+(r+s*((e>>8&255)-r)<<8)+(t+s*((255&e)-t))|0).toString(16).slice(1)}function lerpUnlerp(t,e,s,i,r,n=!1){return t+((r=n&&(r=i<r?i:r)<s?s:r)-s)/(i-s)*(e-t)}function unlerp(t,e,s,i=!1){return i&&(s=e<s?e:s)<t&&(s=t),t===e&&e<=s?1:(s-t)/(e-t)}function lerp(t,e,s){let i=typeof t,r=typeof e;return i==r?"number"==i?s*(e-t)+t:lerpColor(t,e,s):("number"==i?e=parseFloat(e):t=parseFloat(t),s*(e-t)+t)}C3=self.Ve;const c3_callFunction=self.c3_callFunction,easingNames=["linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeOutBounce","easeInBack","easeOutBack","easeInOutBack","elastic","swingFromTo","swingFrom","swingTo","bounce","bouncePast","easeFromTo","easeFrom","easeTo"];EasingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){return t*t*(2.70158*t-1.70158)},easeOutBack:function(t){return(t-=1)*t*(2.70158*t+1.70158)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin(2*Math.PI*(6*t-1)/2)+1},swingFromTo:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},swingFrom:function(t){return t*t*(2.70158*t-1.70158)},swingTo:function(t){return--t*t*(2.70158*t+1.70158)+1},bounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}},hsltorgb=hslToRgb,colortohex=colorToHex,lerpcolor=lerpColor,lerphexcolor=lerpHexColor,lerpunlerp=lerpUnlerp,self.globalThis.Mae=self.globalThis.Mae||{cos:cos,sin:sin,random:random,Rae:hslToRgb,wae:hsltorgb,bae:colorToHex,Oae:colortohex,Gae:lerpColor,Pae:lerpcolor,vae:lerpHexColor,xae:lerphexcolor,Lae:lerpUnlerp,Dae:lerpunlerp,Nn:unlerp,Nt:lerp,Nae:EasingFunctions,Fae:EasingFunctions,Bae:c3easing},C3.Oat.Aae.Instance=class Skymen_SpritefontDXInstance extends C3.pIt{constructor(t,e){super(t),sdk_runtime=this.aL(),this.kae={},this.$ae=0,e&&(this.Wae=e[0],this.Vae=this.Hae(this.Wae),this.Uae=""!==e[2].trim()?e[2]:easingNames[e[1]]),this.Xae="",this.jae="",this.text="",this.Yae="",this.qae=!1,this.zae=!1,this.Jae=0,this.Kae=0,this.Zae=[],this.Qae=0,this.tle=!1,this.ele=!0,this.Ug=!1,this.sle=!1,this.ile=null,this.rle=-1,this.nle=[],this.hle={},this.xs.GRt.ole||(this.xs.GRt.ole={}),e&&e[3]&&[{name:"wave",params:"magnitude, frequency, length",body:"magnitude * sin(t * frequency + i * length)"},{name:"swing",params:"magnitude, frequency, length",body:"magnitude * cos(t * frequency + i * length)"},{name:"shake",params:"magnitude",body:"random(magnitude)"}].forEach(t=>{let{name:e,params:s,body:i}=t;this.ale(e,s,i)}),this.mEt()}Sn(){super.Sn()}lle(t){var s="____PLACEHOLDER____",i=[];return JSON.stringify(t,function(t,e){return"function"==typeof e?(i.push(e),s):e},2).replace(new RegExp('"'+s+'"',"g"),function(t){return i.shift()})}cle(str){let val;return eval("val ="+str+";"),val}V_(){return{Xae:this.Xae,jae:this.jae,text:this.text,qae:this.qae,zae:this.zae,Jae:this.Jae,Kae:this.Kae,Qae:this.Qae,tle:this.tle,ele:this.ele,Ug:this.Ug,sle:this.sle,ile:this.ile,Yae:this.Yae,$ae:this.$ae,Uae:this.Uae,Zae:JSON.stringify(this.Zae),kae:JSON.stringify(this.kae),Vae:JSON.stringify(this.Vae),Wae:JSON.stringify(this.Wae),hle:this.lle(this.hle),nle:this.lle(this.nle),ole:this.lle(this.xs.GRt.ole),rle:this.rle}}H_(t){this.jae=t.jae,this.Xae=t.Xae,this.text=t.text,this.qae=t.qae,this.zae=t.zae,this.Jae=t.Jae,this.Kae=t.Kae,this.Qae=t.Qae,this.tle=t.tle,this.ele=t.ele,this.Ug=t.Ug,this.sle=t.sle,this.Yae=t.Yae,this.$ae=t.$ae,this.Uae=t.Uae,this.ile=t.ile,this.Zae=JSON.parse(t.Zae),this.kae=JSON.parse(t.kae),this.Vae=JSON.parse(t.Vae),this.Wae=JSON.parse(t.Wae),this.hle=this.cle(t.hle),this.nle=this.cle(t.nle),this.ole=this.cle(t.ole),this.rle=t.rle}Hae(t){var t=t.trim().split(";"),r={value:{},duration:{type:5,fade:10}};return t.forEach(t=>{if(""!==t.trim()){let s=t.trim().split(" "),i=s.shift().toLowerCase();if(""!==i.trim()&&0!==s.length){let e=s.shift().toLowerCase();if(""!==e.trim()&&0!==s.length){let t=s.join();switch(this.ule(t)&&(t=parseFloat(t)),i){case"value":r.value[e]=t;break;case"duration":switch(e){case"type":r.duration.type=t;break;case"fade":r.duration.fade=t;break;default:console.warn(e+" is not a recognised typewriter parameter for "+i+".")}break;default:console.warn(i+" is not a recognised typewriter parameter.")}}}}}),r}fle(t){switch(t){case"offsetx":case"offsety":return 0;case"opacity":return 100;case"scale":case"scalex":case"scaley":return 1;case"color":return(this.xs.PRt.p_||this.xs._spriteFontText.p_).Pa();case"background":return"#FFFFFF";case"size":if(self.Ve.Xq.Text&&this.xs.GRt.Xyt instanceof self.Ve.Xq.Text)return this.xs.PRt.U$t;default:return 0}}dle(t){return["hide","b","i","u","s","stroke"].includes(t)}ple(){let e=sdk_runtime.B5t.dlt.find(t=>t.Tn.toLowerCase()===this.Uae.toLowerCase());return e?t=>e.Yu(t,0,1,1.01):EasingFunctions[this.Uae]||EasingFunctions.linear}dEt(){if(-1==this.rle||this.Cle||(this.Cle=this.f3.D5(this.rle)),!this.sle&&this.Ug&&this.xs.PRt.d3!=this.Yae&&(this.Ug=!1),this.sle&&(this.sle=!1),this.Ug){const l=this.f3.zx();var o="",a=!1;if(this.zae){let h=0;this.nle.forEach(n=>{for(let r=0;r<n[1].length;r++){let e={};if(n[0].forEach(t=>{"function"==typeof t[1]?e[t[0]]=t[1](l,r):e[t[0]]=t[1]}),this.$ae>=this.kae.start[h][0]&&this.kae.data[h].hasOwnProperty("pause")&&(this.qae=!0,delete this.kae.data[h].pause,this.n7(C3.Oat.Aae.Hq.mle)),this.$ae>=this.kae.start[h][0]&&this.kae.data[h].hasOwnProperty("fn")){let t=this.kae.data[h].fn.split(" "),e=t.shift(),s=JSON.parse("["+t.join(" ")+"]")||[];c3_callFunction(e,s),delete this.kae.data[h].fn}Object.keys(this.kae.data[h]).forEach(t=>{e.hasOwnProperty(t)||(e[t]=this.fle(t)),e[t]=lerp(this.kae.data[h][t],e[t],this.ple()(unlerp(this.kae.start[h][0],this.kae.start[h][1],this.$ae,!0)))});let s="",t=(Object.keys(e).forEach(t=>{["wait","fade","type","pause"].includes(t)||this.dle(t)&&!e[t]||(o+="["+t+"="+e[t]+"]",s="[/"+t+"]"+s)}),""),i=n[1][r];"string"!=typeof i?t+=i():t=i,o+=t+s,!this.qae&&this.$ae>=this.kae.start[h][0]&&this.Jae<h&&(this.Jae=h,this.Sle=this.gle(o)[h],this.n7(C3.Oat.Aae.Hq._le),a=!0,this.Xae=o),a&&(this.jae=o," "===n[1][r])&&(a=!1),h++}}),this.UR(this.Jae,o),this.$ae>=this.kae.start[this.kae.start.length-1][1]&&(this.UR(-1),this.n7(C3.Oat.Aae.Hq.Tle),this.zae=!1),this.qae||(this.$ae+=this.f3.jx(this.xs))}else this.nle.forEach(r=>{if(0==r[0].length){let e="",t=r[1];"string"!=typeof t?t.forEach(t=>{e+=t()}):e=t,o+=e}else for(let i=0;i<r[1].length;i++){let s="",t=(r[0].forEach(t=>{let e;e="function"==typeof t[1]?t[1](l,i):t[1],this.dle(t[0])&&!e||(o+="["+t[0]+"="+e+"]",s="[/"+t[0]+"]"+s)}),""),e=r[1][i];"string"!=typeof e?t+=e():t=e,o+=t+s}});this.Yae=o,this.S3(o)}}yle(t,e){e=this.gle(e);let s=this.xs.PRt.d3,i=(this.S3(e),e=e.slice(0,t+1),this.Ele()),r=i.jR(),n=(i.UR(-1),i._MaybeWrapText(),C3.eo(i.QM.lC())),h=(i.UR(r),0);for(;1<n.length&&e.startsWith(n[0].OC[0].text);)h++,e=e.slice(n.shift().OC[0].text.length).trimStart();return h-=""===e,this.S3(s),h}UR(t,e=null){this.ile=null,e&&(t=(t+=1)-this.yle(t,e)),this.ile=t}S3(t){this.xs.PRt.TEt(this.Ile(),t),null!=this.ile&&this.ile!==this.Ele().jR()&&(this.Ele().UR(this.ile),this.f3.q5(),this.ile=null)}Ele(){return self.Ve.Xq.Spritefont2&&this.xs.GRt.Xyt instanceof self.Ve.Xq.Spritefont2?this.xs.PRt._spriteFontText:self.Ve.Xq.Text&&this.xs.GRt.Xyt instanceof self.Ve.Xq.Text?this.xs.PRt._webglText||this.xs.PRt.s9t:null}Ile(){return self.Ve.Xq.Spritefont2&&this.xs.GRt.Xyt instanceof self.Ve.Xq.Spritefont2?self.Ve.Xq.Spritefont2.Nrt.S3:self.Ve.Xq.Text&&this.xs.GRt.Xyt instanceof self.Ve.Xq.Text?self.Ve.Xq.Text.Nrt.S3:null}Ale(s){if(""===s)this.S3(""),this.Yae="",this.Ug=!1,this.zae=!1;else{this.sle=!0,this.text=this.Mle(s),this.Rle(),this.UR(0),s=this.text,this.Jae=-1,this.zae=!0,this.Ug=!0,this.qae=!1,this.$ae=0,this.Xae="",this.jae="";let t=this.gle(this.text),e=0;this.kae={start:[],data:[]};for(let r=0;r<t.length;r++){var n={};Object.assign(n,this.Vae.value),Object.assign(n,this.Vae.duration);for(let e=0;e<this.Zae.length;e++){let t=this.Zae[e];if(t.id>r)break;let s=t.data.split(" "),i=s[0].toLowerCase();if("wait"!==i&&"pause"!==i&&"fn"!==i||t.id==r)if("fn"===i)s.shift(),n[i]=s.join(" ");else{s.shift();let e=s.join(" ");try{n[i]=this.wle(e)()}catch(t){this.ule(s[0])?n[i]=parseFloat(s[0]):n[i]=e}}}n.hasOwnProperty("wait")&&(e+=n.wait),n.hasOwnProperty("pause")&&(e+=n.fade),this.kae.start.push([e,e+n.fade]),e+=n.type,this.kae.data.push(n)}this.n7(C3.Oat.Aae.Hq.ble)}}Ole(t){var e=/(["'])(\\?.)*?\1/g.exec(t);return null!=e&&e[0]===t}ule(t){return parseFloat(t).toString()===t}GetBody(t){let e="let { "+Object.keys(self.globalThis.Mae).join(",")+" } = globalThis.SFDXUtilsFunctions;";return t=e+"return "+t+";"}ale(t,e,s){s=this.GetBody(s);var i=[],i=""!=e.trim()?(e=e.split(",").map(function(t){return t.trim()}),i.concat([Function],e,["t","i"],[s])):i.concat([Function],["t","i"],[s]),e=new(Function.bind.apply(Function,i));this.xs.GRt.ole[t.toLowerCase().trim()]=e}Gle(t){if(this.zae){let i=0;for(;i<this.kae.start.length&&this.$ae>this.kae.start[i][0];)i++;for(;i<this.kae.data.length&&(t||!this.kae.data[i].hasOwnProperty("pause"));){if(this.kae.data[i].hasOwnProperty("fn")){let t=this.kae.data[i].fn.split(" "),e=t.shift(),s=JSON.parse("["+t.join(" ")+"]")||[];c3_callFunction(e,s)}i++}i===this.kae.data.length?(this.UR(-1),this.n7(C3.Oat.Aae.Hq.Tle),this.zae=!1):this.$ae=this.kae.start[i][0]}}gle(n){let h=/\[\/?((?!\/?tw|fn|text)[^\]]*)(=[^\]]*)?\]/gi,o;for(n=n.replace(h,""),h=/\[\/?((?!\/?tw)[^\]]*)(=[^\]]*)?\]/gi;null!==(o=h.exec(n));){let t=o[1].split("="),e=t[1]||"",s=e.split(" "),i=parseInt(s[1])||0,r="";for(let t=0;t<i;t++)r+="0";n=n.replace(o[0],r),h.lastIndex=0}return n}Mle(t){let e=/\[tw=([^\]]*)?\]/gi,s;for(var i=0,r=(this.Zae=[],t=this.Ple(t),this.gle(t));null!==(s=e.exec(r));)this.Zae.push({data:s[1].trim(),id:s.index-i}),i+=s[0].length;return t.replace(e,"")}wle(s){if(!this.hle.hasOwnProperty(s)){let t=/^[\d\w]+(\([^()]*\))?$/g,e=(s=s.trim(),t.test(s));if(e&&(r=(i=s.split("("))[0].trim().toLowerCase(),e=this.xs.GRt.ole.hasOwnProperty(r)),e){var i,r=(i=s.split("("))[0].trim().toLowerCase(),r=this.xs.GRt.ole[r];if(1<i.length){var n=i[1].slice(0,-1).split(",").map(function(t){return t.trim()});for(let t=0;t<n.length;t++)isNaN(Number(n[t]))||(n[t]=Number(n[t]));n.unshift(null),this.hle[s]=r.bind.apply(r,n)}else this.hle[s]=r}else i=(i=[]).concat([Function],["t","i"],[this.GetBody(s.toLowerCase())]),this.hle[s]=new(Function.bind.apply(Function,i))}return this.hle[s]}Rle(){var e,i=[],t=0,n=[],h="",s=!1,r=this,o=(void 0!==this.Cle&&this.vle(),this.UR(-1),this.text),a=/\[\/?((?!\/?sfdx|text|fn)[^\]]*)\]/gi;let l=["sfdx","anim","typejuice","juice","animate","animtext"];for(;null!==(e=a.exec(o));){if(e[0].startsWith("[/"))o=o.replace(e[0],"[/sfdx]");else{let t=e[1].split("=");o=l.includes(t[0].toLowerCase())?o.replace(e[0],"[sfdx="+t[1]+"]"):o.replace(e[0],"[sfdx="+t[0]+' "'+t[1]+'"]')}a.lastIndex=0}this.text=o;for(let r=0;r<o.length;r++)if(s)"]"===o[r]?(s=!1,h=""):n[t-1]+=o[r];else if(o.substring(r).toLowerCase().startsWith("[sfdx="))c(JSON.parse(JSON.stringify(n)),h),t++,n.push(""),s=!0,r+=5;else if(o.substring(r).toLowerCase().startsWith("[/sfdx]"))0<t&&(t--,c(JSON.parse(JSON.stringify(n)),h),n.pop(),h=""),r+=6;else if(o.substring(r).toLowerCase().startsWith("[text=")){for(c(JSON.parse(JSON.stringify(n)),h),h="",r+=6;"]"!==o[r];)h+=o[r],r++;let t=h.split(" "),e=[],s=t[0],i=parseInt(t[1])||0;for(let t=0;t<i;t++)e.push(this.xle.bind(this,s,t,!1));c(JSON.parse(JSON.stringify(n)),e),h=""}else if(o.substring(r).toLowerCase().startsWith("[fn=")){for(c(JSON.parse(JSON.stringify(n)),h),h="",r+=4;"]"!==o[r];)h+=o[r],r++;let t=h.split(" "),e=[],s=t[0],i=parseInt(t[1])||0;for(let t=0;t<i;t++)e.push(this.xle.bind(this,s,t,!0));c(JSON.parse(JSON.stringify(n)),e),h=""}else h+=o[r];function c(t,e){var s;""!=e&&(s=[],t.forEach(t=>{var t=t.split(" "),e=t.shift(),t=t.join(" "),t=r.Ole(t)?t.substring(1,t.length-1):r.wle(t);s.push([e,t])}),i.push([s,e]))}c(JSON.parse(JSON.stringify(n)),h),this.nle=i}xle(e,s,t){if(t){e=e.toLowerCase();let t=c3_callFunction(e)||"";return s<t.length?t[s]:" "}if(e=e.toLowerCase(),this.Cle.has(e)){let t=this.Cle.get(e);return s<t.length?t[s]:" "}return" "}vle(){this.text=this.Ple(this.text)}Ple(s){for(var i,r=/\[(var|varfn)=([\d\w]+)\]/gi;null!==(i=r.exec(s));){let t="var"===i[1].trim().toLowerCase(),e=i[2].toLowerCase();if(t)this.Cle.has(e)&&(s=s.replace(i[0],this.Cle.get(e)),r.lastIndex=0);else{let t=c3_callFunction(e)||"";s=s.replace(i[0],t),r.lastIndex=0}}return s}Lle(t){this.Uae=easingNames[t]}Dle(t){let S=t=>t.replace(/<([XYAO]) (-?\w+ ?-?\d* ?-?\d* ?-?\d*)>|<(C) (#?\w*)>|<(C) (\w+\(-?\d+\.?\d*%?, ?-?\d+\.?\d*%?, ?-?\d+\.?\d*%?,? ?-?\d*\.?\d*%?\))>/g,""),a=t=>{var e={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return e.hasOwnProperty(t.toLowerCase())?e[t.toLowerCase()]:t};return(t=>{let e=(t=>{for(var e,s=/<([XYAO]) (-?\w+ ?-?\d* ?-?\d* ?-?\d*)>|<(C) (#?\w*)>|<(C) (\w+\(-?\d+\.?\d*%?, ?-?\d+\.?\d*%?, ?-?\d+\.?\d*%?,? ?-?\d*\.?\d*%?\))>/g,i=t,r=0,n=[];null!==(e=s.exec(i));){var h=[];h.push(e.index+r),r-=s.lastIndex-e.index,e.forEach(function(t,e){0!=e&&h.push(t)}),n.push(h)}for(var o=S(t),a="None",l="None",c="None",u="None",f="None",d=[],p=0;p<n.length;p++){for(var C=n[p];d.length<C[0];)d.push([a,l,c,u,f]);switch(C[1]){case"X":a=C[2];break;case"Y":l=C[2];break;case"A":c=C[2];break;case"O":u=C[2];break;default:"C"===C[3]?f=C[4]:"C"===C[5]&&(f=C[6])}d[C[0]]=[a,l,c,u,f]}for(;d.length<o.length;)d.push([a,l,c,u,f]);for(var m=0,p=0;p<o.length;p++)"\n"==o[p]&&(d.splice(m,1),m--),m++;return d})(t),r=S(t),n=["offsetx","offsety","angle","opacity","color"],h="",o=["None","None","None","None","None"];return e.forEach((t,e)=>{var s,i;s=t,i=o,s.length===i.length&&s.every((t,e)=>t===i[e])||(o.forEach(t=>{"none"!==t.toLowerCase()&&(h+="[/sfdx]")}),t.forEach((t,e)=>{"none"!==t.toLowerCase()&&(h+="[sfdx="+n[e]+" "+((e,t)=>{let s=e.split(" "),i=s.shift();switch(void 0===s[0]&&s.push(4),void 0===s[1]&&s.push(300),void 0===s[2]&&s.push(90),i.toLowerCase()){case"wave":case"angle":return"wave("+s.join(",")+")";case"swing":case"angle2":return"swing("+s.join(",")+")";case"shake":return"shake("+s[0]+")"}if("color"!==t.toLowerCase())return e;{let t=a(e);return"colorToHex('"+t+"')"}})(t,n[e])+"]")}),o=t),h+=r[e]}),o.forEach(t=>{"none"!==t.toLowerCase()&&(h+="[/sfdx]")}),console.log(h),h})(t)}}}self.Ve.Oat.Aae.Hq={Nle(){return this.zae&&!this.qae},_le(){return!0},mle(){return!0},Fle(){return!0},ble(){return!0},Tle(){return!0}},self.Ve.Oat.Aae.Nrt={Ble(t,e,s){this.ale(t,e,s)},S3(t){this.text=t,this.sle=!0,this.Rle(),this.Ug=!0},kle(t){this.Cle=t.pRt(0).PRt.GetDataMap(),this.rle=t.pRt(0).LRt},$le(){this.qae=!0,this.n7(self.Ve.Oat.Aae.Hq.mle)},Wle(){this.qae=!1,this.n7(self.Ve.Oat.Aae.Hq.Fle)},Vle(t){this.Lle(t)},Hle(t){this.Wae=t,this.Vae=this.Hae(this.Wae)},Ule(t){this.Gle(0===t)},Xle(t){this.Ale(t)},jle(t){this.Uae=t}},self.Ve.Oat.Aae.Frt={Yle(){return this.Jae},qle(){return this.Uae},zle(){return this.Wae},Jle(){let e;if(self.Ve.Xq.Spritefont2&&this.xs.GRt.Xyt instanceof self.Ve.Xq.Spritefont2)if(this.zae){let t=this.xs.PRt.d3;this.xs.PRt.TEt(self.Ve.Xq.Spritefont2.Nrt.S3,this.Xae),e=this.xs.PRt.yEt(self.Ve.Xq.Spritefont2.Frt.PWt),this.xs.PRt.TEt(self.Ve.Xq.Spritefont2.Nrt.S3,t)}else e=this.xs.PRt.yEt(self.Ve.Xq.Spritefont2.Frt.PWt);else if(self.Ve.Xq.Text&&this.xs.GRt.Xyt instanceof self.Ve.Xq.Text)if(this.zae){let t=this.xs.PRt.d3;this.xs.PRt.TEt(self.Ve.Xq.Text.Nrt.S3,this.Xae),e=this.xs.PRt.yEt(self.Ve.Xq.Text.Frt.PWt),this.xs.PRt.TEt(self.Ve.Xq.Text.Nrt.S3,t)}else e=this.xs.PRt.yEt(self.Ve.Xq.Text.Frt.PWt);return e},Kle(){let e;if(self.Ve.Xq.Spritefont2&&this.xs.GRt.Xyt instanceof self.Ve.Xq.Spritefont2)if(this.zae){let t=this.xs.PRt.d3;this.xs.PRt.TEt(self.Ve.Xq.Spritefont2.Nrt.S3,this.jae),e=this.xs.PRt.yEt(self.Ve.Xq.Spritefont2.Frt.vWt),this.xs.PRt.TEt(self.Ve.Xq.Spritefont2.Nrt.S3,t)}else e=this.xs.PRt.yEt(self.Ve.Xq.Spritefont2.Frt.vWt);else if(self.Ve.Xq.Text&&this.xs.GRt.Xyt instanceof self.Ve.Xq.Text)if(this.zae){let t=this.xs.PRt.d3;this.xs.PRt.TEt(self.Ve.Xq.Text.Nrt.S3,this.jae),e=this.xs.PRt.yEt(self.Ve.Xq.Text.Frt.vWt),this.xs.PRt.TEt(self.Ve.Xq.Text.Nrt.S3,t)}else e=this.xs.PRt.yEt(self.Ve.Xq.Text.Frt.vWt);return e},Sle(){return this.Sle},Zle(t){return this.Dle(t)}};{const C33=self.Ve;C33.Oat.Qle=class PinBehavior extends C33.oIt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Oat.Qle.IMt=class PinType extends C33.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve;C33.Oat.Qle.Instance=class PinInstance extends C33.pIt{constructor(t,e){super(t),this.tce=null,this.ece=-1,this.sce="",this.ice=new Set,this.rce=0,this.nce=0,this.hce=0,this.Sne=0,this.gne=0,this.oce=0,this.ace=0,this.lce=0,this.cce=0,this.yse=0,this.Xoe=!1,e&&(this.Xoe=e[0]);const s=this.f3.q3();this.Of=new C33.Rf(C33.Tf.Mf(s,"instancedestroy",t=>this.zqt(t.CB)),C33.Tf.Mf(s,"afterload",t=>this.EJ()))}Sn(){this.tce=null,super.Sn()}uce(t){t?(this.tce=t,this.mEt()):(this.tce=null,this.Qyt())}fce(t,e,s){if(t){const i=t.xgt(this.xs);if(i){this.sce=e,this.uce(i);const r=this.xs.W5(),n=i.W5();if("properties"===this.sce){const h=this.ice;h.clear();for(const o of s)h.add(o);this.Sne=r.b_()-n.b_(),this.gne=r.P_()-n.P_(),this.lce=r.GetAngle()-n.GetAngle(),this.yse=r.GetAngle(),this.cce=r.x_()-n.x_(),h.has("x")&&h.has("y")&&(this.nce=C33.bn(n.b_(),n.P_(),r.b_(),r.P_())-n.GetAngle(),this.rce=C33.Rn(n.b_(),n.P_(),r.b_(),r.P_())),h.has("width-abs")?this.oce=r.dC()-n.dC():h.has("width-scale")&&(this.oce=r.dC()/n.dC()),h.has("height-abs")?this.ace=r.IC()-n.IC():h.has("height-scale")&&(this.ace=r.IC()/n.IC())}else this.rce=C33.Rn(n.b_(),n.P_(),r.b_(),r.P_())}}}V_(){const t=this.ice,e=this.sce,s={uid:this.tce&&!this.tce.k8()?this.tce.NF():-1,m:e,d:this.Xoe};return"rope"===e||"bar"===e?s.pd=this.rce:"properties"===e&&(s.ps=[...this.ice],t.has("imagepoint")?s.ip=this.hce:t.has("x")&&t.has("y")?(s.pa=this.nce,s.pd=this.rce):(t.has("x")&&(s.dx=this.Sne),t.has("y")&&(s.dy=this.gne)),t.has("angle")&&(s.da=this.lce,s.lka=this.yse),(t.has("width-abs")||t.has("width-scale"))&&(s.dw=this.oce),(t.has("height-abs")||t.has("height-scale"))&&(s.dh=this.ace),t.has("z"))&&(s.dz=this.cce),s}H_(t){const e=t.m,s=this.ice;if(s.clear(),this.ece=t.uid,"number"==typeof e)this.dce(t);else if(this.sce=e,t.hasOwnProperty("d")&&(this.Xoe=!!t.d),"rope"===e||"bar"===e)this.rce=t.pd;else if("properties"===e){for(const i of t.ps)s.add(i);s.has("imagepoint")?this.hce=t.ip:s.has("x")&&s.has("y")?(this.nce=t.pa,this.rce=t.pd):(s.has("x")&&(this.Sne=t.dx),s.has("y")&&(this.gne=t.dy)),s.has("angle")&&(this.lce=t.da,this.yse=t.lka||0),(s.has("width-abs")||s.has("width-scale"))&&(this.oce=t.dw),(s.has("height-abs")||s.has("height-scale"))&&(this.ace=t.dh),s.has("z")&&(this.cce=t.dz)}}dce(t){const e=this.ice,s=t.msa,i=t.tsa,r=t.pa,n=t.pd,h=t.m;switch(h){case 0:this.sce="properties",e.add("x").add("y").add("angle"),this.nce=r,this.rce=n,this.lce=s-i,this.yse=t.lka;break;case 1:this.sce="properties",e.add("x").add("y"),this.nce=r,this.rce=n;break;case 2:this.sce="properties",e.add("angle"),this.lce=s-i,this.yse=t.lka;break;case 3:this.sce="rope",this.rce=t.pd;break;case 4:this.sce="bar",this.rce=t.pd}}EJ(){-1===this.ece?this.uce(null):(this.uce(this.f3.D5(this.ece)),this.ece=-1)}zqt(t){this.tce===t&&(this.uce(null),this.Xoe)&&this.f3.OF(this.xs)}dEt(){const n=this.tce;if(n&&!n.k8()){let s=n.W5(),t=this.xs,i=t.W5(),e=this.sce,r=!1;if("rope"===e||"bar"===e){const h=C33.Rn(i.b_(),i.P_(),s.b_(),s.P_());if(h>this.rce||"bar"===e&&h<this.rce){const o=C33.bn(s.b_(),s.P_(),i.b_(),i.P_());i.D7(s.b_()+Math.cos(o)*this.rce,s.P_()+Math.sin(o)*this.rce),r=!0}}else{let t=this.ice,e=0;if(t.has("imagepoint")){const[a,l]=n.Ogt(this.hce);i.bgt(a,l)||(i.D7(a,l),r=!0)}else if(t.has("x")&&t.has("y")){const c=s.b_()+Math.cos(s.GetAngle()+this.nce)*this.rce,u=s.P_()+Math.sin(s.GetAngle()+this.nce)*this.rce;i.bgt(c,u)||(i.D7(c,u),r=!0)}else e=s.b_()+this.Sne,t.has("x")&&e!==i.b_()&&(i.O_(e),r=!0),e=s.P_()+this.gne,t.has("y")&&e!==i.P_()&&(i.v_(e),r=!0);t.has("angle")&&(this.yse!==i.GetAngle()&&(this.lce=C33.In(this.lce+(i.GetAngle()-this.yse))),(e=C33.In(s.GetAngle()+this.lce))!==i.GetAngle()&&(i.zD(e),r=!0),this.yse=i.GetAngle()),t.has("width-abs")&&(e=s.dC()+this.oce)!==i.dC()&&(i.TC(e),r=!0),t.has("width-scale")&&(e=s.dC()*this.oce)!==i.dC()&&(i.TC(e),r=!0),t.has("height-abs")&&(e=s.IC()+this.ace)!==i.IC()&&(i.pC(e),r=!0),t.has("height-scale")&&(e=s.IC()*this.ace)!==i.IC()&&(i.pC(e),r=!0),t.has("z")&&(e=s.x_()+this.cce)!==i.x_()&&(i.L_(e),this.f3.q5())}r&&i.L7()}}gEt(){const t="behaviors.pin.debugger";return[{title:"$"+this.pB().i3(),properties:[{name:t+".is-pinned",value:!!this.tce},{name:t+".pinned-uid",value:this.tce?this.tce.NF():0}]}]}}}{const C33=self.Ve;C33.Oat.Qle.Hq={pce(){return!!this.tce},Cce(){return this.Xoe}}}{const C33=self.Ve;C33.Oat.Qle.Nrt={mce(t,e){this.fce(t,0===e?"rope":"bar")},Sce(t,e,s,i,r,n,h){const o=[];e&&o.push("x"),s&&o.push("y"),i&&o.push("angle"),h&&o.push("z"),1===r?o.push("width-abs"):2===r&&o.push("width-scale"),1===n?o.push("height-abs"):2===n&&o.push("height-scale"),0!==o.length&&this.fce(t,"properties",o)},gce(t,e,s,i,r,n){const h=["imagepoint"];s&&h.push("angle"),n&&h.push("z"),1===i?h.push("width-abs"):2===i&&h.push("width-scale"),1===r?h.push("height-abs"):2===r&&h.push("height-scale"),this.hce=e,this.fce(t,"properties",h)},_ce(t){"rope"!==this.sce&&"bar"!==this.sce||(this.rce=Math.max(t,0))},Tce(t){this.Xoe=t},yce(){this.uce(null),this.sce="",this.ice.clear(),this.hce=""},Qle(t,e){switch(e){case 0:this.fce(t,"properties",["x","y","angle"]);break;case 1:this.fce(t,"properties",["x","y"]);break;case 2:this.fce(t,"properties",["angle"]);break;case 3:this.fce(t,"rope");break;case 4:this.fce(t,"bar")}}}}{const C33=self.Ve;C33.Oat.Qle.Frt={Ece(){return this.tce?this.tce.NF():-1}}}{const C33=self.Ve;C33.Oat.Ice=class SinBehavior extends C33.oIt{constructor(t){super(t)}Sn(){super.Sn()}}}{const C33=self.Ve;C33.Oat.Ice.IMt=class SinType extends C33.fIt{constructor(t){super(t)}Sn(){super.Sn()}Oyt(){}}}{const C33=self.Ve,C3X=self.Qe,IBehaviorInstance=self.lB,MOVEMENT=0,WAVE=1,PERIOD=2,PERIOD_RANDOM=3,PERIOD_OFFSET=4,PERIOD_OFFSET_RANDOM=5,MAGNITUDE=6,MAGNITUDE_RANDOM=7,ENABLE=8,HORIZONTAL=0,VERTICAL=1,SIZE=2,WIDTH=3,HEIGHT=4,ANGLE=5,OPACITY=6,VALUE=7,FORWARDS_BACKWARDS=8,ZELEVATION=9,SINE=0,TRIANGLE=1,SAWTOOTH=2,REVERSE_SAWTOOTH=3,SQUARE=4,_2pi=2*Math.PI,_pi_2=Math.PI/2,_3pi_2=3*Math.PI/2,MOVEMENT_LOOKUP=[0,1,8,3,4,2,5,6,9,7],map=(C33.Oat.Ice.Instance=class SinInstance extends C33.pIt{constructor(t,e){super(t),this.Ace=0,this.Mce=0,this.Rce=0,this.wce=0,this.bce=0,this.hmt=!0,this.Oce=0,this.Gce=0,this.Pce=0,this.vce=0,this.xce=0,this.Lce=0,this.Pmt=0,this.Dce=0,this.Nce=0,this.Fce=0,this.Bce=0,e&&(this.Mce=MOVEMENT_LOOKUP[e[MOVEMENT]],this.Rce=e[WAVE],this.vce=this.f3.m5()*e[PERIOD_RANDOM],this.Oce=e[PERIOD],this.wce=e[PERIOD],this.wce+=this.vce,this.Gce=e[PERIOD_OFFSET],0!==this.wce&&(this.xce=this.f3.m5()*e[PERIOD_OFFSET_RANDOM],this.Ace=e[PERIOD_OFFSET]/this.wce*_2pi,this.Ace+=this.xce/this.wce*_2pi),this.Lce=this.f3.m5()*e[MAGNITUDE_RANDOM],this.Pce=e[MAGNITUDE],this.bce=e[MAGNITUDE],this.bce+=this.Lce,this.hmt=!!e[ENABLE]),this.Mce===ANGLE&&(this.bce=C33.An(this.bce)),this.URt(),this.hmt&&this.pEt()}Sn(){super.Sn()}V_(){return{i:this.Ace,e:this.hmt,mv:this.Mce,w:this.Rce,p:this.wce,mag:this.bce,iv:this.Pmt,iv2:this.Dce,r:this.Bce,lkv:this.Nce,lkv2:this.Fce}}H_(t){this.Ace=t.i,this.jgt(t.e),this.Mce=t.mv,this.Rce=t.w,this.wce=t.p,this.bce=t.mag,this.Pmt=t.iv,this.Dce=t.iv2,this.Bce=t.r,this.Nce=t.lkv,this.Fce=t.lkv2}URt(){const t=this.xs.W5();switch(this.Mce){case HORIZONTAL:this.Pmt=t.b_();break;case VERTICAL:this.Pmt=t.P_();break;case SIZE:this.Pmt=t.dC(),this.Bce=t.IC()/t.dC();break;case WIDTH:this.Pmt=t.dC();break;case HEIGHT:this.Pmt=t.IC();break;case ANGLE:this.Pmt=t.GetAngle();break;case OPACITY:this.Pmt=t.$O();break;case VALUE:this.Pmt=0;break;case FORWARDS_BACKWARDS:this.Pmt=t.b_(),this.Dce=t.P_();break;case ZELEVATION:this.Pmt=t.x_()}this.Nce=this.Pmt,this.Fce=this.Dce}kce(t){switch(t%=_2pi,this.Rce){case SINE:return Math.sin(t);case TRIANGLE:return t<=_pi_2?t/_pi_2:t<=_3pi_2?1-2*(t-_pi_2)/Math.PI:(t-_3pi_2)/_pi_2-1;case SAWTOOTH:return 2*t/_2pi-1;case REVERSE_SAWTOOTH:return-2*t/_2pi+1;case SQUARE:return t<Math.PI?-1:1}return 0}gK(){const t=this.f3.jx(this.xs);this.hmt&&0!==t&&(0===this.wce?this.Ace=0:this.Ace=(this.Ace+t/this.wce*_2pi)%_2pi,this.$ce())}$ce(){const t=this.xs.W5();switch(this.Mce){case HORIZONTAL:t.b_()!==this.Nce&&(this.Pmt+=t.b_()-this.Nce),t.O_(this.Pmt+this.kce(this.Ace)*this.bce),this.Nce=t.b_();break;case VERTICAL:t.P_()!==this.Nce&&(this.Pmt+=t.P_()-this.Nce),t.v_(this.Pmt+this.kce(this.Ace)*this.bce),this.Nce=t.P_();break;case SIZE:t.TC(this.Pmt+this.kce(this.Ace)*this.bce),t.pC(t.dC()*this.Bce);break;case WIDTH:t.TC(this.Pmt+this.kce(this.Ace)*this.bce);break;case HEIGHT:t.pC(this.Pmt+this.kce(this.Ace)*this.bce);break;case ANGLE:t.GetAngle()!==this.Nce&&(this.Pmt=C33.In(this.Pmt+(t.GetAngle()-this.Nce))),t.zD(this.Pmt+this.kce(this.Ace)*this.bce),this.Nce=t.GetAngle();break;case OPACITY:t.VO(this.Pmt+this.kce(this.Ace)*this.bce/100);break;case FORWARDS_BACKWARDS:t.b_()!==this.Nce&&(this.Pmt+=t.b_()-this.Nce),t.P_()!==this.Fce&&(this.Dce+=t.P_()-this.Fce),t.O_(this.Pmt+Math.cos(t.GetAngle())*this.kce(this.Ace)*this.bce),t.v_(this.Dce+Math.sin(t.GetAngle())*this.kce(this.Ace)*this.bce),this.Nce=t.b_(),this.Fce=t.P_();break;case ZELEVATION:t.L_(this.Pmt+this.kce(this.Ace)*this.bce)}t.L7()}Wce(t,e){}Vce(t){this.wce=t}Hce(){return this.wce}Uce(t){this.bce=t}Xce(t){5===this.Mce&&(t=C33.An(t)),this.Uce(t)}jce(){return this.bce}Yce(){let t=this.jce();return t=5===this.Mce?C33.Mn(t):t}qce(t){5===this.Mce&&5!==t&&(this.bce=C33.Mn(this.bce)),this.Mce=t,this.URt()}zce(){return this.Mce}Jce(t){this.Rce=t}Kce(){return this.Rce}Zce(t){this.Ace=C33.En(t,0,2*Math.PI),this.$ce()}Qce(){return this.Ace}jgt(t){this.hmt=!!t,this.hmt?this.pEt():this.Zyt()}Ygt(){return this.hmt}Tnt(t){switch(t){case MOVEMENT:return this.Mce;case WAVE:return this.Rce;case PERIOD:return this.Oce;case MAGNITUDE:return this.Pce;case ENABLE:return this.hmt}}Rnt(t,e){switch(t){case MOVEMENT:this.Mce=MOVEMENT_LOOKUP[e],this.URt();break;case WAVE:this.Rce=e;break;case PERIOD:this.Oce=e,this.wce=this.Oce+this.vce,this.hmt||(0!==this.wce?(this.Ace=this.Gce/this.wce*_2pi,this.Ace+=this.xce/this.wce*_2pi):this.Ace=0);break;case MAGNITUDE:this.Pce=e,this.bce=this.Pce+this.Lce,this.Mce===ANGLE&&(this.bce=C33.An(this.bce));break;case ENABLE:this.hmt=!!e}}gEt(){const t="behaviors.sin";return[{title:"$"+this.pB().i3(),properties:[{name:t+".properties.enabled.name",value:this.Ygt(),Y8t:t=>this.jgt(t)},{name:t+".properties.period.name",value:this.Hce(),Y8t:t=>this.Vce(t)},{name:t+".properties.magnitude.name",value:this.Yce(),Y8t:t=>this.Xce(t)},{name:t+".debugger.value",value:this.kce(this.Qce())*this.Yce()}]}]}Gyt(){return self.tue}},new WeakMap),VALID_MOVEMENTS=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],VALID_WAVES=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.tue=class ISineBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.RF().rB())}set eue(t){C3X.Ii(t),map.get(this).Vce(t)}get eue(){return map.get(this).Hce()}set sue(t){C3X.Ii(t),map.get(this).Uce(t)}get sue(){return map.get(this).jce()}set iue(t){map.get(this).Zce(t)}get iue(){return map.get(this).Qce()}set rue(t){C3X.wi(t);const e=VALID_MOVEMENTS.indexOf(t);if(-1===e)throw new Error("invalid movement");map.get(this).qce(e)}get rue(){return VALID_MOVEMENTS[map.get(this).zce()]}set nue(t){C3X.wi(t);const e=VALID_WAVES.indexOf(t);if(-1===e)throw new Error("invalid wave");map.get(this).Jce(e)}get nue(){return VALID_WAVES[map.get(this).Kce()]}get value(){const t=map.get(this);return t.kce(t.Qce())*t.jce()}hue(){map.get(this).URt()}set isEnabled(t){map.get(this).jgt(!!t)}get isEnabled(){return map.get(this).Ygt()}}}{const C33=self.Ve;C33.Oat.Ice.Hq={hu(){return this.Ygt()},oue(t){return this.zce()===t},aue(t,e){return C33.compare(this.Hce(),t,e)},lue(t,e){return C33.compare(this.Yce(),t,e)},uue(t){return this.Kce()===t}}}{const C33=self.Ve;C33.Oat.Ice.Nrt={dTt(t){this.jgt(0!==t)},fue(t){this.Vce(t)},due(t){this.Xce(t)},pue(t){this.qce(t)},Cue(t){this.Rce=t},mue(t){const e=2*Math.PI;this.Zce(t*e%e)},Sue(){this.URt()}}}{const C33=self.Ve;C33.Oat.Ice.Frt={gue(){return this.Qce()/(2*Math.PI)},_ue(){return this.Hce()},Tue(){return this.Yce()},She(){return this.kce(this.Qce())*this.Yce()}}}{let unaryminus2=function(t){return"number"==typeof t?-t:t},bothNumbers2=function(t,e){return"number"==typeof t&&"number"==typeof e},add2=function(t,e){return bothNumbers2(t,e)?t+e:t},subtract2=function(t,e){return bothNumbers2(t,e)?t-e:t},multiply2=function(t,e){return bothNumbers2(t,e)?t*e:t},divide2=function(t,e){return bothNumbers2(t,e)?t/e:t},mod2=function(t,e){return bothNumbers2(t,e)?t%e:t},pow2=function(t,e){return bothNumbers2(t,e)?Math.pow(t,e):t},and2=function(s,i){if("string"!=typeof s&&"string"!=typeof i)return s&&i?1:0;{let t,e;return t="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,e="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,t+e}},or2=function(t,e){return bothNumbers2(t,e)?t||e?1:0:t};unaryminus=unaryminus2,bothNumbers=bothNumbers2,add=add2,subtract=subtract2,multiply=multiply2,divide=divide2,mod=mod2,pow=pow2,and=and2,or=or2;const C33=self.Ve;self.y2t=[()=>4,t=>{const e=t.P2t(0).Kmt();return()=>e()},()=>"",()=>"",t=>{const e=t.P2t(0).T2t();return()=>e.ait()},()=>"___",()=>"_",()=>"1__",()=>"__",()=>"2__",()=>"___",()=>"3_",()=>"__",()=>"___",()=>"__",()=>"4_",()=>"___",()=>"5_",()=>"_5_",()=>"_",()=>"_",()=>"_",()=>"_",()=>"_",()=>"__",()=>0,()=>.06,()=>2,()=>-1,()=>1,()=>"    ",()=>"Choose your language! Before the beginning!",()=>" !  !",t=>{const e=t.P2t(0);return()=>e.i2t()},t=>{const e=t.P2t(0).T2t();return()=>and2(e.ait(),"$")},t=>{const e=t.P2t(0).T2t();return()=>and2(": ",e.ait())+"$"},t=>{const e=t.P2t(0).Kmt(),s=t.P2t(1).T2t(),i=t.P2t(2).T2t(),r=t.P2t(3).T2t();return()=>and2(e((s.ait()+i.ait()+r.ait())/3),"$/")},t=>{const e=t.P2t(0);return()=>e.C2t()},()=>"",t=>{const e=t.P2t(0).T2t(),s=t.P2t(1).T2t(),i=t.P2t(2).T2t(),r=t.P2t(3).T2t(),n=t.P2t(4).T2t();return()=>and2(and2(and2(and2(and2("  : ",e.ait())+" .\n   : ",s.ait())+"$\n  : ",Math.floor(i.ait()/1440))+" . ",Math.floor(r.ait()%1440/60))+" . ",n.ait()%60)+" ."},t=>{const e=t.P2t(0).T2t();return()=>250+e.ait()},t=>{const e=t.P2t(0).T2t();return()=>and2("Price: ",e.ait())+"$"},t=>{const e=t.P2t(0).Kmt(),s=t.P2t(1).T2t(),i=t.P2t(2).T2t(),r=t.P2t(3).T2t();return()=>and2(e((s.ait()+i.ait()+r.ait())/3),"$/sec")},()=>"Statistics",t=>{const e=t.P2t(0).T2t(),s=t.P2t(1).T2t(),i=t.P2t(2).T2t(),r=t.P2t(3).T2t(),n=t.P2t(4).T2t();return()=>and2(and2(and2(and2(and2(" Total crushed: ",e.ait())+" items\n Total amount of money: ",s.ait())+"$\n Playtime: ",Math.floor(i.ait()/1440))+" days ",Math.floor(r.ait()%1440/60))+" hours ",n.ait()%60)+" minutes"},()=>60,()=>" 2",()=>100,()=>.025,t=>{const e=t.P2t(0);return()=>e.C2t()-.25},()=>"2",()=>"1",()=>50,()=>70,()=>85,()=>90,()=>5,()=>"3",t=>{const e=t.P2t(0);return()=>e.C2t()+.5},()=>.002,()=>"",()=>"Animation 1",t=>{const e=t.P2t(0).T2t();return()=>-e.ait()},()=>.5,t=>{const e=t.P2t(0).T2t();return()=>1.5*e.ait()},()=>"",()=>"Animation 2",t=>{const e=t.P2t(0).T2t();return()=>2*e.ait()},()=>8,()=>.1,()=>" ",()=>.006,t=>{const e=t.P2t(0),s=t.P2t(1).T2t(),i=t.P2t(2).T2t();return()=>e.i2t()+(s.ait()+i.ait())},t=>{const e=t.P2t(0),s=t.P2t(1).T2t(),i=t.P2t(2).T2t();return()=>e.i2t()-(s.ait()+i.ait())},()=>-24,()=>.01,()=>275,t=>{const e=t.P2t(0),s=t.P2t(1).T2t(),i=t.P2t(2).T2t();return()=>e.i2t()+2*(s.ait()+i.ait())},t=>{const e=t.P2t(0),s=t.P2t(1).T2t(),i=t.P2t(2).T2t();return()=>e.i2t()-2*(s.ait()+i.ait())},t=>{const e=t.P2t(0),s=t.P2t(1).T2t(),i=t.P2t(2).T2t();return()=>e.i2t()+3*(s.ait()+i.ait())},t=>{const e=t.P2t(0),s=t.P2t(1).T2t(),i=t.P2t(2).T2t();return()=>e.i2t()-3*(s.ait()+i.ait())},()=>3,()=>.2,()=>2.8,()=>"",t=>{const e=t.P2t(0).T2t();return()=>1.5/e.ait()},()=>-39,()=>487,t=>{const e=t.P2t(0).T2t();return()=>2/e.ait()},t=>{const e=t.P2t(0).T2t();return()=>2.2/e.ait()},()=>-90,()=>537,t=>{const e=t.P2t(0).T2t();return()=>2.42/e.ait()},()=>6,()=>-37,()=>.4,()=>-40,t=>{const e=t.P2t(0).T2t();return()=>4/e.ait()},()=>20,()=>66,t=>{const e=t.P2t(0).T2t();return()=>3.5/e.ait()},()=>22,t=>{const e=t.P2t(0).Kmt(),s=t.P2t(1);return()=>e(0,s.i2t())},t=>{const e=t.P2t(0).Kmt(),s=t.P2t(1).T2t();return()=>e(0,s.ait())},t=>{const e=t.P2t(0),s=t.P2t(1).T2t();return()=>e.i2t()-(3+s.ait())},t=>{const e=t.P2t(0),s=t.P2t(1).T2t();return()=>e.i2t()-(5+s.ait())},()=>34,t=>{const e=t.P2t(0).T2t();return()=>2+e.ait()},t=>{const e=t.P2t(0).T2t();return()=>5+e.ait()},()=>40,t=>{const e=t.P2t(0).T2t();return()=>8+e.ait()},t=>{const e=t.P2t(0);return()=>e.C2t()+.1},()=>.005,()=>"",()=>"",t=>{const e=t.P2t(0).T2t();return()=>and2(" ",e.ait())},t=>{const e=t.P2t(0).T2t();return()=>and2("Break ",e.ait())},()=>" !",()=>"pen the chest!",()=>10,()=>" ",()=>" 1",()=>661,()=>44,()=>706,()=>-19,()=>750,()=>25,()=>784,()=>230.791135,()=>663.3039,()=>172.841634,()=>714.539783,()=>176.454878,()=>750.264089,()=>168.555875,()=>375.548778,()=>668.270723,()=>330,()=>714,()=>328,()=>752,()=>319,()=>563,()=>685,()=>508,()=>693,()=>503,()=>736,()=>496,()=>707,()=>675,()=>658,()=>689,()=>643,()=>734,()=>644,()=>785,()=>" 2",()=>-67.8971,()=>673.537756,()=>-123.897109,()=>718.537756,()=>-186.897109,()=>762.537756,()=>-142.897109,()=>92.875648,()=>665.484373,()=>43.906652,()=>705.537756,()=>38.53939,()=>752.444563,()=>30.640388,()=>235.66851,()=>660.83321,()=>188.458154,()=>708.633685,()=>188.383172,()=>748.292379,()=>180.974068,()=>" ",()=>245.720645,()=>267.117658,()=>356.912833,()=>463.050441,()=>.3,()=>"__",()=>" ",()=>"",()=>"Consolas",()=>" !",()=>"",()=>" ",()=>" ",()=>" ",()=>27,()=>"",()=>13,()=>28,()=>"",()=>" ",()=>16,()=>26,()=>"",()=>": Kiril Donec\n : TabbyQ\n : Chup",()=>" ",()=>" ",()=>"Select Language",()=>"Select",()=>"Berlin Sans FB",()=>"Start playing!",()=>"Profit",()=>"Conveyor Speed",()=>"Press Speed",()=>"Press Damage",()=>"Settings",()=>"Sound",()=>"Show taps",()=>37,()=>15,()=>"Music",()=>"Programmer: Kiril Donec\nMusical support: TabbyQ\nGraphic editor: Chup",()=>"About Game",()=>"Generation Speed",()=>"____",()=>.6,()=>"",()=>"",()=>" ",()=>"",()=>"",()=>200,()=>-200,()=>.02,()=>30,()=>35,()=>45,()=>55,()=>65,()=>75,()=>80,()=>95,t=>{const e=t.P2t(0).Kmt();return()=>78+2*e("",0)},t=>{const e=t.P2t(0).Kmt();return()=>e("")},()=>" ",()=>" ",()=>" ",()=>.05,()=>" 2",()=>" 3",()=>" 1",()=>" ",()=>427,()=>304,()=>"",()=>150,t=>{const e=t.P2t(0);return()=>e.C2t()+5},()=>"Loading is complete!",()=>.001,t=>{const e=t.P2t(0).Kmt(),s=t.P2t(1);return()=>and2(e(.5*s.C2t()),"%")},()=>"ca-app-pub-9375861538823966/6313379132",()=>242,()=>-120,()=>-146,()=>425,()=>632,()=>426,()=>238,()=>1010,()=>69,()=>911,()=>-93,()=>235,()=>140,()=>245,()=>654,()=>76,()=>746,()=>250,()=>234,()=>1200,()=>-284.254688,()=>175.073364,()=>589.442984,()=>94.775654,()=>-320.518077,()=>107.117899,()=>260,()=>42,()=>440,()=>43.217899,()=>387.449167,()=>128.274623,()=>-7.696858,()=>109.581043,()=>"ca-app-pub-9375861538823966/6640500083",()=>-148.488414,()=>-148.85158,()=>37.150083,()=>-301,()=>593,()=>-297,()=>-335.789632,()=>112.044187,()=>"X2Add",()=>" 4",()=>95.581043,()=>19.5,()=>122,()=>300,()=>697,()=>741,()=>-223,()=>" ",()=>"",t=>{const e=t.P2t(0).T2t(),s=t.P2t(1).T2t(),i=t.P2t(2).T2t(),r=t.P2t(3).T2t(),n=t.P2t(4).T2t();return()=>and2(": "+(0<Math.floor(e.ait()/3600)?and2(Math.floor(s.ait()/3600)," . "):"")+(0<Math.floor(i.ait()%3600/60)?and2(Math.floor(r.ait()%3600/60)," . "):""),n.ait()%60)+" ."},()=>"  2  ",()=>"  2  \n( 5 )",()=>"Advertising bonuses",()=>"",t=>{const e=t.P2t(0).T2t(),s=t.P2t(1).T2t(),i=t.P2t(2).T2t(),r=t.P2t(3).T2t(),n=t.P2t(4).T2t();return()=>and2("Time left: "+(0<Math.floor(e.ait()/3600)?and2(Math.floor(s.ait()/3600)," hrs. "):"")+(0<Math.floor(i.ait()%3600/60)?and2(Math.floor(r.ait()%3600/60)," mins. "):""),n.ait()%60)+" secs."},()=>"Income is 2 times more",()=>"Income is 2 times more\n(for 5 minutes)",()=>212,()=>-250,()=>434,()=>247,()=>834,()=>239,()=>220.5,()=>436,()=>" ",()=>"Background Settings"]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self.Ve;self.FDt=function(){return[C32.Xq._rt,C32.Oat.mee,C32.Oat.fne,C32.Xq.Text,C32.Oat.xIt,C32.Oat.Qne,C32.Xq.Touch,C32.Oat.ghe,C32.Oat.Woe,C32.Oat.Eae,C32.Xq.xHt,C32.Oat.Aae,C32.Xq.yUt,C32.Xq.kUt,C32.Xq.Audio,C32.Xq.gJt,C32.Xq.Es,C32.Xq.Keyboard,C32.Xq.kQt,C32.Oat.Qle,C32.Oat.Ice,C32.Xq.Uq.Hq.C7t,C32.Xq.Uq.Hq.y7t,C32.Xq.Uq.Frt.UBt,C32.Xq.xHt.Nrt.lUt,C32.Xq.Uq.Hq.I7t,C32.Xq.Uq.Hq.A7t,C32.Xq.Uq.Nrt.J7t,C32.Xq.Uq.Nrt.Z7t,C32.Xq.Uq.Nrt.K7t,C32.Xq.Uq.Hq.GCt,C32.Xq.Uq.Nrt.Nh,C32.Xq.Uq.Nrt.z7t,C32.Xq.Uq.Hq.jdt,C32.Xq.Uq.Hq.Vq,C32.Xq.Uq.Nrt.sBt,C32.Oat.Aae.Nrt.Xle,C32.Xq.Uq.Hq.d7t,C32.Xq._rt.Nrt.zD,C32.Xq._rt.Nrt.v_,C32.Xq._rt.Frt.d_t,C32.Xq.Text.Nrt.S3,C32.Xq.Uq.Frt.oBt,C32.Oat.Qne.Frt.She,C32.Oat.Qne.Nrt.lhe,C32.Oat.fne.Nrt.Vne,C32.Xq.Touch.Hq._Vt,C32.Oat.Qne.Nrt.Uit,C32.Xq._rt.Nrt.PN,C32.Xq._rt.Nrt.z8t,C32.Xq._rt.Nrt.q8t,C32.Xq.Touch.Hq.TVt,C32.Xq.Audio.Nrt.Play,C32.Xq._rt.Hq.CTt,C32.Xq._rt.Hq.pTt,C32.Xq._rt.Nrt.GTt,C32.Xq.Uq.Nrt.Q6t,C32.Xq.Uq.Nrt.s6t,C32.Xq._rt.Nrt.aw,C32.Xq._rt.Hq.bTt,C32.Xq.Uq.Frt.random,C32.Xq._rt.Frt.O$t,C32.Xq._rt.Nrt.pC,C32.Xq._rt.Frt.S_t,C32.Xq._rt.Nrt.TC,C32.Xq._rt.Frt.m_t,C32.Xq._rt.Hq.C_t,C32.Xq._rt.Nrt.g$t,C32.Xq.Uq.Hq.F7t,C32.Xq._rt.Nrt.a_t,C32.Xq._rt.Frt.f_t,C32.Oat.ghe.Nrt.Eoe,C32.Xq.Uq.Nrt.T6t,C32.Xq.Touch.Hq.BVt,C32.Xq.Text.Nrt.PN,C32.Xq.Text.Nrt.SWt,C32.Xq.Text.Nrt.DR,C32.Xq._rt.Hq.xN,C32.Xq.Uq.Nrt.A6t,C32.Xq.Touch.Hq.FVt,C32.Oat.Woe.Nrt.Cae,C32.Xq.Touch.Frt.f_t,C32.Xq.Touch.Frt.d_t,C32.Xq._rt.Nrt.J8t,C32.Xq._rt.Hq.u$t,C32.Xq.Audio.Nrt.fk,C32.Xq.Uq.Nrt.M6t,C32.Xq.xHt.Nrt.pUt,C32.Xq.Uq.Nrt.Ydt,C32.Xq.xHt.Hq.ZHt,C32.Xq.Uq.Nrt.e6t,C32.Xq.Uq.Nrt.eBt,C32.Oat.Eae.Nrt.Vne,C32.Xq.Uq.Hq.W7t,C32.Xq._rt.Nrt.VO,C32.Xq.gJt.Hq.jJt,C32.Xq.gJt.Nrt.cKt,C32.Xq.Audio.Hq.yzt,C32.Xq.Audio.Nrt.Nzt,C32.Xq.Audio.Frt.dJt,C32.Xq.Audio.Frt.$rt,C32.Xq.Es.Hq.UKt,C32.Xq.Es.Nrt.mZt,C32.Xq.Keyboard.Hq.bQt,C32.Oat.Eae.Nrt.dTt,C32.Xq.xHt.Hq.nUt,C32.Xq.Uq.Hq.Y7t,C32.Xq.kQt.Nrt.Xte,C32.Xq.kQt.Nrt.jte,C32.Xq.Text.Nrt.a_t,C32.Oat.Woe.Nrt.pae,C32.Xq.xHt.Hq.tUt,C32.Xq.xHt.Nrt.dUt,C32.Xq.xHt.Nrt.uUt,C32.Xq.xHt.Hq.qHt,C32.Xq.xHt.Frt.SUt,C32.Oat.Woe.Hq.Qoe,C32.Xq.kQt.Nrt.Zte,C32.Xq.kQt.Hq.$te,C32.Xq.kQt.Nrt.Qte,C32.Xq.kQt.Hq.Ite,C32.Xq.kQt.Hq.bte,C32.Xq.kQt.Hq.gte,C32.Oat.ghe.Hq.Khe,C32.Xq._rt.Hq.i_t,C32.Oat.Qle.Nrt.Sce]},self.tNt=[{yue:0},{Eue:0},{Iue:0},{Aue:0},{Mue:0},{Rue:0},{wue:0},{bue:0},{Oue:0},{Gue:0},{Pue:0},{vue:0},{xue:0},{Lue:0},{Due:0},{Nue:0},{Fue:0},{Bue:0},{kue:0},{$ue:0},{Wue:0},{Vue:0},{Hue:0},{Uue:0},{Xue:0},{jue:0},{Yue:0},{que:0},{zue:0},{Jue:0},{Kue:0},{Zue:0},{Que:0},{t3e:0},{e3e:0},{s3e:0},{i3e:0},{r3e:0},{n3e:0},{h3e:0},{o3e:0},{a3e:0},{l3e:0},{c3e:0},{u3e:0},{f3e:0},{d3e:0},{p3e:0},{C3e:0},{m3e:0},{S3e:0},{g3e:0},{_3e:0},{T3e:0},{y3e:0},{E3e:0},{I3e:0},{A3e:0},{M3e:0},{R3e:0},{w3e:0},{b3e:0},{O3e:0},{G3e:0},{P3e:0},{v3e:0},{x3e:0},{L3e:0},{D3e:0},{N3e:0},{F3e:0},{B3e:0},{k3e:0},{$3e:0},{W3e:0},{V3e:0},{H3e:0},{U3e:0},{X3e:0},{j3e:0},{Y3e:0},{q3e:0},{z3e:0},{J3e:0},{K3e:0},{Z3e:0},{Q3e:0},{tfe:0},{efe:0},{sfe:0},{rfe:0},{nfe:0},{hfe:0},{ofe:0},{afe:0},{lfe:0},{cfe:0},{ufe:0},{ffe:0},{dfe:0},{pfe:0},{Cfe:0},{mfe:0},{Sfe:0},{gfe:0},{_fe:0},{Tfe:0},{yfe:0},{Efe:0},{Ife:0},{Afe:0},{Mfe:0},{Rfe:0},{wfe:0},{bfe:0},{Ofe:0},{Gfe:0},{Pfe:0},{vfe:0},{xfe:0},{Lfe:0},{Dfe:0},{Nfe:0},{Ffe:0},{Bfe:0},{kfe:0},{$fe:0},{Wfe:0},{Vfe:0},{Hfe:0},{Ufe:0},{Xfe:0},{jfe:0},{Yfe:0},{qfe:0},{zfe:0},{Jfe:0},{Kfe:0},{Zfe:0},{Qfe:0},{t0e:0},{e0e:0},{s0e:0},{i0e:0},{r0e:0},{n0e:0},{h0e:0},{o0e:0},{a0e:0},{l0e:0},{c0e:0},{u0e:0},{f0e:0},{d0e:0},{p0e:0},{C0e:0},{m0e:0},{S0e:0},{g0e:0},{_0e:0},{T0e:0},{y0e:0},{E0e:0},{I0e:0},{A0e:0},{M0e:0},{R0e:0},{w0e:0},{b0e:0},{O0e:0},{G0e:0},{xTt:0},{P0e:0},{v0e:0},{x0e:0},{L0e:0},{D0e:0},{N0e:0},{F0e:0},{B0e:0},{k0e:0},{$0e:0},{W0e:0},{V0e:0},{H0e:0},{U0e:0}],self.X0e={Eue:class extends self.Q8t{},Aue:class extends self.Q8t{},Mue:class extends self.Q8t{},Rue:class extends self.Q8t{},wue:class extends self.Q8t{},bue:class extends self.Q8t{},Oue:class extends self.Q8t{},Gue:class extends self.Z9t{},vue:class extends self.Q8t{},Lue:class extends self.Q8t{},Due:class extends self.yF{},Nue:class extends self.Z9t{},Fue:class extends self.Q8t{},Bue:class extends self.Q8t{},$ue:class extends self.Z9t{},Wue:class extends self.Z9t{},Vue:class extends self.Z9t{},Hue:class extends self.Z9t{},Xue:class extends self.Z9t{},jue:class extends self.Z9t{},Yue:class extends self.Q8t{},zue:class extends self.Q8t{},Jue:class extends self.Q8t{},Kue:class extends self.Z9t{},Zue:class extends self.Q8t{},Que:class extends self.Z9t{},t3e:class extends self.Q8t{},e3e:class extends self.Q8t{},s3e:class extends self.Q8t{},i3e:class extends self.Q8t{},r3e:class extends self.Q8t{},n3e:class extends self.Q8t{},h3e:class extends self.Q8t{},o3e:class extends self.Z9t{},a3e:class extends self.Z9t{},l3e:class extends self.Z9t{},c3e:class extends self.Q8t{},u3e:class extends self.Z9t{},f3e:class extends self.Z9t{},d3e:class extends self.Q8t{},p3e:class extends self.Q8t{},C3e:class extends self.Q8t{},m3e:class extends self.Q8t{},S3e:class extends self.Z9t{},g3e:class extends self.Z9t{},_3e:class extends self.Z9t{},T3e:class extends self.Z9t{},y3e:class extends self.yF{},E3e:class extends self.Q8t{},I3e:class extends self.Q8t{},M3e:class extends self.Z9t{},R3e:class extends self.xUt{},w3e:class extends self.Q8t{},b3e:class extends self.Z9t{},O3e:class extends self.ajt{},G3e:class extends self.ajt{},P3e:class extends self.Q8t{},v3e:class extends self.yF{},x3e:class extends self.Q8t{},L3e:class extends self.Q8t{},D3e:class extends self.Q8t{},N3e:class extends self.Q8t{},F3e:class extends self.Q8t{},B3e:class extends self.Q8t{},k3e:class extends self.Z9t{},$3e:class extends self.Q8t{},W3e:class extends self.Q8t{},V3e:class extends self.Z9t{},H3e:class extends self.Z9t{},U3e:class extends self.yF{},X3e:class extends self.Q8t{},j3e:class extends self.Q8t{},Y3e:class extends self.Z9t{},q3e:class extends self.Z9t{},z3e:class extends self.Q8t{},J3e:class extends self.Q8t{},K3e:class extends self.Z9t{},Z3e:class extends self.Z9t{},Q3e:class extends self.Z9t{},tfe:class extends self.Q8t{},efe:class extends self.yF{},sfe:class extends self.Q8t{},rfe:class extends self.Q8t{},nfe:class extends self.yF{},hfe:class extends self.yF{},ofe:class extends self.Q8t{},afe:class extends self.Q8t{},lfe:class extends self.Z9t{},cfe:class extends self.Q8t{},ufe:class extends self.Q8t{},dfe:class extends self.Z9t{},pfe:class extends self.Q8t{},Cfe:class extends self.Z9t{},mfe:class extends self.Q8t{},Sfe:class extends self.Q8t{},gfe:class extends self.Q8t{},_fe:class extends self.Q8t{},Tfe:class extends self.Q8t{},yfe:class extends self.Q8t{},Efe:class extends self.Q8t{},Mfe:class extends self.Q8t{},Rfe:class extends self.Q8t{},wfe:class extends self.Q8t{},bfe:class extends self.Q8t{},Ofe:class extends self.Q8t{},Gfe:class extends self.Q8t{},Pfe:class extends self.Q8t{},vfe:class extends self.Q8t{},xfe:class extends self.Q8t{},Lfe:class extends self.Q8t{},Dfe:class extends self.Q8t{},Nfe:class extends self.Q8t{},Ffe:class extends self.Z9t{},Bfe:class extends self.Q8t{},kfe:class extends self.Q8t{},$fe:class extends self.Z9t{},Wfe:class extends self.Z9t{},Vfe:class extends self.Z9t{},Hfe:class extends self.Q8t{},Ufe:class extends self.Z9t{},Xfe:class extends self.Z9t{},jfe:class extends self.Q8t{},Yfe:class extends self.Q8t{},qfe:class extends self.Z9t{},zfe:class extends self.Q8t{},Jfe:class extends self.Q8t{},Kfe:class extends self.Q8t{},Zfe:class extends self.Q8t{},Qfe:class extends self.Z9t{}};